{"version":3,"sources":["store/usersReducer.js","store/groupsReducer.js","store/mainReducer.js","lib/MuiTheme.js","components/Field.js","store/actions.js","pages/Login.js","pages/Page.js","components/Progress.js","pages/group/EnrollmentPopup.js","pages/group/ChooseButton.js","components/EnsureSecureLogin.js","pages/group/Evaluation.js","pages/group/GroupCard.js","pages/user/UserRow.js","pages/user/UserPage.js","pages/user/UserCard.js","pages/user/User.js","pages/group/PresenceTable.js","pages/group/Lesson.js","pages/user/UserList.js","components/PageLeaveWarning.js","pages/group/GroupData.js","components/NotificationBadge.js","components/SelectUser.js","pages/group/GroupPage.js","pages/group/Group.js","pages/CourseSelect.js","pages/DataPage.js","pages/Taxi.js","components/Header.js","components/NotificationBar.js","components/Menu.js","pages/Portfolio.js","pages/ControlPanel.js","App.js","lib/GlobalProvider.js","index.js"],"names":["DEFAULT_USERS","usersReducer","users","action","type","newUsers","x","user","id","userId","enrollmentIds","concat","groupId","index","indexOf","slice","DEFAULT_GROUPS","groups","newGroups","key","group","lessons","lessonId","userStatus","DEFAULT_STATE","enrollableGroups","currentPeriod","enrollmentPeriod","schoolYear","subjects","showMenu","notifications","hasFetched","mainReducer","state","role","secureLogin","notification","menuState","call","method","data","groupsReducer","theme","createMuiTheme","Field","props","onChange","event","target","value","error","menuItems","endAdornment","this","style","layout","label","disabled","multiline","fullWidth","options","disableUnderline","underline","margin","marginPx","classNames","typography","headline","color","palette","primary","main","title","text","secondary","contrastText","alignment","float","textAlign","push","area","default","editable","labelVisible","a","filter","opt","map","option","MenuItem","unit","InputAdornment","position","field","TextField","className","join","select","flex","InputProps","width","inputProps","td","nextProps","prevState","validate","rules","re","test","re2","isNaN","replace","min","parseFloat","max","notEmpty","maxLength","length","React","Component","apiErrorHandler","endpoint","dispatch","responseJSON","Math","random","priority","message","scope","fetchData","getState","forceArray","f","i","o","Promise","reject","Error","$","ajax","url","dataType","then","list","Array","isArray","keyBy","catch","getSubjects","getGroups","isUserMissingInfo","year","level","profile","preferedEmail","phoneNumber","testIE","window","navigator","userAgent","sticky","getSelf","addNotification","missing","addMissingInfoNotifications","removeNotification","location","pathname","setCookie","search","document","href","toggleMenu","getEnrolLments","enrollments","Object","keys","addSubject","name","description","addCourse","subjectId","addGroup","courseId","mainTeacherId","cname","cvalue","exhours","d","Date","setTime","getTime","expires","toUTCString","cookie","relogSecure","Login","generateEmail","bind","interval","setInterval","school","schoolShort","studentNumber","floor","setState","clearInterval","Typography","variant","fontFamily","overflow","light","fontWeight","dark","history","Paper","elevation","minHeight","padding","gutterBottom","generateColoredEmail","Button","size","onClick","login","withRouter","connect","email","password","Page","children","Progress","isShowing","timeout","setTimeout","clearTimeout","CircularProgress","EnrollmentPopup","getRemarkPage","remarks","Dialog","open","keepMounted","DialogTitle","DialogContent","DialogActions","preventPopupClose","page","fontSize","day","chosenDayGroupName","courseName","handlePopup","getCancelPage","hasChosenDay","getDuplicatePage","getConfirmPage","prevProps","hasChosen","ChooseButton","preventClose","doEnroll","toggleEnrollment","dialogOpen","getEnrollableGroups","dialog","loading","canChoose","period","ownProps","forEach","e","EnsureSecureLogin","active","marginTop","EVALUATION_FORMATS","getEvaluationColor","ev","assesment","Evaluation","evaluation","student","EvaluationTab","onSortChange","sortValue","sortDirection","handleSingleChange","newEv","newEvaluations","evaluations","handleChange","sortEvaluations","sort","b","cmp","displayName","newValue","alignItems","paddingRight","paddingLeft","display","evComps","component","explanation","backgroundColor","Tooltip","enterDelay","placement","TableSortLabel","direction","handleEvaluationTypeChange","GroupCard","hover","expand","onMouseEnter","onMouseLeave","Badge","invisible","badgeContent","maxHeight","cursor","subjectName","padStart","height","textTransform","enrollableFor","courseDescription","getBottomSection","number","numberWithoutCharacters","substr","match","exec","justifyContent","firstName","lastName","formatPhoneNumber","profiles","levels","UserPage","JSON","stringify","shouldFillIn","ownProfile","Divider","hasChanged","save","setUser","CARD_STYLE","verticalAlign","User","notExists","UserRow","actions","marginRight","UserCard","s","queryString","parse","setSecureLogin","from","beforeLoginPath","ca","decodeURIComponent","split","c","charAt","substring","getCookie","params","PresenceTable","createRow","participantId","content","lesson","p","presence","createPresenceComponent","status","createLessonHeader","numberInBlock","undefined","rows","participantIds","unshift","Lesson","marginBottom","mini","setPresenceUserStatus","courseGroupId","flexDirection","kind","subject","activities","getWeekdayString","date","getDay","getDate","getMonth","getFullYear","userIsMemberOfGroup","getOptOutButton","UserList","getHeader","headerTitle","sortIds","userIds","toLowerCase","toString","header","PageLeaveWarning","giveWarning","onbeforeunload","returnValue","when","GroupData","handleClickAway","anchorEl","showTeacherCard","currentTarget","top","right","zIndex","teacherName","studyTime","Popover","onClose","anchorOrigin","horizontal","vertical","teacherId","colorPrimary","colorSecondary","colorError","NotificationBadge","classes","tooltipMessage","j","withStyles","not","RegExp","err","SelectUser","selectUser","input","getFittingUsers","regExp","count","v","handleInput","myref","getAllUsers","ClickAwayListener","onClickAway","Popper","aliasId","disablePortal","getElementById","MenuList","GroupPage","acceptEnrollment","addParticipant","addNewParticipant","newParticipant","participatingRole","handleNewParticipantRoleChange","handleNewParticipantIdChange","handleExternalGroupChange","newGroup","handleLessonChange","handleEvaluationChange","handlePresenceChange","presenceObj","console","log","setEditable","cancel","setGroup","handleTab","newTab","tabs","openCertificate","currentTab","0","canAddNewParticipant","includes","cantAddReason","getData","getGroupEnrollments","getGroupLessons","getGroupParticipants","getGroupPresence","getGroupEvaluations","isCertificateWorthy","AppBar","Tabs","indicatorColor","textColor","centered","tab","Tab","getCurrentTab","values","Group","getGroup","participatingGroupIds","getCourse","getCourseGroup","oldCourse","newCourse","oldCourseGroup","newCourseGroup","oldLessons","newLessons","oldPresence","newPresence","oldEvaluations","changedPresenceObjs","changedEvaluations","parseInt","participants","CourseSelect","handleSortChange","handlePeriodChange","handleYearChange","leerjaar","ListItem","button","ListItemText","minWidth","subjectsComponents","getMenuItem","enrolledGroupsIds","enrolledGroups","getGroupsPerSubject","Toolbar","List","getMenuItems","blok","vak","splitValues","DataPage","handleShowData","tables","splitTable","tableSortColumns","handleFilterChange","tableIndex","table","column","order","tableSortDirections","columnIndex","splitValue","splitIndex","findIndex","halfSplitTable","downloadTables","workbook","Excel","Workbook","sheetName","sheet","addWorksheet","addRows","getColumn","filename","courseIds","toLocaleDateString","downloadWorkbook","fileName","xlsx","writeBuffer","base64","xls64","createElement","Blob","URL","createObjectURL","download","body","appendChild","click","removeChild","revokeObjectURL","forceCellWidth","cellName","Table","TableHead","TableRow","TableCell","TableBody","_","row","rowIndex","cell","IconButton","VerticalAlignBottom","Taxi","fetchSchedules","schedules","week","dangerouslySetInnerHTML","__html","n","Header","logoClick","aria-label","src","alt","handleClick","transform","NotificationBar","Snackbar","TransitionProps","SnackbarContent","background","bottom","Menu","pages","reload","logout","iconName","isCurrentPage","icon","ListItemIcon","getIcon","visiblePages","getItem","visibleProfile","Portfolio","compareFunction","orders","getOrder","splice","getParticipatingGroups","groupIds","orderGroups","ControlPanel","mapPageToListItem","pageName","handlePageChange","toUpperCase","getContent","courses","Alias","Subject","Course","course","App","startPage","getStartPage","path","to","GlobalProvider","store","require","compose","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","reduxCompose","createStore","reducer","applyMiddleware","thunk","ReactDOM","render"],"mappings":"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","file":"static/js/main.55c5b03a.chunk.js","sourcesContent":["const DEFAULT_USERS = {\n}\n\nfunction usersReducer(users = DEFAULT_USERS, action) {\n\tswitch (action.type) {\n\t\tcase \"CHANGE_USERS\":\n\t\t\tconst newUsers = users;\n\t\t\tfor (const x in action.users) {\n\t\t\t\tnewUsers[x] = { ...newUsers[x], ...action.users[x] }\n\t\t\t}\n\t\t\treturn newUsers;\n\t\tcase \"CHANGE_USER\":\n\t\t\treturn {\n\t\t\t\t...users,\n\t\t\t\t[action.user.id]: {\n\t\t\t\t\t...users[action.user.id],\n\t\t\t\t\t...action.user\n\t\t\t\t}\n\t\t\t};\n\t\tcase \"CHANGE_ENROLLMENTS\":\n\t\t\tif (action.action === \"ADD\") {\n\t\t\t\treturn {\n\t\t\t\t\t...users,\n\t\t\t\t\t[action.userId]: {\n\t\t\t\t\t\t...users[action.userId],\n\t\t\t\t\t\tenrollmentIds: (users[action.userId].enrollmentIds || []).concat(action.groupId)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (action.action === \"REMOVE\") {\n\t\t\t\tconst index = users[action.userId].enrollmentIds.indexOf(action.groupId);\n\t\t\t\treturn {\n\t\t\t\t\t...users,\n\t\t\t\t\t[action.userId]: {\n\t\t\t\t\t\t...users[action.userId],\n\t\t\t\t\t\tenrollmentIds: [\n\t\t\t\t\t\t\t...users[action.userId].enrollmentIds.slice(0, index),\n\t\t\t\t\t\t\t...users[action.userId].enrollmentIds.slice(index + 1),\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...users,\n\t\t\t\t[action.userId]: {\n\t\t\t\t\t...users[action.userId],\n\t\t\t\t\tenrollmentIds: action.enrollmentIds,\n\t\t\t\t}\n\t\t\t}\n\t\tdefault:\n\t\t\treturn users;\n\t}\n}\n\n\nexport default usersReducer;","const DEFAULT_GROUPS = {\n}\n\nfunction usersReducer(groups = DEFAULT_GROUPS, action) {\n\tswitch (action.type) {\n\t\tcase \"CHANGE_GROUPS\":\n\t\t\tlet newGroups = { ...groups };\n\t\t\tfor (const key in action.groups) {\n\t\t\t\tnewGroups[key] = { ...newGroups[key], ...action.groups[key] };\n\t\t\t}\n\t\t\treturn newGroups;\n\t\tcase \"CHANGE_GROUP\":\n\t\t\treturn {\n\t\t\t\t...groups,\n\t\t\t\t[action.group.id]: {\n\t\t\t\t\t...groups[action.group.id],\n\t\t\t\t\t...action.group\n\t\t\t\t}\n\t\t\t};\n\t\tcase \"CHANGE_PRESENCE_USER_STATUS\":\n\t\t\treturn {\n\t\t\t\t...groups,\n\t\t\t\t[action.groupId]: {\n\t\t\t\t\t...groups[action.groupId],\n\t\t\t\t\tlessons: {\n\t\t\t\t\t\t...groups[action.groupId].lessons,\n\t\t\t\t\t\t[action.lessonId]: {\n\t\t\t\t\t\t\t...groups[action.groupId].lessons[action.lessonId],\n\t\t\t\t\t\t\tuserStatus: action.userStatus,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\tdefault:\n\t\t\treturn groups;\n\t}\n}\n\n\nexport default usersReducer;","import usersReducer from \"./usersReducer\";\nimport groupsReducer from \"./groupsReducer\";\n\nconst DEFAULT_STATE = {\n  userId: null,\n  enrollableGroups: null,\n  currentPeriod: 2,\n  enrollmentPeriod: 3,\n  schoolYear: \"2019/2020\",\n  subjects: null,\n  groups: null,\n  users: null,\n  showMenu: true,\n  notifications: [],\n  hasFetched: []\n};\n\nfunction mainReducer(state = DEFAULT_STATE, action) {\n  switch (action.type) {\n    case \"SET_SELF\":\n      return {\n        ...state,\n        userId: action.user.id,\n        role: action.user.role,\n        notifications: [...state.notifications, ...action.user.notifications],\n        users: {\n          [action.user.id]: action.user,\n          ...state.users\n        }\n      };\n    case \"SET_SECURE_LOGIN\":\n      return {\n        ...state,\n        secureLogin: action.secureLogin\n      };\n    case \"ADD_NOTIFICATION\":\n      return {\n        ...state,\n        notifications: [...state.notifications, action.notification]\n      };\n    case \"REMOVE_NOTIFICATION\":\n      const index = state.notifications.indexOf(action.notification);\n      return {\n        ...state,\n        notifications: [\n          ...state.notifications.slice(0, index),\n          ...state.notifications.slice(index + 1)\n        ]\n      };\n    case \"TOGGLE_MENU\":\n      if (action.menuState != null) {\n        return { ...state, showMenu: action.menuState };\n      } else {\n        return { ...state, showMenu: !state.showMenu };\n      }\n    case \"HAS_FETCHED\":\n      return {\n        ...state,\n        hasFetched: [\n          ...state.hasFetched,\n          { call: action.call, method: action.method, data: action.data }\n        ]\n      };\n    case \"CHANGE_ENROLLABLE_GROUPS\":\n      return { ...state, enrollableGroups: action.enrollableGroups };\n    case \"CHANGE_SUBJECTS\":\n      return { ...state, subjects: { ...state.subjects, ...action.subjects } };\n    default:\n      return {\n        ...state,\n        users: usersReducer(state.users, action),\n        groups: groupsReducer(state.groups, action)\n      };\n  }\n}\n\nexport default mainReducer;\n","import { createMuiTheme } from '@material-ui/core/styles';\n\n// const theme = createMuiTheme({\n// \tpalette: {\n// \t\tprimary: {\n// \t\t\t// light: '#5472d3',\n// \t\t\tmain: '#0d47a1',\n// \t\t\t// dark: '#002171',\n// \t\t\tcontrastText: '#fff',\n// \t\t},\n// \t\tsecondary: {\n// \t\t\t// light: '#60ad5e',\n// \t\t\tmain: '#2e7d32',\n// \t\t\t// dark: '#005005',\n// \t\t\tcontrastText: '#ffffff',\n// \t\t},\n// \t},\n// });\n\nconst theme = createMuiTheme({\n\t\"breakpoints\": {\n\t\t\"keys\": [\n\t\t\t\"xs\",\n\t\t\t\"sm\",\n\t\t\t\"md\",\n\t\t\t\"lg\",\n\t\t\t\"xl\"\n\t\t],\n\t\t\"values\": {\n\t\t\t\"xs\": 0,\n\t\t\t\"sm\": 600,\n\t\t\t\"md\": 960,\n\t\t\t\"lg\": 1280,\n\t\t\t\"xl\": 1920\n\t\t}\n\t},\n\t\"direction\": \"ltr\",\n\t\"mixins\": {\n\t\t\"toolbar\": {\n\t\t\t\"minHeight\": 56,\n\t\t\t\"@media (min-width:0px) and (orientation: landscape)\": {\n\t\t\t\t\"minHeight\": 48\n\t\t\t},\n\t\t\t\"@media (min-width:600px)\": {\n\t\t\t\t\"minHeight\": 64\n\t\t\t}\n\t\t}\n\t},\n\t\"overrides\": {},\n\t\"palette\": {\n\t\t\"common\": {\n\t\t\t\"black\": \"#000\",\n\t\t\t\"white\": \"#fff\"\n\t\t},\n\t\t\"type\": \"light\",\n\t\t\"primary\": {\n\t\t\t\"main\": \"#08C8F9\",\n\t\t\t\"contrastText\": \"#fff\",\n\t\t\t\"light\": \"rgb(57, 211, 250)\",\n\t\t\t\"dark\": \"rgb(5, 140, 174)\"\n\t\t},\n\t\t// \"secondary\": {\n\t\t// \t\"main\": \"#C3386B\",\n\t\t// \t\"contrastText\": \"#ffffff\",\n\t\t// \t\"light\": \"rgb(207, 95, 136)\",\n\t\t// \t\"dark\": \"rgb(136, 39, 74)\"\n\t\t// },\n\t\t\"secondary\": {\n\t\t\t\"main\": \"#c4112f\",\n\t\t\t\"contrastText\": \"#fff\",\n\t\t\t\"light\": \"#cf4058\",\n\t\t\t\"dark\": \"#890b20\"\n\t\t},\n\t\t\"error\": {\n\t\t\t\"light\": \"#f89e4c\",\n\t\t\t\"main\": \"#f78620\",\n\t\t\t\"dark\": \"#ac5d16\",\n\t\t\t\"contrastText\": \"#fff\"\n\t\t},\n\t\t\"grey\": {\n\t\t\t\"50\": \"#fafafa\",\n\t\t\t\"100\": \"#f5f5f5\",\n\t\t\t\"200\": \"#eeeeee\",\n\t\t\t\"300\": \"#e0e0e0\",\n\t\t\t\"400\": \"#bdbdbd\",\n\t\t\t\"500\": \"#9e9e9e\",\n\t\t\t\"600\": \"#757575\",\n\t\t\t\"700\": \"#616161\",\n\t\t\t\"800\": \"#424242\",\n\t\t\t\"900\": \"#212121\",\n\t\t\t\"A100\": \"#d5d5d5\",\n\t\t\t\"A200\": \"#aaaaaa\",\n\t\t\t\"A400\": \"#303030\",\n\t\t\t\"A700\": \"#616161\"\n\t\t},\n\t\t\"contrastThreshold\": 3,\n\t\t\"tonalOffset\": 0.2,\n\t\t\"text\": {\n\t\t\t\"primary\": \"rgba(0, 0, 0, 0.87)\",\n\t\t\t\"secondary\": \"rgba(0, 0, 0, 0.54)\",\n\t\t\t\"disabled\": \"rgba(0, 0, 0, 0.38)\",\n\t\t\t\"hint\": \"rgba(0, 0, 0, 0.38)\"\n\t\t},\n\t\t\"divider\": \"rgba(0, 0, 0, 0.12)\",\n\t\t\"background\": {\n\t\t\t\"paper\": \"#fff\",\n\t\t\t\"default\": \"#fafafa\"\n\t\t},\n\t\t\"action\": {\n\t\t\t\"active\": \"rgba(0, 0, 0, 0.54)\",\n\t\t\t\"hover\": \"rgba(0, 0, 0, 0.08)\",\n\t\t\t\"hoverOpacity\": 0.08,\n\t\t\t\"selected\": \"rgba(0, 0, 0, 0.14)\",\n\t\t\t\"disabled\": \"rgba(0, 0, 0, 0.26)\",\n\t\t\t\"disabledBackground\": \"rgba(0, 0, 0, 0.12)\"\n\t\t}\n\t},\n\t\"props\": {},\n\t\"shadows\": [\n\t\t\"none\",\n\t\t\"0px 1px 3px 0px rgba(0, 0, 0, 0.2),0px 1px 1px 0px rgba(0, 0, 0, 0.14),0px 2px 1px -1px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 1px 5px 0px rgba(0, 0, 0, 0.2),0px 2px 2px 0px rgba(0, 0, 0, 0.14),0px 3px 1px -2px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 1px 8px 0px rgba(0, 0, 0, 0.2),0px 3px 4px 0px rgba(0, 0, 0, 0.14),0px 3px 3px -2px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 2px 4px -1px rgba(0, 0, 0, 0.2),0px 4px 5px 0px rgba(0, 0, 0, 0.14),0px 1px 10px 0px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 5px 8px 0px rgba(0, 0, 0, 0.14),0px 1px 14px 0px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 6px 10px 0px rgba(0, 0, 0, 0.14),0px 1px 18px 0px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 4px 5px -2px rgba(0, 0, 0, 0.2),0px 7px 10px 1px rgba(0, 0, 0, 0.14),0px 2px 16px 1px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 5px 6px -3px rgba(0, 0, 0, 0.2),0px 9px 12px 1px rgba(0, 0, 0, 0.14),0px 3px 16px 2px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 6px 6px -3px rgba(0, 0, 0, 0.2),0px 10px 14px 1px rgba(0, 0, 0, 0.14),0px 4px 18px 3px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 6px 7px -4px rgba(0, 0, 0, 0.2),0px 11px 15px 1px rgba(0, 0, 0, 0.14),0px 4px 20px 3px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 12px 17px 2px rgba(0, 0, 0, 0.14),0px 5px 22px 4px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 13px 19px 2px rgba(0, 0, 0, 0.14),0px 5px 24px 4px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 7px 9px -4px rgba(0, 0, 0, 0.2),0px 14px 21px 2px rgba(0, 0, 0, 0.14),0px 5px 26px 4px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 8px 9px -5px rgba(0, 0, 0, 0.2),0px 15px 22px 2px rgba(0, 0, 0, 0.14),0px 6px 28px 5px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 8px 10px -5px rgba(0, 0, 0, 0.2),0px 16px 24px 2px rgba(0, 0, 0, 0.14),0px 6px 30px 5px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 8px 11px -5px rgba(0, 0, 0, 0.2),0px 17px 26px 2px rgba(0, 0, 0, 0.14),0px 6px 32px 5px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 9px 11px -5px rgba(0, 0, 0, 0.2),0px 18px 28px 2px rgba(0, 0, 0, 0.14),0px 7px 34px 6px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 9px 12px -6px rgba(0, 0, 0, 0.2),0px 19px 29px 2px rgba(0, 0, 0, 0.14),0px 7px 36px 6px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 10px 13px -6px rgba(0, 0, 0, 0.2),0px 20px 31px 3px rgba(0, 0, 0, 0.14),0px 8px 38px 7px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 10px 13px -6px rgba(0, 0, 0, 0.2),0px 21px 33px 3px rgba(0, 0, 0, 0.14),0px 8px 40px 7px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 10px 14px -6px rgba(0, 0, 0, 0.2),0px 22px 35px 3px rgba(0, 0, 0, 0.14),0px 8px 42px 7px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 11px 14px -7px rgba(0, 0, 0, 0.2),0px 23px 36px 3px rgba(0, 0, 0, 0.14),0px 9px 44px 8px rgba(0, 0, 0, 0.12)\",\n\t\t\"0px 11px 15px -7px rgba(0, 0, 0, 0.2),0px 24px 38px 3px rgba(0, 0, 0, 0.14),0px 9px 46px 8px rgba(0, 0, 0, 0.12)\"\n\t],\n\t\"typography\": {\n\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\"fontSize\": 14,\n\t\t\"fontWeightLight\": 300,\n\t\t\"fontWeightRegular\": 400,\n\t\t\"fontWeightMedium\": 500,\n\t\t\"display4\": {\n\t\t\t\"fontSize\": \"7rem\",\n\t\t\t\"fontWeight\": 300,\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\t\"letterSpacing\": \"-.04em\",\n\t\t\t\"lineHeight\": \"1.14286em\",\n\t\t\t\"marginLeft\": \"-.04em\",\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\n\t\t},\n\t\t\"display3\": {\n\t\t\t\"fontSize\": \"3.5rem\",\n\t\t\t\"fontWeight\": 400,\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\t\"letterSpacing\": \"-.02em\",\n\t\t\t\"lineHeight\": \"1.30357em\",\n\t\t\t\"marginLeft\": \"-.02em\",\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\n\t\t},\n\t\t\"display2\": {\n\t\t\t\"fontSize\": \"2.8125rem\",\n\t\t\t\"fontWeight\": 400,\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\t\"lineHeight\": \"1.06667em\",\n\t\t\t\"marginLeft\": \"-.02em\",\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\n\t\t},\n\t\t\"display1\": {\n\t\t\t\"fontSize\": \"2.125rem\",\n\t\t\t\"fontWeight\": 400,\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\t\"lineHeight\": \"1.20588em\",\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\n\t\t},\n\t\t\"headline\": {\n\t\t\t\"fontSize\": \"1.5rem\",\n\t\t\t\"fontWeight\": 400,\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\t\"lineHeight\": \"1.35417em\",\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\n\t\t},\n\t\t\"title\": {\n\t\t\t\"fontSize\": \"1.3125rem\",\n\t\t\t\"fontWeight\": 500,\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\t\"lineHeight\": \"1.16667em\",\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\n\t\t},\n\t\t\"subheading\": {\n\t\t\t\"fontSize\": \"1rem\",\n\t\t\t\"fontWeight\": 400,\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\t\"lineHeight\": \"1.5em\",\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\n\t\t},\n\t\t\"body2\": {\n\t\t\t\"fontSize\": \"0.875rem\",\n\t\t\t\"fontWeight\": 500,\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\t\"lineHeight\": \"1.71429em\",\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\n\t\t},\n\t\t\"body1\": {\n\t\t\t\"fontSize\": \"0.875rem\",\n\t\t\t\"fontWeight\": 400,\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\t\"lineHeight\": \"1.46429em\",\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\n\t\t},\n\t\t\"caption\": {\n\t\t\t\"fontSize\": \"0.75rem\",\n\t\t\t\"fontWeight\": 400,\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\t\"lineHeight\": \"1.375em\",\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\n\t\t},\n\t\t\"button\": {\n\t\t\t\"fontSize\": \"0.875rem\",\n\t\t\t\"textTransform\": \"uppercase\",\n\t\t\t\"fontWeight\": 500,\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\n\t\t}\n\t},\n\t\"transitions\": {\n\t\t\"easing\": {\n\t\t\t\"easeInOut\": \"cubic-bezier(0.4, 0, 0.2, 1)\",\n\t\t\t\"easeOut\": \"cubic-bezier(0.0, 0, 0.2, 1)\",\n\t\t\t\"easeIn\": \"cubic-bezier(0.4, 0, 1, 1)\",\n\t\t\t\"sharp\": \"cubic-bezier(0.4, 0, 0.6, 1)\"\n\t\t},\n\t\t\"duration\": {\n\t\t\t\"shortest\": 150,\n\t\t\t\"shorter\": 200,\n\t\t\t\"short\": 250,\n\t\t\t\"standard\": 300,\n\t\t\t\"complex\": 375,\n\t\t\t\"enteringScreen\": 225,\n\t\t\t\"leavingScreen\": 195\n\t\t}\n\t},\n\t\"spacing\": 8,\n\t\"zIndex\": {\n\t\t\"mobileStepper\": 1000,\n\t\t\"appBar\": 1100,\n\t\t\"drawer\": 1200,\n\t\t\"modal\": 1300,\n\t\t\"snackbar\": 1400,\n\t\t\"tooltip\": 1500\n\t}\n});\n\nexport default theme;","import React from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport theme from \"../lib/MuiTheme\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport PropTypes from \"prop-types\";\n\nclass Field extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: false\n    };\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    return {\n      ...prevState,\n      error: nextProps.editable\n        ? !Field.validate(nextProps.value, nextProps.validate)\n        : false\n    };\n  }\n\n  static validate(value, rules = {}, options = [value]) {\n    switch (rules.type) {\n      case \"phoneNumber\":\n        const re = /(^\\+[0-9]{2}|^\\+[0-9]{2}\\(0\\)|^\\(\\+[0-9]{2}\\)\\(0\\)|^00[0-9]{2}|^0)([0-9]{9}$|[0-9\\-\\s]{10}$)/i;\n        if (!re.test(value)) {\n          return false;\n        }\n        break;\n      case \"email\":\n        const re2 = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/g;\n        if (!re2.test(value)) {\n          return false;\n        }\n        break;\n      case \"integer\":\n        if (!/^\\+?[1-9][\\d]*$/i.test(value)) {\n          return false;\n        }\n        break;\n      case \"float\":\n        if (isNaN(value)) {\n          return false;\n        }\n        break;\n      case \"decimalGrade\":\n        //replace dot with comma and vice versa\n        const x = value\n          .replace(/\\./g, \"_$comma$_\")\n          .replace(/,/g, \".\")\n          .replace(/_\\$comma\\$_/g, \",\");\n        if (x === \"ND\") {\n          return true;\n        }\n        if (isNaN(x)) {\n          return false;\n        }\n        break;\n      default:\n        break;\n    }\n    if (rules.min) {\n      if (parseFloat(value) < rules.min) {\n        return false;\n      }\n    }\n    if (rules.max) {\n      if (parseFloat(value) > rules.max) {\n        return false;\n      }\n    }\n    if (rules.notEmpty) {\n      if (\n        value == null ||\n        value === \"\" ||\n        value === \" \" ||\n        options.indexOf(value) === -1\n      ) {\n        return false;\n      }\n    }\n    if (rules.maxLength && value != null) {\n      if (value.length > rules.maxLength) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  onChange = event => {\n    this.props.onChange(event.target.value);\n  };\n\n  render() {\n    let value = this.props.value == null ? \"\" : this.props.value;\n    let style = this.props.style || {};\n    let layout = this.props.layout || {};\n\n    let label = this.props.label;\n    let disabled = true;\n    let multiline = false;\n    let fullWidth = false;\n\n    let options = this.props.options;\n    let disableUnderline = style.underline || true;\n    let margin = style.margin || \"none\";\n    let marginPx = 0;\n    let menuItems;\n    let endAdornment;\n    let classNames = [];\n    if (this.props.style) {\n      switch (this.props.style.type) {\n        case \"headline\":\n          style = {\n            ...style,\n            ...theme.typography.headline\n          };\n          style.color = theme.palette.primary.main;\n          break;\n        case \"title\":\n          style = {\n            ...style,\n            ...theme.typography.title\n          };\n          style.color = theme.palette.primary.main;\n          break;\n        case \"caption\":\n          style.color = theme.palette.text.secondary;\n          break;\n        default:\n          style.color = theme.palette.text.primary;\n          break;\n      }\n      switch (this.props.style.color) {\n        case \"primary\":\n          style.color = theme.palette.primary.main;\n          break;\n        case \"primaryContrast\":\n          style.color = theme.palette.primary.contrastText;\n          break;\n        case \"secondary\":\n          style.color = theme.palette.secondary.main;\n          break;\n        case \"secondaryContrast\":\n          style.color = theme.palette.secondary.contrastText;\n          break;\n        case \"error\":\n          style.color = theme.palette.error.main;\n          break;\n        default:\n          break;\n      }\n    }\n\n    if (layout.alignment === \"right\") {\n      style.float = \"right\";\n      style.textAlign = \"right\";\n      classNames.push(\"right\");\n    }\n    if (layout.alignment === \"left\") {\n      style.float = \"left\";\n    }\n\n    if (layout.area) {\n      fullWidth = true;\n      multiline = true;\n    }\n\n    if (\n      this.props.default &&\n      this.props.editable === false &&\n      (value === \"\" || value == null)\n    ) {\n      value = this.props.default;\n    }\n\n    if (this.props.editable) {\n      disabled = false;\n      disableUnderline = style.underline || false;\n      margin = style.margin || \"normal\";\n    } else {\n      if (!(style.labelVisible === true)) {\n        label = null;\n      }\n      if (\n        options != null &&\n        options[0] != null &&\n        typeof options[0] !== \"string\"\n      ) {\n        const a = options.filter(opt => {\n          return opt.value === value;\n        })[0];\n        if (a != null) {\n          value = a.label;\n        }\n      }\n      options = null;\n    }\n\n    if (options) {\n      menuItems = options.map(option => {\n        if (typeof option !== \"string\") {\n          return (\n            <MenuItem key={option.value} value={option.value}>\n              {option.label}\n            </MenuItem>\n          );\n        }\n        return (\n          <MenuItem key={option} value={option}>\n            {option}\n          </MenuItem>\n        );\n      });\n    }\n    if (style.unit) {\n      endAdornment = (\n        <InputAdornment position=\"end\">{style.unit}</InputAdornment>\n      );\n    }\n    switch (margin) {\n      case \"dense\":\n        marginPx = 5;\n        break;\n      case \"normal\":\n        marginPx = 12;\n        break;\n      default:\n    }\n\n    const field = (\n      <TextField\n        id={this.props.id}\n        value={value}\n        margin=\"none\"\n        disabled={disabled}\n        fullWidth={fullWidth}\n        multiline={multiline}\n        className={classNames.join(\" \") + \" Field\"}\n        label={label}\n        select={options ? true : false}\n        style={{ flex: 1, ...style, margin: marginPx }}\n        onChange={this.onChange}\n        error={this.state.error}\n        InputProps={{\n          disableUnderline,\n          style: { ...style, width: \"100%\" },\n          endAdornment: endAdornment ? endAdornment : null,\n          inputProps: {\n            style: { ...style, width: \"100%\" }\n          }\n        }}\n      >\n        {menuItems}\n      </TextField>\n    );\n    if (layout.td) {\n      // style.width = undefined;\n      return <td style={style}>{field}</td>;\n    } else {\n      return field;\n    }\n  }\n}\n\nField.propTypes = {\n  validate: PropTypes.shape({\n    min: PropTypes.number,\n    max: PropTypes.number,\n    type: PropTypes.oneOf([\"phoneNumber\", \"email\", \"integer\", \"decimalGrade\"]),\n    notEmpty: PropTypes.bool,\n    maxLength: PropTypes.number\n  }),\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  style: PropTypes.shape({\n    labelVisible: PropTypes.bool,\n    type: PropTypes.oneOf([\"title\", \"caption\", \"headline\"]),\n    underline: PropTypes.bool,\n    color: PropTypes.oneOf([\n      \"primary\",\n      \"primaryContrast\",\n      \"secondary\",\n      \"error\"\n    ]),\n    unit: PropTypes.string,\n    margin: PropTypes.oneOf([\"none\", \"dense\", \"normal\"])\n  }),\n  layout: PropTypes.shape({\n    area: PropTypes.bool,\n    alignment: PropTypes.oneOf([\"left\", \"right\"]),\n    td: PropTypes.bool\n  }),\n  id: PropTypes.string,\n  label: PropTypes.string,\n  options: PropTypes.any,\n  // PropTypes.arrayOf(\n  // \tPropTypes.oneOfType([\n  // \t\tPropTypes.shape({\n  // \t\t\tvalue: PropTypes.string,\n  // \t\t\tlabel: PropTypes.string,\n  // \t\t}),\n  // \t\tPropTypes.string,\n  // \t])),\n  editable: PropTypes.bool,\n  default: PropTypes.string\n};\n\nexport default Field;\n","import filter from \"lodash/filter\"\nimport $ from \"jquery\";\nimport keyBy from \"lodash/keyBy\"\nimport map from \"lodash/map\"\nimport Field from \"../components/Field\"\n\nfunction apiErrorHandler(endpoint, dispatch) {\n\treturn function handleError(error) {\n\t\tconst responseJSON = error.responseJSON;\n\t\tif (endpoint !== \"user/self\") {\n\t\t\tdispatch({\n\t\t\t\ttype: \"ADD_NOTIFICATION\",\n\t\t\t\tnotification: {\n\t\t\t\t\tid: Math.random(),\n\t\t\t\t\tpriority: \"high\",\n\t\t\t\t\ttype: \"bar\",\n\t\t\t\t\tmessage: responseJSON && responseJSON.error ? responseJSON.error : \"Er is iets mis gegaan\",\n\t\t\t\t\tscope: \".\",\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tthrow responseJSON;\n\t}\n}\n\nexport async function fetchData(endpoint, method, data, dispatch, getState, forceArray) {\n\tconst f = {\n\t\tcall: endpoint,\n\t\tmethod: method,\n\t\tdata: data,\n\t}\n\tfor (let i = 0; i < getState().hasFetched.length; i++) {\n\t\tconst o = getState().hasFetched[i];\n\t\tif (o.data === f.data && o.call === f.call && o.method === f.method) {\n\t\t\treturn Promise.reject(new Error(\"Duplicate api call\"));\n\t\t}\n\t};\n\tdispatch({\n\t\t...f,\n\t\ttype: \"HAS_FETCHED\",\n\t});\n\n\treturn $.ajax({\n\t\turl: \"/api/\" + endpoint,\n\t\ttype: method,\n\t\tdata: data,\n\t\tdataType: \"json\",\n\t}).then((list) => {\n\t\tif (method === \"put\" || method === \"patch\" || method === \"delete\") {\n\t\t\tdispatch({\n\t\t\t\ttype: \"ADD_NOTIFICATION\",\n\t\t\t\tnotification: {\n\t\t\t\t\tid: Math.random(),\n\t\t\t\t\tpriority: \"low\",\n\t\t\t\t\ttype: \"bar\",\n\t\t\t\t\tmessage: \"Opgeslagen\",\n\t\t\t\t\tscope: \"\",\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn (Array.isArray(list) && forceArray !== true) ? keyBy(list, \"id\") : list\n\t}).catch(apiErrorHandler(endpoint, dispatch));\n}\n\n\nexport function getSubjects() {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"subject/list\", \"get\", null, dispatch, getState)\n\t\t\t.then((subjects) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_SUBJECTS\",\n\t\t\t\t\tsubjects,\n\t\t\t\t});\n\t\t\t}).catch(() => { });\n\t}\n}\n\nexport function setAlias(userId) {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"function/alias\", \"post\", { userId, secureLogin: getState().secureLogin }, dispatch, getState)\n\t\t\t.then(() => {\n\t\t\t\tdocument.location.reload();\n\t\t\t})\n\t}\n}\n\nexport function getGroups() {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"group/list\", \"get\", null, dispatch, getState)\n\t\t\t.then((groups) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_GROUPS\",\n\t\t\t\t\tgroups,\n\t\t\t\t});\n\t\t\t}).catch(() => { });\n\t}\n}\n\nexport function getParticipatingGroups() {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"user/groups\", \"get\", null, dispatch, getState)\n\t\t\t.then((groups) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_GROUPS\",\n\t\t\t\t\tgroups,\n\t\t\t\t});\n\t\t\t}).catch(() => { });\n\t}\n}\n\nexport function getGroup(groupId) {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"group\", \"post\", { groupId: groupId }, dispatch, getState)\n\t\t\t.then((group) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_GROUPS\",\n\t\t\t\t\tgroups: { [groupId]: group }\n\t\t\t\t});\n\t\t\t}).catch(() => { });\n\t}\n}\n\nexport function isUserMissingInfo(user) {\n\tif (user && user.role === \"student\") {\n\t\tif (!Field.validate(user.year, { type: \"integer\", min: 1, max: 6 })) return \"Leerjaar\";\n\t\tif (!Field.validate(user.level, { notEmpty: true })) return \"Opleidingsniveau\";\n\t\tif (!Field.validate(user.profile, { notEmpty: true })) return \"Profiel\";\n\t\tif (!Field.validate(user.preferedEmail, { type: \"email\" })) return \"Voorkeurs email\";\n\t\tif (!Field.validate(user.phoneNumber, { type: \"phoneNumber\" })) return \"Telefoonnummer\";\n\t}\n\treturn false;\n}\n\nfunction addMissingInfoNotifications(user, dispatch) {\n\tconst missing = isUserMissingInfo(user);\n\tif (missing) {\n\t\tdispatch({\n\t\t\ttype: \"ADD_NOTIFICATION\",\n\t\t\tnotification: {\n\t\t\t\tid: Math.random(),\n\t\t\t\tpriority: \"high\",\n\t\t\t\ttype: \"badge\",\n\t\t\t\tmessage: `Vul een geldige waarde voor ${missing} in`,\n\t\t\t\tscope: \"profiel\",\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction testIE(dispatch) {\n\tif (/MSIE|Trident/.test(window.navigator.userAgent)) {\n\t\tdispatch({\n\t\t\ttype: \"ADD_NOTIFICATION\",\n\t\t\tnotification: {\n\t\t\t\tid: Math.random(),\n\t\t\t\tpriority: \"high\",\n\t\t\t\ttype: \"bar\",\n\t\t\t\tmessage: \"Deze website ondersteunt Internet Explorer niet. Gebruik een moderne browser zoals Firefox of Chrome\",\n\t\t\t\tsticky: true,\n\t\t\t\tscope: \"\",\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport function getSelf() {\n\treturn (dispatch, getState) => {\n\t\tconst notification = {\n\t\t\tid: -96,\n\t\t\tpriority: \"low\",\n\t\t\ttype: \"bar\",\n\t\t\tmessage: \"Bezig met laden\",\n\t\t\tscope: \".\",\n\t\t};\n\t\tdispatch(addNotification(notification));\n\t\tfetchData(\"user/self\", \"get\", null, dispatch, getState)\n\t\t\t.then((user) => {\n\t\t\t\taddMissingInfoNotifications(user, dispatch);\n\t\t\t\ttestIE(dispatch);\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"SET_SELF\",\n\t\t\t\t\tuser,\n\t\t\t\t});\n\t\t\t\tdispatch(removeNotification(notification));\n\t\t\t}).catch((error) => {\n\t\t\t\ttestIE(dispatch);\n\t\t\t\tdispatch(removeNotification(notification));\n\t\t\t\tif (error != null && error.error === \"Authentication Error\") {\n\t\t\t\t\tif (window.location.pathname !== \"/login\") {\n\t\t\t\t\t\tsetCookie(\"beforeLoginPath\", window.location.pathname + window.location.search, 24);\n\t\t\t\t\t\tdocument.location.href = \"/login\";\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tdispatch(toggleMenu(false));\n\t\t\t\t\tdispatch(addNotification({\n\t\t\t\t\t\tid: -1,\n\t\t\t\t\t\tpriority: \"high\",\n\t\t\t\t\t\ttype: \"bar\",\n\t\t\t\t\t\tmessage: \"Kan geen verbinding met de server maken\",\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t});\n\t}\n}\n\nexport function setUser(user) {\n\treturn (dispatch, getState) => {\n\t\tdispatch({\n\t\t\ttype: \"CHANGE_USER\",\n\t\t\tuser,\n\t\t});\n\t\tfetchData(\"user\", \"patch\", user, dispatch, getState);\n\t}\n}\n\nexport function setPresenceUserStatus(lessonId, userStatus, groupId) {\n\treturn (dispatch, getState) => {\n\t\tdispatch({\n\t\t\ttype: \"CHANGE_PRESENCE_USER_STATUS\",\n\t\t\tlessonId,\n\t\t\tuserStatus,\n\t\t\tgroupId,\n\t\t});\n\t\tfetchData(\"group/userStatus\", \"patch\", { lessonId: lessonId, userStatus: userStatus }, dispatch, getState);\n\t}\n}\n\nexport function setGroup(group) {\n\treturn (dispatch, getState) => {\n\t\tfunction getCourse(group) {\n\t\t\treturn {\n\t\t\t\tcourseId: group.courseId,\n\t\t\t\tsubjectId: group.subjectId,\n\t\t\t\tname: group.courseName,\n\t\t\t\tdescription: group.courseDescription,\n\t\t\t\tstudyTime: group.studyTime,\n\t\t\t\tremarks: group.remarks,\n\t\t\t}\n\t\t}\n\n\t\tfunction getCourseGroup(group) {\n\t\t\treturn {\n\t\t\t\tcourseId: group.courseId,\n\t\t\t\tgroupId: group.id,\n\t\t\t\tday: group.day,\n\t\t\t\tschoolYear: group.schoolYear,\n\t\t\t\tenrollableFor: group.enrollableFor,\n\t\t\t\tperiod: group.period,\n\t\t\t}\n\t\t}\n\n\t\tconst oldCourse = getCourse(getState().groups[group.id]);\n\t\tconst newCourse = getCourse(group);\n\n\t\tconst oldCourseGroup = getCourseGroup(getState().groups[group.id]);\n\t\tconst newCourseGroup = getCourseGroup(group);\n\n\t\tconst oldLessons = getState().groups[group.id].lessons;\n\t\tconst newLessons = group.lessons;\n\n\t\tconst oldPresence = getState().groups[group.id].presence;\n\t\tconst newPresence = group.presence;\n\n\t\tconst oldEvaluations = getState().groups[group.id].evaluations;\n\t\tconst newEvaluations = group.evaluations;\n\n\t\tif (JSON.stringify(oldCourse) !== JSON.stringify(newCourse)) {\n\t\t\tfetchData(\"course\", \"patch\", newCourse, dispatch, getState);\n\t\t}\n\t\tif (JSON.stringify(oldCourseGroup) !== JSON.stringify(newCourseGroup)) {\n\t\t\tfetchData(\"group\", \"patch\", newCourseGroup, dispatch, getState);\n\t\t}\n\n\t\tif (JSON.stringify(oldPresence) !== JSON.stringify(newPresence)) {\n\t\t\tconst changedPresenceObjs = filter(newPresence, (presence) => {\n\t\t\t\treturn JSON.stringify(presence) !== JSON.stringify(oldPresence[presence.id]);\n\t\t\t});\n\t\t\tfetchData(\"group/presence\", \"patch\",\n\t\t\t\t{\n\t\t\t\t\tpresence: JSON.stringify(map(changedPresenceObjs, (changedPresenceObjs) => { return changedPresenceObjs })),\n\t\t\t\t\tgroupId: group.id\n\t\t\t\t}, dispatch, getState);\n\t\t}\n\n\t\tif (newLessons != null && JSON.stringify(oldLessons) !== JSON.stringify(newLessons)) {\n\t\t\tfetchData(\"group/lessons\", \"patch\", { lessons: JSON.stringify(map(newLessons, (lesson) => { return lesson })), }, dispatch, getState);\n\t\t}\n\n\t\tif (JSON.stringify(oldEvaluations) !== JSON.stringify(newEvaluations)) {\n\t\t\tlet changedEvaluations = [];\n\t\t\tfor (let i = 0; i < newEvaluations.length; i++) {\n\t\t\t\tconst evaluation = newEvaluations[i];\n\t\t\t\tif (JSON.stringify(oldEvaluations[i]) !== JSON.stringify(evaluation)) {\n\t\t\t\t\tchangedEvaluations.push(evaluation);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfetchData(\"group/evaluations\", \"patch\", {\n\t\t\t\tevaluations: JSON.stringify(changedEvaluations),\n\t\t\t\tsecureLogin: getState().secureLogin\n\t\t\t}, dispatch, getState);\n\t\t}\n\n\t\tdispatch({\n\t\t\ttype: \"CHANGE_GROUP\",\n\t\t\tgroup: group,\n\t\t});\n\t}\n}\n\nexport function getEnrollableGroups() {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"user/enrollableGroups\", \"get\", null, dispatch, getState, true)\n\t\t\t.then((enrollableGroups) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_ENROLLABLE_GROUPS\",\n\t\t\t\t\tenrollableGroups,\n\t\t\t\t});\n\t\t\t}).catch(() => { });\n\t}\n}\n\nexport function getEnrolLments() {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"user/enrollments\", \"get\", null, dispatch, getState)\n\t\t\t.then((enrollments) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_GROUPS\",\n\t\t\t\t\tgroups: enrollments,\n\t\t\t\t});\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_ENROLLMENTS\",\n\t\t\t\t\tuserId: getState().userId,\n\t\t\t\t\tenrollmentIds: Object.keys(enrollments),\n\t\t\t\t});\n\t\t\t}).catch(() => { });\n\t}\n}\n\nexport function getGroupEnrollments(groupId) {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"group/enrollments\", \"post\", { groupId: groupId }, dispatch, getState)\n\t\t\t.then((enrollments) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_GROUP\",\n\t\t\t\t\tgroup: {\n\t\t\t\t\t\tid: groupId,\n\t\t\t\t\t\tenrollmentIds: Object.keys(enrollments).map(id => parseInt(id, 10)),\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_USERS\",\n\t\t\t\t\tusers: enrollments,\n\t\t\t\t});\n\t\t\t}).catch(() => { });\n\t}\n}\n\nexport function getGroupLessons(groupId) {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"group/lessons\", \"post\", { groupId: groupId }, dispatch, getState)\n\t\t\t.then((lessons) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_GROUP\",\n\t\t\t\t\tgroup: {\n\t\t\t\t\t\tid: groupId,\n\t\t\t\t\t\tlessons,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t}\n}\n\nexport function getGroupPresence(groupId) {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"group/presence\", \"post\", { groupId: groupId }, dispatch, getState)\n\t\t\t.then((presence) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_GROUP\",\n\t\t\t\t\tgroup: {\n\t\t\t\t\t\tid: groupId,\n\t\t\t\t\t\tpresence,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t}\n}\n\nexport function getGroupParticipants(groupId) {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"group/participants\", \"post\", { groupId: groupId }, dispatch, getState)\n\t\t\t.then((participants) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_GROUP\",\n\t\t\t\t\tgroup: {\n\t\t\t\t\t\tid: groupId,\n\t\t\t\t\t\tparticipantIds: Object.keys(participants).map(id => parseInt(id, 10)),\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_USERS\",\n\t\t\t\t\tusers: participants,\n\t\t\t\t});\n\t\t\t});\n\t}\n}\n\nexport function getAllUsers() {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"user/list\", \"get\", null, dispatch, getState)\n\t\t\t.then((users) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_USERS\",\n\t\t\t\t\tusers,\n\t\t\t\t});\n\t\t\t}).catch(() => { });\n\t}\n}\n\nexport function addNotification(notification) {\n\treturn {\n\t\ttype: \"ADD_NOTIFICATION\",\n\t\tnotification,\n\t}\n}\n\nexport function removeNotification(notification) {\n\treturn {\n\t\ttype: \"REMOVE_NOTIFICATION\",\n\t\tnotification,\n\t}\n}\n\nexport function toggleMenu(menuState) {\n\treturn {\n\t\ttype: \"TOGGLE_MENU\",\n\t\tmenuState,\n\t}\n}\n\nexport function setSecureLogin(secureLogin) {\n\treturn {\n\t\ttype: \"SET_SECURE_LOGIN\",\n\t\tsecureLogin,\n\t}\n}\n\nexport function toggleEnrollment(group) {\n\treturn (dispatch, getState) => {\n\t\tconst index = getState().users[getState().userId].enrollmentIds.indexOf(group.id);\n\t\tif (index === -1) {\n\t\t\tfetchData(\"user/enrollments\", \"put\", { groupId: group.id }, dispatch, getState)\n\t\t\t\t.then(() => {\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: \"CHANGE_ENROLLMENTS\",\n\t\t\t\t\t\taction: \"ADD\",\n\t\t\t\t\t\tuserId: getState().userId,\n\t\t\t\t\t\tgroupId: group.id,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t} else {\n\t\t\tfetchData(\"user/enrollments\", \"delete\", { groupId: group.id }, dispatch, getState)\n\t\t\t\t.then(() => {\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: \"CHANGE_ENROLLMENTS\",\n\t\t\t\t\t\taction: \"REMOVE\",\n\t\t\t\t\t\tuserId: getState().userId,\n\t\t\t\t\t\tgroupId: group.id,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\t}\n}\n\n\nexport function getGroupEvaluations(groupId) {\n\treturn (dispatch, getState) => {\n\t\tfetchData(\"group/evaluations\", \"post\", { groupId }, dispatch, getState, true).then((evaluations) => {\n\t\t\tdispatch({\n\t\t\t\ttype: \"CHANGE_GROUP\",\n\t\t\t\tgroup: {\n\t\t\t\t\tid: groupId,\n\t\t\t\t\tevaluations: evaluations,\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n}\n\nexport function addSubject(name, description) {\n\treturn (dispatch, getState) => {\n\t\treturn fetchData(\"subject\", \"put\", { name, description, secureLogin: getState().secureLogin }, dispatch, getState)\n\t\t\t.then(() => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"ADD_NOTIFICATION\",\n\t\t\t\t\tnotification: {\n\t\t\t\t\t\tid: Math.random(),\n\t\t\t\t\t\tpriority: \"low\",\n\t\t\t\t\t\ttype: \"bar\",\n\t\t\t\t\t\tmessage: \"Vak aangemaakt, refresh om te zien\",\n\t\t\t\t\t\tscope: \"beheer\",\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t}\n}\n\nexport function addCourse(name, subjectId) {\n\treturn (dispatch, getState) => {\n\t\treturn fetchData(\"course\", \"put\", { name, subjectId, secureLogin: getState().secureLogin }, dispatch, getState)\n\t\t\t.then(() => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"ADD_NOTIFICATION\",\n\t\t\t\t\tnotification: {\n\t\t\t\t\t\tid: Math.random(),\n\t\t\t\t\t\tpriority: \"low\",\n\t\t\t\t\t\ttype: \"bar\",\n\t\t\t\t\t\tmessage: \"Module aangemaakt, refresh om te zien\",\n\t\t\t\t\t\tscope: \"beheer\",\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t}\n}\n\nexport function addGroup(courseId, userId) {\n\treturn (dispatch, getState) => {\n\t\treturn fetchData(\"group\", \"put\", { courseId, mainTeacherId: userId, secureLogin: getState().secureLogin }, dispatch, getState)\n\t\t\t.then(() => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"ADD_NOTIFICATION\",\n\t\t\t\t\tnotification: {\n\t\t\t\t\t\tid: Math.random(),\n\t\t\t\t\t\tpriority: \"low\",\n\t\t\t\t\t\ttype: \"bar\",\n\t\t\t\t\t\tmessage: \"Groep aangemaakt, refresh om te zien\",\n\t\t\t\t\t\tscope: \"beheer\",\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t}\n}\n\n\nexport function addParticipant(userId, groupId, participatingRole) {\n\treturn (dispatch, getState) => {\n\t\treturn fetchData(\"group/participants\", \"patch\", { userId, groupId, participatingRole }, dispatch, getState)\n\t\t\t.then(() => {\n\t\t\t\tconst index = getState().groups[groupId].enrollmentIds.indexOf(userId);\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"CHANGE_GROUP\",\n\t\t\t\t\tgroup: {\n\t\t\t\t\t\tid: groupId,\n\t\t\t\t\t\tenrollmentIds: [\n\t\t\t\t\t\t\t...getState().groups[groupId].enrollmentIds.slice(0, index),\n\t\t\t\t\t\t\t...getState().groups[groupId].enrollmentIds.slice(index + 1)\n\t\t\t\t\t\t],\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"ADD_NOTIFICATION\",\n\t\t\t\t\tnotification: {\n\t\t\t\t\t\tid: Math.random(),\n\t\t\t\t\t\tpriority: \"low\",\n\t\t\t\t\t\ttype: \"bar\",\n\t\t\t\t\t\tmessage: \"Deelnemer toegevoegd, refresh om te zien\",\n\t\t\t\t\t\tscope: \"*\",\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t}\n}\n\nexport function setCookie(cname, cvalue, exhours) {\n\tvar d = new Date();\n\td.setTime(d.getTime() + (exhours * 60 * 60 * 1000));\n\tvar expires = \"expires=\" + d.toUTCString();\n\tdocument.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\n}\n\nexport function getCookie(cname) {\n\tvar name = cname + \"=\";\n\tvar decodedCookie = decodeURIComponent(document.cookie);\n\tvar ca = decodedCookie.split(';');\n\tfor (var i = 0; i < ca.length; i++) {\n\t\tvar c = ca[i];\n\t\twhile (c.charAt(0) === ' ')\n\t\t\tc = c.substring(1);\n\t\tif (c.indexOf(name) === 0)\n\t\t\treturn c.substring(name.length, c.length);\n\t}\n\treturn \"\";\n}\n\nexport function relogSecure() {\n\tsetCookie(\"beforeLoginPath\", window.location.pathname + window.location.search, 24);\n\tif (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\n\t\tdocument.location.href = \"http://localhost:26194/auth/login?secure=true\";\n\t} else {\n\t\tdocument.location.href = \"/auth/login?secure=true\";\n\t}\n}","import React, { Component } from \"react\";\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\n\nimport theme from '../lib/MuiTheme';\nimport { toggleMenu } from '../store/actions';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\n\nclass Login extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.generateEmail.bind(this)();\n\t\tthis.interval = setInterval(this.generateEmail.bind(this), 1500);\n\t}\n\n\tgenerateEmail() {\n\t\tlet school = this.state.school;\n\t\tlet schoolShort = this.state.schoolShort;\n\t\tlet studentNumber = this.state.studentNumber;\n\t\tswitch (Math.floor(Math.random() * 14)) {\n\t\t\tcase 0:\n\t\t\t\tschool = \"beekdallyceum\";\n\t\t\t\tschoolShort = \"BD\";\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tschool = \"candea\";\n\t\t\t\tschoolShort = \"CC\";\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tschool = \"quadraam\";\n\t\t\t\tschoolShort = \"CB\";\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tschool = \"lyceumelst\";\n\t\t\t\tschoolShort = \"LE\";\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tschool = \"liemerscollege\";\n\t\t\t\tschoolShort = \"LC\";\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tschool = \"lorentzlyceum\";\n\t\t\t\tschoolShort = \"LL\";\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\tschool = \"maartenvanrossem\";\n\t\t\t\tschoolShort = \"MvR\";\n\t\t\t\tbreak;\n\t\t\tcase 7:\n\t\t\t\tschool = \"montessoriarnhem\";\n\t\t\t\tschoolShort = \"MC\";\n\t\t\t\tbreak;\n\t\t\tcase 8:\n\t\t\t\tschool = \"olympuscollege\";\n\t\t\t\tschoolShort = \"OC\";\n\t\t\t\tbreak;\n\t\t\tcase 9:\n\t\t\t\tschool = \"produsarnhem\";\n\t\t\t\tschoolShort = \"PD\";\n\t\t\t\tbreak;\n\t\t\tcase 10:\n\t\t\t\tschool = \"gymnasiumarnhem\";\n\t\t\t\tschoolShort = \"SGA\";\n\t\t\t\tbreak;\n\t\t\tcase 11:\n\t\t\t\tschool = \"symbion\";\n\t\t\t\tschoolShort = \"SY\";\n\t\t\t\tbreak;\n\t\t\tcase 12:\n\t\t\t\tschool = \"vmbo-venster\";\n\t\t\t\tschoolShort = \"VE\";\n\t\t\t\tbreak;\n\t\t\tcase 13:\n\t\t\tdefault:\n\t\t\t\tschool = \"hetwesteraam\";\n\t\t\t\tschoolShort = \"HW\";\n\t\t\t\tbreak;\n\t\t}\n\t\tstudentNumber = Math.floor(Math.random() * 999999) + \"\";\n\t\tfor (let i = studentNumber.length; i < 6; i++) {\n\t\t\tstudentNumber = \"0\" + studentNumber;\n\t\t}\n\t\tthis.setState({\n\t\t\tschool,\n\t\t\tschoolShort,\n\t\t\tstudentNumber,\n\t\t});\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearInterval(this.interval);\n\t}\n\n\tlogin() {\n\t\tif (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\n\t\t\tdocument.location.href = \"http://localhost:26194/auth/login\"\n\t\t} else {\n\t\t\tdocument.location.href = \"/auth/login\"\n\t\t}\n\t}\n\n\tgenerateColoredEmail(schoolShort, studentNumber, school) {\n\t\treturn (\n\t\t\t<Typography variant=\"subtitle1\" style={{ fontFamily: \"'Courier New', Courier, monospace\", overflow: \"hidden\" }}>\n\t\t\t\t<span style={{ color: theme.palette.secondary.light, fontWeight: \"bold\" }}>\n\t\t\t\t\t{schoolShort}\n\t\t\t\t</span>\n\t\t\t\t<span style={{ color: theme.palette.secondary.dark, fontWeight: \"bolder\" }}>\n\t\t\t\t\t{studentNumber}\n\t\t\t\t</span>\n\t\t\t\t<span style={{ fontWeight: \"bold\" }}>\n\t\t\t\t\t@ll.\n\t\t\t\t</span>\n\t\t\t\t<span style={{ color: theme.palette.secondary.light, fontWeight: \"bold\" }}>\n\t\t\t\t\t{school}\n\t\t\t\t</span>\n\t\t\t\t<span style={{ fontWeight: \"bold\" }}>\n\t\t\t\t\t.nl\n\t\t\t\t</span>\n\t\t\t</Typography>\n\t\t)\n\t}\n\n\trender() {\n\t\tif (this.props.userId != null) {\n\t\t\tthis.props.history.push(\"/\");\n\t\t\tthis.props.toggleMenu(true);\n\t\t} else {\n\t\t\tthis.props.toggleMenu(false);\n\t\t}\n\n\t\treturn (\n\t\t\t<Paper elevation={8} className=\"Login\" style={{ minHeight: \"330px\" }}>\n\t\t\t\t<div style={{ padding: \"20px\" }}>\n\t\t\t\t\t<Typography gutterBottom variant=\"body1\" color=\"primary\">\n\t\t\t\t\t\tLog in\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Typography variant=\"subtitle1\">\n\t\t\t\t\t\tGebruik je school-email om in te loggen:\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<br />\n\t\t\t\t\t<br />\n\t\t\t\t\t<center>\n\t\t\t\t\t\t{this.generateColoredEmail(\"schoolafkorting\", \"leerlingnummer\", \"school\")}\n\t\t\t\t\t\t{this.generateColoredEmail(this.state.schoolShort, this.state.studentNumber, this.state.school)}\n\t\t\t\t\t</center>\n\t\t\t\t\t<br />\n\t\t\t\t\t<br />\n\t\t\t\t\t<Button type=\"submit\" variant=\"contained\" size=\"large\" color=\"primary\" fullWidth onClick={this.login}>\n\t\t\t\t\t\tLogin met je Microsoft school account\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</Paper >\n\t\t);\n\t}\n}\n\n\nfunction mapStateToProps(state) {\n\treturn {\n\t\tuserId: state.userId,\n\t};\n}\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tlogin: (email, password) => {\n\t\t\tdispatch(toggleMenu(true));\n\t\t},\n\t\ttoggleMenu: (state) => {\n\t\t\tdispatch(toggleMenu(state));\n\t\t},\n\t};\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Login));\n\n\n\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nclass Page extends Component {\n\n\trender() {\n\t\tlet className = \"\";\n\t\tif (this.props.showMenu) {\n\t\t\tclassName += \"menuShown\"\n\t\t} else {\n\t\t\tclassName += \"menuHidden\"\n\t\t}\n\t\treturn (\n\t\t\t<div className={\"Page \" + className}>\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\n\nfunction mapStateToProps(state) {\n\treturn {\n\t\tshowMenu: state.showMenu,\n\t};\n}\n\nexport default connect(mapStateToProps)(Page);\n","import React, { Component } from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nclass Progress extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tisShowing: false,\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.timeout = setTimeout(() => this.setState({ isShowing: true }), 200);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout(this.timeout);\n\t}\n\n\trender() {\n\t\tif (this.state.isShowing) {\n\t\t\treturn (\n\t\t\t\t<CircularProgress {...this.props}/>\n\t\t\t);\n\t\t}else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n}\n\nexport default Progress;","import React, { Component } from \"react\";\nimport {\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Typography,\n  Button\n} from \"@material-ui/core/\";\nimport Clear from \"@material-ui/icons/Clear\";\n\nclass EnrollmentPopup extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  static getDerivedStateFromProps(nextProps, prevProps) {\n    return { page: nextProps.hasChosen ? \"cancel\" : \"remarks\", ...prevProps };\n  }\n\n  getDuplicatePage() {\n    return (\n      <Dialog open keepMounted>\n        <DialogContent>\n          <Typography color=\"error\" style={{ fontSize: \"16px\" }}>\n            {\"Je hebt al een module gekozen voor \" + this.props.group.day + \"!\"}\n          </Typography>\n          Je hebt je op deze dag al voor de module&nbsp;\n          <Typography color=\"primary\" variant=\"button\">\n            {this.props.chosenDayGroupName}\n          </Typography>\n          &nbsp;ingeschreven. Wil je je ook voor&nbsp;\n          <Typography color=\"primary\" variant=\"button\">\n            {this.props.group.courseName}\n          </Typography>\n          &nbsp;inschrijven?\n        </DialogContent>\n        <DialogActions>\n          <Button\n            color=\"primary\"\n            variant=\"contained\"\n            onClick={() => {\n              this.props.handlePopup(true);\n            }}\n          >\n            Toch inschrijven\n          </Button>\n          <Button color=\"default\">Annuleren</Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n\n  getCancelPage() {\n    return (\n      <Dialog open keepMounted>\n        <DialogTitle>Uitschrijven</DialogTitle>\n        <DialogContent>\n          Weet je zeker dat je wilt uitschrijven voor de module&nbsp;\n          <Typography color=\"primary\" variant=\"button\">\n            {this.props.group.courseName}\n          </Typography>{\" \"}\n          &nbsp;?\n        </DialogContent>\n        <DialogActions>\n          <Button color=\"default\">Annuleren</Button>\n          <Button onClick={() => this.props.handlePopup(true)} color=\"primary\">\n            Uitschrijven\n            <Clear />\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n\n  getConfirmPage() {\n    return (\n      <Dialog open keepMounted>\n        <DialogTitle>Inschrijven</DialogTitle>\n        <DialogContent>\n          Weet je zeker dat je wilt inschrijven voor de module&nbsp;\n          <Typography color=\"primary\" variant=\"button\">\n            {this.props.group.courseName}\n          </Typography>\n          &nbsp;?\n        </DialogContent>\n        <DialogActions>\n          <Button color=\"default\">Annuleren</Button>\n          <Button\n            onClick={() => {\n              this.props.handlePopup(true);\n            }}\n            variant=\"contained\"\n            color=\"primary\"\n          >\n            Inschrijven\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n\n  getRemarkPage = () => {\n    const remarks = this.props.group.remarks;\n    return (\n      <Dialog open keepMounted>\n        <DialogTitle>Opmerkingen</DialogTitle>\n        <DialogContent>\n          <Typography>{remarks}</Typography>\n        </DialogContent>\n        <DialogActions>\n          <Button color=\"default\">Annuleren</Button>\n          <Button\n            onClick={() => {\n              this.props.preventPopupClose(true);\n              this.setState({ page: \"hasChosenDay\" });\n            }}\n            color=\"primary\"\n          >\n            Verder\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  };\n\n  render() {\n    this.props.preventPopupClose(false);\n    const page = this.state.page;\n\n    if (page === \"cancel\") return this.getCancelPage();\n    if (\n      page === \"remarks\" &&\n      this.props.group.remarks != null &&\n      this.props.group.remarks.length > 1\n    ) {\n      return this.getRemarkPage();\n    }\n    if (page === \"hasChosenDay\" && this.props.hasChosenDay) {\n      return this.getDuplicatePage();\n    }\n    return this.getConfirmPage();\n  }\n}\n\nexport default EnrollmentPopup;\n","import React, { Component } from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport Clear from \"@material-ui/icons/Clear\";\nimport { connect } from \"react-redux\";\nimport {\n  toggleEnrollment,\n  getEnrollableGroups,\n  getEnrolLments\n} from \"../../store/actions\";\nimport Progress from \"../../components/Progress\";\nimport EnrollmentPopup from \"./EnrollmentPopup\";\n\nclass ChooseButton extends Component {\n  constructor(props) {\n    super(props);\n    this.props.getEnrollableGroups();\n    this.props.getEnrolLments();\n    this.state = {\n      dialogOpen: false\n    };\n  }\n\n  preventPopupClose = preventClose => {\n    this.preventClose = preventClose;\n  };\n\n  handlePopup = doEnroll => {\n    if (doEnroll) {\n      this.props.toggleEnrollment(this.props.group);\n    }\n    if (!this.preventClose) {\n      this.setState({\n        dialogOpen: !this.state.dialogOpen\n      });\n    }\n  };\n\n  render() {\n    const props = this.props;\n    let dialog = this.state.dialogOpen ? (\n      <EnrollmentPopup\n        group={props.group}\n        hasChosen={props.hasChosen}\n        handlePopup={this.handlePopup}\n        hasChosenDay={props.hasChosenDay}\n        chosenDayGroupName={props.chosenDayGroupName}\n        preventPopupClose={this.preventPopupClose}\n      />\n    ) : null;\n\n    if (props.loading) {\n      return <Progress size={30} />;\n    }\n\n    if (props.hasChosen) {\n      return (\n        <Button\n          color=\"primary\"\n          onClick={() => this.handlePopup(false)}\n          style={props.style}\n        >\n          Ingeschreven\n          <Clear />\n          {dialog}\n        </Button>\n      );\n    }\n\n    if (this.props.canChoose) {\n      return (\n        <Button\n          color=\"primary\"\n          variant=\"contained\"\n          onClick={() => this.handlePopup(false)}\n          style={this.props.style}\n        >\n          {\"Inschrijven\" + (this.props.hasChosenDay ? \"*\" : \"\")}\n          {dialog}\n        </Button>\n      );\n    } else if (props.group.period < this.props.enrollmentPeriod) {\n      return (\n        <Button disabled color=\"primary\" style={props.style}>\n          Inschrijfperiode verlopen\n          {dialog}\n        </Button>\n      );\n    } else {\n      return (\n        <Button disabled color=\"primary\" style={props.style}>\n          Coming Soon\n          {dialog}\n        </Button>\n      );\n    }\n  }\n}\n\nfunction mapStateToProps(state, ownProps) {\n  if (\n    state.users[state.userId].enrollmentIds == null ||\n    state.enrollableGroups == null\n  ) {\n    return {\n      loading: true\n    };\n  }\n\n  let chosenDayGroupName = -1;\n  state.users[state.userId].enrollmentIds.forEach(groupId => {\n    const group = state.groups[groupId];\n    if (\n      group.day === ownProps.group.day &&\n      group.period === ownProps.group.period\n    ) {\n      chosenDayGroupName = group.courseName;\n    }\n  });\n\n  return {\n    canChoose:\n      state.enrollableGroups.map(e => e.id).indexOf(ownProps.group.id) !== -1,\n    hasChosen:\n      state.users[state.userId].enrollmentIds.indexOf(ownProps.group.id) !== -1,\n    hasChosenDay: chosenDayGroupName !== -1,\n    chosenDayGroupName,\n    enrollmentPeriod: state.enrollmentPeriod\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    toggleEnrollment: group => dispatch(toggleEnrollment(group)),\n    getEnrollableGroups: () => dispatch(getEnrollableGroups()),\n    getEnrolLments: () => dispatch(getEnrolLments())\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ChooseButton);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport { relogSecure } from \"../store/actions\"\nimport Field from \"./Field\"\n\nclass EnsureSecureLogin extends Component {\n\n\trender() {\n\t\tif (!(this.props.active === false) && this.props.secureLogin == null) {\n\t\t\treturn <Paper style={{ padding: \"20px\", marginTop: \"25px\" }}>\n\t\t\t\t<Field value=\"Log opnieuw in om toegang te krijgen\" layout={{ area: true }} />\n\t\t\t\t<Button color=\"primary\" variant=\"contained\" onClick={relogSecure}>\n\t\t\t\t\tInloggen\n\t\t\t\t</Button>\n\t\t\t</Paper>\n\t\t} else {\n\t\t\treturn this.props.children;\n\t\t}\n\t}\n}\n\nfunction mapStateToProps(state) {\n\treturn {\n\t\tsecureLogin: state.secureLogin,\n\t};\n}\n\nexport default connect(mapStateToProps, null)(EnsureSecureLogin);\n\n\n\n","import React, { Component } from 'react';\n\nimport Field from '../../components/Field';\nimport EnsureSecureLogin from '../../components/EnsureSecureLogin';\nimport { Tooltip, TableSortLabel, Typography, Paper } from '@material-ui/core';\n\nconst EVALUATION_FORMATS = [{\n\tlabel: \"vink\",\n\tvalue: \"check\",\n\toptions: [{\n\t\tlabel: \"Gehaald\",\n\t\tvalue: \"passed\",\n\t},\n\t{\n\t\tlabel: \"Niet gehaald\",\n\t\tvalue: \"failed\",\n\t},\n\t{\n\t\tlabel: \"Niet deelgenomen\",\n\t\tvalue: \"ND\",\n\t}],\n},\n{\n\tlabel: \"trapsgewijs\",\n\tvalue: \"stepwise\",\n\toptions: [{\n\t\tlabel: \"Onvoldoende\",\n\t\tvalue: \"O\",\n\t},\n\t{\n\t\tlabel: \"Voldoende\",\n\t\tvalue: \"V\",\n\t},\n\t{\n\t\tlabel: \"Goed\",\n\t\tvalue: \"G\",\n\t},\n\t{\n\t\tlabel: \"Niet deelgenomen\",\n\t\tvalue: \"ND\",\n\t}],\n}, {\n\tlabel: \"cijfer\",\n\tvalue: \"decimal\",\n\toptions: \"decimal\",\n}];\n\nfunction getEvaluationColor(ev) {\n\tif (ev.assesment === \"ND\" || ev.assesment == null) {\n\t\treturn \"#673ab7\";\n\t}\n\tswitch (ev.type) {\n\t\tcase \"stepwise\":\n\t\t\treturn \"#3f51b5\";\n\t\tcase \"check\":\n\t\t\treturn \"#009688\";\n\t\tcase \"decimal\":\n\t\t\treturn \"#00bcd4\"\n\t\tdefault:\n\t\t\treturn \"#673ab7\";\n\t}\n}\n\nclass Evaluation extends Component {\n\n\trender() {\n\t\tconst e = this.props.evaluation;\n\t\tlet style = {\n\t\t\tunderline: false,\n\t\t\tflex: 2,\n\t\t};\n\t\tlet layout = { td: true };\n\t\tif (this.props.student) {\n\t\t\tstyle.type = \"headline\";\n\t\t\tstyle.color = \"primaryContrast\"\n\t\t\tlayout.td = false;\n\t\t\tlayout.alignment = \"right\";\n\t\t}\n\t\tif (e.type === \"decimal\") {\n\t\t\treturn <Field\n\t\t\t\tstyle={style}\n\t\t\t\tvalidate={{ min: 1, max: 10, type: \"decimalGrade\", notEmpty: true }}\n\t\t\t\tlayout={layout}\n\t\t\t\tlabel=\"Beoordeling\"\n\t\t\t\tname={e.userId}\n\t\t\t\tvalue={e.assesment ? e.assesment : \"\"}\n\t\t\t\teditable={this.props.editable}\n\t\t\t\tonChange={this.props.onChange}\n\t\t\t/>\n\t\t} else {\n\t\t\treturn <Field\n\t\t\t\tstyle={style}\n\t\t\t\tname={e.userId}\n\t\t\t\tlabel=\"Beoordeling\"\n\t\t\t\tlayout={layout}\n\t\t\t\tvalue={e.assesment ? e.assesment : \"\"}\n\t\t\t\toptions={EVALUATION_FORMATS.filter(f => f.value === e.type)[0].options}\n\t\t\t\teditable={this.props.editable}\n\t\t\t\tonChange={this.props.onChange}\n\t\t\t/>\n\t\t}\n\t}\n\n}\n\n\nclass EvaluationTab extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tsortValue: \"\",\n\t\t\tsortDirection: \"\",\n\t\t}\n\t}\n\n\tonSortChange = (value) => {\n\t\tthis.setState({\n\t\t\tsortValue: value,\n\t\t\tsortDirection: this.state.sortDirection === \"desc\" && this.state.sortValue === value ? \"asc\" : \"desc\"\n\t\t});\n\t}\n\n\thandleSingleChange = (newEv) => {\n\t\tlet newEvaluations = this.props.evaluations.map((e) => {\n\t\t\tif (e.userId === newEv.userId) {\n\t\t\t\treturn newEv;\n\t\t\t} else {\n\t\t\t\treturn { ...e }\n\t\t\t}\n\t\t});\n\t\tthis.props.handleChange(newEvaluations);\n\t}\n\n\thandleEvaluationTypeChange(newValue) {\n\t\tlet newEvaluations = [];\n\t\tfor (let i = 0; i < this.props.evaluations.length; i++) {\n\t\t\tnewEvaluations.push({\n\t\t\t\t...this.props.evaluations[i],\n\t\t\t\ttype: newValue,\n\t\t\t});\n\t\t\tthis.props.handleChange(newEvaluations);\n\t\t}\n\t}\n\n\tsortEvaluations = () => {\n\t\tlet evaluations = this.props.evaluations;\n\t\tconst sortValue = this.state.sortValue;\n\t\tlet sortDirection = this.state.sortDirection === \"asc\" ? \"asc\" : \"desc\";\n\n\t\tif (sortValue === \"name\") {\n\t\t\tevaluations.sort((a, b) => {\n\t\t\t\tlet cmp = b.displayName < a.displayName;\n\t\t\t\treturn sortDirection === \"asc\" ? cmp : -cmp;\n\t\t\t})\n\t\t} else if (sortValue === \"evaluations\") {\n\t\t\tevaluations.sort((a, b) => {\n\t\t\t\ta = a[\"assesment\"];\n\t\t\t\tb = b[\"assesment\"];\n\t\t\t\tlet cmp = (b === null) - (a == null) || +(a > b) || -(a < b);\n\t\t\t\treturn sortDirection === \"asc\" ? cmp : -cmp;\n\t\t\t})\n\t\t}\n\t\treturn evaluations;\n\t}\n\n\trender() {\n\t\tlet sortValue = this.state.sortValue;\n\t\tlet sortDirection = this.state.sortDirection === \"asc\" ? \"asc\" : \"desc\";\n\t\tconst style = {\n\t\t\tmarginTop: \"10px\",\n\t\t\talignItems: \"center\",\n\t\t\tpaddingRight: \"15px\",\n\t\t\tpaddingLeft: \"15px\",\n\t\t\tdisplay: \"flex\",\n\t\t};\n\t\tconst evaluations = this.props.evaluations;\n\t\tif (evaluations.length === 0) {\n\t\t\treturn \"Er zijn nog geen beoordelingen beschikbaar\";\n\t\t}\n\t\tconst evComps = this.sortEvaluations()\n\t\t\t.map(ev => {\n\t\t\t\treturn (\n\t\t\t\t\t<Paper style={style} key={ev.userId} component=\"tr\">\n\t\t\t\t\t\t<Field style={{ type: \"title\", color: \"primary\", flex: 2 }} value={ev.displayName} layout={{ td: true }} />\n\t\t\t\t\t\t<Evaluation\n\t\t\t\t\t\t\teditable={this.props.editable}\n\t\t\t\t\t\t\tevaluation={ev}\n\t\t\t\t\t\t\tonChange={(assesment) => this.handleSingleChange({ ...ev, assesment })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tstyle={{ underline: false, flex: 5 }}\n\t\t\t\t\t\t\tlayout={{ area: true, td: true }}\n\t\t\t\t\t\t\tlabel={\"Uitleg\"}\n\t\t\t\t\t\t\tname={ev.userId}\n\t\t\t\t\t\t\tvalue={ev.explanation}\n\t\t\t\t\t\t\teditable={this.props.editable}\n\t\t\t\t\t\t\tonChange={(explanation) => this.handleSingleChange({ ...ev, explanation })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Paper >\n\t\t\t\t);\n\t\t\t});\n\n\t\treturn (\n\t\t\t<EnsureSecureLogin active={this.props.editable}>\n\t\t\t\t<table style={{ width: \"100%\" }}>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<Paper style={{ ...style, backgroundColor: \"#e0e0e0\" }} component=\"tr\">\n\t\t\t\t\t\t\t<td style={{ paddingLeft: \"15px\" }}>\n\t\t\t\t\t\t\t\t<Typography type=\"title\" color=\"primary\" style={{ padding: \"5px 0\" }} >\n\t\t\t\t\t\t\t\t\t<Tooltip title=\"Sorteer\" enterDelay={300} placement=\"bottom-start\">\n\t\t\t\t\t\t\t\t\t\t<TableSortLabel\n\t\t\t\t\t\t\t\t\t\t\tactive={sortValue === \"evaluations\"}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.onSortChange(\"evaluations\")}\n\t\t\t\t\t\t\t\t\t\t\tdirection={sortDirection}\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ color: \"inherit\", fontSize: \"1.5rem\", }}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tBeoordelingen\n\t\t\t\t\t\t\t\t\t</TableSortLabel>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Tooltip title=\"Sorteer\" enterDelay={300} placement=\"bottom-start\">\n\t\t\t\t\t\t\t\t\t\t<TableSortLabel\n\t\t\t\t\t\t\t\t\t\t\tactive={sortValue === \"name\"}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.onSortChange(\"name\")}\n\t\t\t\t\t\t\t\t\t\t\tdirection={sortDirection}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tNaam\n\t\t\t\t\t\t\t\t\t\t</TableSortLabel>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td style={{ flex: \"5\" }} />\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\tlabel=\"Beoordelingsformaat\"\n\t\t\t\t\t\t\t\t\tstyle={{ type: \"caption\", underline: false, margin: \"normal\", labelVisible: true }}\n\t\t\t\t\t\t\t\t\tlayout={{ alignment: \"right\" }}\n\t\t\t\t\t\t\t\t\tvalue={evaluations[0].type}\n\t\t\t\t\t\t\t\t\toptions={EVALUATION_FORMATS}\n\t\t\t\t\t\t\t\t\teditable={this.props.editable}\n\t\t\t\t\t\t\t\t\tonChange={this.handleEvaluationTypeChange.bind(this)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</Paper >\n\t\t\t\t\t\t{evComps}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table >\n\t\t\t</EnsureSecureLogin>\n\t\t);\n\t}\n\n}\n\nexport { Evaluation, EvaluationTab, getEvaluationColor };","import { Typography, Button, Paper, Badge } from \"@material-ui/core\";\nimport React, { Component } from \"react\";\nimport { withRouter } from \"react-router\";\nimport Field from \"../../components/Field\";\nimport ChooseButton from \"./ChooseButton\";\nimport { Evaluation, getEvaluationColor } from \"./Evaluation\";\nimport \"./GroupCard.css\";\n\nclass GroupCard extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      hover: false\n    };\n  }\n\n  expand() {\n    this.props.history.push(\"/groep/\" + this.props.group.id);\n  }\n\n  getBottomSection() {\n    if (\n      this.props.group.evaluation &&\n      this.props.group.evaluation.assesment !== \"\" &&\n      this.props.group.evaluation.assesment !== null\n    ) {\n      return (\n        <div\n          className=\"footer\"\n          style={{\n            backgroundColor: getEvaluationColor(this.props.group.evaluation)\n          }}\n        >\n          <Field value=\"Beoordeling\" style={{ type: \"title\", flex: 2 }} />\n          <Evaluation evaluation={this.props.group.evaluation} student />\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"footer\">\n          <Button color=\"secondary\" onClick={this.expand.bind(this)}>\n            Bekijken\n          </Button>\n          {this.props.role === \"student\" && (\n            <ChooseButton group={this.props.group} />\n          )}\n        </div>\n      );\n    }\n  }\n\n  render() {\n    const group = this.props.group;\n    return (\n      <div className=\"GroupCard\">\n        <Paper\n          elevation={this.state.hover ? 4 : 2}\n          onMouseEnter={() => this.setState({ hover: true })}\n          onMouseLeave={() => this.setState({ hover: false })}\n        >\n          <Badge\n            color=\"secondary\"\n            invisible={this.props.schoolYear === group.schoolYear}\n            badgeContent={group.schoolYear}\n          >\n            <div className=\"GroupCardInside\">\n              <Typography\n                variant=\"caption\"\n                color=\"primary\"\n                style={{\n                  overflow: \"hidden\",\n                  maxHeight: \"65px\",\n                  cursor: \"pointer\"\n                }}\n                onClick={() => {\n                  this.props.history.push(\"/groep/\" + group.id);\n                }}\n              >\n                {group.subjectName +\n                  \" - #M\" +\n                  (group.courseId + \"\").padStart(4, \"0\")}\n              </Typography>\n              <Typography\n                variant=\"h1\"\n                style={{\n                  overflow: \"hidden\",\n                  height: \"64px\",\n                  cursor: \"pointer\",\n                  textTransform: \"uppercase\",\n                  fontSize: \"24px\"\n                }}\n                onClick={() => {\n                  this.props.history.push(\"/groep/\" + group.id);\n                }}\n              >\n                {group.courseName}\n              </Typography>\n              <div>\n                <Typography\n                  style={{\n                    display: \"inline-block\",\n                    fontWeight: \"bold\",\n                    float: \"right\"\n                  }}\n                >\n                  {\"Blok \" + group.period + \" - \" + group.day}\n                </Typography>\n                <Typography\n                  style={{ display: \"inline-block\", fontWeight: \"bold\" }}\n                >\n                  {group.enrollableFor || \"Iedereen\"}\n                </Typography>\n              </div>\n              {group.evaluation ? (\n                <Typography\n                  style={{ maxHeight: \"164px\", overflow: \"hidden\" }}\n                  gutterBottom\n                >\n                  <b>Uitleg beoordeling: </b>\n                  {group.evaluation.explanation}\n                </Typography>\n              ) : (\n                <Typography\n                  style={{ maxHeight: \"164px\", overflow: \"hidden\" }}\n                  gutterBottom\n                >\n                  {group.courseDescription}\n                </Typography>\n              )}\n              {this.getBottomSection()}\n            </div>\n          </Badge>\n        </Paper>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(GroupCard);\n","import React, { Component } from 'react';\nimport { withRouter } from 'react-router';\n\nimport Paper from '@material-ui/core/Paper';\nimport { Typography } from '@material-ui/core';\n\nclass GroupCard extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\thover: false,\n\t\t\tstyle: {\n\t\t\t\twidth: \"100%\",\n\t\t\t\theight: \"auto\",\n\t\t\t\tmargin: \"0px\",\n\t\t\t\tpadding: \"10px\",\n\t\t\t},\n\t\t}\n\t}\n\n\tformatPhoneNumber(number) {\n\t\tif (number == null) {\n\t\t\tnumber = \"\";\n\t\t}\n\t\tlet numberWithoutCharacters = number.replace(/\\D/g, '');\n\t\tif (numberWithoutCharacters.length === 10) { // Either 06... or regional i.e. 024 ...\n\t\t\tif (numberWithoutCharacters[1] === \"6\") { // 06...\n\t\t\t\treturn (numberWithoutCharacters.substr(0, 2) + \" \" + numberWithoutCharacters.substr(2, 8));\n\t\t\t} else { // 024 ...\n\t\t\t\treturn (numberWithoutCharacters.substr(0, 3) + \" \" + numberWithoutCharacters.substr(3, 7));\n\t\t\t}\n\t\t}\n\t\tconst mobileTest = /(0031|31)0?(6)?([0-9]+)$/gm;\n\t\tconst match = mobileTest.exec(numberWithoutCharacters);\n\t\tif (match) {\n\t\t\tif (match[2]) { // +31 06 \n\t\t\t\treturn \"+31 06 \" + match[3];\n\t\t\t} else { // +31 ...\n\t\t\t\treturn \"+31 \" + match[3];\n\t\t\t}\n\t\t} else {\n\t\t\treturn number; // return input if unrecognizable \n\t\t}\n\t}\n\n\texpand() {\n\t\tthis.props.history.push(\"/user/\" + this.props.user.id)\n\t}\n\n\trender() {\n\t\tlet user = { ...this.props.user };\n\t\tlet style = { ...this.state.style };\n\t\treturn (\n\t\t\t<tr key={user.id}>\n\t\t\t\t<Paper\n\t\t\t\t\televation={this.state.hover ? 2 : 1}\n\t\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\n\t\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\n\t\t\t\t\tcomponent=\"td\"\n\t\t\t\t\tstyle={style}\n\t\t\t\t>\n\t\t\t\t\t<div style={{\n\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\tjustifyContent: \"space-between\"\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<Typography variant=\"button\" color={user.role === \"teacher\" ? \"secondary\" : \"primary\"} style={{ flex: 1 }} >\n\t\t\t\t\t\t\t{user.firstName + \" \" + user.lastName}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Typography variant=\"subtitle1\" style={{ flex: 1 }} >\n\t\t\t\t\t\t\t{user.school}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\n\t\t\t\t\t\t\t{user.level + \" - \" + user.year}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\n\t\t\t\t\t\t\t{user.role === \"teacher\" ? \"docent\" : \"leerling\"}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\n\t\t\t\t\t\t\t{user.profile}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</div>\n\t\t\t\t\t{this.props.role === \"admin\" &&\n\t\t\t\t\t\t<div style={{\n\t\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\t\tjustifyContent: \"space-between\"\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\n\t\t\t\t\t\t\t\t{user.email}\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\n\t\t\t\t\t\t\t\t{user.preferedEmail}\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t<div style={{ flex: 1 }} />\n\t\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\n\t\t\t\t\t\t\t\t{this.formatPhoneNumber(user.phoneNumber)}\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\n\t\t\t\t\t\t\t\t{user.id}\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t{this.props.children}\n\t\t\t\t</Paper >\n\t\t\t</tr>\n\t\t);\n\t}\n}\n\n\nexport default withRouter(GroupCard);\n\n","import React, { Component } from 'react';\nimport Page from '../Page';\nimport Divider from '@material-ui/core/Divider';\nimport Button from '@material-ui/core/Button';\nimport { connect } from 'react-redux';\nimport { setUser, isUserMissingInfo } from '../../store/actions';\nimport Field from '../../components/Field';\nimport Typography from '@material-ui/core/Typography';\n\nconst profiles = [\"Geen Profiel\", \"NT\", \"NG\", \"CM\", \"EM\", \"NT&NG\", \"EM&CM\"];\nconst levels = [\"VWO\", \"HAVO\", \"VMBO\"];\n\nclass UserPage extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tuser: this.props.user,\n\t\t};\n\t}\n\n\thandleChange = (name, value) => {\n\t\tthis.setState({\n\t\t\tuser: {\n\t\t\t\t...this.state.user,\n\t\t\t\t[name]: value,\n\t\t\t}\n\t\t});\n\t}\n\n\thasChanged() {\n\t\treturn JSON.stringify(this.props.user) !== JSON.stringify(this.state.user)\n\t}\n\n\trender() {\n\t\tlet user = null;\n\t\tif (this.props.user.id !== this.state.user.id) {\n\t\t\tthis.setState({\n\t\t\t\tuser: this.props.user,\n\t\t\t});\n\t\t\tuser = this.props.user;\n\t\t} else {\n\t\t\tuser = this.state.user;\n\t\t}\n\t\tconst shouldFillIn = this.props.ownProfile && (isUserMissingInfo(user) !== false);\n\t\treturn (\n\t\t\t<Page>\n\t\t\t\t<Field\n\t\t\t\t\tlabel=\"Naam\"\n\t\t\t\t\tvalue={user.displayName}\n\t\t\t\t\tstyle={{ type: \"headline\" }}\n\t\t\t\t/>\n\t\t\t\t<Field\n\t\t\t\t\tlabel=\"Rol\"\n\t\t\t\t\tlayout={{ alignment: \"right\" }}\n\t\t\t\t\tvalue={user.role}\n\t\t\t\t/>\n\t\t\t\t<Divider />\n\t\t\t\t<br />\n\t\t\t\t<div style={{ display: \"flex\" }} >\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlabel=\"Leerjaar\"\n\t\t\t\t\t\tvalue={user.year}\n\t\t\t\t\t\tstyle={{ margin: \"normal\" }}\n\t\t\t\t\t\teditable={this.props.ownProfile}\n\t\t\t\t\t\tonChange={(value) => this.handleChange(\"year\", value)}\n\t\t\t\t\t\tvalidate={{\n\t\t\t\t\t\t\ttype: \"integer\",\n\t\t\t\t\t\t\tmin: 1,\n\t\t\t\t\t\t\tmax: 6,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlabel=\"Opleidingsniveau\"\n\t\t\t\t\t\tvalue={user.level}\n\t\t\t\t\t\teditable={this.props.ownProfile}\n\t\t\t\t\t\tonChange={(value) => this.handleChange(\"level\", value)}\n\t\t\t\t\t\toptions={levels}\n\t\t\t\t\t\tvalidate={{ notEmpty: true, }}\n\t\t\t\t\t/>\n\t\t\t\t\t{this.props.ownProfile &&\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tlabel=\"Profiel\"\n\t\t\t\t\t\t\tvalue={user.profile}\n\t\t\t\t\t\t\teditable={this.props.ownProfile}\n\t\t\t\t\t\t\toptions={profiles}\n\t\t\t\t\t\t\tonChange={(value) => this.handleChange(\"profile\", value)}\n\t\t\t\t\t\t\tvalidate={{ notEmpty: true }}\n\t\t\t\t\t\t/>}\n\t\t\t\t</div>\n\t\t\t\t<div style={{ display: \"flex\" }} >\n\t\t\t\t\t{this.props.ownProfile && <Field\n\t\t\t\t\t\tlabel=\"Voorkeurs email\"\n\t\t\t\t\t\tvalue={user.preferedEmail}\n\t\t\t\t\t\teditable={this.props.ownProfile}\n\t\t\t\t\t\tonChange={(value) => this.handleChange(\"preferedEmail\", value)}\n\t\t\t\t\t\tvalidate={{ type: \"email\" }}\n\t\t\t\t\t/>}\n\t\t\t\t\t{this.props.ownProfile && <Field\n\t\t\t\t\t\tlabel=\"Telefoonnummer\"\n\t\t\t\t\t\tvalue={user.phoneNumber}\n\t\t\t\t\t\teditable={this.props.ownProfile}\n\t\t\t\t\t\tonChange={(value) => this.handleChange(\"phoneNumber\", value)}\n\t\t\t\t\t\tvalidate={{ type: \"phoneNumber\" }}\n\t\t\t\t\t/>}\n\t\t\t\t</div>\n\t\t\t\t<br />\n\t\t\t\t{\n\t\t\t\t\tshouldFillIn &&\n\t\t\t\t\t<Typography gutterBottom variant=\"button\" color=\"secondary\" >\n\t\t\t\t\t\tControleer de bovenstaande gegevens en vul de ontbrekende gegevens aan.\n\t\t\t\t\t</Typography>\n\t\t\t\t}\n\t\t\t\t<br />\n\t\t\t\t<br />\n\t\t\t\t{\n\t\t\t\t\tthis.hasChanged() &&\n\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" size=\"large\" onClick={() => this.props.save(this.state.user)}>\n\t\t\t\t\t\tOpslaan\n\t\t\t\t\t</Button>\n\t\t\t\t}\n\t\t\t</Page >\n\t\t);\n\t}\n}\n\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tsave: (user) => dispatch(setUser(user)),\n\t};\n}\n\n\nexport default connect(null, mapDispatchToProps)(UserPage);\n\n","import React, { Component } from 'react';\nimport { withRouter } from 'react-router';\n\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\n\nconst CARD_STYLE = {\n\twidth: \"300px\",\n\theight: \"80px\",\n\tpadding: \"20px\",\n\tverticalAlign: \"top\",\n\tmargin: \"20px\",\n\tdisplay: \"inline-block\",\n\tcursor: \"pointer\",\n}\n\nclass GroupCard extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\thover: false,\n\t\t\tstyle: {\n\t\t\t\t...CARD_STYLE,\n\t\t\t\t...this.props.style,\n\t\t\t}\n\t\t}\n\t}\n\n\texpand() {\n\t\tthis.props.history.push(\"/gebruiker/\" + this.props.user.id)\n\t}\n\n\trender() {\n\t\tconst user = this.props.user;\n\t\treturn (\n\t\t\t<Paper\n\t\t\t\televation={this.state.hover ? 4 : 2}\n\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\n\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\n\t\t\t\tstyle={this.state.style}\n\t\t\t>\n\t\t\t\t<Typography variant=\"button\" color={user.role === \"teacher\" ? \"secondary\" : \"primary\"} >\n\t\t\t\t\t{user.firstName + \" \" + user.lastName}\n\t\t\t\t</Typography>\n\t\t\t\t<Typography variant=\"subtitle1\">\n\t\t\t\t\t{(user.role === \"teacher\" ? \"docent\" : \"leerling\") + \"\\t\" + user.school}\n\t\t\t\t</Typography>\n\t\t\t</Paper >\n\t\t);\n\t}\n\n\n}\n\n\nexport default withRouter(GroupCard);\n\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport UserRow from \"./UserRow\";\nimport UserPage from \"./UserPage\";\nimport UserCard from \"./UserCard\";\nimport { setSecureLogin, getCookie } from \"../../store/actions\"\n\nimport { withRouter } from 'react-router-dom';\nimport Progress from '../../components/Progress'\nimport Field from \"../../components/Field\"\nimport queryString from \"query-string\";\nimport { Button } from \"@material-ui/core\";\n\nclass User extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\t}\n\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\n\t\tlet s = queryString.parse(nextProps.location.search);\n\t\tif (s.secureLogin != null && s.secureLogin !== \"undefined\") {\n\t\t\tnextProps.setSecureLogin(s.secureLogin);\n\t\t}\n\t\tif (s.from === \"login\" && nextProps.user != null && nextProps.role !== \"student\") {\n\t\t\tconst beforeLoginPath = getCookie(\"beforeLoginPath\");\n\t\t\tnextProps.history.push(beforeLoginPath);\n\t\t}\n\t\treturn prevState;\n\t}\n\n\trender() {\n\t\tif (this.props.user == null) {\n\t\t\tif (this.props.display === \"page\") {\n\t\t\t\tif (this.props.notExists) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"page\">\n\t\t\t\t\t\t\tDe opgevraagde gebruiker bestaat niet\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"page\">\n\t\t\t\t\t\t\t<Progress />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this.props.notExists) {\n\t\t\t\t\treturn null;\n\t\t\t\t} else {\n\t\t\t\t\treturn <Progress />;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tswitch (this.props.display) {\n\t\t\tcase \"name\":\n\t\t\t\treturn <Field value={this.props.user.displayName} style={{ type: \"title\", width: \"auto\", }} layout={{ td: true }} />;\n\t\t\tcase \"page\":\n\t\t\t\treturn (\n\t\t\t\t\t<UserPage {...this.props} />\n\t\t\t\t);\n\t\t\tcase \"row\":\n\t\t\t\treturn (\n\t\t\t\t\t<UserRow {...this.props}>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.props.actions &&\n\t\t\t\t\t\t\tthis.props.actions.map(action => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Button onClick={() => action.onClick(this.props.userId)} variant=\"contained\" color=\"primary\" style={{ marginRight: \"10px\" }} >\n\t\t\t\t\t\t\t\t\t\t{action.label}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</UserRow>\n\t\t\t\t);\n\t\t\tcase \"card\":\n\t\t\tdefault:\n\t\t\t\treturn (\n\t\t\t\t\t<UserCard {...this.props} />\n\t\t\t\t);\n\t\t}\n\t}\n}\n\n\nfunction mapStateToProps(state, ownProps) {\n\tlet id = ownProps.match.params.userId || ownProps.userId;\n\tlet display = ownProps.display || \"page\";\n\n\tlet notExists = false;\n\tlet user = null;\n\n\tif (id == null) {\n\t\tid = state.userId;\n\t}\n\n\tif (state.users == null || state.users[id] == null) {\n\t\tif (id == null || state.hasFetched.indexOf(\"User.get(\" + id + \")\") !== -1) {\n\t\t\tnotExists = true;\n\t\t}\n\t} else {\n\t\tuser = state.users[id];\n\t}\n\n\treturn {\n\t\trole: state.role,\n\t\tuser,\n\t\tnotExists,\n\t\tdisplay,\n\t\tuserId: id,\n\t\townProfile: (\"\" + id) === (\"\" + state.userId),\n\t}\n}\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tsetSecureLogin: (secureLogin) => dispatch(setSecureLogin(secureLogin)),\n\t};\n}\n\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(User));\n","import React, { Component } from 'react';\nimport map from \"lodash/map\"\nimport filter from \"lodash/filter\"\nimport User from \"../user/User\"\nimport Field from \"../../components/Field\"\nimport { Paper } from '@material-ui/core';\n\nclass PresenceTable extends Component {\n\n\tcreatePresenceComponent(presence, i) {\n\t\tlet options = [{ label: \"Actief\", value: \"present\" },\n\t\t{ label: \"Niet actief\", value: \"absent\" }];\n\t\tif (!this.props.editable && presence.userStatus === \"absent\") {\n\t\t\toptions[0].label = \"Afgemeld\";\n\t\t\toptions[1].label = \"Afgemeld\";\n\t\t}\n\t\treturn <Field\n\t\t\tkey={i}\n\t\t\tvalue={presence.status}\n\t\t\toptions={options}\n\t\t\tlabel={presence.userStatus === \"absent\" ? \"afgemeld\" : undefined}\n\t\t\tlayout={{ td: true, area: true }}\n\t\t\teditable={this.props.editable}\n\t\t\tonChange={(status) => {\n\t\t\t\tthis.props.handleChange({\n\t\t\t\t\t...presence,\n\t\t\t\t\tstatus,\n\t\t\t\t});\n\t\t\t}}\n\t\t/>;\n\t}\n\n\tcreateRow = (participantId) => {\n\t\tconst content = map(this.props.lessons, ((lesson, i) => {\n\t\t\tconst p = filter(this.props.presence, presence => {\n\t\t\t\treturn presence.lessonId === lesson.id && presence.userId === participantId;\n\t\t\t});\n\t\t\tif (p.length === 1) {\n\t\t\t\treturn this.createPresenceComponent(p[0], i);\n\t\t\t} else {\n\t\t\t\treturn this.createPresenceComponent({\n\t\t\t\t\tid: Math.floor(-Math.random() * 100000),\n\t\t\t\t\tlessonId: lesson.id,\n\t\t\t\t\tuserId: participantId,\n\t\t\t\t\tstatus: \"present\",\n\t\t\t\t}, i);\n\t\t\t}\n\t\t}));\n\n\t\treturn (\n\t\t\t<Paper component=\"tr\" elevation={1} key={\"p\" + participantId}>\n\t\t\t\t<User key={participantId} userId={participantId} display=\"name\" />\n\t\t\t\t{content}\n\t\t\t</Paper>\n\t\t);\n\t}\n\n\tcreateLessonHeader = (lesson) => {\n\t\tconst content = map(this.props.lessons, lesson => {\n\t\t\treturn <Field value={\"Les \" + lesson.numberInBlock} key={lesson.id} style={{ type: \"title\" }} layout={{ td: true, area: true }} />;\n\t\t});\n\t\treturn (\n\t\t\t<Paper component=\"tr\" elevation={2} key={\"l\" + lesson} style={{ backgroundColor: \"#e0e0e0\" }} >\n\t\t\t\t<Field value=\"\" layout={{ td: true, area: true }} />\n\t\t\t\t{content}\n\t\t\t</Paper>\n\t\t);\n\t}\n\n\trender() {\n\t\tlet rows = this.props.participantIds.map(this.createRow);\n\t\trows.unshift(this.createLessonHeader());\n\t\treturn <table>\n\t\t\t<tbody>\n\t\t\t\t{rows}\n\t\t\t</tbody>\n\t\t</table>;\n\t}\n\n}\n\nexport default PresenceTable;","import React, { Component } from 'react';\n\nimport Paper from '@material-ui/core/Paper';\nimport Field from '../../components/Field';\nimport { Button } from '@material-ui/core';\nimport { setPresenceUserStatus } from \"../../store/actions\";\nimport { connect } from \"react-redux\";\n\nclass Lesson extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\thover: false,\n\t\t\tstyle: {\n\t\t\t\twidth: \"100%\",\n\t\t\t\theight: \"auto\",\n\t\t\t\tmarginTop: \"10px\",\n\t\t\t\tmarginBottom: \"10px\",\n\t\t\t\tpadding: \"2px\",\n\t\t\t\tdisplay: \"flex\",\n\t\t\t\talignItems: \"start\",\n\t\t\t\tposition: \"relative\",\n\t\t\t},\n\t\t}\n\t}\n\n\tgetWeekdayString(number) {\n\t\treturn [\"zondag\", \"maandag\", \"dinsdag\", \"woensdag\", \"donderdag\", \"vrijdag\", \"zaterdag\"][number];\n\t}\n\n\tgetOptOutButton() {\n\t\tif (this.props.lesson.userStatus === \"absent\") {\n\t\t\treturn < div style={{ flex: 1 }}>\n\t\t\t\t<Button\n\t\t\t\t\tstyle={{ width: \"70px\", float: \"right\" }}\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tmini\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tonClick={() => this.props.setPresenceUserStatus(this.props.lesson.id, \"present\", this.props.lesson.courseGroupId)}\n\t\t\t\t>\n\t\t\t\t\tAanmelden\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t}\n\t\treturn < div style={{ flex: 1 }}>\n\t\t\t<Button\n\t\t\t\tstyle={{ width: \"70px\", float: \"right\" }}\n\t\t\t\tsize=\"small\"\n\t\t\t\tmini\n\t\t\t\tcolor=\"secondary\"\n\t\t\t\tonClick={() => this.props.setPresenceUserStatus(this.props.lesson.id, \"absent\", this.props.lesson.courseGroupId)}\n\t\t\t>\n\t\t\t\tAfmelden\n\t\t\t</Button>\n\t\t</div>\n\t}\n\n\n\thandleChange = (name, value) => {\n\t\tthis.props.handleChange({\n\t\t\t...this.props.lesson,\n\t\t\t[name]: value,\n\t\t});\n\t}\n\n\n\trender() {\n\t\tconst lesson = this.props.lesson;\n\t\tif (lesson.id === -1) {\n\t\t\treturn (\n\t\t\t\t<Paper\n\t\t\t\t\televation={this.state.hover ? 2 : 1}\n\t\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\n\t\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\n\t\t\t\t\tcomponent=\"tr\"\n\t\t\t\t\tstyle={{ backgroundColor: \"#e0e0e0\" }}\n\t\t\t\t>\n\t\t\t\t\t<td style={{ display: \"flex\", flexDirection: \"column\" }}>\n\t\t\t\t\t\t<Field style={{ fontWeight: \"bold\" }} value=\"Lesnummer\" />\n\t\t\t\t\t\t<Field style={{ fontWeight: \"bold\" }} value=\"Soort les\" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<Field style={{ flex: 4, fontWeight: \"bold\" }} value=\"Onderwerp\" layout={{ td: true }} />\n\t\t\t\t\t<Field style={{ flex: 8, fontWeight: \"bold\" }} value=\"Activiteiten\" layout={{ td: true }} />\n\t\t\t\t\t<td style={{ display: \"flex\", flexDirection: \"column\" }}>\n\t\t\t\t\t\t<Field style={{ fontWeight: \"bold\" }} value=\"Datum\" layout={{ alignment: \"right\" }} />\n\t\t\t\t\t\t<Field style={{ fontWeight: \"bold\" }} value=\"Aanwezigheid\" layout={{ alignment: \"right\" }} />\n\t\t\t\t\t</td>\n\t\t\t\t</Paper>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<Paper\n\t\t\t\televation={this.state.hover ? 2 : 1}\n\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\n\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\n\t\t\t\tcomponent=\"tr\"\n\t\t\t>\n\t\t\t\t<td style={{ display: \"flex\", flexDirection: \"column\" }}>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tlayout={{ area: true }}\n\t\t\t\t\t\tstyle={{ fontWeight: \"bold\" }}\n\t\t\t\t\t\tvalue={\"Les \" + lesson.numberInBlock}\n\t\t\t\t\t/>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlabel=\"Soort les\"\n\t\t\t\t\t\tlayout={{ area: true }}\n\t\t\t\t\t\tvalue={lesson.kind}\n\t\t\t\t\t\teditable={this.props.editable}\n\t\t\t\t\t\tonChange={(value) => this.handleChange(\"kind\", value)}\n\t\t\t\t\t/>\n\t\t\t\t</td>\n\t\t\t\t<Field\n\t\t\t\t\tlabel=\"Onderwerp\"\n\t\t\t\t\tstyle={{ flex: 4 }}\n\t\t\t\t\tvalue={lesson.subject}\n\t\t\t\t\teditable={this.props.editable}\n\t\t\t\t\tonChange={(value) => this.handleChange(\"subject\", value)}\n\t\t\t\t\tlayout={{ td: true, area: true }}\n\t\t\t\t/>\n\t\t\t\t<Field\n\t\t\t\t\tlabel=\"Activiteiten\"\n\t\t\t\t\tstyle={{ flex: 8 }}\n\t\t\t\t\tvalue={lesson.activities}\n\t\t\t\t\teditable={this.props.editable}\n\t\t\t\t\tonChange={(value) => this.handleChange(\"activities\", value)}\n\t\t\t\t\tlayout={{ td: true, area: true }}\n\t\t\t\t/>\n\t\t\t\t<td style={{ display: \"flex\", flexDirection: \"column\" }}>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlayout={{ alignment: \"right\" }}\n\t\t\t\t\t\tvalue={this.getWeekdayString(new Date(lesson.date).getDay()) + \" \" + new Date(lesson.date).getDate() + \"-\" + (new Date(lesson.date).getMonth() + 1) + \"-\" + new Date(lesson.date).getFullYear()}\n\t\t\t\t\t/>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlabel=\"Aanwezigheid\"\n\t\t\t\t\t\tstyle={{ labelVisible: true }}\n\t\t\t\t\t\tlayout={{ alignment: \"right\" }}\n\t\t\t\t\t\tvalue={lesson.presence}\n\t\t\t\t\t\teditable={this.props.editable}\n\t\t\t\t\t\tonChange={(value) => this.handleChange(\"presence\", value)}\n\t\t\t\t\t\toptions={[{ label: \"Noodzakelijk\", value: \"required\" }, { label: \"Eigen keuze\", value: \"optional\" }, { label: \"Geen bijeenkomst\", value: \"unrequired\" }]}\n\t\t\t\t\t/>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.userIsMemberOfGroup && this.props.role === \"student\" ? this.getOptOutButton() : null\n\t\t\t\t\t}\n\t\t\t\t</td>\n\t\t\t</Paper >\n\t\t);\n\t}\n\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tsetPresenceUserStatus: (lessonId, userStatus, groupId) => dispatch(setPresenceUserStatus(lessonId, userStatus, groupId)),\n\t};\n}\n\nexport default connect(null, mapDispatchToProps)(Lesson);\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Typography, Tooltip, TableSortLabel, Paper } from \"@material-ui/core\";\nimport User from \"./User\";\n\nclass UserList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hover: false,\n      style: {\n        width: \"100%\",\n        height: \"auto\",\n        margin: \"0px\",\n        padding: \"10px\",\n        backgroundColor: \"#e0e0e0\"\n      },\n      sortValue: \"\",\n      sortDirection: \"\"\n    };\n  }\n\n  onSortChange = value => {\n    this.setState({\n      sortValue: value,\n      sortDirection:\n        this.state.sortDirection === \"desc\" && this.state.sortValue === value\n          ? \"asc\"\n          : \"desc\"\n    });\n  };\n\n  headerTitle(variant, value, title) {\n    let sortValue = this.state.sortValue;\n    let sortDirection = this.state.sortDirection === \"asc\" ? \"asc\" : \"desc\";\n    return (\n      <Typography\n        variant={variant}\n        color={variant === \"button\" ? \"primary\" : \"initial\"}\n        style={{ flex: 1 }}\n      >\n        <Tooltip title=\"Sorteer\" enterDelay={300} placement=\"bottom-start\">\n          <TableSortLabel\n            active={sortValue === value}\n            direction={sortDirection}\n            onClick={() => this.onSortChange(value)}\n            style={{ color: \"inherit\" }}\n          >\n            {title}\n          </TableSortLabel>\n        </Tooltip>\n      </Typography>\n    );\n  }\n\n  getHeader = () => {\n    let style = { ...this.state.style };\n    return (\n      <tr key=\"header\">\n        <Paper\n          elevation={this.state.hover ? 2 : 1}\n          onMouseEnter={() => this.setState({ hover: true })}\n          onMouseLeave={() => this.setState({ hover: false })}\n          component=\"td\"\n          style={style}\n        >\n          <div\n            style={{\n              display: \"flex\",\n              justifyContent: \"space-between\"\n            }}\n          >\n            {this.headerTitle(\"button\", \"name\", \"Naam\")}\n            {this.headerTitle(\"subtitle1\", \"school\", \"School\")}\n            {this.headerTitle(\"body1\", \"levelAndYear\", \"Niveau - Leerjaar\")}\n            {this.headerTitle(\"body1\", \"role\", \"Rol\")}\n            {this.headerTitle(\"body1\", \"profile\", \"Profiel\")}\n          </div>\n          {this.props.role === \"admin\" && (\n            <div\n              style={{\n                display: \"flex\",\n                justifyContent: \"space-between\"\n              }}\n            >\n              {this.headerTitle(\"body1\", \"email\", \"Office Email\")}\n              {this.headerTitle(\"body1\", \"preferedEmail\", \"Voorkeurs email\")}\n              <div style={{ flex: 1 }} />\n              {this.headerTitle(\"body1\", \"phoneNumber\", \"Telefoonnummer\")}\n              {this.headerTitle(\"body1\", \"id\", \"Gebruikers ID\")}\n            </div>\n          )}\n        </Paper>\n      </tr>\n    );\n  };\n\n  sortIds = () => {\n    const value = this.state.sortValue;\n    const direction = this.state.sortDirection;\n    const users = this.props.users;\n    const userIds = this.props.userIds;\n    if (value === \"\") {\n      return userIds;\n    }\n    userIds.sort((a, b) => {\n      switch (value) {\n        case \"name\":\n          a = (users[a][\"firstName\"] + users[a][\"lastName\"]).toLowerCase();\n          b = (users[b][\"firstName\"] + users[b][\"lastName\"]).toLowerCase();\n          break;\n        case \"levelAndYear\":\n          a = (users[a][\"level\"] + users[a][\"year\"]).toString(); // to string because otherwise no level and year would result in a being an integer\n          b = (users[b][\"level\"] + users[b][\"year\"]).toString();\n          break;\n        default:\n          a = users[a][value];\n          b = users[b][value];\n      }\n      let cmp = (b == null) - (a == null) || +(a > b) || -(a < b);\n      return direction === \"asc\" ? cmp : -cmp;\n    });\n    return userIds;\n  };\n\n  render() {\n    const header = this.getHeader();\n    const users = this.sortIds().map(id => {\n      return (\n        <User key={id} userId={id} display=\"row\" actions={this.props.actions} />\n      );\n    });\n    return (\n      <table style={{ width: \"100%\" }}>\n        <tbody>\n          {header}\n          {users}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nfunction mapStateToProps(state, ownProps) {\n  return {\n    users: state.users,\n    role: state.role\n  };\n}\n\nexport default connect(mapStateToProps)(UserList);\n","import React, { Component } from 'react';\nimport { Prompt } from 'react-router-dom';\n\nclass PageLeaveWarning extends Component {\n\n\trender() {\n\t\tconst message = \"Weet je zeker dat u de pagina wilt verlaten? Er zijn nog niet-opgeslagen gegevens!\";\n\t\tif (this.props.giveWarning) {\n\t\t\twindow.onbeforeunload = function (e) {\n\t\t\t\te.returnValue = message;\n\t\t\t\treturn message;\n\t\t\t};\n\t\t} else {\n\t\t\twindow.onbeforeunload = null;\n\t\t}\n\t\treturn (\n\t\t\t<Prompt\n\t\t\t\twhen={this.props.giveWarning}\n\t\t\t\tmessage={location => message}\n\t\t\t/>\n\t\t);\n\t}\n\n}\n\nexport default PageLeaveWarning;","import React, { Component } from \"react\";\nimport map from \"lodash/map\";\n\nimport Field from \"../../components/Field\";\nimport User from \"../user/User\";\n\nimport { Divider, Button, Popover } from \"@material-ui/core\";\n\nclass GroupData extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  handleClickAway = () => {\n    this.setState({ anchorEl: null });\n  };\n\n  showTeacherCard = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n\n  render() {\n    const editable = this.props.editable;\n    const role = this.props.role;\n    const onChange = this.props.onChange;\n    let group = this.props.group;\n    const courseId = \"#M\" + (this.props.group.courseId + \"\").padStart(4, \"0\");\n\n    return (\n      <div style={{ position: \"relative\" }}>\n        <div style={{ display: \"flex\" }}>\n          <Field\n            value={group.courseName}\n            onChange={value => onChange(\"courseName\", value)}\n            editable={editable}\n            style={{ flex: \"5\", type: \"headline\" }}\n            validate={{ maxLength: 50 }}\n          />\n          <Field\n            value={group.subjectId}\n            onChange={value => onChange(\"subjectId\", value)}\n            layout={{ alignment: \"right\" }}\n            style={{ type: \"headline\" }}\n            editable={editable}\n            options={map(this.props.subjects, subject => {\n              return { value: subject.id, label: subject.name };\n            })}\n          />\n          {!editable && (\n            <Button\n              color=\"secondary\"\n              style={{\n                position: \"absolute\",\n                display: \"block\",\n                top: \"30px\",\n                right: \"-15px\",\n                zIndex: \"100\"\n              }}\n              onClick={this.showTeacherCard}\n            >\n              <div>{group.teacherName}</div>\n            </Button>\n          )}\n        </div>\n        <div\n          style={{ display: \"flex\" }}\n          className=\"ColumnFlexDirectionOnMobile\"\n        >\n          <div\n            style={{\n              width: \"30%\",\n              paddingRight: \"15px\"\n            }}\n          >\n            <div>\n              <Field\n                value={group.period}\n                onChange={value => onChange(\"period\", value)}\n                editable={editable && role === \"admin\"}\n                style={{ width: \"100px\", type: \"caption\" }}\n                options={[\n                  { label: \"Blok 1\", value: 1 },\n                  { label: \"Blok 2\", value: 2 },\n                  { label: \"Blok 3\", value: 3 },\n                  { label: \"Blok 4\", value: 4 }\n                ]}\n              />\n              <Field\n                value={group.day}\n                onChange={value => onChange(\"day\", value)}\n                editable={editable && role === \"admin\"}\n                style={{ width: \"150px\", type: \"caption\" }}\n                options={[\n                  \"onbekend\",\n                  \"maandag\",\n                  \"dinsdag\",\n                  \"woensdag\",\n                  \"donderdag\",\n                  \"vrijdag\",\n                  \"zaterdag\",\n                  \"zondag\"\n                ]}\n              />\n            </div>\n            <Field\n              value={group.schoolYear}\n              editable={editable && role === \"admin\"}\n              onChange={value => onChange(\"schoolYear\", value)}\n              options={[\"2018/2019\", \"2019/2020\", \"2020/2021\", \"2021/2022\"]}\n              style={{ width: \"100%\", type: \"caption\" }}\n            />\n            <Divider style={{ margin: \"15px\" }} />\n            <Field\n              value={group.enrollableFor}\n              label=\"Doelgroep\"\n              onChange={value => onChange(\"enrollableFor\", value)}\n              style={{ width: \"100%\", labelVisible: true, type: \"caption\" }}\n              default=\"Iedereen\"\n              editable={editable}\n            />\n            <Field\n              value={group.studyTime}\n              label=\"Studietijd\"\n              onChange={value => onChange(\"studyTime\", value)}\n              default=\"onbekend\"\n              editable={editable}\n              style={{\n                labelVisible: true,\n                unit: \"uur\",\n                width: \"40%\",\n                type: \"caption\"\n              }}\n              validate={{ type: \"integer\" }}\n            />\n            <div style={{ width: \"20px\", display: \"inline-block\" }} />\n            <Field\n              value={courseId}\n              label=\"Modulecode\"\n              style={{\n                labelVisible: true,\n                width: \"40%\",\n                type: \"caption\"\n              }}\n            />\n          </div>\n          <div style={{ width: \"100%\" }}>\n            <Field\n              value={group.courseDescription}\n              validate={{ maxLength: 440 }}\n              label=\"Omschrijving\"\n              style={{ labelVisible: true }}\n              onChange={value => onChange(\"courseDescription\", value)}\n              layout={{ area: true }}\n              editable={editable}\n            />\n            <Field\n              value={group.remarks}\n              label=\"Opmerkingen\"\n              onChange={value => onChange(\"remarks\", value)}\n              style={{ labelVisible: true }}\n              default=\"Geen voorkennis vereist\"\n              layout={{ area: true }}\n              editable={editable}\n            />\n          </div>\n        </div>\n        <br />\n\n        <Popover\n          open={this.state.anchorEl ? true : false}\n          onClose={this.handleClickAway}\n          anchorEl={this.state.anchorEl}\n          anchorOrigin={{ horizontal: \"left\", vertical: \"top\" }}\n        >\n          <User\n            key={group.teacherId}\n            userId={group.teacherId}\n            display=\"card\"\n            style={{ margin: \"0px\" }}\n          />\n        </Popover>\n      </div>\n    );\n  }\n}\n\nexport default GroupData;\n","import React, { Component } from \"react\";\nimport Badge from \"@material-ui/core/Badge\";\nimport { connect } from 'react-redux';\nimport theme from \"../lib/MuiTheme\";\nimport { withStyles, Tooltip } from \"@material-ui/core\";\n\nconst style = {\n    colorPrimary:{\n        backgroundColor: theme.palette.primary.main\n    },\n    colorSecondary: {\n        backgroundColor: \"#ff8c00\"\n    },\n    colorError: {\n        backgroundColor: theme.palette.error.main\n    }\n}\n\nclass NotificationBadge extends Component {\n\n\n    render() {\n        const notifications = this.props.notifications;\n        const classes = this.props.classes;\n        let color = \"primary\";\n        let tooltipMessage = notifications.length > 0 ? notifications[0].message : \"\";\n        for ( let i = 0; i < notifications.length; i ++ ) { \n            if (notifications[i].priority === \"medium\" || notifications[i].priority === \"high\" ){\n                color=\"secondary\";\n                tooltipMessage=notifications[i].message;\n                for ( let j = i ; j < notifications.length; j++ ) {\n                    if ( notifications[j].priority === \"high\" ) {\n                        color = \"error\"\n                        tooltipMessage = notifications[j].message;\n                        break;\n                    }\n                }\n                break\n            }\n        }// tooltip is first message of highest priority\n        //color is highest priority\n\n        return (\n            <Tooltip title={tooltipMessage} >\n                <Badge badgeContent={notifications.length} classes={classes} color={color} >\n                    {this.props.children}\n                </Badge>\n            </Tooltip>\n        );\n    }\n}\n\nfunction mapStateToProps(state, ownProps) {\n\tlet notifications = state.notifications.filter((not) => {\n\t\ttry {\n            return not.type === \"badge\" && RegExp(not.scope).test(ownProps.scope);\n\t\t} catch (err) {\n\t\t\treturn true;\n\t\t}\n    });\n\treturn {\n\t\tnotifications: notifications,\n\t};\n}\n\nexport default withStyles(style)(connect(mapStateToProps,null)(NotificationBadge));","import React, { Component } from \"react\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport MenuList from \"@material-ui/core/MenuList\";\nimport Popper from \"@material-ui/core/Popper\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { connect } from \"react-redux\";\nimport filter from \"lodash/filter\";\nimport { ClickAwayListener } from \"@material-ui/core\";\n\nimport Field from \"./Field\";\nimport { getAllUsers } from \"../store/actions\";\n\nclass SelectUser extends Component {\n  constructor(props) {\n    super(props);\n    this.myref = this.state = {\n      input: \"\",\n      userId: null,\n      open: false,\n      id: \"SelectUser\" + Math.floor(Math.random() * 1000)\n    };\n  }\n\n  componentDidMount() {\n    this.props.getAllUsers();\n  }\n\n  selectUser = (userId, displayName) => {\n    this.setState({\n      input: displayName,\n      open: false,\n      userId: userId\n    });\n    this.props.onChange(userId, displayName);\n  };\n\n  getFittingUsers = () => {\n    const regExp = new RegExp(this.state.input.toLowerCase());\n    let count = 0;\n    return filter(this.props.users, user => {\n      const v = regExp.test(user.displayName.toLowerCase());\n      if (v) {\n        count++;\n      }\n      return v && count < 6;\n    }).map(user => {\n      return (\n        <MenuItem\n          key={user.id + user.displayName}\n          onClick={() => this.selectUser(user.id, user.displayName)}\n        >\n          {user.displayName}\n        </MenuItem>\n      );\n    });\n  };\n\n  handleInput = value => {\n    if (this.state.userId) {\n      this.props.onChange(null, null);\n    }\n    this.setState({\n      input: value,\n      open: true,\n      userId: null\n    });\n  };\n\n  render() {\n    return (\n      <ClickAwayListener onClickAway={() => this.setState({ open: false })}>\n        <span>\n          <Field\n            label=\"Gebruiker\"\n            value={this.state.input}\n            editable\n            onChange={this.handleInput}\n            style={{ margin: \"normal\" }}\n            id={this.state.id}\n          />\n          <Popper\n            open={this.state.aliasId == null && this.state.open}\n            disablePortal\n            anchorEl={document.getElementById(this.state.id)}\n            style={{ position: \"fixed\", zIndex: \"10000\" }}\n          >\n            <Paper>\n              <MenuList>{this.getFittingUsers()}</MenuList>\n            </Paper>\n          </Popper>\n        </span>\n      </ClickAwayListener>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    users: state.users\n  };\n}\nfunction mapDispatchToProps(dispatch) {\n  return {\n    getAllUsers: () => dispatch(getAllUsers())\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectUser);\n","import React, { Component } from 'react';\nimport { withRouter } from 'react-router';\nimport map from 'lodash/map';\n\nimport PresenceTable from './PresenceTable';\nimport Lesson from './Lesson';\nimport { EvaluationTab } from './Evaluation';\nimport Page from '../Page';\nimport UserList from \"../user/UserList\"\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Progress from '../../components/Progress'\nimport PageLeaveWarning from '../../components/PageLeaveWarning'\nimport GroupData from './GroupData';\nimport ChooseButton from './ChooseButton';\nimport Divider from '@material-ui/core/Divider';\nimport Button from '@material-ui/core/Button';\nimport queryString from \"query-string\";\nimport NotificationBadge from '../../components/NotificationBadge';\nimport SelectUser from '../../components/SelectUser';\nimport Field from '../../components/Field';\nimport { Typography, Tooltip } from '@material-ui/core';\n\nclass GroupPage extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\teditable: false,\n\t\t\tgroup: this.props.group,\n\t\t\tnewParticipant: {\n\t\t\t\tparticipatingRole: \"student\",\n\t\t\t\tuserId: null,\n\t\t\t}\n\t\t}\n\n\t\tswitch (this.props.role) {\n\t\t\tcase \"student\":\n\t\t\t\tif (this.props.userIsMemberOfGroup) {\n\t\t\t\t\tthis.state.tabs = [\"Lessen\", \"Deelnemers\"];\n\t\t\t\t} else {\n\t\t\t\t\tthis.state.tabs = [\"Lessen\"];\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"teacher\":\n\t\t\t\tif (this.props.userIsMemberOfGroup) {\n\t\t\t\t\tthis.state.tabs = [\"Lessen\", \"Inschrijvingen\", \"Deelnemers\", \"Actief\", \"Beoordeling\"];\n\t\t\t\t} else {\n\t\t\t\t\tthis.state.tabs = [\"Inschrijvingen\", \"Deelnemers\", \"Lessen\"];\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"admin\":\n\t\t\tcase \"grade_admin\":\n\t\t\t\tthis.state.tabs = [\"Inschrijvingen\", \"Lessen\", \"Deelnemers\", \"Actief\", \"Beoordeling\"];\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tisCertificateWorthy({ evaluation }) {\n\t\tif (evaluation != null) {\n\t\t\tconst assesment = evaluation.assesment + \"\";\n\t\t\tswitch (evaluation.type) {\n\t\t\t\tcase \"decimal\":\n\t\t\t\t\tconst x = assesment.replace(/\\./g, \"_$comma$_\").replace(/,/g, \".\").replace(/_\\$comma\\$_/g, \",\");\n\t\t\t\t\treturn x >= 5.5;\n\t\t\t\tcase \"stepwise\":\n\t\t\t\t\treturn assesment === \"G\" || assesment === \"V\";\n\t\t\t\tcase \"check\":\n\t\t\t\t\treturn assesment === \"passed\";\n\t\t\t\tdefault:\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\n\t\tlet values = queryString.parse(nextProps.location.search);\n\t\treturn {\n\t\t\t...prevState,\n\t\t\tgroup: {\n\t\t\t\t...nextProps.group,\n\t\t\t\t...prevState.group,\n\t\t\t},\n\t\t\tcurrentTab: values.tab ? values.tab : prevState.tabs[0]\n\t\t}\n\t}\n\n\tgetCurrentTab(currentTab) {\n\t\tlet group = this.state.group;\n\t\tconst enrollmentIds = this.props.group.enrollmentIds;\n\t\tconst lessons = this.state.group.lessons;\n\t\tconst participantIds = this.state.group.participantIds;\n\t\tconst evaluations = this.state.group.evaluations;\n\t\tconst presence = this.state.group.presence;\n\t\tconst newParticipant = this.state.newParticipant;\n\n\t\tconsole.log(enrollmentIds)\n\n\t\tswitch (currentTab) {\n\t\t\tcase \"Inschrijvingen\":\n\t\t\t\tif (enrollmentIds == null) {\n\t\t\t\t\treturn <Progress />;\n\t\t\t\t}\n\t\t\t\tif (enrollmentIds.length === 0) {\n\t\t\t\t\treturn \"Er zijn geen inschrijvingen\";\n\t\t\t\t}\n\t\t\t\treturn <UserList userIds={enrollmentIds} actions={\n\t\t\t\t\tthis.props.role === \"admin\" && this.state.editable ?\n\t\t\t\t\t\t[{ label: \"Goedkeuren\", onClick: this.acceptEnrollment }] : []\n\t\t\t\t} />;\n\t\t\tcase \"Lessen\":\n\t\t\t\tif (lessons == null) {\n\t\t\t\t\treturn <Progress />;\n\t\t\t\t}\n\t\t\t\tif (lessons.length === 0) {\n\t\t\t\t\treturn \"Er zijn nog geen lessen bekend\";\n\t\t\t\t}\n\t\t\t\treturn <table style={{ width: \"100%\" }}>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{map({ 0: { id: -1 }, ...lessons }, lesson => {\n\t\t\t\t\t\t\treturn <Lesson\n\t\t\t\t\t\t\t\tlesson={lesson}\n\t\t\t\t\t\t\t\tkey={lesson.id}\n\t\t\t\t\t\t\t\trole={this.props.role}\n\t\t\t\t\t\t\t\tuserIsMemberOfGroup={this.props.userIsMemberOfGroup}\n\t\t\t\t\t\t\t\teditable={this.state.editable}\n\t\t\t\t\t\t\t\thandleChange={this.handleLessonChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t})}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\tcase \"Deelnemers\":\n\t\t\t\tif (participantIds == null) {\n\t\t\t\t\treturn <Progress />;\n\t\t\t\t}\n\t\t\t\tconst canAddNewParticipant = \n\t\t\t\t\t!participantIds.includes(newParticipant.userId) &&\n\t\t\t\t\t!(enrollmentIds != null &&\n\t\t\t\t\tenrollmentIds.includes(newParticipant.userId)) &&\n\t\t\t\t\tnewParticipant.userId;\n\t\t\t\tconst cantAddReason = canAddNewParticipant ? \"\" : (newParticipant.userId ? \"Deze gebruiker heeft zich al ingeschreven of is al een deelnemer\" : \"Vul een deelnemer in\");\n\t\t\t\treturn (\n\t\t\t\t\t<div >\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.props.role === \"admin\" && this.state.editable &&\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Typography variant=\"button\" color=\"primary\" style={{ margin: \"18px 12px\" }}>\n\t\t\t\t\t\t\t\t\tNieuwe deelnemer:\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<div style={{ display: \"inline-flex\" }}>\n\t\t\t\t\t\t\t\t\t<SelectUser onChange={this.handleNewParticipantIdChange} value={newParticipant.userId} />\n\t\t\t\t\t\t\t\t\t<Field editable label=\"Rol\" value={newParticipant.participatingRole} options={[{ value: \"student\", label: \"Leerling\" }, { value: \"teacher\", label: \"Expert\" }]} onChange={this.handleNewParticipantRoleChange} />\n\t\t\t\t\t\t\t\t\t<Tooltip title={cantAddReason} placement={\"bottom-start\"}>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"contained\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!canAddNewParticipant}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\" style={{ marginTop: \"22px\" }} onClick={this.addNewParticipant}>\n\t\t\t\t\t\t\t\t\t\t\t\tVoeg toe\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tparticipantIds.length === 0 ? \"Er zijn nog geen deelnemers toegevoegd\" :\n\t\t\t\t\t\t\t\t<UserList userIds={participantIds} />\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\tcase \"Actief\":\n\t\t\t\tif (participantIds == null || lessons == null || presence == null) {\n\t\t\t\t\treturn <Progress />;\n\t\t\t\t}\n\t\t\t\treturn <PresenceTable\n\t\t\t\t\tparticipantIds={participantIds}\n\t\t\t\t\tlessons={lessons}\n\t\t\t\t\tpresence={presence}\n\t\t\t\t\teditable={this.state.editable}\n\t\t\t\t\thandleChange={this.handlePresenceChange}\n\t\t\t\t/>\n\t\t\tcase \"Beoordeling\":\n\t\t\t\tif (participantIds == null || evaluations == null) {\n\t\t\t\t\treturn <Progress />;\n\t\t\t\t}\n\t\t\t\treturn <EvaluationTab\n\t\t\t\t\tevaluations={evaluations}\n\t\t\t\t\tgroupId={group.id}\n\t\t\t\t\teditable={this.state.editable}\n\t\t\t\t\thandleChange={this.handleEvaluationChange}\n\t\t\t\t/>\n\t\t\tdefault: return null;\n\t\t}\n\n\t}\n\n\tacceptEnrollment = userId => {\n\t\tthis.props.addParticipant(userId, this.props.groupId, \"student\");\n\t}\n\n\taddNewParticipant = event => {\n\t\tconst newParticipant = this.state.newParticipant;\n\t\tthis.props.addParticipant(newParticipant.userId, this.props.groupId, newParticipant.participatingRole);\n\t\tthis.setState(prevState => ({\n\t\t\t...prevState,\n\t\t\tnewParticipant: {\n\t\t\t\tparticipatingRole: prevState.newParticipant.participatingRole,\n\t\t\t\tuserId: null,\n\t\t\t}\n\t\t}))\n\t}\n\n\thandleNewParticipantRoleChange = value => {\n\t\tthis.setState(prevState => ({\n\t\t\t...prevState,\n\t\t\tnewParticipant: {\n\t\t\t\tparticipatingRole: value,\n\t\t\t\tuserId: prevState.newParticipant.userId,\n\t\t\t},\n\t\t}))\n\t}\n\n\thandleNewParticipantIdChange = value => {\n\t\tthis.setState(prevState => ({\n\t\t\t...prevState,\n\t\t\tnewParticipant: {\n\t\t\t\tuserId: value,\n\t\t\t\tparticipatingRole: prevState.newParticipant.participatingRole,\n\t\t\t},\n\t\t}))\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.getData();\n\t}\n\n\tcomponentDidUpdate() {\n\t\tthis.getData();\n\t\tthis.handleExternalGroupChange(this.props.group);\n\t}\n\n\tgetData() {\n\t\tlet group = this.state.group;\n\t\tconst enrollmentIds = this.state.group.enrollmentIds;\n\t\tconst lessons = this.state.group.lessons;\n\t\tconst participantIds = this.state.group.participantIds;\n\t\tconst evaluations = this.state.group.evaluations;\n\t\tconst presence = this.state.group.presence;\n\n\t\tswitch (this.state.currentTab) {\n\t\t\tcase \"Inschrijvingen\":\n\t\t\t\tif (enrollmentIds == null) {\n\t\t\t\t\tthis.props.getGroupEnrollments(group.id);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"Lessen\":\n\t\t\t\tif (lessons == null) {\n\t\t\t\t\tthis.props.getGroupLessons(group.id);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"Deelnemers\":\n\t\t\t\tif (participantIds == null) {\n\t\t\t\t\tthis.props.getGroupParticipants(group.id);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"Actief\":\n\t\t\t\tif (participantIds == null) {\n\t\t\t\t\tthis.props.getGroupParticipants(group.id);\n\t\t\t\t}\n\t\t\t\tif (lessons == null) {\n\t\t\t\t\tthis.props.getGroupLessons(group.id);\n\t\t\t\t}\n\t\t\t\tif (presence == null) {\n\t\t\t\t\tthis.props.getGroupPresence(group.id);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"Beoordeling\":\n\t\t\t\tif (evaluations == null) {\n\t\t\t\t\tthis.props.getGroupEvaluations(group.id);\n\t\t\t\t}\n\t\t\t\tif (participantIds == null) {\n\t\t\t\t\tthis.props.getGroupParticipants(group.id);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault: break;\n\t\t}\n\t}\n\n\thandleExternalGroupChange = (newGroup) => {\n\t\tif (!this.state.editable && JSON.stringify(newGroup) !== JSON.stringify(this.state.group)) {\n\t\t\tthis.setState({\n\t\t\t\tgroup: newGroup,\n\t\t\t})\n\t\t}\n\t}\n\n\thandleChange = (name, value) => {\n\t\tthis.setState({\n\t\t\tgroup: {\n\t\t\t\t...this.state.group,\n\t\t\t\t[name]: value,\n\t\t\t}\n\t\t});\n\t}\n\n\thandleLessonChange = (lesson) => {\n\t\tlet lessons = this.state.group.lessons || this.props.group.lessons;\n\t\tthis.setState({\n\t\t\tgroup: {\n\t\t\t\t...this.state.group,\n\t\t\t\tlessons: {\n\t\t\t\t\t...lessons,\n\t\t\t\t\t[lesson.id]: lesson,\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\thandleEvaluationChange = (newEvaluations) => {\n\t\tthis.setState({\n\t\t\tgroup: {\n\t\t\t\t...this.state.group,\n\t\t\t\tevaluations: newEvaluations,\n\t\t\t}\n\t\t});\n\t}\n\n\thandlePresenceChange = (presenceObj) => {\n\t\tlet presence = this.state.group.presence || this.props.group.presence;\n\t\tconsole.log(presence);\n\t\tthis.setState({\n\t\t\tgroup: {\n\t\t\t\t...this.state.group,\n\t\t\t\tpresence: {\n\t\t\t\t\t...presence,\n\t\t\t\t\t[presenceObj.id]: presenceObj,\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\t}\n\n\tsetEditable = () => {\n\t\tthis.setState({\n\t\t\teditable: true,\n\t\t});\n\t}\n\n\tcancel = () => {\n\t\tthis.setState({\n\t\t\teditable: false,\n\t\t\tgroup: this.props.group,\n\t\t});\n\t}\n\n\tsave = () => {\n\t\tthis.props.setGroup(this.state.group);\n\t\tthis.setState({\n\t\t\teditable: false,\n\t\t});\n\t}\n\n\thandleTab = (event, newTab) => {\n\t\tthis.props.history.push({\n\t\t\tsearch: \"tab=\" + this.state.tabs[newTab],\n\t\t});\n\t};\n\n\topenCertificate = () => {\n\t\tconst groupId = this.props.group.id;\n\t\tconst userId = this.props.userId;\n\t\tconst role = this.props.role;\n\n\t\t// in case of student show that students certificate. In case of other role show certificates of all students for that group\n\t\t// also check if in development mode because url is different in that case\n\t\tif (role === \"student\") {\n\t\t\tif (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\n\t\t\t\twindow.open(\"http://localhost:26194/api/certificate/course/\" + userId + \"/\" + groupId, \"_blank\");\n\t\t\t} else {\n\t\t\t\twindow.open(\"/api/certificate/course/\" + userId + \"/\" + groupId, \"_blank\");\n\t\t\t}\n\t\t} else {\n\t\t\tif (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\n\t\t\t\t//window.open(\"http://localhost:26194/api/certificate/course/\" + userId + \"/\"+ groupId ,\"_blank\");\n\t\t\t\t// IMPLEMENT ME\n\t\t\t} else {\n\t\t\t\t//window.open(\"/api/certificate/course\" + userId + \"/\" + groupId,\"_blank\");\n\t\t\t\t// IMPLEMENT ME\n\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\tconst editable = this.state.editable;\n\t\tconst role = this.props.role;\n\t\tlet group = this.state.group;\n\t\treturn (\n\t\t\t<Page>\n\t\t\t\t<GroupData {...this.props} editable={editable} group={group} onChange={this.handleChange} />\n\t\t\t\t<Divider />\n\t\t\t\t<div style={{ display: \"flex\" }}>\n\t\t\t\t\t{\n\t\t\t\t\t\trole === \"student\" &&\n\t\t\t\t\t\t<ChooseButton\n\t\t\t\t\t\t\tgroup={group}\n\t\t\t\t\t\t\tstyle={{ margin: \"20px\" }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\t((role === \"teacher\" || role === \"admin\") && !editable) &&\n\t\t\t\t\t\t<Button color=\"secondary\" variant=\"contained\" style={{ margin: \"20px\" }} onClick={this.setEditable}>\n\t\t\t\t\t\t\t{\"Bewerken\"}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\teditable &&\n\t\t\t\t\t\t<Button color=\"secondary\" variant=\"contained\" style={{ margin: \"20px\" }} onClick={this.save}>\n\t\t\t\t\t\t\t{\"Opslaan\"}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\teditable &&\n\t\t\t\t\t\t<Button color=\"default\" style={{ margin: \"20px\" }} onClick={this.cancel}>\n\t\t\t\t\t\t\t{\"Annuleren\"}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t}\n\t\t\t\t\t<div style={{ flex: \"2\" }} />\n\t\t\t\t\t{\n\t\t\t\t\t\t(this.isCertificateWorthy(group))\n\t\t\t\t\t\t&&\n\t\t\t\t\t\t<Button color=\"primary\" variant=\"contained\" style={{ margin: \"20px\" }} onClick={this.openCertificate}>\n\t\t\t\t\t\t\t{role === \"student\" ? \"Certificaat\" : \"Certificaten\"}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t<AppBar position=\"static\" color=\"default\">\n\t\t\t\t\t<Tabs\n\t\t\t\t\t\tvalue={this.state.tabs.indexOf(this.state.currentTab)}\n\t\t\t\t\t\tonChange={this.handleTab}\n\t\t\t\t\t\tindicatorColor=\"primary\"\n\t\t\t\t\t\ttextColor=\"primary\"\n\t\t\t\t\t\tvariant=\"fullWidth\"\n\t\t\t\t\t\tcentered\n\t\t\t\t\t>\n\t\t\t\t\t\t{this.state.tabs.map(tab =>\n\t\t\t\t\t\t\t<Tab key={tab} label={\n\t\t\t\t\t\t\t\t<NotificationBadge scope={\"groep/\" + (group.id || \"\") + \"?tab=\" + tab} style={{ paddingLeft: \"100px\" }}>\n\t\t\t\t\t\t\t\t\t{tab}\n\t\t\t\t\t\t\t\t</NotificationBadge>\n\t\t\t\t\t\t\t} />)}\n\t\t\t\t\t</Tabs>\n\t\t\t\t</AppBar>\n\t\t\t\t<br />\n\t\t\t\t<div style={{ width: \"98%\", margin: \"auto\" }}>\n\t\t\t\t\t{this.getCurrentTab(this.state.currentTab)}\n\t\t\t\t</div>\n\t\t\t\t<PageLeaveWarning giveWarning={this.state.editable} />\n\t\t\t</Page>\n\t\t);\n\t}\n\n}\n\n\n\nexport default withRouter(GroupPage);\n\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport GroupCard from \"./GroupCard\";\nimport GroupPage from \"./GroupPage\";\nimport {\n\tsetGroup,\n\tgetGroup,\n\tgetGroupEnrollments,\n\tgetGroupLessons,\n\tgetGroupParticipants,\n\tgetGroupEvaluations,\n\tgetGroupPresence,\n\tgetSubjects,\n\taddNotification,\n\taddParticipant,\n} from \"../../store/actions\";\nimport { withRouter } from 'react-router-dom';\nimport Progress from '../../components/Progress'\nimport Page from '../Page';\n\nclass Group extends Component {\n\n\tcomponentDidMount() {\n\t\tconst props = this.props;\n\t\tif (props.subjects == null) {\n\t\t\tprops.getSubjects();\n\t\t}\n\t\tif (props.group == null && !props.notExists) {\n\t\t\tprops.getGroup(props.groupId);\n\t\t}\n\t}\n\n\trender() {\n\t\tif (this.props.group == null) {\n\t\t\tif (this.props.display === \"page\" && this.props.notExists) {\n\t\t\t\treturn (\n\t\t\t\t\t<Page>\n\t\t\t\t\t\tDe opgevraagde groep bestaat niet\n\t\t\t\t\t</Page>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn this.props.notExists ? null : <Progress />;\n\t\t\t}\n\t\t}\n\t\tswitch (this.props.display) {\n\t\t\tcase \"page\":\n\t\t\t\treturn (\n\t\t\t\t\t<GroupPage {...this.props} />\n\t\t\t\t);\n\t\t\tcase \"card\":\n\t\t\tdefault:\n\t\t\t\treturn (\n\t\t\t\t\t<GroupCard {...this.props} />\n\t\t\t\t);\n\t\t}\n\t}\n}\n\n\nfunction mapStateToProps(state, ownProps) {\n\tlet id = (ownProps.match.params.groupId || ownProps.groupId) + \"\";\n\tlet display = ownProps.display || \"page\";\n\n\tlet notExists = false;\n\tlet group = null;\n\n\tlet userIsMemberOfGroup = state.users[state.userId].participatingGroupIds.indexOf(id) !== -1;\n\tif (state.groups == null || state.groups[id] == null) {\n\t\tif (id == null || state.hasFetched.indexOf(\"Group.get(\" + id + \")\") !== -1) {\n\t\t\tnotExists = true;\n\t\t}\n\t} else {\n\t\tgroup = state.groups[id];\n\t}\n\treturn {\n\t\tgroup,\n\t\tnotExists,\n\t\tdisplay,\n\t\trole: state.role,\n\t\tgroupId: id,\n\t\tsubjects: state.subjects,\n\t\tuserId: state.userId,\n\t\tuserIsMemberOfGroup,\n\t\tschoolYear: state.schoolYear,\n\t}\n}\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tsetGroup: (group) => dispatch(setGroup(group)),\n\t\tgetGroup: (groupId) => dispatch(getGroup(groupId)),\n\t\tgetGroupEnrollments: (groupId) => dispatch(getGroupEnrollments(groupId)),\n\t\tgetGroupLessons: (groupId) => dispatch(getGroupLessons(groupId)),\n\t\tgetGroupParticipants: (groupId) => dispatch(getGroupParticipants(groupId)),\n\t\tgetGroupEvaluations: (groupId) => dispatch(getGroupEvaluations(groupId)),\n\t\tgetGroupPresence: (groupId) => dispatch(getGroupPresence(groupId)),\n\t\tgetSubjects: () => dispatch(getSubjects()),\n\t\taddParticipant: (userId, groupId, participatingRole) => dispatch(addParticipant(userId, groupId, participatingRole)),\n\t\taddNotification: (notification) => dispatch(addNotification(notification)),\n\t};\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Group));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport filter from 'lodash/filter';\nimport map from 'lodash/map';\n\nimport Page from './Page';\nimport Progress from '../components/Progress';\nimport Field from '../components/Field';\nimport Group from './group/Group';\nimport { getSubjects, getGroups, getEnrolLments } from '../store/actions';\n\nimport Typography from '@material-ui/core/Typography';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Paper from '@material-ui/core/Paper';\nimport queryString from \"query-string\";\n\nclass CourseSelect extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tperiod: props.currentPeriod,\n\t\t\tleerjaar: \"2019/2020\",\n\t\t\tsubject: null,\n\t\t}\n\t}\n\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\n\t\tlet { blok, vak, leerjaar } = queryString.parse(nextProps.location.search);\n\t\tif (!vak && nextProps.subjects != null) {\n\t\t\tvak = nextProps.subjects[Object.keys(nextProps.subjects)[0]].name;\n\t\t}\n\t\tif (!blok) {\n\t\t\tblok = nextProps.enrollmentPeriod + \"\";\n\t\t}\n\t\tif (!leerjaar) {\n\t\t\tleerjaar = \"2019/2020\";\n\t\t}\n\t\treturn {\n\t\t\t...prevState,\n\t\t\tperiod: blok,\n\t\t\tsubject: vak,\n\t\t\tschoolYear: leerjaar,\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.getSubjects();\n\t\tthis.props.getGroups();\n\t}\n\n\tgetGroupsPerSubject(subject) {\n\t\treturn filter(this.props.groups, (group) => {\n\t\t\treturn subject === group.subjectName;\n\t\t})\n\t}\n\n\thandleSortChange = subject => {\n\t\tthis.props.history.push({\n\t\t\tsearch: `vak=${subject}&blok=${this.state.period}&leerjaar=${this.state.schoolYear}`,\n\t\t});\n\t};\n\n\thandlePeriodChange = period => {\n\t\tthis.props.history.push({\n\t\t\tsearch: `vak=${this.state.subject}&blok=${period}&leerjaar=${this.state.schoolYear}`,\n\t\t});\n\t};\n\n\thandleYearChange = schoolYear => {\n\t\tthis.props.history.push({\n\t\t\tsearch: `vak=${this.state.subject}&blok=${this.state.period}&leerjaar=${schoolYear}`,\n\t\t});\n\t};\n\n\tgetMenuItem(title, subject) {\n\t\tlet color = (this.state.subject === subject) ? \"primary\" : \"initial\";\n\t\treturn (\n\t\t\t<ListItem button onClick={() => this.handleSortChange(subject)} key={title}>\n\t\t\t\t<ListItemText>\n\t\t\t\t\t<Typography variant=\"button\" color={color} style={{ minWidth: \"150px\" }}>\n\t\t\t\t\t\t{title}\n\t\t\t\t\t</Typography>\n\t\t\t\t</ListItemText>\n\t\t\t</ListItem >\n\t\t)\n\t}\n\n\tgetMenuItems() {\n\t\tconst subjectsComponents = map(this.props.subjects, (subject) => {\n\t\t\treturn this.getMenuItem(subject.name, subject.name);\n\t\t});\n\t\tif (this.props.role === \"student\") {\n\t\t\tsubjectsComponents.unshift(this.getMenuItem(\"Ingeschreven\", \"enrolled\"));\n\t\t}\n\t\treturn subjectsComponents;\n\t}\n\n\trender() {\n\t\tlet data;\n\t\tif (this.state.subject === \"enrolled\") {\n\t\t\tif (this.props.enrolledGroupsIds == null) {\n\t\t\t\tdata = <Progress />;\n\t\t\t\tthis.props.getEnrolLments();\n\t\t\t} else {\n\t\t\t\tdata = this.props.enrolledGroupsIds.map((groupId) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Group\n\t\t\t\t\t\t\tkey={groupId}\n\t\t\t\t\t\t\tgroupId={groupId}\n\t\t\t\t\t\t\tdisplay=\"card\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t\tif (this.props.enrolledGroupsIds.length === 0) {\n\t\t\t\t\tdata = (\n\t\t\t\t\t\t<div style={{ margin: \"15px\" }} >\n\t\t\t\t\t\t\tJe hebt je nog niet ingeschreven.\n\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.props.subjects == null || this.props.groups == null || this.props.enrolledGroups === []) {\n\t\t\t\tdata = <Progress />\n\t\t\t}\n\t\t\tdata = this.getGroupsPerSubject(this.state.subject)\n\t\t\t\t.filter((group) => group != null)\n\t\t\t\t.filter((group) => {\n\t\t\t\t\tif (this.state.period !== \"all\") {\n\t\t\t\t\t\treturn group.period + \"\" === this.state.period;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.filter((group) => {\n\t\t\t\t\tif (this.state.schoolYear !== \"all\") {\n\t\t\t\t\t\treturn group.schoolYear + \"\" === this.state.schoolYear;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.sort((a, b) => a.period - b.period)\n\t\t\t\t.map((group) => {\n\t\t\t\t\treturn <Group\n\t\t\t\t\t\tkey={group.id}\n\t\t\t\t\t\tgroupId={group.id}\n\t\t\t\t\t\tdisplay=\"card\"\n\t\t\t\t\t/>\n\t\t\t\t});\n\t\t}\n\t\treturn (\n\t\t\t<Page>\n\t\t\t\t<Paper style={{ position: \"relative\" }} >\n\t\t\t\t\t<Toolbar style={{ display: \"flex\" }} >\n\t\t\t\t\t\t<Typography variant=\"subtitle1\" color=\"textSecondary\" style={{ flex: \"2 1 auto\" }}>\n\t\t\t\t\t\t\tSchrijf je in voor modules\n          \t</Typography>\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tlabel=\"blok\"\n\t\t\t\t\t\t\tvalue={this.state.period}\n\t\t\t\t\t\t\teditable\n\t\t\t\t\t\t\tstyle={{ flex: \"none\" }}\n\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t{ label: \"Alle\", value: \"all\" },\n\t\t\t\t\t\t\t\t{ label: \"Blok 1\", value: \"1\" },\n\t\t\t\t\t\t\t\t{ label: \"Blok 2\", value: \"2\" },\n\t\t\t\t\t\t\t\t{ label: \"Blok 3\", value: \"3\" },\n\t\t\t\t\t\t\t\t{ label: \"Blok 4\", value: \"4\" }]}\n\t\t\t\t\t\t\tonChange={this.handlePeriodChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tlabel=\"leerjaar\"\n\t\t\t\t\t\t\tstyle={{ flex: \"none\" }}\n\t\t\t\t\t\t\tvalue={this.state.schoolYear}\n\t\t\t\t\t\t\teditable\n\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t{ label: \"Alle\", value: \"all\" },\n\t\t\t\t\t\t\t\t{ label: \"2016/2017\", value: \"2016/2017\" },\n\t\t\t\t\t\t\t\t{ label: \"2017/2018\", value: \"2017/2018\" },\n\t\t\t\t\t\t\t\t{ label: \"2018/2019\", value: \"2018/2019\" },\n\t\t\t\t\t\t\t\t{ label: \"2019/2020\", value: \"2019/2020\" },\n\t\t\t\t\t\t\t\t{ label: \"2020/2021\", value: \"2020/2021\" },\n\t\t\t\t\t\t\t\t{ label: \"2021/2022\", value: \"2021/2022\" }]}\n\t\t\t\t\t\t\tonChange={this.handleYearChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Toolbar>\n\t\t\t\t</Paper>\n\t\t\t\t<div style={{ display: \"flex\" }} className=\"ColumnFlexDirectionOnMobile\">\n\t\t\t\t\t<Paper>\n\t\t\t\t\t\t<List component=\"nav\" style={{ flex: 1 }}>\n\t\t\t\t\t\t\t{this.getMenuItems()}\n\t\t\t\t\t\t</List>\n\t\t\t\t\t</Paper>\n\t\t\t\t\t<div style={{ padding: \"12px\" }}>\n\t\t\t\t\t\t{data}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<br />\n\t\t\t\t<br />\n\t\t\t\t<br />\n\t\t\t</Page >\n\t\t);\n\t}\n}\n\nfunction mapStateToProps(state) {\n\treturn {\n\t\trole: state.role,\n\t\tenrollmentPeriod: state.enrollmentPeriod,\n\t\tenrollableGroups: state.enrollableGroups,\n\t\tgroups: state.groups,\n\t\tsubjects: state.subjects,\n\t\tenrolledGroupsIds: state.users[state.userId].enrollmentIds,\n\t};\n}\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tgetSubjects: () => dispatch(getSubjects()),\n\t\tgetGroups: () => dispatch(getGroups()),\n\t\tgetEnrolLments: () => dispatch(getEnrolLments()),\n\t};\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CourseSelect);\n\n\n","import React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport {\n  Paper,\n  Typography,\n  Table,\n  TableHead,\n  TableCell,\n  TableBody,\n  TableRow,\n  Tooltip,\n  TableSortLabel,\n  Toolbar,\n  Button,\n  IconButton\n} from \"@material-ui/core\";\nimport { VerticalAlignBottom } from \"@material-ui/icons\";\nimport queryString from \"query-string\";\nimport Excel from \"exceljs/dist/es5/exceljs.browser\";\n\nimport Page from \"./Page\";\nimport Progress from \"../components/Progress\";\nimport Field from \"../components/Field\";\nimport EnsureSecureLogin from \"../components/EnsureSecureLogin\";\nimport $ from \"jquery\";\n\nconst splitValues = {\n  users: \"role\",\n  evaluations: \"groupId\",\n  enrollments: \"enrollmentPeriod\"\n};\n\nclass DataPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tables: null,\n      tableSortColumns: {},\n      tableSortDirections: {},\n      data: \"enrollments\",\n      hasFetched: false\n    };\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    let values = queryString.parse(nextProps.location.search);\n    return {\n      ...prevState,\n      ...{\n        data: values.data ? values.data : \"enrollments\"\n      }\n    };\n  }\n\n  handleShowData = () => {\n    this.setState({\n      hasFetched: true\n    });\n    this.fetchData(this.state.data).then(tables =>\n      this.setState({\n        tables: this.splitTable(tables, splitValues[this.state.data]),\n        tableSortColumns: Array(tables.length)\n      })\n    );\n  };\n\n  handleFilterChange = value => {\n    this.props.history.push({\n      search: \"data=\" + value\n    });\n  };\n\n  sort = tableIndex => {\n    let table = this.state.tables[tableIndex];\n    const column = this.state.tableSortColumns[tableIndex];\n    const order = this.state.tableSortDirections[tableIndex];\n\n    table = [table[0]].concat(\n      table.slice(1, table.length).sort((a, b) => {\n        //Only sort the slice 1-table.length because the header has to stick\n        a = a[column];\n        b = b[column];\n        const cmp = (b == null) - (a == null) || +(a > b) || -(a < b);\n        return order === \"asc\" ? cmp : -cmp;\n      })\n    );\n\n    this.setState(prevState => ({\n      tables: [\n        ...prevState.tables.slice(0, tableIndex),\n        table,\n        ...prevState.tables.slice(tableIndex + 1)\n      ]\n    }));\n  };\n\n  handleSortChange = (tableIndex, columnIndex) => {\n    this.setState(\n      prevState => ({\n        //update the correct elements of the arrays of the state\n        tableSortColumns: {\n          ...prevState.tableSortColumns,\n          [tableIndex]: columnIndex\n        },\n        tableSortDirections: {\n          ...prevState.tableSortDirections,\n          [tableIndex]:\n            prevState.tableSortDirections[tableIndex] === \"desc\" &&\n            prevState.tableSortColumns[tableIndex] === columnIndex\n              ? \"asc\"\n              : \"desc\" // if this columns was selected and ordering desc, change to asc else desc\n        }\n      }),\n      () => this.sort(tableIndex)\n    ); // when setting state is done start sorting\n  };\n\n  splitTable = (table, splitValue) => {\n    let splitIndex = table[0].findIndex(x => x === splitValue);\n    if (splitIndex < 0) {\n      return [table];\n    }\n    let tables = [[table[0], table[1]]]; // initialize the tables with one table that has a header and a row\n    for (let i = 2; i < table.length; i++) {\n      let tableIndex = tables.findIndex(\n        halfSplitTable => halfSplitTable[1][splitIndex] === table[i][splitIndex]\n      ); // see in what table this row has to go\n      if (tableIndex < 0) {\n        tables.push([table[0]]); // add a new table with a new header if a new value is found\n        tableIndex = tables.length - 1;\n      }\n      tables[tableIndex].push(table[i]); // add row to correct table\n    }\n    return tables;\n  };\n\n  fetchData = table => {\n    return $.ajax({\n      url: \"api/function/data\",\n      type: \"post\",\n      data: {\n        table,\n        secureLogin: this.props.secureLogin\n      },\n      dataType: \"json\"\n    });\n  };\n\n  downloadTables = () => {\n    const tables = this.state.tables;\n    let workbook = new Excel.Workbook();\n    const splitIndex = tables[0][0].findIndex(\n      x => x === splitValues[this.state.data]\n    );\n    for (let i = 0; i < tables.length; i++) {\n      // add all the tables to a different sheet\n      // the sheet has the name of the value it's split on. I.e when splitting on courses every page is called what course it contains\n      const sheetName = tables[i][1][splitIndex] + \"\";\n      let sheet = workbook.addWorksheet(sheetName);\n      sheet.addRows(tables[i]);\n      for (let j = 1; j <= tables[i][0].length; j++) {\n        sheet.getColumn(j).width =\n          tables[i][0][j - 1].length < 10 ? 10 : tables[i][0][j - 1].length + 2; //set each column to at least fit the header\n      }\n    }\n\n    const filenamePrefixes = {\n      users: \"Gebruikers \",\n      enrollments: \"Inschrijvingen \",\n      evaluations: \"Beoordelingen \",\n      courseIds: \"Modulecodes \"\n    };\n    let filename =\n      filenamePrefixes[this.state.data] +\n      new Date().toLocaleDateString() +\n      \".xlsx\";\n    this.downloadWorkbook(workbook, filename); //gives for example: \"Gebruikers 3/3/2019.xlsx\"\n  };\n\n  downloadWorkbook = (workbook, fileName) => {\n    //magic\n    workbook.xlsx\n      .writeBuffer({\n        base64: true\n      })\n      .then(function(xls64) {\n        var a = document.createElement(\"a\");\n        var data = new Blob([xls64], {\n          type:\n            \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"\n        });\n        var url = URL.createObjectURL(data);\n        a.href = url;\n        a.download = fileName;\n        document.body.appendChild(a);\n        a.click();\n        setTimeout(function() {\n          document.body.removeChild(a);\n          window.URL.revokeObjectURL(url);\n        }, 0);\n      })\n      .catch(function(error) {\n        console.log(\n          \"Something went wrong with downloading the excel file: \" +\n            error.message\n        );\n      });\n  };\n\n  forceCellWidth = cellName => {\n    switch (cellName) {\n      case \"subject\":\n        return \"200px\";\n      case \"displayName\":\n        return \"200px\";\n      case \"courseName\":\n        return \"300px\";\n      case \"explanation\":\n        return \"200px\";\n      default:\n        return \"auto\";\n    }\n  };\n\n  render() {\n    let content;\n    if (this.state.tables == null) {\n      if (this.state.hasFetched) {\n        content = <Progress style={{ marginTop: \"100px\" }} />;\n      } else {\n        content = (\n          <Typography variant=\"body1\">\n            Klik op \"Laat gegevens\" om de gegevens te tonen\n          </Typography>\n        );\n      }\n    } else {\n      content = this.state.tables.map((table, tableIndex) => {\n        return (\n          <Table key={tableIndex} style={{ marginTop: \"100px\" }}>\n            <TableHead>\n              <TableRow key={0} style={{ height: \"auto\" }}>\n                {table[0].map((title, columnIndex) => {\n                  return (\n                    <TableCell\n                      key={columnIndex}\n                      style={{\n                        color: \"black\",\n                        backgroundColor: \"#e0e0e0\",\n                        fontSize: 13,\n                        top: 0\n                      }}\n                    >\n                      <Tooltip\n                        title=\"Sorteer\"\n                        enterDelay={300}\n                        placement=\"bottom-start\"\n                      >\n                        <TableSortLabel\n                          active={\n                            this.state.tableSortColumns[tableIndex] ===\n                            columnIndex\n                          }\n                          direction={this.state.tableSortDirections[tableIndex]}\n                          onClick={event =>\n                            this.handleSortChange(tableIndex, columnIndex)\n                          }\n                          style={{ zIndex: 0 }}\n                        >\n                          <span style={{ width: this.forceCellWidth(title) }}>\n                            {title}\n                          </span>\n                        </TableSortLabel>\n                      </Tooltip>\n                    </TableCell>\n                  );\n                })}\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {table\n                .filter((_, index) => {\n                  return index > 0;\n                }) //take everything but the header\n                .map((row, rowIndex) => {\n                  return (\n                    <TableRow key={rowIndex + 1} style={{ height: \"auto\" }}>\n                      {row.map((cell, columnIndex) => {\n                        return <TableCell key={columnIndex}>{cell}</TableCell>;\n                      })}\n                    </TableRow>\n                  );\n                })}\n            </TableBody>\n          </Table>\n        );\n      });\n    }\n    return (\n      <Page>\n        <EnsureSecureLogin>\n          <Paper\n            elevation={2}\n            style={{\n              zIndex: 1,\n              position: \"absolute\",\n              width: \"85%\"\n            }}\n          >\n            <Toolbar style={{ display: \"flex\" }}>\n              <Typography\n                variant=\"subtitle1\"\n                color=\"textSecondary\"\n                style={{ flex: \"1 1 auto\" }}\n              >\n                Gegevens\n              </Typography>\n              <Field\n                label=\"Gegevens van\"\n                value={this.state.data}\n                editable\n                options={[\n                  { label: \"Beoordelingen\", value: \"evaluations\" },\n                  { label: \"Gebruikers\", value: \"users\" },\n                  { label: \"Inschrijvingen\", value: \"enrollments\" },\n                  { label: \"Module codes\", value: \"courseIds\" }\n                ]}\n                style={{ flex: \"0.3\" }}\n                onChange={this.handleFilterChange}\n              />\n              <Button\n                variant=\"outlined\"\n                onClick={this.handleShowData}\n                style={{ flex: \"0.1 0.1 auto\" }}\n              >\n                Laad gegevens\n              </Button>\n              <IconButton onClick={this.downloadTables}>\n                <VerticalAlignBottom />\n              </IconButton>\n            </Toolbar>\n          </Paper>\n          {content}\n        </EnsureSecureLogin>\n      </Page>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    secureLogin: state.secureLogin\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, null)(DataPage));\n","import React, { Component } from 'react';\nimport Page from './Page';\nimport Progress from '../components/Progress';\nimport Typography from '@material-ui/core/Typography';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Field from '../components/Field';\nimport Paper from '@material-ui/core/Paper';\nimport $ from \"jquery\";\nimport queryString from \"query-string\";\n\nclass Taxi extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tschedules: null,\n\t\t};\n\t}\n\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\n\t\tlet values = queryString.parse(nextProps.location.search);\n\t\treturn {\n\t\t\t...prevState,\n\t\t\t...{\n\t\t\t\tweek: values.week ? values.week : \"0\",\n\t\t\t}\n\t\t};\n\t}\n\n\thandleFilterChange = value => {\n\t\tthis.props.history.push({\n\t\t\tsearch: \"week=\" + value,\n\t\t});\n\t\tthis.fetchSchedules(value);\n\t};\n\n\n\tcomponentDidMount() {\n\t\tthis.fetchSchedules(this.state.week);\n\t}\n\n\tfetchSchedules(week) {\n\t\treturn $.ajax({\n\t\t\turl: \"api/function/taxi\",\n\t\t\ttype: \"post\",\n\t\t\tdata: {\n\t\t\t\tweek,\n\t\t\t},\n\t\t\tdataType: \"json\",\n\t\t}).then(schedules => this.setState({\n\t\t\tschedules,\n\t\t}));\n\t}\n\n\trender() {\n\t\tlet content;\n\t\tif (this.state.schedules == null) {\n\t\t\tcontent = <Progress />\n\t\t} else {\n\t\t\tcontent = this.state.schedules.map((s, i) =>\n\t\t\t\t<div\n\t\t\t\t\tstyle={{ width: \"80%\", margin: \"auto\" }}\n\t\t\t\t\tclassName=\"taxiScheduleHolder\"\n\t\t\t\t\tkey={i}\n\t\t\t\t\tdangerouslySetInnerHTML={{ __html: s }}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<Page>\n\t\t\t\t<Paper\n\t\t\t\t\televation={2}\n\t\t\t\t\tstyle={{ position: \"relative\" }}\n\t\t\t\t>\n\t\t\t\t\t<Toolbar style={{ display: \"flex\" }}>\n\t\t\t\t\t\t<Typography variant=\"subtitle1\" color=\"textSecondary\" style={{ flex: \"2 1 auto\" }}>\n\t\t\t\t\t\t\tTaxischema\n          </Typography>\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tlabel=\"week\"\n\t\t\t\t\t\t\tvalue={this.state.week}\n\t\t\t\t\t\t\teditable\n\t\t\t\t\t\t\toptions={[0, 1, 2, 3, 4, 5, 6, 7, 8].map(n => { return { label: n === 0 ? \"Basisrooster\" : \"Week \" + n, value: n + \"\" } })}\n\t\t\t\t\t\t\tonChange={this.handleFilterChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Toolbar>\n\t\t\t\t</Paper>\n\t\t\t\t{content}\n\t\t\t</Page>\n\t\t);\n\t}\n}\n\nexport default Taxi;\n\n\n","import React, { Component } from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport { connect } from 'react-redux';\nimport { toggleMenu } from '../store/actions';\nimport { withRouter } from 'react-router-dom';\nimport PersonIcon from '@material-ui/icons/Person';\nimport List from '@material-ui/core/List';\n\n\nclass Header extends Component {\n\n\tlogoClick = () => {\n\t\tthis.props.history.push(\"/\");\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<AppBar className=\"Header\">\n\t\t\t\t<Toolbar>\n\t\t\t\t\t<IconButton color=\"inherit\" aria-label=\"Menu\" onClick={this.props.toggleMenu} style={{ position: \"absolute\" }} >\n\t\t\t\t\t\t<MenuIcon />\n\t\t\t\t\t</IconButton>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc=\"/images/logo_qhighschool_white.svg\"\n\t\t\t\t\t\talt=\"QHighschool Logo\"\n\t\t\t\t\t\tstyle={{ height: \"60%\", margin: \"auto\", maxHeight: \"40px\", cursor: \"pointer\" }}\n\t\t\t\t\t\tonClick={this.logoClick}\n\t\t\t\t\t/>\n\t\t\t\t\t<List color=\"inherit\" style={{ right: 20, position: \"absolute\" }} onClick={this.handleClick}>\n\t\t\t\t\t\t<PersonIcon style={{ transform: \"scale(1.5)\", marginRight: \"10px\", float: \"left\" }} />\n\t\t\t\t\t\t<span className=\"HiddenOnMobile\">\n\t\t\t\t\t\t\t{this.props.displayName}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</List>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t);\n\t}\n}\n\nfunction mapStateToProps(state) {\n\tif (state.userId != null) {\n\t\treturn {\n\t\t\tdisplayName: state.users[state.userId].displayName,\n\t\t\tuserId: state.userId,\n\t\t};\n\t}\n\treturn {\n\t\tdisplayName: \"\",\n\t\tuserId: state.userId,\n\t};\n}\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\ttoggleMenu: () => dispatch(toggleMenu()),\n\t};\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Header));\n\n\n\n","import React, { Component } from 'react';\nimport { IconButton, Snackbar, SnackbarContent } from '@material-ui/core/';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { connect } from 'react-redux';\nimport { withRouter } from \"react-router\";\n\nimport theme from '../lib/MuiTheme'\nimport { removeNotification } from '../store/actions';\n\nclass NotificationBar extends Component {\n\n\n\tremoveNotification = (key) => {\n\t\tthis.props.removeNotification(this.props.notifications[key]);\n\t}\n\n\trender() {\n\t\tlet notifications = this.props.notifications.map((not, key) => {\n\t\t\tlet color;\n\t\t\tswitch (not.priority) {\n\t\t\t\tcase \"high\":\n\t\t\t\t\tcolor = theme.palette.error.main;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"medium\":\n\t\t\t\t\tcolor = \"#ff8c00\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"low\":\n\t\t\t\tdefault:\n\t\t\t\t\tcolor = theme.palette.primary.main;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<Snackbar\n\t\t\t\t\tkey={key}\n\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\tvertical: \"bottom\",\n\t\t\t\t\t\thorizontal: \"right\"\n\t\t\t\t\t}}\n\t\t\t\t\topen={true}\n\t\t\t\t\tstyle={{ position: \"relative\" }}\n\t\t\t\t\tTransitionProps={{ direction: \"left\" }}\n\t\t\t\t>\n\t\t\t\t\t<SnackbarContent\n\t\t\t\t\t\tstyle={{ background: color, marginBottom: \"4px\" }}\n\t\t\t\t\t\tmessage={<span id=\"message-id\">{not.message}</span>}\n\t\t\t\t\t\taction={not.sticky ? []: [\n\t\t\t\t\t\t\t<IconButton key=\"close\"\n\t\t\t\t\t\t\t\tonClick={() => { this.removeNotification(key) }} >\n\t\t\t\t\t\t\t\t<CloseIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t]} />\n\t\t\t\t</Snackbar>\n\t\t\t);\n\t\t});\n\t\treturn (\n\t\t\t<div style={{ position: \"fixed\", bottom: 0, right: 0, width: \"auto\", zIndex: 10 }}>\n\t\t\t\t{notifications}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nfunction mapStateToProps(state, ownProps) {\n\tlet notifications = state.notifications.filter((not) => {\n\t\ttry {\n\t\t\treturn not.type === \"bar\" && new RegExp(not.scope).test(ownProps.location.pathname);\n\t\t} catch (err) {\n\t\t\treturn true;\n\t\t}\n\t});\n\treturn {\n\t\tnotifications: notifications,\n\t};\n}\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tremoveNotification: (notification) => dispatch(removeNotification(notification)),\n\t};\n}\n\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(NotificationBar));","import React, { Component } from \"react\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport AssessmentIcon from \"@material-ui/icons/Assessment\";\nimport AssignmentIcon from \"@material-ui/icons/Assignment\";\nimport GroupIcon from \"@material-ui/icons/Group\";\nimport PersonIcon from \"@material-ui/icons/Person\";\nimport ExitIcon from \"@material-ui/icons/ExitToApp\";\nimport LocalTaxiIcon from \"@material-ui/icons/LocalTaxi\";\nimport BuildIcon from \"@material-ui/icons/Build\";\nimport ViewColumnIcon from \"@material-ui/icons/ViewColumn\";\nimport NotificationBadge from \"./NotificationBadge\";\n\nimport Paper from \"@material-ui/core/Paper\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport Typography from \"@material-ui/core/Typography\";\nimport theme from \"../lib/MuiTheme\";\nimport $ from \"jquery\";\n\nclass Menu extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {};\n    switch (this.props.role) {\n      case \"student\":\n        this.state.pages = [\"aanbod\", \"portfolio\", \"profiel\", \"loguit\"];\n        break;\n      case \"teacher\":\n        this.state.pages = [\"aanbod\", \"groepen\", \"profiel\", \"loguit\"];\n        break;\n      case \"admin\":\n        this.state.pages = [\n          \"groepen\",\n          \"aanbod\",\n          \"profiel\",\n          \"gegevens\",\n          \"taxi\",\n          \"beheer\",\n          \"loguit\"\n        ];\n        break;\n      case \"grade_admin\":\n        this.state.pages = [\n          \"aanbod\",\n          \"groepen\",\n          \"gegevens\",\n          \"taxi\",\n          \"profiel\",\n          \"loguit\"\n        ];\n        break;\n      default:\n        this.state.pages = [\"aanbod\", \"profiel\", \"loguit\"];\n        break;\n    }\n  }\n\n  logout() {\n    return $.ajax({\n      url: \"/auth/logout\",\n      type: \"get\",\n      dataType: \"json\"\n    }).then(() => {\n      document.location.reload();\n    });\n  }\n\n  onClick(page) {\n    if (page === \"loguit\") {\n      this.logout();\n    } else {\n      this.props.history.push(\"/\" + page);\n    }\n  }\n\n  getIcon(iconName, color) {\n    let c = \"black\";\n    if (theme.palette[color]) {\n      c = theme.palette[color].main;\n    }\n    switch (iconName) {\n      case \"Assignment\":\n        return <AssignmentIcon style={{ color: c }} />;\n      case \"Group\":\n        return <GroupIcon style={{ color: c }} />;\n      case \"Assessment\":\n        return <AssessmentIcon style={{ color: c }} />;\n      case \"Person\":\n        return <PersonIcon style={{ color: c }} />;\n      case \"ViewColumn\":\n        return <ViewColumnIcon style={{ color: c }} />;\n      case \"Exit\":\n        return <ExitIcon color=\"secondary\" />;\n      case \"Taxi\":\n        return <LocalTaxiIcon style={{ color: c }} />;\n      case \"Beheer\":\n        return <BuildIcon style={{ color: c }} />;\n      default:\n        return null;\n    }\n  }\n\n  getItem(page, index) {\n    const isCurrentPage = \"/\" + page.id === this.props.location.pathname;\n    let style = {};\n    if (page.bottom) {\n      style.position = \"absolute\";\n      style.bottom = \"0px\";\n    }\n\n    const color = isCurrentPage ? \"primary\" : \"inherit\";\n    const icon = (\n      <ListItemIcon>\n        <NotificationBadge scope={page.id}>\n          {this.getIcon(page.icon, color)}\n        </NotificationBadge>\n      </ListItemIcon>\n    );\n    return (\n      <ListItem\n        key={index}\n        button\n        onClick={() => this.onClick(page.id)}\n        style={style}\n      >\n        {icon}\n        <Typography variant=\"button\" color={color} className=\"HiddenOnMobile\">\n          {page.title}\n        </Typography>\n      </ListItem>\n    );\n  }\n\n  render() {\n    const pages = [\n      {\n        id: \"aanbod\",\n        title: \"Aanbod\",\n        icon: \"Assignment\"\n      },\n      {\n        id: \"groepen\",\n        title: \"Mijn groepen\",\n        icon: \"Group\"\n      },\n      {\n        id: \"portfolio\",\n        title: \"Portfolio\",\n        icon: \"Assessment\"\n      },\n      {\n        id: \"gegevens\",\n        title: \"Gegevens\",\n        icon: \"ViewColumn\" // table_chart is more appropriate\n      },\n      {\n        id: \"taxi\",\n        title: \"Taxi\",\n        icon: \"Taxi\"\n      },\n      {\n        id: \"beheer\",\n        title: \"Beheer\",\n        icon: \"Beheer\"\n      }\n    ];\n\n    const profile = [\n      {\n        id: \"profiel\",\n        title: \"Profiel\",\n        icon: \"Person\"\n      },\n      {\n        id: \"loguit\",\n        title: \"Log uit\",\n        icon: \"Exit\"\n      }\n    ];\n\n    const visiblePages = pages\n      .filter(page => this.state.pages.indexOf(page.id) !== -1)\n      .map(this.getItem.bind(this));\n\n    const visibleProfile = profile\n      .filter(page => this.state.pages.indexOf(page.id) !== -1)\n      .map(this.getItem.bind(this));\n\n    return (\n      <Paper elevation={8} className=\"Menu\">\n        <List component=\"nav\" style={{ height: \"100%\" }}>\n          {visiblePages}\n          <div style={{ position: \"absolute\", bottom: \"20px\", width: \"100%\" }}>\n            {visibleProfile}\n          </div>\n        </List>\n      </Paper>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  if (state.userId != null) {\n    return {\n      displayName: state.users[state.userId].displayName,\n      userId: state.userId,\n      role: state.role\n    };\n  }\n  return {\n    displayName: \"\",\n    userId: state.userId,\n    role: state.role\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, null)(Menu));\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport map from \"lodash/map\";\nimport forEach from \"lodash/forEach\";\n\nimport Page from \"./Page\";\nimport Progress from \"../components/Progress\";\nimport Field from \"../components/Field\";\nimport Group from \"./group/Group\";\nimport {\n  getSubjects,\n  getGroups,\n  getEnrolLments,\n  getParticipatingGroups\n} from \"../store/actions\";\n\nimport { Typography, Divider, Toolbar, Paper, Button } from \"@material-ui/core\";\nimport queryString from \"query-string\";\n\nclass Portfolio extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      period: props.currentPeriod + \"\",\n      leerjaar: props.role === \"student\" ? \"all\" : props.schoolYear\n    };\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    let { blok, leerjaar } = queryString.parse(nextProps.location.search);\n    if (!blok) {\n      blok =\n        nextProps.role === \"student\" ? \"all\" : nextProps.currentPeriod + \"\";\n    }\n    if (!leerjaar) {\n      leerjaar = nextProps.role === \"student\" ? \"all\" : nextProps.schoolYear;\n    }\n    return {\n      ...prevState,\n      period: blok,\n      schoolYear: leerjaar\n    };\n  }\n\n  handlePeriodChange = period => {\n    this.props.history.push({\n      search: `blok=${period}&leerjaar=${this.state.leerjaar}`\n    });\n  };\n\n  handleYearChange = schoolYear => {\n    this.props.history.push({\n      search: `blok=${this.state.period}&leerjaar=${schoolYear}`\n    });\n  };\n\n  orderGroups(groups, compareFunction) {\n    let orders = {};\n    forEach(groups, group => {\n      if (!orders[compareFunction(group)]) {\n        orders[compareFunction(group)] = [];\n      }\n      orders[compareFunction(group)].push(group);\n    });\n    return map(orders, this.getOrder);\n  }\n\n  getOrder(groups, name) {\n    groups = map(groups, group => (\n      <Group key={group.id} groupId={group.id} display=\"card\" />\n    ));\n\n    return (\n      <div key={name} style={{ padding: \"10px\" }}>\n        <Field\n          value={name}\n          style={{ type: \"headline\", color: \"secondary\" }}\n          layout={{ area: true }}\n        />\n        {groups}\n        <Divider style={{ marginTop: \"20px\" }} />\n      </div>\n    );\n  }\n\n  openCertificate = () => {\n    const userId = this.props.userId;\n\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\n      window.open(\n        \"http://localhost:26194/api/certificate/portfolio/\" + userId,\n        \"_blank\"\n      );\n    } else {\n      window.open(\"/api/certificate/portfolio/\" + userId, \"_blank\");\n    }\n  };\n\n  render() {\n    let options = [\n      { label: \"Alle\", value: \"all\" },\n      { label: \"Blok 1\", value: \"period1\" },\n      { label: \"Blok 2\", value: \"period2\" },\n      { label: \"Blok 3\", value: \"period3\" },\n      { label: \"Blok 4\", value: \"period4\" }\n    ];\n    if (this.props.role === \"student\") {\n      options.splice(1, 0, { label: \"Ingeschreven\", value: \"enrolled\" });\n    }\n\n    if (!this.props.groups) {\n      this.props.getParticipatingGroups();\n    }\n    if (!this.props.enrollmentIds) {\n      this.props.getEnrolLments();\n    }\n\n    let groupIds = this.props.enrollmentIds || [];\n    if (this.state.filter !== \"enrolled\") {\n      /* If filter is not equal to enrolled, participating ids need to be added. \n\t\t\tFrom participating ids we first remove the ones that are already in enrolled ids. \n\t\t\tFinally, after adding participating ids, we filter on period */\n      groupIds = this.props.participatingGroupIds\n        .filter(id => {\n          return groupIds.indexOf(id) === -1;\n        })\n        .concat(groupIds);\n    }\n\n    let content;\n    if (\n      this.props.groups == null ||\n      Object.keys(this.props.groups).length === 0\n    ) {\n      content = <Progress />;\n    } else {\n      const groups = groupIds\n        .map(id => this.props.groups[id])\n        .filter(group => group != null)\n        .filter(group => {\n          if (this.state.period !== \"all\") {\n            return group.period + \"\" === this.state.period;\n          } else {\n            return true;\n          }\n        })\n        .filter(group => {\n          if (this.state.schoolYear !== \"all\") {\n            return group.schoolYear + \"\" === this.state.schoolYear;\n          } else {\n            return true;\n          }\n        });\n      content = this.orderGroups(groups, group => {\n        return group.subjectName;\n      });\n    }\n\n    return (\n      <Page>\n        <Paper elevation={2} style={{ position: \"relative\" }}>\n          <Toolbar style={{ display: \"flex\" }}>\n            <Typography\n              variant=\"subtitle1\"\n              color=\"textSecondary\"\n              style={{ flex: \"2 1 auto\" }}\n            >\n              {this.props.role === \"student\" ? \"Portfolio\" : \"Mijn groepen\"}\n            </Typography>\n            {this.props.role === \"student\" && (\n              <Button\n                color=\"primary\"\n                variant=\"contained\"\n                style={{ margin: \"20px\" }}\n                onClick={this.openCertificate}\n              >\n                Certificaat\n              </Button>\n            )}\n            <Field\n              label=\"blok\"\n              value={this.state.period}\n              editable\n              style={{ flex: \"none\" }}\n              options={[\n                { label: \"Alle\", value: \"all\" },\n                { label: \"Blok 1\", value: \"1\" },\n                { label: \"Blok 2\", value: \"2\" },\n                { label: \"Blok 3\", value: \"3\" },\n                { label: \"Blok 4\", value: \"4\" }\n              ]}\n              onChange={this.handlePeriodChange}\n            />\n            <Field\n              label=\"leerjaar\"\n              style={{ flex: \"none\" }}\n              value={this.state.schoolYear}\n              editable\n              options={[\n                { label: \"Alle\", value: \"all\" },\n                { label: \"2016/2017\", value: \"2016/2017\" },\n                { label: \"2017/2018\", value: \"2017/2018\" },\n                { label: \"2018/2019\", value: \"2018/2019\" },\n                { label: \"2019/2020\", value: \"2019/2020\" },\n                { label: \"2020/2021\", value: \"2020/2021\" },\n                { label: \"2021/2022\", value: \"2021/2022\" }\n              ]}\n              onChange={this.handleYearChange}\n            />\n          </Toolbar>\n        </Paper>\n        {content}\n      </Page>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    groups: state.groups,\n    participatingGroupIds: state.users[state.userId].participatingGroupIds,\n    enrollmentIds: state.users[state.userId].enrollmentIds,\n    role: state.role,\n    schoolYear: state.schoolYear,\n    currentPeriod: state.currentPeriod,\n    userId: state.userId\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    getSubjects: () => dispatch(getSubjects()),\n    getGroups: () => dispatch(getGroups()),\n    getEnrolLments: () => dispatch(getEnrolLments()),\n    getParticipatingGroups: () => dispatch(getParticipatingGroups())\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Portfolio);\n","import React, { Component } from 'react';\nimport EnsureSecureLogin from '../components/EnsureSecureLogin';\nimport Page from './Page';\nimport $ from \"jquery\";\nimport map from 'lodash/map';\n\nimport { connect } from 'react-redux';\nimport queryString from \"query-string\";\nimport SelectUser from '../components/SelectUser';\nimport { Toolbar, Button, Paper, Typography, List, ListItem, ListItemText, } from '@material-ui/core';\nimport Field from '../components/Field';\nimport { getSubjects, setAlias, addNotification, addSubject, addCourse, addGroup, relogSecure } from '../store/actions';\n\nconst pages = [\"alias\", \"vak\", \"module\", \"groep\"];\n\nclass ControlPanel extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tcourses: [],\n\t\t}\n\t}\n\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\n\t\tlet values = queryString.parse(nextProps.location.search);\n\t\treturn {\n\t\t\t...prevState,\n\t\t\t...{\n\t\t\t\tpage: values.page ? values.page : pages[0],\n\t\t\t}\n\t\t}\n\t}\n\n\tmapPageToListItem = (pageName) => {\n\t\treturn <ListItem button onClick={() => this.handlePageChange(pageName)} key={pageName}>\n\t\t\t<ListItemText>\n\t\t\t\t<Typography variant=\"button\" color={pageName === this.state.page ? \"primary\" : \"initial\"} style={{ minWidth: \"150px\" }}>\n\t\t\t\t\t{pageName.charAt(0).toUpperCase() + pageName.slice(1)}\n\t\t\t\t</Typography>\n\t\t\t</ListItemText>\n\t\t</ListItem >\n\t}\n\n\tcomponentDidMount() {\n\t\t$.ajax({\n\t\t\turl: \"api/course/list\",\n\t\t\ttype: \"get\",\n\t\t\tdata: {},\n\t\t\tdataType: \"json\",\n\t\t}).then((courses) => {\n\t\t\tthis.setState({\n\t\t\t\tcourses\n\t\t\t});\n\t\t});\n\t\tthis.props.getSubjects();\n\t}\n\n\n\thandlePageChange = value => {\n\t\tthis.props.history.push({\n\t\t\tsearch: \"page=\" + value,\n\t\t});\n\t}\n\n\tgetContent = () => {\n\t\tswitch (this.state.page) {\n\t\t\tcase \"alias\":\n\t\t\t\treturn <Alias dispatch={this.props.dispatch} />\n\t\t\tcase \"vak\":\n\t\t\t\treturn <Subject addSubject={this.props.addSubject} />\n\t\t\tcase \"module\":\n\t\t\t\treturn <Course addCourse={this.props.addCourse} subjects={this.props.subjects} />\n\t\t\tcase \"groep\":\n\t\t\t\treturn <Group addGroup={this.props.addGroup} courses={this.state.courses} />\n\t\t\tdefault:\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Page>\n\t\t\t\t<EnsureSecureLogin>\n\t\t\t\t\t<Paper\n\t\t\t\t\t\televation={2}\n\t\t\t\t\t\tstyle={{ position: \"relative\" }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Toolbar style={{ display: \"flex\" }}>\n\t\t\t\t\t\t\t<Typography variant=\"subtitle1\" color=\"textSecondary\" style={{ flex: \"2 1 auto\" }}>\n\t\t\t\t\t\t\t\tBeheer\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t</Toolbar>\n\t\t\t\t\t</Paper>\n\t\t\t\t\t<div style={{ display: \"flex\" }} className=\"ColumnFlexDirectionOnMobile\">\n\t\t\t\t\t\t<Paper elevation={2}>\n\t\t\t\t\t\t\t<List component=\"nav\" style={{ flex: 1 }}>\n\t\t\t\t\t\t\t\t{pages.map(this.mapPageToListItem)}\n\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t<div style={{ padding: \"12px\" }}>\n\t\t\t\t\t\t\t{this.getContent()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</EnsureSecureLogin>\n\t\t\t</Page>\n\t\t);\n\t}\n}\n\nclass Alias extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\taliasId: null,\n\t\t}\n\t}\n\n\t;\n\n\trender() {\n\t\treturn <div style={{ margin: \"10px 0\" }}>\n\t\t\t<SelectUser onChange={(aliasId) => this.setState({ aliasId })} />\n\t\t\t<br />\n\t\t\t<Button\n\t\t\t\tvariant=\"contained\"\n\t\t\t\tcolor=\"primary\"\n\t\t\t\tdisabled={this.state.aliasId == null}\n\t\t\t\tonClick={() => this.props.dispatch(setAlias(this.state.aliasId))}>\n\t\t\t\tLogin in met alias\n\t\t\t</Button>\n\t\t</div>\n\t}\n}\n\nclass Subject extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tname: \"\",\n\t\t\tdescription: \"\",\n\t\t}\n\t}\n\trender() {\n\t\tconst subject = this.state;\n\t\treturn <div>\n\t\t\t<Field\n\t\t\t\tlabel=\"Naam\"\n\t\t\t\tvalue={subject.name}\n\t\t\t\tonChange={(name) => this.setState({ name })}\n\t\t\t\teditable={true}\n\t\t\t\tvalidate={{ maxLength: 50 }}\n\t\t\t/>\n\t\t\t<br />\n\t\t\t<Field\n\t\t\t\tlabel=\"Omschrijving\"\n\t\t\t\tvalue={subject.description}\n\t\t\t\tonChange={(description) => this.setState({ description })}\n\t\t\t\teditable={true}\n\t\t\t\tvalidate={{ maxLength: 440 }}\n\t\t\t\tlayout={{ area: true }}\n\t\t\t/>\n\t\t\t<Button\n\t\t\t\tvariant=\"contained\"\n\t\t\t\tcolor=\"primary\"\n\t\t\t\tstyle={{ height: \"37px\", margin: \"12px\" }}\n\t\t\t\tonClick={() => { this.props.addSubject(subject.name, subject.description).then(relogSecure) }}>\n\t\t\t\tVoeg toe\n\t\t\t</Button>\n\t\t</div>\n\t}\n}\n\nclass Course extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tname: \"\",\n\t\t\tsubjectId: \"\",\n\t\t}\n\t}\n\trender() {\n\t\tconst course = this.state;\n\t\treturn <div>\n\t\t\t<Field\n\t\t\t\tlabel=\"Naam\"\n\t\t\t\tvalue={course.name}\n\t\t\t\tonChange={(name) => this.setState({ name })}\n\t\t\t\teditable={true}\n\t\t\t\tvalidate={{ maxLength: 50 }}\n\t\t\t\tstyle={{ flex: \"1\" }}\n\t\t\t/>\n\t\t\t<br />\n\t\t\t<Field\n\t\t\t\tvalue={course.subjectId}\n\t\t\t\tsubjectId label=\"Vak\"\n\t\t\t\tonChange={(subjectId) => this.setState({ subjectId })}\n\t\t\t\teditable={true}\n\t\t\t\toptions={map(this.props.subjects, (subject) => { return { value: subject.id, label: subject.name } })}\n\t\t\t\tstyle={{ minWidth: \"200px\" }}\n\t\t\t/>\n\t\t\t<br />\n\t\t\t<Button\n\t\t\t\tvariant=\"contained\"\n\t\t\t\tcolor=\"primary\"\n\t\t\t\tstyle={{ height: \"37px\", margin: \"12px\" }}\n\t\t\t\tonClick={() => { this.props.addCourse(course.name, course.subjectId).then(relogSecure) }}>\n\t\t\t\tVoeg toe\n\t\t\t</Button>\n\t\t</div>\n\t}\n}\n\n\nclass Group extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tcourseId: null,\n\t\t\tteacherId: null,\n\t\t}\n\t}\n\trender() {\n\t\tconst group = this.state;\n\t\treturn <div>\n\t\t\t<Field\n\t\t\t\tvalue={group.courseId}\n\t\t\t\tlabel=\"Module\"\n\t\t\t\tonChange={(courseId) => this.setState({ courseId })}\n\t\t\t\teditable={true}\n\t\t\t\toptions={this.props.courses.map((course) => { return { label: course.name, value: course.id } })}\n\t\t\t\tstyle={{ minWidth: \"200px\" }}\n\t\t\t/>\n\t\t\t<br />\n\t\t\t<SelectUser\n\t\t\t\tvalue={group.teacherId}\n\t\t\t\tonChange={(teacherId) => this.setState({ teacherId })}\n\t\t\t/>\n\t\t\t<br />\n\t\t\t<Button\n\t\t\t\tvariant=\"contained\"\n\t\t\t\tcolor=\"primary\"\n\t\t\t\tstyle={{ height: \"37px\", margin: \"12px\" }}\n\t\t\t\tonClick={() => { this.props.addGroup(group.courseId, group.teacherId).then(relogSecure) }}>\n\t\t\t\tVoeg toe\n\t\t\t</Button>\n\t\t</div>\n\t}\n}\n\nfunction mapStateToProps(state) {\n\treturn {\n\t\tsubjects: state.subjects,\n\t\tgroups: state.groups,\n\t}\n}\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\taddSubject: async (name, description) => dispatch(addSubject(name, description)),\n\t\taddCourse: async (name, subjectId) => dispatch(addCourse(name, subjectId)),\n\t\taddGroup: async (courseId, userId) => dispatch(addGroup(courseId, userId)),\n\t\taddNotification: (notification) => dispatch(addNotification(notification)),\n\t\tgetSubjects: () => dispatch(getSubjects()),\n\t\tdispatch: dispatch,\n\t}\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ControlPanel);","import React, { Component } from \"react\";\nimport {\n\tRoute,\n\tSwitch,\n\tRedirect,\n\twithRouter,\n} from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nimport { getSelf, addNotification, isUserMissingInfo } from './store/actions';\n\nimport Login from \"./pages/Login\";\nimport CourseSelect from \"./pages/CourseSelect\";\nimport Group from \"./pages/group/Group\";\nimport User from \"./pages/user/User\";\nimport DataPage from \"./pages/DataPage\";\nimport Taxi from \"./pages/Taxi\";\n\nimport Header from \"./components/Header\";\nimport NotificationBar from \"./components/NotificationBar\";\nimport Menu from \"./components/Menu\";\nimport Portfolio from \"./pages/Portfolio\";\nimport ControlPanel from \"./pages/ControlPanel\";\n\n\nclass App extends Component {\n\n\tcomponentDidMount() {\n\t\tthis.props.getSelf();\n\t}\n\n\tcomponentDidUpdate() {\n\t\tif (isUserMissingInfo(this.props.user) && this.props.location.pathname !== \"/profiel\") {\n\t\t\tthis.props.history.push(\"/profiel\");\n\t\t}\n\t}\n\n\thandleShowMenu() {\n\t\tlet showMenu = this.state.showMenu;\n\t\tthis.setState({\n\t\t\tshowMenu: !showMenu,\n\t\t});\n\t}\n\n\tgetStartPage(role) {\n\t\tswitch (role) {\n\t\t\tcase \"student\":\n\t\t\t\treturn \"/aanbod\";\n\t\t\tcase \"grade_admin\":\n\t\t\t\treturn \"/gegevens\";\n\t\t\tdefault:\n\t\t\t\treturn \"/groepen\";\n\t\t}\n\t}\n\n\trender() {\n\t\tif (!this.props.role && this.props.location.pathname !== \"/login\") {\n\t\t\treturn <div />;\n\t\t}\n\t\tconst startPage = this.getStartPage(this.props.role);\n\t\treturn (\n\t\t\t<div className=\"App\">\n\t\t\t\t<NotificationBar />\n\t\t\t\t{this.props.showMenu && <Menu />}\n\t\t\t\t<Header />\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route path=\"/login\" component={Login} />\n\t\t\t\t\t<Route path=\"/aanbod\" component={CourseSelect} />\n\t\t\t\t\t<Route path=\"/groep/:groupId\" component={Group} />\n\t\t\t\t\t<Route path=\"/gebruiker/:userId\" component={User} />\n\t\t\t\t\t<Route path=\"/profiel/\" component={User} />\n\t\t\t\t\t<Route path=\"/portfolio/\" component={Portfolio} />\n\t\t\t\t\t<Route path=\"/groepen/\" component={Portfolio} />\n\t\t\t\t\t<Route path=\"/gegevens/\" component={DataPage} />\n\t\t\t\t\t<Route path=\"/taxi/\" component={Taxi} />\n\t\t\t\t\t<Route path=\"/beheer/\" component={ControlPanel} />\n\t\t\t\t\t<Redirect push to={startPage} />\n\t\t\t\t</Switch>\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nfunction mapStateToProps(state) {\n\treturn {\n\t\tshowMenu: state.showMenu,\n\t\tuserId: state.userId,\n\t\trole: state.role,\n\t\tuser: state.userId ? state.users[state.userId] : null,\n\t};\n}\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tgetSelf: () => dispatch(getSelf()),\n\t\taddNotification: (notification) => dispatch(addNotification(notification)),\n\t};\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(App));\n","import React, { Component } from \"react\";\n\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\n\nimport theme from './MuiTheme';\nimport App from '../App';\n\nclass GlobalProvider extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<Provider store={this.props.store}>\n\t\t\t\t<MuiThemeProvider theme={theme}>\n\t\t\t\t\t<BrowserRouter>\n\t\t\t\t\t\t<App />\n\t\t\t\t\t</BrowserRouter>\n\t\t\t\t</MuiThemeProvider>\n\t\t\t</Provider>\n\t\t);\n\t}\n}\n\nexport default GlobalProvider;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createStore, applyMiddleware, compose as reduxCompose } from 'redux';\nimport thunk from 'redux-thunk';\n\nimport reducer from './store/mainReducer';\nimport GlobalProvider from './lib/GlobalProvider';\nimport \"./layout.css\";\nrequire('typeface-roboto');\n\nconst compose = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || reduxCompose;\nconst store = createStore(\n  reducer,\n  compose(\n    applyMiddleware(thunk),\n  ),\n);\n\nReactDOM.render(\n\t<GlobalProvider store={store} />,\n\tdocument.getElementById('root'));\n"],"sourceRoot":""}