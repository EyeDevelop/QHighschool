{"version":3,"sources":["store/usersReducer.js","store/groupsReducer.js","store/mainReducer.js","lib/MuiTheme.js","components/Field.js","store/actions.js","pages/Login.js","pages/Page.js","components/Progress.js","pages/group/EnrollmentPopup.js","pages/group/ChooseButton.js","components/EnsureSecureLogin.js","pages/group/Evaluation.js","pages/group/GroupCard.js","pages/user/UserRow.js","pages/user/UserPage.js","pages/user/UserCard.js","pages/user/User.js","pages/group/PresenceTable.js","pages/group/Lesson.js","pages/user/UserList.js","components/PageLeaveWarning.js","pages/group/GroupData.js","components/NotificationBadge.js","pages/group/GroupPage.js","pages/group/Group.js","pages/CourseSelect.js","pages/DataPage.js","pages/Taxi.js","components/Header.js","components/NotificationBar.js","components/Menu.js","pages/Portfolio.js","components/SelectUser.js","pages/ControlPanel.js","App.js","lib/GlobalProvider.js","index.js"],"names":["DEFAULT_USERS","usersReducer","users","arguments","length","undefined","action","type","newUsers","x","Object","objectSpread","defineProperty","user","id","userId","enrollmentIds","concat","groupId","index","indexOf","toConsumableArray","slice","DEFAULT_GROUPS","groups","group","DEFAULT_STATE","enrollableGroups","currentPeriod","subjects","showMenu","notifications","hasFetched","mainReducer","state","role","secureLogin","notification","menuState","call","method","data","lessons","lessonId","userStatus","groupsReducer","theme","createMuiTheme","breakpoints","keys","values","xs","sm","md","lg","xl","direction","mixins","toolbar","minHeight","@media (min-width:0px) and (orientation: landscape)","@media (min-width:600px)","overrides","palette","common","black","white","primary","main","contrastText","light","dark","secondary","error","grey","50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700","contrastThreshold","tonalOffset","text","disabled","hint","divider","background","paper","default","active","hover","hoverOpacity","selected","disabledBackground","props","shadows","typography","fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","display4","fontWeight","letterSpacing","lineHeight","marginLeft","color","display3","display2","display1","headline","title","subheading","body2","body1","caption","button","textTransform","transitions","easing","easeInOut","easeOut","easeIn","sharp","duration","shortest","shorter","short","standard","complex","enteringScreen","leavingScreen","spacing","unit","zIndex","mobileStepper","appBar","drawer","modal","snackbar","tooltip","Field","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","onChange","event","target","value","menuItems","endAdornment","style","layout","label","multiline","fullWidth","options","disableUnderline","underline","margin","marginPx","classNames","alignment","float","textAlign","push","area","editable","labelVisible","a","filter","opt","map","option","react_default","createElement","MenuItem_default","key","InputAdornment_default","position","td","width","field","TextField_default","className","join","select","flex","InputProps","inputProps","nextProps","prevState","validate","rules","test","isNaN","replace","min","parseFloat","max","notEmpty","maxLength","React","Component","apiErrorHandler","dispatch","e2","responseJSON","Math","random","priority","message","scope","fetchData","_x","_x2","_x3","_x4","_x5","_x6","_fetchData","apply","_callee","endpoint","getState","forceArray","f","i","o","regenerator_default","wrap","_context","prev","next","abrupt","Promise","reject","Error","$","ajax","url","dataType","then","list","Array","isArray","keyBy","catch","stop","getSubjects","getGroups","getSelf","addNotification","not","year","level","profile","preferedEmail","phoneNumber","addMissingInfoNotifications","removeNotification","window","location","pathname","setCookie","search","document","href","toggleMenu","getEnrolLments","enrollments","addSubject","name","description","addCourse","subjectId","addGroup","courseId","mainTeacherId","cname","cvalue","exhours","d","Date","setTime","getTime","expires","toUTCString","cookie","Login","generateEmail","bind","interval","setInterval","school","schoolShort","studentNumber","floor","setState","clearInterval","Typography_default","variant","overflow","history","Paper_default","elevation","padding","gutterBottom","generateColoredEmail","Button_default","size","onClick","login","withRouter","connect","email","password","Page","children","Progress","isShowing","_this2","timeout","setTimeout","clearTimeout","CircularProgress_default","EnrollmentPopup","Dialog_default","open","keepMounted","DialogContent_default","DialogContentText_default","day","display","chosenDayGroupName","DialogActions_default","DialogTitle_default","courseName","handlePopup","Clear_default","_this3","_this4","remarks","preventPopupClose","page","getRemarkPage","getCancelPage","getDuplicatePage","getConfirmPage","hasChosen","hasChosenDay","ChooseButton","getEnrollableGroups","dialogOpen","preventClose","doEnroll","toggleEnrollment","dialog","group_EnrollmentPopup","loading","components_Progress","canChoose","period","ownProps","forEach","e","EnsureSecureLogin","marginTop","components_Field","EVALUATION_FORMATS","Evaluation","evaluation","student","assesment","EvaluationTab","onSortChange","sortValue","sortDirection","handleSingleChange","newEv","newEvaluations","evaluations","handleChange","sortEvaluations","sort","b","cmp","displayName","newValue","alignItems","paddingRight","paddingLeft","evComps","ev","index_es","component","Evaluation_Evaluation","explanation","components_EnsureSecureLogin","backgroundColor","enterDelay","placement","handleEvaluationTypeChange","CARD_STYLE","height","verticalAlign","marginRight","marginBottom","GroupCard","bottom","borderBottomLeftRadius","borderBottomRightRadius","justifyContent","getEvaluationColor","expand","group_ChooseButton","onMouseEnter","onMouseLeave","maxHeight","cursor","subjectName","enrollableFor","courseDescription","getBottomSection","number","numberWithoutCharacters","substr","match","exec","firstName","lastName","formatPhoneNumber","profiles","levels","UserPage","JSON","stringify","shouldFillIn","ownProfile","pages_Page","Divider_default","hasChanged","save","setUser","User","notExists","user_UserPage","UserRow","UserCard","s","queryString","parse","setSecureLogin","from","beforeLoginPath","ca","decodeURIComponent","split","c","charAt","substring","getCookie","params","PresenceTable","createRow","participantId","content","lesson","p","presence","createPresenceComponent","user_User","createLessonHeader","numberInBlock","status","rows","participantIds","partId","unshift","Lesson","mini","setPresenceUserStatus","courseGroupId","flexDirection","kind","subject","activities","getWeekdayString","date","getDay","getDate","getMonth","getFullYear","userIsMemberOfGroup","getOptOutButton","UserList","getHeader","headerTitle","sortIds","userIds","toLowerCase","toString","header","PageLeaveWarning","giveWarning","onbeforeunload","returnValue","Prompt","when","GroupData","handleClickAway","anchorEl","showTeacherCard","currentTarget","top","right","teacherName","schoolYear","studyTime","Popover_default","onClose","anchorOrigin","horizontal","vertical","teacherId","colorPrimary","colorSecondary","colorError","NotificationBadge","classes","tooltipMessage","j","Badge_default","badgeContent","withStyles","RegExp","err","GroupPage","handleLessonChange","handleEvaluationChange","handlePresenceChange","presenceObj","setEditable","cancel","setGroup","handleTab","newTab","tabs","currentTab","user_UserList","0","group_Lesson","group_PresenceTable","Evaluation_EvaluationTab","getData","getGroupEnrollments","getGroupLessons","getGroupParticipants","getGroupPresence","getGroupEvaluations","group_GroupData","assign","AppBar_default","Tabs_default","indicatorColor","textColor","centered","tab","Tab_default","components_NotificationBadge","getCurrentTab","components_PageLeaveWarning","Group","getGroup","group_GroupPage","group_GroupCard","participatingGroupIds","getCourse","getCourseGroup","oldCourse","newCourse","oldCourseGroup","newCourseGroup","oldLessons","newLessons","oldPresence","newPresence","oldEvaluations","changedPresenceObjs","changedEvaluations","parseInt","participants","CourseSelect","handleSortChange","filterMethod","handleFilterChange","sortMethod","ListItem_default","ListItemText_default","minWidth","subjectsComponents","getMenuItem","enrolledGroupsIds","group_Group","enrolledGroups","getGroupsPerSubject","Toolbar_default","List_default","getMenuItems","splitValues","DataPage","componentDidMount","tables","splitTable","tableSortColumns","tableIndex","table","column","order","tableSortDirections","columnIndex","splitValue","splitIndex","findIndex","_loop","halfSplitTable","downloadTables","workbook","Excel","Workbook","sheet","addWorksheet","addRows","getColumn","filename","toLocaleDateString","downloadWorkbook","fileName","xlsx","writeBuffer","base64","xls64","Blob","URL","createObjectURL","download","body","appendChild","click","removeChild","revokeObjectURL","console","log","_","row","rowIndex","cell","Taxi","fetchSchedules","schedules","week","dangerouslySetInnerHTML","__html","n","Header","logoClick","IconButton_default","aria-label","Menu_default","src","alt","handleClick","Person_default","transform","NotificationBar","TransitionProps","Close_default","Menu","pages","reload","logout","iconName","Assignment_default","Group_default","Assessment_default","ViewColumn_default","ExitToApp_default","LocalTaxi_default","Build_default","isCurrentPage","icon","ListItemIcon_default","getIcon","visiblePages","getItem","visibleProfile","Portfolio","compareFunction","orders","getOrder","splice","getParticipatingGroups","groupIds","orderGroups","selectUser","input","getFittingUsers","regExp","count","v","handleInput","getAllUsers","onClickAway","Popper_default","aliasId","disablePortal","MenuList_default","initialValues","course","ControlPanel","loginUsingAlias","handleAliasChange","typeObjectAdded","success","handleTypeChange","courses","addFunction","typeValues","_ref2","asyncToGenerator","mark","_ref3","_callee2","_context2","_ref4","_callee3","_context3","addView","addType","val","SelectUser","maxWidth","add","_addSubject2","_callee4","_context4","_addCourse2","_callee5","_context5","_addGroup2","_callee6","_context6","App","components_Header","components_NotificationBar","startPage","components_Menu","Switch","Route","path","Redirect","to","GlobalProvider","react_redux_es","store","styles","BrowserRouter","src_App","require","compose","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","reduxCompose","createStore","reducer","applyMiddleware","thunk","ReactDOM","render","lib_GlobalProvider","getElementById"],"mappings":"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","file":"static/js/main.f2f1779d.chunk.js","sourcesContent":["const DEFAULT_USERS = {\r\n}\r\n\r\nfunction usersReducer(users = DEFAULT_USERS, action) {\r\n\tswitch (action.type) {\r\n\t\tcase \"CHANGE_USERS\":\r\n\t\t\tconst newUsers = users;\r\n\t\t\tfor (const x in action.users) {\r\n\t\t\t\tnewUsers[x] = { ...newUsers[x], ...action.users[x] }\r\n\t\t\t}\r\n\t\t\treturn newUsers;\r\n\t\tcase \"CHANGE_USER\":\r\n\t\t\treturn {\r\n\t\t\t\t...users,\r\n\t\t\t\t[action.user.id]: {\r\n\t\t\t\t\t...users[action.user.id],\r\n\t\t\t\t\t...action.user\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\tcase \"CHANGE_ENROLLMENTS\":\r\n\t\t\tif (action.action === \"ADD\") {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...users,\r\n\t\t\t\t\t[action.userId]: {\r\n\t\t\t\t\t\t...users[action.userId],\r\n\t\t\t\t\t\tenrollmentIds: (users[action.userId].enrollmentIds || []).concat(action.groupId)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (action.action === \"REMOVE\") {\r\n\t\t\t\tconst index = users[action.userId].enrollmentIds.indexOf(action.groupId);\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...users,\r\n\t\t\t\t\t[action.userId]: {\r\n\t\t\t\t\t\t...users[action.userId],\r\n\t\t\t\t\t\tenrollmentIds: [\r\n\t\t\t\t\t\t\t...users[action.userId].enrollmentIds.slice(0, index),\r\n\t\t\t\t\t\t\t...users[action.userId].enrollmentIds.slice(index + 1),\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...users,\r\n\t\t\t\t[action.userId]: {\r\n\t\t\t\t\t...users[action.userId],\r\n\t\t\t\t\tenrollmentIds: action.enrollmentIds,\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn users;\r\n\t}\r\n}\r\n\r\n\r\nexport default usersReducer;","const DEFAULT_GROUPS = {\r\n}\r\n\r\nfunction usersReducer(groups = DEFAULT_GROUPS, action) {\r\n\tswitch (action.type) {\r\n\t\tcase \"CHANGE_GROUPS\":\r\n\t\t\treturn { ...action.groups,...groups, };\r\n\t\tcase \"CHANGE_GROUP\":\r\n\t\t\treturn {\r\n\t\t\t\t\t...groups,\r\n\t\t\t\t\t[action.group.id]: {\r\n\t\t\t\t\t\t...groups[action.group.id], \r\n\t\t\t\t\t\t...action.group\r\n\t\t\t\t\t}\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn groups;\r\n\t}\r\n}\r\n\r\n\r\nexport default usersReducer;","import usersReducer from \"./usersReducer\";\r\nimport groupsReducer from \"./groupsReducer\";\r\n\r\nconst DEFAULT_STATE = {\r\n\tuserId: null,\r\n\tenrollableGroups: null,\r\n\tcurrentPeriod: 4,\r\n\tsubjects: null,\r\n\tgroups: null,\r\n\tusers: null,\r\n\tshowMenu: true,\r\n\tnotifications: [],\r\n\thasFetched: [],\r\n}\r\n\r\nfunction mainReducer(state = DEFAULT_STATE, action) {\r\n\tswitch (action.type) {\r\n\t\tcase \"SET_SELF\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuserId: action.user.id,\r\n\t\t\t\trole: action.user.role,\r\n\t\t\t\tnotifications: [...state.notifications, ...action.user.notifications],\r\n\t\t\t\tusers: {\r\n\t\t\t\t\t[action.user.id]: action.user,\r\n\t\t\t\t\t...state.users,\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\tcase \"SET_SECURE_LOGIN\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsecureLogin: action.secureLogin,\r\n\t\t\t}\r\n\t\tcase \"ADD_NOTIFICATION\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tnotifications: [...state.notifications, action.notification],\r\n\t\t\t};\r\n\t\tcase \"REMOVE_NOTIFICATION\":\r\n\t\t\tconst index = state.notifications.indexOf(action.notification);\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tnotifications: [\r\n\t\t\t\t\t...state.notifications.slice(0, index),\r\n\t\t\t\t\t...state.notifications.slice(index + 1)\r\n\t\t\t\t],\r\n\t\t\t};\r\n\t\tcase \"TOGGLE_MENU\":\r\n\t\t\tif (action.menuState != null) {\r\n\t\t\t\treturn { ...state, showMenu: action.menuState };\r\n\t\t\t} else {\r\n\t\t\t\treturn { ...state, showMenu: !state.showMenu };\r\n\t\t\t}\r\n\t\tcase \"HAS_FETCHED\":\r\n\t\t\treturn { ...state, hasFetched: [...state.hasFetched, { call: action.call, method: action.method, data: action.data }] };\r\n\t\tcase \"CHANGE_ENROLLABLE_GROUPS\":\r\n\t\t\treturn { ...state, enrollableGroups: action.enrollableGroups };\r\n\t\tcase \"CHANGE_SUBJECTS\":\r\n\t\t\treturn { ...state, subjects: { ...state.subjects, ...action.subjects } };\r\n\t\tcase \"CHANGE_PRESENCE_USER_STATUS\":\r\n\t\t\tlet lessons = state.groups[action.groupId].lessons;\r\n\t\t\tlessons[action.lessonId].userStatus = action.userStatus;\r\n\t\t\treturn { ...state, lessons }\r\n\t\tdefault:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: usersReducer(state.users, action),\r\n\t\t\t\tgroups: groupsReducer(state.groups, action),\r\n\t\t\t}\r\n\t}\r\n}\r\n\r\n\r\nexport default mainReducer;","import { createMuiTheme } from '@material-ui/core/styles';\r\n\r\n// const theme = createMuiTheme({\r\n// \tpalette: {\r\n// \t\tprimary: {\r\n// \t\t\t// light: '#5472d3',\r\n// \t\t\tmain: '#0d47a1',\r\n// \t\t\t// dark: '#002171',\r\n// \t\t\tcontrastText: '#fff',\r\n// \t\t},\r\n// \t\tsecondary: {\r\n// \t\t\t// light: '#60ad5e',\r\n// \t\t\tmain: '#2e7d32',\r\n// \t\t\t// dark: '#005005',\r\n// \t\t\tcontrastText: '#ffffff',\r\n// \t\t},\r\n// \t},\r\n// });\r\n\r\nconst theme = createMuiTheme({\r\n\t\"breakpoints\": {\r\n\t\t\"keys\": [\r\n\t\t\t\"xs\",\r\n\t\t\t\"sm\",\r\n\t\t\t\"md\",\r\n\t\t\t\"lg\",\r\n\t\t\t\"xl\"\r\n\t\t],\r\n\t\t\"values\": {\r\n\t\t\t\"xs\": 0,\r\n\t\t\t\"sm\": 600,\r\n\t\t\t\"md\": 960,\r\n\t\t\t\"lg\": 1280,\r\n\t\t\t\"xl\": 1920\r\n\t\t}\r\n\t},\r\n\t\"direction\": \"ltr\",\r\n\t\"mixins\": {\r\n\t\t\"toolbar\": {\r\n\t\t\t\"minHeight\": 56,\r\n\t\t\t\"@media (min-width:0px) and (orientation: landscape)\": {\r\n\t\t\t\t\"minHeight\": 48\r\n\t\t\t},\r\n\t\t\t\"@media (min-width:600px)\": {\r\n\t\t\t\t\"minHeight\": 64\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\"overrides\": {},\r\n\t\"palette\": {\r\n\t\t\"common\": {\r\n\t\t\t\"black\": \"#000\",\r\n\t\t\t\"white\": \"#fff\"\r\n\t\t},\r\n\t\t\"type\": \"light\",\r\n\t\t\"primary\": {\r\n\t\t\t\"main\": \"#08C8F9\",\r\n\t\t\t\"contrastText\": \"#fff\",\r\n\t\t\t\"light\": \"rgb(57, 211, 250)\",\r\n\t\t\t\"dark\": \"rgb(5, 140, 174)\"\r\n\t\t},\r\n\t\t\"secondary\": {\r\n\t\t\t\"main\": \"#C3386B\",\r\n\t\t\t\"contrastText\": \"#ffffff\",\r\n\t\t\t\"light\": \"rgb(207, 95, 136)\",\r\n\t\t\t\"dark\": \"rgb(136, 39, 74)\"\r\n\t\t},\r\n\t\t\"error\": {\r\n\t\t\t\"light\": \"#e57373\",\r\n\t\t\t\"main\": \"#f44336\",\r\n\t\t\t\"dark\": \"#d32f2f\",\r\n\t\t\t\"contrastText\": \"#fff\"\r\n\t\t},\r\n\t\t\"grey\": {\r\n\t\t\t\"50\": \"#fafafa\",\r\n\t\t\t\"100\": \"#f5f5f5\",\r\n\t\t\t\"200\": \"#eeeeee\",\r\n\t\t\t\"300\": \"#e0e0e0\",\r\n\t\t\t\"400\": \"#bdbdbd\",\r\n\t\t\t\"500\": \"#9e9e9e\",\r\n\t\t\t\"600\": \"#757575\",\r\n\t\t\t\"700\": \"#616161\",\r\n\t\t\t\"800\": \"#424242\",\r\n\t\t\t\"900\": \"#212121\",\r\n\t\t\t\"A100\": \"#d5d5d5\",\r\n\t\t\t\"A200\": \"#aaaaaa\",\r\n\t\t\t\"A400\": \"#303030\",\r\n\t\t\t\"A700\": \"#616161\"\r\n\t\t},\r\n\t\t\"contrastThreshold\": 3,\r\n\t\t\"tonalOffset\": 0.2,\r\n\t\t\"text\": {\r\n\t\t\t\"primary\": \"rgba(0, 0, 0, 0.87)\",\r\n\t\t\t\"secondary\": \"rgba(0, 0, 0, 0.54)\",\r\n\t\t\t\"disabled\": \"rgba(0, 0, 0, 0.38)\",\r\n\t\t\t\"hint\": \"rgba(0, 0, 0, 0.38)\"\r\n\t\t},\r\n\t\t\"divider\": \"rgba(0, 0, 0, 0.12)\",\r\n\t\t\"background\": {\r\n\t\t\t\"paper\": \"#fff\",\r\n\t\t\t\"default\": \"#fafafa\"\r\n\t\t},\r\n\t\t\"action\": {\r\n\t\t\t\"active\": \"rgba(0, 0, 0, 0.54)\",\r\n\t\t\t\"hover\": \"rgba(0, 0, 0, 0.08)\",\r\n\t\t\t\"hoverOpacity\": 0.08,\r\n\t\t\t\"selected\": \"rgba(0, 0, 0, 0.14)\",\r\n\t\t\t\"disabled\": \"rgba(0, 0, 0, 0.26)\",\r\n\t\t\t\"disabledBackground\": \"rgba(0, 0, 0, 0.12)\"\r\n\t\t}\r\n\t},\r\n\t\"props\": {},\r\n\t\"shadows\": [\r\n\t\t\"none\",\r\n\t\t\"0px 1px 3px 0px rgba(0, 0, 0, 0.2),0px 1px 1px 0px rgba(0, 0, 0, 0.14),0px 2px 1px -1px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 1px 5px 0px rgba(0, 0, 0, 0.2),0px 2px 2px 0px rgba(0, 0, 0, 0.14),0px 3px 1px -2px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 1px 8px 0px rgba(0, 0, 0, 0.2),0px 3px 4px 0px rgba(0, 0, 0, 0.14),0px 3px 3px -2px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 2px 4px -1px rgba(0, 0, 0, 0.2),0px 4px 5px 0px rgba(0, 0, 0, 0.14),0px 1px 10px 0px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 5px 8px 0px rgba(0, 0, 0, 0.14),0px 1px 14px 0px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 6px 10px 0px rgba(0, 0, 0, 0.14),0px 1px 18px 0px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 4px 5px -2px rgba(0, 0, 0, 0.2),0px 7px 10px 1px rgba(0, 0, 0, 0.14),0px 2px 16px 1px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 5px 6px -3px rgba(0, 0, 0, 0.2),0px 9px 12px 1px rgba(0, 0, 0, 0.14),0px 3px 16px 2px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 6px 6px -3px rgba(0, 0, 0, 0.2),0px 10px 14px 1px rgba(0, 0, 0, 0.14),0px 4px 18px 3px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 6px 7px -4px rgba(0, 0, 0, 0.2),0px 11px 15px 1px rgba(0, 0, 0, 0.14),0px 4px 20px 3px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 12px 17px 2px rgba(0, 0, 0, 0.14),0px 5px 22px 4px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 13px 19px 2px rgba(0, 0, 0, 0.14),0px 5px 24px 4px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 7px 9px -4px rgba(0, 0, 0, 0.2),0px 14px 21px 2px rgba(0, 0, 0, 0.14),0px 5px 26px 4px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 8px 9px -5px rgba(0, 0, 0, 0.2),0px 15px 22px 2px rgba(0, 0, 0, 0.14),0px 6px 28px 5px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 8px 10px -5px rgba(0, 0, 0, 0.2),0px 16px 24px 2px rgba(0, 0, 0, 0.14),0px 6px 30px 5px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 8px 11px -5px rgba(0, 0, 0, 0.2),0px 17px 26px 2px rgba(0, 0, 0, 0.14),0px 6px 32px 5px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 9px 11px -5px rgba(0, 0, 0, 0.2),0px 18px 28px 2px rgba(0, 0, 0, 0.14),0px 7px 34px 6px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 9px 12px -6px rgba(0, 0, 0, 0.2),0px 19px 29px 2px rgba(0, 0, 0, 0.14),0px 7px 36px 6px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 10px 13px -6px rgba(0, 0, 0, 0.2),0px 20px 31px 3px rgba(0, 0, 0, 0.14),0px 8px 38px 7px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 10px 13px -6px rgba(0, 0, 0, 0.2),0px 21px 33px 3px rgba(0, 0, 0, 0.14),0px 8px 40px 7px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 10px 14px -6px rgba(0, 0, 0, 0.2),0px 22px 35px 3px rgba(0, 0, 0, 0.14),0px 8px 42px 7px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 11px 14px -7px rgba(0, 0, 0, 0.2),0px 23px 36px 3px rgba(0, 0, 0, 0.14),0px 9px 44px 8px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 11px 15px -7px rgba(0, 0, 0, 0.2),0px 24px 38px 3px rgba(0, 0, 0, 0.14),0px 9px 46px 8px rgba(0, 0, 0, 0.12)\"\r\n\t],\r\n\t\"typography\": {\r\n\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\"fontSize\": 14,\r\n\t\t\"fontWeightLight\": 300,\r\n\t\t\"fontWeightRegular\": 400,\r\n\t\t\"fontWeightMedium\": 500,\r\n\t\t\"display4\": {\r\n\t\t\t\"fontSize\": \"7rem\",\r\n\t\t\t\"fontWeight\": 300,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"letterSpacing\": \"-.04em\",\r\n\t\t\t\"lineHeight\": \"1.14286em\",\r\n\t\t\t\"marginLeft\": \"-.04em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\r\n\t\t},\r\n\t\t\"display3\": {\r\n\t\t\t\"fontSize\": \"3.5rem\",\r\n\t\t\t\"fontWeight\": 400,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"letterSpacing\": \"-.02em\",\r\n\t\t\t\"lineHeight\": \"1.30357em\",\r\n\t\t\t\"marginLeft\": \"-.02em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\r\n\t\t},\r\n\t\t\"display2\": {\r\n\t\t\t\"fontSize\": \"2.8125rem\",\r\n\t\t\t\"fontWeight\": 400,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"lineHeight\": \"1.06667em\",\r\n\t\t\t\"marginLeft\": \"-.02em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\r\n\t\t},\r\n\t\t\"display1\": {\r\n\t\t\t\"fontSize\": \"2.125rem\",\r\n\t\t\t\"fontWeight\": 400,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"lineHeight\": \"1.20588em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\r\n\t\t},\r\n\t\t\"headline\": {\r\n\t\t\t\"fontSize\": \"1.5rem\",\r\n\t\t\t\"fontWeight\": 400,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"lineHeight\": \"1.35417em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\r\n\t\t},\r\n\t\t\"title\": {\r\n\t\t\t\"fontSize\": \"1.3125rem\",\r\n\t\t\t\"fontWeight\": 500,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"lineHeight\": \"1.16667em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\r\n\t\t},\r\n\t\t\"subheading\": {\r\n\t\t\t\"fontSize\": \"1rem\",\r\n\t\t\t\"fontWeight\": 400,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"lineHeight\": \"1.5em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\r\n\t\t},\r\n\t\t\"body2\": {\r\n\t\t\t\"fontSize\": \"0.875rem\",\r\n\t\t\t\"fontWeight\": 500,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"lineHeight\": \"1.71429em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\r\n\t\t},\r\n\t\t\"body1\": {\r\n\t\t\t\"fontSize\": \"0.875rem\",\r\n\t\t\t\"fontWeight\": 400,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"lineHeight\": \"1.46429em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\r\n\t\t},\r\n\t\t\"caption\": {\r\n\t\t\t\"fontSize\": \"0.75rem\",\r\n\t\t\t\"fontWeight\": 400,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"lineHeight\": \"1.375em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\r\n\t\t},\r\n\t\t\"button\": {\r\n\t\t\t\"fontSize\": \"0.875rem\",\r\n\t\t\t\"textTransform\": \"uppercase\",\r\n\t\t\t\"fontWeight\": 500,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\r\n\t\t}\r\n\t},\r\n\t\"transitions\": {\r\n\t\t\"easing\": {\r\n\t\t\t\"easeInOut\": \"cubic-bezier(0.4, 0, 0.2, 1)\",\r\n\t\t\t\"easeOut\": \"cubic-bezier(0.0, 0, 0.2, 1)\",\r\n\t\t\t\"easeIn\": \"cubic-bezier(0.4, 0, 1, 1)\",\r\n\t\t\t\"sharp\": \"cubic-bezier(0.4, 0, 0.6, 1)\"\r\n\t\t},\r\n\t\t\"duration\": {\r\n\t\t\t\"shortest\": 150,\r\n\t\t\t\"shorter\": 200,\r\n\t\t\t\"short\": 250,\r\n\t\t\t\"standard\": 300,\r\n\t\t\t\"complex\": 375,\r\n\t\t\t\"enteringScreen\": 225,\r\n\t\t\t\"leavingScreen\": 195\r\n\t\t}\r\n\t},\r\n\t\"spacing\": {\r\n\t\t\"unit\": 8\r\n\t},\r\n\t\"zIndex\": {\r\n\t\t\"mobileStepper\": 1000,\r\n\t\t\"appBar\": 1100,\r\n\t\t\"drawer\": 1200,\r\n\t\t\"modal\": 1300,\r\n\t\t\"snackbar\": 1400,\r\n\t\t\"tooltip\": 1500\r\n\t}\r\n});\r\n\r\nexport default theme;","import React from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport theme from '../lib/MuiTheme'\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Field extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\terror: false,\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\treturn {\r\n\t\t\t...prevState,\r\n\t\t\terror: nextProps.editable ? !Field.validate(nextProps.value, nextProps.validate) : false,\r\n\t\t}\r\n\t}\r\n\r\n\tstatic validate(value, rules = {}, options = [value]) {\r\n\t\tswitch (rules.type) {\r\n\t\t\tcase \"phoneNumber\":\r\n\t\t\t\tconst re = /(^\\+[0-9]{2}|^\\+[0-9]{2}\\(0\\)|^\\(\\+[0-9]{2}\\)\\(0\\)|^00[0-9]{2}|^0)([0-9]{9}$|[0-9\\-\\s]{10}$)/i;\r\n\t\t\t\tif (!re.test(value)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"email\":\r\n\t\t\t\tconst re2 = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/g;\r\n\t\t\t\tif (!re2.test(value)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"integer\":\r\n\t\t\t\tif (!/^\\+?[1-9][\\d]*$/i.test(value)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"float\":\r\n\t\t\t\tif (isNaN(value)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"decimalGrade\":\r\n\t\t\t\t//replace dot with comma and vice versa\r\n\t\t\t\tconst x = value.replace(/\\./g, \"_$comma$_\").replace(/,/g, \".\").replace(/_\\$comma\\$_/g, \",\");\r\n\t\t\t\tif (x === \"ND\") {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tif (isNaN(x)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: break;\r\n\t\t}\r\n\t\tif (rules.min) {\r\n\t\t\tif (parseFloat(value) < rules.min) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (rules.max) {\r\n\t\t\tif (parseFloat(value) > rules.max) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (rules.notEmpty) {\r\n\t\t\tif (value == null || value === \"\" || value === \" \" || options.indexOf(value) === -1) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (rules.maxLength) {\r\n\t\t\tif (value.length > rules.maxLength) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tonChange = (event) => {\r\n\t\tthis.props.onChange(event.target.value);\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet value = this.props.value == null ? \"\" : this.props.value;\r\n\t\tlet style = this.props.style || {};\r\n\t\tlet layout = this.props.layout || {};\r\n\r\n\t\tlet label = this.props.label;\r\n\t\tlet disabled = true;\r\n\t\tlet multiline = false;\r\n\t\tlet fullWidth = false;\r\n\r\n\t\tlet options = this.props.options;\r\n\t\tlet disableUnderline = style.underline || true;\r\n\t\tlet margin = style.margin || \"none\";\r\n\t\tlet marginPx = 0;\r\n\t\tlet menuItems;\r\n\t\tlet endAdornment;\r\n\t\tlet classNames = [];\r\n\t\tif (this.props.style) {\r\n\t\t\tswitch (this.props.style.type) {\r\n\t\t\t\tcase \"headline\":\r\n\t\t\t\t\tstyle = {\r\n\t\t\t\t\t\t...style,\r\n\t\t\t\t\t\t...theme.typography.headline,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tstyle.color = theme.palette.primary.main;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"title\":\r\n\t\t\t\t\tstyle = {\r\n\t\t\t\t\t\t...style,\r\n\t\t\t\t\t\t...theme.typography.title\r\n\t\t\t\t\t};\r\n\t\t\t\t\tstyle.color = theme.palette.primary.main;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"caption\":\r\n\t\t\t\t\tstyle.color = theme.palette.text.secondary;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tstyle.color = theme.palette.text.primary;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tswitch (this.props.style.color) {\r\n\t\t\t\tcase \"primary\":\r\n\t\t\t\t\tstyle.color = theme.palette.primary.main;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"primaryContrast\":\r\n\t\t\t\t\tstyle.color = theme.palette.primary.contrastText;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"secondary\":\r\n\t\t\t\t\tstyle.color = theme.palette.secondary.main;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"error\":\r\n\t\t\t\t\tstyle.color = theme.palette.error.main;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (layout.alignment === \"right\") {\r\n\t\t\tstyle.float = \"right\";\r\n\t\t\tstyle.textAlign = \"right\";\r\n\t\t\tclassNames.push(\"right\");\r\n\t\t}\r\n\t\tif (layout.alignment === \"left\") {\r\n\t\t\tstyle.float = \"left\";\r\n\t\t}\r\n\r\n\t\tif (layout.area) {\r\n\t\t\tfullWidth = true;\r\n\t\t\tmultiline = true;\r\n\t\t}\r\n\r\n\t\tif (this.props.default && this.props.editable === false && (value === \"\" || value == null)) {\r\n\t\t\tvalue = this.props.default;\r\n\t\t}\r\n\r\n\t\tif (this.props.editable) {\r\n\t\t\tdisabled = false;\r\n\t\t\tdisableUnderline = style.underline || false;\r\n\t\t\tmargin = style.margin || \"normal\";\r\n\t\t} else {\r\n\t\t\tif (!(style.labelVisible === true)) {\r\n\t\t\t\tlabel = null;\r\n\t\t\t}\r\n\t\t\tif (options != null && options[0] != null && typeof options[0] !== \"string\") {\r\n\t\t\t\tconst a = options.filter((opt) => {\r\n\t\t\t\t\treturn opt.value === value;\r\n\t\t\t\t})[0];\r\n\t\t\t\tif (a != null) {\r\n\t\t\t\t\tvalue = a.label;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\toptions = null;\r\n\t\t}\r\n\r\n\t\tif (options) {\r\n\t\t\tmenuItems = options.map(option => {\r\n\t\t\t\tif (typeof option !== \"string\") {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<MenuItem key={option.value} value={option.value}>\r\n\t\t\t\t\t\t\t{option.label}\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<MenuItem key={option} value={option}>\r\n\t\t\t\t\t\t{option}\r\n\t\t\t\t\t</MenuItem>\r\n\t\t\t\t)\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (style.unit) {\r\n\t\t\tendAdornment = <InputAdornment position=\"end\">{style.unit}</InputAdornment>;\r\n\t\t}\r\n\t\tif (layout.td) {\r\n\t\t\tstyle.width = \"100%\";\r\n\t\t}\r\n\t\tswitch (margin) {\r\n\t\t\tcase \"dense\":\r\n\t\t\t\tmarginPx = 5;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"normal\":\r\n\t\t\t\tmarginPx = 12;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t}\r\n\r\n\t\tconst field = (\r\n\t\t\t<TextField\r\n\t\t\t\tvalue={value}\r\n\t\t\t\tmargin=\"none\"\r\n\t\t\t\tdisabled={disabled}\r\n\t\t\t\tfullWidth={fullWidth}\r\n\t\t\t\tmultiline={multiline}\r\n\t\t\t\tclassName={classNames.join(\" \")}\r\n\t\t\t\tlabel={label}\r\n\t\t\t\tselect={options ? true : false}\r\n\t\t\t\tstyle={{ flex: 1, ...style, margin: marginPx }}\r\n\t\t\t\tonChange={this.onChange}\r\n\t\t\t\terror={this.state.error}\r\n\t\t\t\tInputProps={{\r\n\t\t\t\t\tdisableUnderline,\r\n\t\t\t\t\tstyle,\r\n\t\t\t\t\tendAdornment: endAdornment ? endAdornment : null,\r\n\t\t\t\t\tinputProps: {\r\n\t\t\t\t\t\tstyle\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\r\n\t\t\t>\r\n\t\t\t\t{menuItems}\r\n\t\t\t</TextField>\r\n\t\t);\r\n\t\tif (layout.td) {\r\n\t\t\tstyle.width = undefined;\r\n\t\t\treturn (\r\n\t\t\t\t<td style={style}>\r\n\t\t\t\t\t{field}\r\n\t\t\t\t</td>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn field;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n\r\nField.propTypes = {\r\n\tvalidate: PropTypes.shape({\r\n\t\tmin: PropTypes.number,\r\n\t\tmax: PropTypes.number,\r\n\t\ttype: PropTypes.oneOf([\"phoneNumber\", \"email\", \"integer\", \"decimalGrade\"]),\r\n\t\tnotEmpty: PropTypes.bool,\r\n\t\tmaxLength: PropTypes.number,\r\n\t}),\r\n\tvalue: PropTypes.oneOfType([\r\n\t\tPropTypes.string,\r\n\t\tPropTypes.number,\r\n\t]),\r\n\tstyle: PropTypes.shape({\r\n\t\tlabelVisible: PropTypes.bool,\r\n\t\ttype: PropTypes.oneOf([\r\n\t\t\t\"title\",\r\n\t\t\t\"caption\",\r\n\t\t\t\"headline\",\r\n\t\t]),\r\n\t\tunderline: PropTypes.bool,\r\n\t\tcolor: PropTypes.oneOf([\"primary\", \"primaryContrast\", \"secondary\", \"error\"]),\r\n\t\tunit: PropTypes.string,\r\n\t\tmargin: PropTypes.oneOf([\"none\", \"dense\", \"normal\"]),\r\n\t}),\r\n\tlayout: PropTypes.shape({\r\n\t\tarea: PropTypes.bool,\r\n\t\talignment: PropTypes.oneOf([\"left\", \"right\"]),\r\n\t\ttd: PropTypes.bool,\r\n\t}),\r\n\tlabel: PropTypes.string,\r\n\toptions: PropTypes.any,\r\n\t// PropTypes.arrayOf(\r\n\t// \tPropTypes.oneOfType([\r\n\t// \t\tPropTypes.shape({\r\n\t// \t\t\tvalue: PropTypes.string,\r\n\t// \t\t\tlabel: PropTypes.string,\r\n\t// \t\t}),\r\n\t// \t\tPropTypes.string,\r\n\t// \t])),\r\n\teditable: PropTypes.bool,\r\n\tdefault: PropTypes.string,\r\n};\r\n\r\nexport default Field;","import filter from \"lodash/filter\"\r\nimport $ from \"jquery\";\r\nimport keyBy from \"lodash/keyBy\"\r\nimport map from \"lodash/map\"\r\nimport Field from \"../components/Field\"\r\n\r\nfunction apiErrorHandler(dispatch) {\r\n\treturn function handleError(error, e2) {\r\n\t\tconst responseJSON = error.responseJSON;\r\n\t\tdispatch({\r\n\t\t\ttype: \"ADD_NOTIFICATION\",\r\n\t\t\tnotification: {\r\n\t\t\t\tid: Math.random(),\r\n\t\t\t\tpriority: \"high\",\r\n\t\t\t\ttype: \"bar\",\r\n\t\t\t\tmessage: responseJSON && responseJSON.error ? responseJSON.error : \"Er is iets mis gegaan\",\r\n\t\t\t\tscope: \".\",\r\n\t\t\t}\r\n\t\t});\r\n\t\tthrow responseJSON;\r\n\t}\r\n}\r\n\r\nexport async function fetchData(endpoint, method, data, dispatch, getState, forceArray) {\r\n\tconst f = {\r\n\t\tcall: endpoint,\r\n\t\tmethod: method,\r\n\t\tdata: data,\r\n\t}\r\n\tfor (let i = 0; i < getState().hasFetched.length; i++) {\r\n\t\tconst o = getState().hasFetched[i];\r\n\t\tif (o.data === f.data && o.call === f.call && o.method === f.method) {\r\n\t\t\treturn Promise.reject(new Error(\"Duplicate api call\"));\r\n\t\t}\r\n\t};\r\n\tdispatch({\r\n\t\t...f,\r\n\t\ttype: \"HAS_FETCHED\",\r\n\t});\r\n\r\n\treturn $.ajax({\r\n\t\turl: \"/api/\" + endpoint,\r\n\t\ttype: method,\r\n\t\tdata: data,\r\n\t\tdataType: \"json\",\r\n\t}).then((list) => {\r\n\t\tif (method === \"put\" || method === \"patch\" || method === \"delete\") {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: \"ADD_NOTIFICATION\",\r\n\t\t\t\tnotification: {\r\n\t\t\t\t\tid: Math.random(),\r\n\t\t\t\t\tpriority: \"low\",\r\n\t\t\t\t\ttype: \"bar\",\r\n\t\t\t\t\tmessage: \"Opgeslagen\",\r\n\t\t\t\t\tscope: \"\",\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn (Array.isArray(list) && forceArray !== true) ? keyBy(list, \"id\") : list\r\n\t})\r\n\t\t.catch(apiErrorHandler(dispatch));\r\n}\r\n\r\n\r\nexport function getSubjects() {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"subject/list\", \"get\", null, dispatch, getState)\r\n\t\t\t.then((subjects) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_SUBJECTS\",\r\n\t\t\t\t\tsubjects,\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => { });\r\n\t}\r\n}\r\n\r\nexport function setAlias(userId) {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"function/alias\", \"post\", { userId, secureLogin: getState().secureLogin }, dispatch, getState)\r\n\t\t\t.then(() => {\r\n\t\t\t\tdocument.location.reload();\r\n\t\t\t})\r\n\t}\r\n}\r\n\r\nexport function getGroups() {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"group/list\", \"get\", null, dispatch, getState)\r\n\t\t\t.then((groups) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_GROUPS\",\r\n\t\t\t\t\tgroups,\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => {});\r\n\t}\r\n}\r\n\r\nexport function getParticipatingGroups() {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"user/groups\", \"get\", null, dispatch, getState)\r\n\t\t\t.then((groups) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_GROUPS\",\r\n\t\t\t\t\tgroups,\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => {});\r\n\t}\r\n}\r\n\r\nexport function getGroup(groupId) {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"group\", \"post\", { groupId: groupId }, dispatch, getState)\r\n\t\t\t.then((group) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_GROUPS\",\r\n\t\t\t\t\tgroups: { [groupId]: group }\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => { });\r\n\t}\r\n}\r\n\r\nfunction addMissingInfoNotifications(user, dispatch) {\r\n\tfunction not(field) {\r\n\t\tdispatch({\r\n\t\t\ttype: \"ADD_NOTIFICATION\",\r\n\t\t\tnotification: {\r\n\t\t\t\tid: Math.random(),\r\n\t\t\t\tpriority: \"high\",\r\n\t\t\t\ttype: \"badge\",\r\n\t\t\t\tmessage: \"Vul een geldige waarde voor \" + field + \" in\",\r\n\t\t\t\tscope: \"profiel\",\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tif (!Field.validate(user.year, {\r\n\t\ttype: \"integer\",\r\n\t\tmin: 1,\r\n\t\tmax: 6,\r\n\t})) { not(\"Leerjaar\") };\r\n\tif (!Field.validate(user.level, { notEmpty: true })) { not(\"Opleidingsniveau\") }\r\n\tif (!Field.validate(user.profile, { notEmpty: true })) { not(\"Profiel\") }\r\n\tif (!Field.validate(user.preferedEmail, { type: \"email\" })) { not(\"Voorkeurs email\") }\r\n\tif (!Field.validate(user.phoneNumber, { type: \"phoneNumber\" })) { not(\"Telefoonnummer\") }\r\n}\r\n\r\nexport function getSelf() {\r\n\treturn (dispatch, getState) => {\r\n\t\tconst notification = {\r\n\t\t\tid: -96,\r\n\t\t\tpriority: \"low\",\r\n\t\t\ttype: \"bar\",\r\n\t\t\tmessage: \"Bezig met laden\",\r\n\t\t\tscope: \".\",\r\n\t\t};\r\n\t\tdispatch(addNotification(notification));\r\n\t\tfetchData(\"user/self\", \"get\", null, dispatch, getState)\r\n\t\t\t.then((user) => {\r\n\t\t\t\taddMissingInfoNotifications(user, dispatch);\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"SET_SELF\",\r\n\t\t\t\t\tuser,\r\n\t\t\t\t});\r\n\t\t\t\tdispatch(removeNotification(notification));\r\n\t\t\t}).catch((error) => {\r\n\t\t\t\tdispatch(removeNotification(notification));\r\n\t\t\t\tif (error != null && error.error === \"Authentication Error\") {\r\n\t\t\t\t\tif (window.location.pathname !== \"/login\") {\r\n\t\t\t\t\t\tsetCookie(\"beforeLoginPath\", window.location.pathname + window.location.search, 24);\r\n\t\t\t\t\t\tdocument.location.href = \"/login\";\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdispatch(toggleMenu(false));\r\n\t\t\t\t\tdispatch(addNotification({\r\n\t\t\t\t\t\tid: -1,\r\n\t\t\t\t\t\tpriority: \"high\",\r\n\t\t\t\t\t\ttype: \"bar\",\r\n\t\t\t\t\t\tmessage: \"Kan geen verbinding met de server maken\",\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\nexport function setUser(user) {\r\n\treturn (dispatch, getState) => {\r\n\t\tdispatch({\r\n\t\t\ttype: \"CHANGE_USER\",\r\n\t\t\tuser,\r\n\t\t});\r\n\t\tfetchData(\"user\", \"patch\", user, dispatch, getState);\r\n\t}\r\n}\r\n\r\nexport function setPresenceUserStatus(lessonId, userStatus, groupId) {\r\n\treturn (dispatch, getState) => {\r\n\t\tdispatch({\r\n\t\t\ttype: \"CHANGE_PRESENCE_USER_STATUS\",\r\n\t\t\tlessonId,\r\n\t\t\tuserStatus,\r\n\t\t\tgroupId,\r\n\t\t});\r\n\t\tfetchData(\"group/userStatus\", \"patch\", { lessonId: lessonId, userStatus: userStatus }, dispatch, getState);\r\n\t}\r\n}\r\n\r\nexport function setGroup(group) {\r\n\treturn (dispatch, getState) => {\r\n\t\tfunction getCourse(group) {\r\n\t\t\treturn {\r\n\t\t\t\tcourseId: group.courseId,\r\n\t\t\t\tsubjectId: group.subjectId,\r\n\t\t\t\tname: group.courseName,\r\n\t\t\t\tdescription: group.courseDescription,\r\n\t\t\t\tstudyTime: group.studyTime,\r\n\t\t\t\tremarks: group.remarks,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction getCourseGroup(group) {\r\n\t\t\treturn {\r\n\t\t\t\tcourseId: group.courseId,\r\n\t\t\t\tgroupId: group.id,\r\n\t\t\t\tday: group.day,\r\n\t\t\t\tschoolYear: group.schoolYear,\r\n\t\t\t\tenrollableFor: group.enrollableFor,\r\n\t\t\t\tperiod: group.period,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst oldCourse = getCourse(getState().groups[group.id]);\r\n\t\tconst newCourse = getCourse(group);\r\n\r\n\t\tconst oldCourseGroup = getCourseGroup(getState().groups[group.id]);\r\n\t\tconst newCourseGroup = getCourseGroup(group);\r\n\r\n\t\tconst oldLessons = getState().groups[group.id].lessons;\r\n\t\tconst newLessons = group.lessons;\r\n\r\n\t\tconst oldPresence = getState().groups[group.id].presence;\r\n\t\tconst newPresence = group.presence;\r\n\r\n\t\tconst oldEvaluations = getState().groups[group.id].evaluations;\r\n\t\tconst newEvaluations = group.evaluations;\r\n\r\n\t\tif (JSON.stringify(oldCourse) !== JSON.stringify(newCourse)) {\r\n\t\t\tfetchData(\"course/\", \"patch\", newCourse, dispatch, getState);\r\n\t\t}\r\n\t\tif (JSON.stringify(oldCourseGroup) !== JSON.stringify(newCourseGroup)) {\r\n\t\t\tfetchData(\"group/\", \"patch\", newCourseGroup, dispatch, getState);\r\n\t\t}\r\n\r\n\t\tif (JSON.stringify(oldPresence) !== JSON.stringify(newPresence)) {\r\n\t\t\tconst changedPresenceObjs = filter(newPresence, (presence) => {\r\n\t\t\t\treturn JSON.stringify(presence) !== JSON.stringify(oldPresence[presence.id]);\r\n\t\t\t});\r\n\t\t\tfetchData(\"group/presence\", \"patch\",\r\n\t\t\t\t{\r\n\t\t\t\t\tpresence: JSON.stringify(map(changedPresenceObjs, (changedPresenceObjs) => { return changedPresenceObjs })),\r\n\t\t\t\t\tgroupId: group.id\r\n\t\t\t\t}, dispatch, getState);\r\n\t\t}\r\n\r\n\t\tif (newLessons != null && JSON.stringify(oldLessons) !== JSON.stringify(newLessons)) {\r\n\t\t\tfetchData(\"group/lessons\", \"patch\", { lessons: JSON.stringify(map(newLessons, (lesson) => { return lesson })), }, dispatch, getState);\r\n\t\t}\r\n\r\n\t\tif (JSON.stringify(oldEvaluations) !== JSON.stringify(newEvaluations)) {\r\n\t\t\tlet changedEvaluations = [];\r\n\t\t\tfor (let i = 0; i < newEvaluations.length; i++) {\r\n\t\t\t\tconst evaluation = newEvaluations[i];\r\n\t\t\t\tif (JSON.stringify(oldEvaluations[i]) !== JSON.stringify(evaluation)) {\r\n\t\t\t\t\tchangedEvaluations.push(evaluation);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfetchData(\"group/evaluations\", \"patch\", {\r\n\t\t\t\tevaluations: JSON.stringify(changedEvaluations),\r\n\t\t\t\tsecureLogin: getState().secureLogin\r\n\t\t\t}, dispatch, getState);\r\n\t\t}\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: \"CHANGE_GROUP\",\r\n\t\t\tgroup: group,\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport function getEnrollableGroups() {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"user/enrollableGroups\", \"get\", null, dispatch, getState, true)\r\n\t\t\t.then((enrollableGroups) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_ENROLLABLE_GROUPS\",\r\n\t\t\t\t\tenrollableGroups,\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => {});\r\n\t}\r\n}\r\n\r\nexport function getEnrolLments() {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"user/enrollments\", \"get\", null, dispatch, getState)\r\n\t\t\t.then((enrollments) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_GROUPS\",\r\n\t\t\t\t\tgroups: enrollments,\r\n\t\t\t\t});\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_ENROLLMENTS\",\r\n\t\t\t\t\tuserId: getState().userId,\r\n\t\t\t\t\tenrollmentIds: Object.keys(enrollments),\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => {});\r\n\t}\r\n}\r\n\r\nexport function getGroupEnrollments(groupId) {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"group/enrollments\", \"post\", { groupId: groupId }, dispatch, getState)\r\n\t\t\t.then((enrollments) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_GROUP\",\r\n\t\t\t\t\tgroup: {\r\n\t\t\t\t\t\tid: groupId,\r\n\t\t\t\t\t\tenrollmentIds: Object.keys(enrollments).map(id => parseInt(id, 10)),\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_USERS\",\r\n\t\t\t\t\tusers: enrollments,\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => {});\r\n\t}\r\n}\r\n\r\nexport function getGroupLessons(groupId) {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"group/lessons\", \"post\", { groupId: groupId }, dispatch, getState)\r\n\t\t\t.then((lessons) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_GROUP\",\r\n\t\t\t\t\tgroup: {\r\n\t\t\t\t\t\tid: groupId,\r\n\t\t\t\t\t\tlessons,\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\nexport function getGroupPresence(groupId) {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"group/presence\", \"post\", { groupId: groupId }, dispatch, getState)\r\n\t\t\t.then((presence) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_GROUP\",\r\n\t\t\t\t\tgroup: {\r\n\t\t\t\t\t\tid: groupId,\r\n\t\t\t\t\t\tpresence,\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\nexport function getGroupParticipants(groupId) {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"group/participants\", \"post\", { groupId: groupId }, dispatch, getState)\r\n\t\t\t.then((participants) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_GROUP\",\r\n\t\t\t\t\tgroup: {\r\n\t\t\t\t\t\tid: groupId,\r\n\t\t\t\t\t\tparticipantIds: Object.keys(participants).map(id => parseInt(id, 10)),\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_USERS\",\r\n\t\t\t\t\tusers: participants,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\nexport function getAllUsers() {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"user/list\", \"get\", null, dispatch, getState)\r\n\t\t\t.then((users) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_USERS\",\r\n\t\t\t\t\tusers,\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => {});\r\n\t}\r\n}\r\n\r\nexport function addNotification(notification) {\r\n\treturn {\r\n\t\ttype: \"ADD_NOTIFICATION\",\r\n\t\tnotification,\r\n\t}\r\n}\r\n\r\nexport function removeNotification(notification) {\r\n\treturn {\r\n\t\ttype: \"REMOVE_NOTIFICATION\",\r\n\t\tnotification,\r\n\t}\r\n}\r\n\r\nexport function toggleMenu(menuState) {\r\n\treturn {\r\n\t\ttype: \"TOGGLE_MENU\",\r\n\t\tmenuState,\r\n\t}\r\n}\r\n\r\nexport function setSecureLogin(secureLogin) {\r\n\treturn {\r\n\t\ttype: \"SET_SECURE_LOGIN\",\r\n\t\tsecureLogin,\r\n\t}\r\n}\r\n\r\nexport function toggleEnrollment(group) {\r\n\treturn (dispatch, getState) => {\r\n\t\tconst index = getState().users[getState().userId].enrollmentIds.indexOf(group.id);\r\n\t\tif (index === -1) {\r\n\t\t\tfetchData(\"user/enrollments\", \"put\", { groupId: group.id }, dispatch, getState)\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: \"CHANGE_ENROLLMENTS\",\r\n\t\t\t\t\t\taction: \"ADD\",\r\n\t\t\t\t\t\tuserId: getState().userId,\r\n\t\t\t\t\t\tgroupId: group.id,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tfetchData(\"user/enrollments\", \"delete\", { groupId: group.id }, dispatch, getState)\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: \"CHANGE_ENROLLMENTS\",\r\n\t\t\t\t\t\taction: \"REMOVE\",\r\n\t\t\t\t\t\tuserId: getState().userId,\r\n\t\t\t\t\t\tgroupId: group.id,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nexport function getGroupEvaluations(groupId) {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"group/evaluations\", \"post\", { groupId }, dispatch, getState, true).then((evaluations) => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: \"CHANGE_GROUP\",\r\n\t\t\t\tgroup: {\r\n\t\t\t\t\tid: groupId,\r\n\t\t\t\t\tevaluations: evaluations,\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport function addSubject(name, description) {\r\n\treturn (dispatch, getState) => {\r\n\t\treturn fetchData(\"subject\", \"put\", { name, description, secureLogin: getState().secureLogin }, dispatch, getState)\r\n\t\t\t.then(() => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"ADD_NOTIFICATION\",\r\n\t\t\t\t\tnotification: {\r\n\t\t\t\t\t\tid: Math.random(),\r\n\t\t\t\t\t\tpriority: \"low\",\r\n\t\t\t\t\t\ttype: \"bar\",\r\n\t\t\t\t\t\tmessage: \"Vak aangemaakt, refresh om te zien\",\r\n\t\t\t\t\t\tscope: \"beheer\",\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\nexport function addCourse(name, subjectId) {\r\n\treturn (dispatch, getState) => {\r\n\t\treturn fetchData(\"course\", \"put\", { name, subjectId, secureLogin: getState().secureLogin }, dispatch, getState)\r\n\t\t\t.then(() => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"ADD_NOTIFICATION\",\r\n\t\t\t\t\tnotification: {\r\n\t\t\t\t\t\tid: Math.random(),\r\n\t\t\t\t\t\tpriority: \"low\",\r\n\t\t\t\t\t\ttype: \"bar\",\r\n\t\t\t\t\t\tmessage: \"Module aangemaakt, refresh om te zien\",\r\n\t\t\t\t\t\tscope: \"beheer\",\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\nexport function addGroup(courseId, userId) {\r\n\treturn (dispatch, getState) => {\r\n\t\treturn fetchData(\"group\", \"put\", { courseId, mainTeacherId: userId, secureLogin: getState().secureLogin }, dispatch, getState)\r\n\t\t\t.then(() => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"ADD_NOTIFICATION\",\r\n\t\t\t\t\tnotification: {\r\n\t\t\t\t\t\tid: Math.random(),\r\n\t\t\t\t\t\tpriority: \"low\",\r\n\t\t\t\t\t\ttype: \"bar\",\r\n\t\t\t\t\t\tmessage: \"Groep aangemaakt, refresh om te zien\",\r\n\t\t\t\t\t\tscope: \"beheer\",\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\n\r\nexport function setCookie(cname, cvalue, exhours) {\r\n\tvar d = new Date();\r\n\td.setTime(d.getTime() + (exhours * 60 * 60 * 1000));\r\n\tvar expires = \"expires=\" + d.toUTCString();\r\n\tdocument.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\r\n}\r\n\r\nexport function getCookie(cname) {\r\n\tvar name = cname + \"=\";\r\n\tvar decodedCookie = decodeURIComponent(document.cookie);\r\n\tvar ca = decodedCookie.split(';');\r\n\tfor (var i = 0; i < ca.length; i++) {\r\n\t\tvar c = ca[i];\r\n\t\twhile (c.charAt(0) === ' ')\r\n\t\t\tc = c.substring(1);\r\n\t\tif (c.indexOf(name) === 0)\r\n\t\t\treturn c.substring(name.length, c.length);\r\n\t}\r\n\treturn \"\";\r\n}","import React, { Component } from \"react\";\r\nimport Button from '@material-ui/core/Button';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport theme from '../lib/MuiTheme';\r\nimport { toggleMenu } from '../store/actions';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nclass Login extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tcomponentWillMount() {\r\n\t\tthis.generateEmail.bind(this)();\r\n\t\tthis.interval = setInterval(this.generateEmail.bind(this), 1500);\r\n\t}\r\n\r\n\tgenerateEmail() {\r\n\t\tlet school = this.state.school;\r\n\t\tlet schoolShort = this.state.schoolShort;\r\n\t\tlet studentNumber = this.state.studentNumber;\r\n\t\tswitch (Math.floor(Math.random() * 14)) {\r\n\t\t\tcase 0:\r\n\t\t\t\tschool = \"beekdallyceum\";\r\n\t\t\t\tschoolShort = \"BD\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tschool = \"candea\";\r\n\t\t\t\tschoolShort = \"CC\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tschool = \"quadraam\";\r\n\t\t\t\tschoolShort = \"CB\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tschool = \"lyceumelst\";\r\n\t\t\t\tschoolShort = \"LE\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 4:\r\n\t\t\t\tschool = \"liemerscollege\";\r\n\t\t\t\tschoolShort = \"LC\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 5:\r\n\t\t\t\tschool = \"lorentzlyceum\";\r\n\t\t\t\tschoolShort = \"LL\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 6:\r\n\t\t\t\tschool = \"maartenvanrossem\";\r\n\t\t\t\tschoolShort = \"MvR\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 7:\r\n\t\t\t\tschool = \"montessoriarnhem\";\r\n\t\t\t\tschoolShort = \"MC\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 8:\r\n\t\t\t\tschool = \"olympuscollege\";\r\n\t\t\t\tschoolShort = \"OC\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 9:\r\n\t\t\t\tschool = \"produsarnhem\";\r\n\t\t\t\tschoolShort = \"PD\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 10:\r\n\t\t\t\tschool = \"gymnasiumarnhem\";\r\n\t\t\t\tschoolShort = \"SGA\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 11:\r\n\t\t\t\tschool = \"symbion\";\r\n\t\t\t\tschoolShort = \"SY\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 12:\r\n\t\t\t\tschool = \"vmbo-venster\";\r\n\t\t\t\tschoolShort = \"VE\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 13:\r\n\t\t\tdefault:\r\n\t\t\t\tschool = \"hetwesteraam\";\r\n\t\t\t\tschoolShort = \"HW\";\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tstudentNumber = Math.floor(Math.random() * 999999) + \"\";\r\n\t\tfor (let i = studentNumber.length; i < 6; i++) {\r\n\t\t\tstudentNumber = \"0\" + studentNumber;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tschool,\r\n\t\t\tschoolShort,\r\n\t\t\tstudentNumber,\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearInterval(this.interval);\r\n\t}\r\n\r\n\tlogin() {\r\n\t\tif (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\r\n\t\t\tdocument.location.href = \"http://localhost:26194/auth/login\"\r\n\t\t} else {\r\n\t\t\tdocument.location.href = \"/auth/login\"\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateColoredEmail(schoolShort, studentNumber, school) {\r\n\t\treturn (\r\n\t\t\t<Typography variant=\"subheading\" style={{ fontFamily: \"'Courier New', Courier, monospace\", overflow:\"hidden\"}}>\r\n\t\t\t\t<span style={{ color: theme.palette.secondary.light, fontWeight: \"bold\" }}>\r\n\t\t\t\t\t{schoolShort}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span style={{ color: theme.palette.secondary.dark, fontWeight: \"bolder\" }}>\r\n\t\t\t\t\t{studentNumber}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span style={{ fontWeight: \"bold\" }}>\r\n\t\t\t\t\t@ll.\r\n\t\t\t\t</span>\r\n\t\t\t\t<span style={{ color: theme.palette.secondary.light, fontWeight: \"bold\" }}>\r\n\t\t\t\t\t{school}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span style={{ fontWeight: \"bold\" }}>\r\n\t\t\t\t\t.nl\r\n\t\t\t\t</span>\r\n\t\t\t</Typography>\r\n\t\t)\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.userId != null) {\r\n\t\t\tthis.props.history.push(\"/\");\r\n\t\t\tthis.props.toggleMenu(true);\r\n\t\t} else {\r\n\t\t\tthis.props.toggleMenu(false);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Paper elevation={8} className=\"Login\" style={{minHeight: \"330px\"}}>\r\n\t\t\t\t<div style={{ padding: \"20px\" }}>\r\n\t\t\t\t\t<Typography gutterBottom variant=\"headline\" color=\"primary\">\r\n\t\t\t\t\t\tLog in\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t<Typography variant=\"subheading\">\r\n\t\t\t\t\t\tGebruik je school-email om in te loggen:\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<center>\r\n\t\t\t\t\t\t{this.generateColoredEmail(\"schoolafkorting\", \"leerlingnummer\", \"school\")}\r\n\t\t\t\t\t\t{this.generateColoredEmail(this.state.schoolShort, this.state.studentNumber, this.state.school)}\r\n\t\t\t\t\t</center>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<Button type=\"submit\" variant=\"contained\" size=\"large\" color=\"primary\" fullWidth onClick={this.login}>\r\n\t\t\t\t\t\tLogin met je Microsoft school account\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</Paper >\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tuserId: state.userId,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tlogin: (email, password) => {\r\n\t\t\tdispatch(toggleMenu(true));\r\n\t\t},\r\n\t\ttoggleMenu: (state) => {\r\n\t\t\tdispatch(toggleMenu(state));\r\n\t\t},\r\n\t};\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Login));\r\n\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nclass Page extends Component {\r\n\r\n\trender() {\r\n\t\tlet className = \"\";\r\n\t\tif (this.props.showMenu) {\r\n\t\t\tclassName += \"menuShown\"\r\n\t\t} else {\r\n\t\t\tclassName += \"menuHidden\"\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div className={\"Page \" + className}>\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tshowMenu: state.showMenu,\r\n\t};\r\n}\r\n\r\nexport default connect(mapStateToProps)(Page);\r\n","import React, { Component } from 'react';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nclass Progress extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tisShowing: false,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.timeout = setTimeout(() => this.setState({ isShowing: true }), 200);\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearTimeout(this.timeout);\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.state.isShowing) {\r\n\t\t\treturn (\r\n\t\t\t\t<CircularProgress {...this.props}/>\r\n\t\t\t);\r\n\t\t}else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport default Progress;","import React, { Component } from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport Clear from '@material-ui/icons/Clear';\r\n\r\nclass EnrollmentPopup extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tif (nextProps.hasChosen) {\r\n\t\t\treturn { page: \"cancel\", ...prevState };\r\n\t\t}\r\n\t\tif (nextProps.hasChosenDay) {\r\n\t\t\treturn { page: \"hasChosenDay\", ...prevState };\r\n\t\t}\r\n\t\tif (nextProps.group.remarks != null && nextProps.group.remarks.length > 1) {\r\n\t\t\treturn { page: \"remarks\", ...prevState };\r\n\t\t}\r\n\t\treturn { page: \"confirm\", ...prevState };\r\n\t}\r\n\r\n\tgetDuplicatePage() {\r\n\t\treturn (\r\n\t\t\t<Dialog open keepMounted >\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<DialogContentText>\r\n\t\t\t\t\t\t<Typography color=\"error\" style={{ fontSize: \"16px\" }}>\r\n\t\t\t\t\t\t\t{\"Je hebt al een module gekozen voor \" + this.props.group.day + \"!\"}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\tSchrijf je eerst uit voor de module\r\n\t\t\t\t\t\t<Typography color=\"primary\" variant=\"title\" style={{ fontSize: \"16px\", display: \"inline-block\", margin: \"5px\" }}>\r\n\t\t\t\t\t\t\t{this.props.chosenDayGroupName}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\tom je in te kunnen schrijven\r\n\t\t\t\t\t</DialogContentText>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button color=\"primary\" variant=\"contained\">\r\n\t\t\t\t\t\tSluiten\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t);\r\n\t}\r\n\r\n\tgetCancelPage() {\r\n\t\treturn (\r\n\t\t\t<Dialog open keepMounted >\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\tUitschrijven\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<DialogContentText>\r\n\t\t\t\t\t\tWeet je zeker dat je wilt uitschrijven voor de module\r\n\t\t\t\t\t\t<Typography color=\"primary\" variant=\"title\" style={{ fontSize: \"16px\", display: \"inline\", margin: \"5px\" }}>\r\n\t\t\t\t\t\t\t{this.props.group.courseName}\r\n\t\t\t\t\t\t</Typography> ?\r\n\t\t\t\t\t</DialogContentText>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button color=\"default\">\r\n\t\t\t\t\t\tAnnuleren\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button name=\"test\" onClick={() => this.props.handlePopup(true)} color=\"primary\">\r\n\t\t\t\t\t\tUitschrijven\r\n\t\t\t\t\t\t<Clear />\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t);\r\n\t}\r\n\r\n\tgetConfirmPage() {\r\n\t\treturn (\r\n\t\t\t<Dialog open keepMounted >\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\tInschrijven\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<DialogContentText>\r\n\t\t\t\t\t\tWeet je zeker dat je wilt inschrijven voor de module\r\n\t\t\t\t\t\t<Typography color=\"primary\" variant=\"title\" style={{ fontSize: \"16px\", display: \"inline\", margin: \"5px\" }}>\r\n\t\t\t\t\t\t\t{this.props.group.courseName}\r\n\t\t\t\t\t\t</Typography> ?\r\n\t\t\t\t\t</DialogContentText>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button color=\"default\">\r\n\t\t\t\t\t\tAnnuleren\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button name=\"test\" onClick={() => this.props.handlePopup(true)} variant=\"contained\" color=\"primary\">\r\n\t\t\t\t\t\tInschrijven\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t);\r\n\t}\r\n\r\n\tgetRemarkPage() {\r\n\t\treturn (\r\n\t\t\t<Dialog open keepMounted >\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\tOpmerkingen\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t{this.props.group.remarks}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button color=\"default\">\r\n\t\t\t\t\t\tAnnuleren\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={() => {\r\n\t\t\t\t\t\tthis.props.preventPopupClose(true);\r\n\t\t\t\t\t\tthis.setState({ page: \"confirm\" })\r\n\t\t\t\t\t}} color=\"primary\">\r\n\t\t\t\t\t\tVerder\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tthis.props.preventPopupClose(false);\r\n\t\tswitch (this.state.page) {\r\n\t\t\tcase \"remarks\":\r\n\t\t\t\treturn this.getRemarkPage();\r\n\t\t\tcase \"cancel\":\r\n\t\t\t\treturn this.getCancelPage();\r\n\t\t\tcase \"hasChosenDay\":\r\n\t\t\t\treturn this.getDuplicatePage();\r\n\t\t\tcase \"confirm\":\r\n\t\t\tdefault:\r\n\t\t\t\treturn this.getConfirmPage();\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nexport default EnrollmentPopup;\r\n\r\n","import React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Clear from '@material-ui/icons/Clear';\r\nimport { connect } from 'react-redux';\r\nimport { toggleEnrollment, getEnrollableGroups, getEnrolLments } from '../../store/actions';\r\nimport Progress from '../../components/Progress';\r\nimport EnrollmentPopup from './EnrollmentPopup';\r\n\r\nclass ChooseButton extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.props.getEnrollableGroups();\r\n\t\tthis.props.getEnrolLments();\r\n\t\tthis.state = {\r\n\t\t\tdialogOpen: false,\r\n\t\t}\r\n\t}\r\n\r\n\tpreventPopupClose(preventClose) {\r\n\t\tthis.preventClose = preventClose;\r\n\t}\r\n\r\n\thandlePopup(doEnroll) {\r\n\t\tif (doEnroll) {\r\n\t\t\tthis.props.toggleEnrollment(this.props.group);\r\n\t\t}\r\n\t\tif (!this.preventClose) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tdialogOpen: !this.state.dialogOpen,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst props = this.props;\r\n\t\tlet dialog = this.state.dialogOpen ?\r\n\t\t\t<EnrollmentPopup\r\n\t\t\t\tgroup={props.group}\r\n\t\t\t\thasChosen={props.hasChosen}\r\n\t\t\t\thandlePopup={this.handlePopup.bind(this)}\r\n\t\t\t\thasChosenDay={props.hasChosenDay}\r\n\t\t\t\tchosenDayGroupName={props.chosenDayGroupName}\r\n\t\t\t\tpreventPopupClose={this.preventPopupClose.bind(this)}\r\n\t\t\t/> : null;\r\n\r\n\t\tif (props.loading) {\r\n\t\t\treturn (\r\n\t\t\t\t<Progress size={30} />\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tif (props.hasChosen) {\r\n\t\t\treturn (\r\n\t\t\t\t<Button color=\"primary\" onClick={() => this.handlePopup(false)} style={props.style}>\r\n\t\t\t\t\t{\"Ingeschreven\"}\r\n\t\t\t\t\t<Clear />\r\n\t\t\t\t\t{dialog}\r\n\t\t\t\t</Button>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (this.props.canChoose) {\r\n\t\t\treturn (\r\n\t\t\t\t<Button color=\"primary\" variant=\"contained\" onClick={() => this.handlePopup(false)} style={this.props.style}>\r\n\t\t\t\t\t{\"Inschrijven\" + (this.props.hasChosenDay ? \"*\" : \"\")}\r\n\t\t\t\t\t{dialog}\r\n\t\t\t\t</Button>\r\n\t\t\t);\r\n\t\t} else if (props.group.period < this.props.currentPeriod){\r\n\t\t\treturn (\r\n\t\t\t\t<Button disabled color=\"primary\" style={props.style}>\r\n\t\t\t\t\tInschrijfperiode verlopen\r\n\t\t\t\t\t{dialog}\r\n\t\t\t\t</Button>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<Button disabled color=\"primary\" style={props.style}>\r\n\t\t\t\t\tComing Soon\r\n\t\t\t\t\t{dialog}\r\n\t\t\t\t</Button>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n\tif (state.users[state.userId].enrollmentIds == null || state.enrollableGroups == null) {\r\n\t\treturn {\r\n\t\t\tloading: true,\r\n\t\t}\r\n\t}\r\n\r\n\tlet chosenDayGroupName = -1;\r\n\tstate.users[state.userId].enrollmentIds.forEach(groupId => {\r\n\t\tconst group = state.groups[groupId];\r\n\t\tif (group.day === ownProps.group.day && group.period === ownProps.group.period) {\r\n\t\t\tchosenDayGroupName = group.courseName;\r\n\t\t}\r\n\t});\r\n\r\n\treturn {\r\n\t\tcanChoose: state.enrollableGroups.map(e => e.id).indexOf(ownProps.group.id) !== -1,\r\n\t\thasChosen: state.users[state.userId].enrollmentIds.indexOf(ownProps.group.id) !== -1,\r\n\t\thasChosenDay: chosenDayGroupName !== -1,\r\n\t\tchosenDayGroupName,\r\n\t\tcurrentPeriod: state.currentPeriod,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\ttoggleEnrollment: (group) => dispatch(toggleEnrollment(group)),\r\n\t\tgetEnrollableGroups: () => dispatch(getEnrollableGroups()),\r\n\t\tgetEnrolLments: () => dispatch(getEnrolLments()),\r\n\t};\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ChooseButton);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Button from '@material-ui/core/Button';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { setCookie } from \"../store/actions\"\r\nimport Field from \"../components/Field\"\r\n\r\nclass EnsureSecureLogin extends Component {\r\n\r\n\trender() {\r\n\t\tif (!(this.props.active === false) && this.props.secureLogin == null) {\r\n\t\t\treturn <Paper style={{ padding: \"20px\", marginTop: \"25px\" }}>\r\n\t\t\t\t<Field value=\"Log opnieuw in om toegang te krijgen\" layout={{ area: true }} />\r\n\t\t\t\t<Button color=\"primary\" variant=\"contained\" onClick={() => {\r\n\t\t\t\t\tsetCookie(\"beforeLoginPath\", window.location.pathname + window.location.search, 24);\r\n\t\t\t\t\tif (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\r\n\t\t\t\t\t\tdocument.location.href = \"http://localhost:26194/auth/login?secure=true\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdocument.location.href = \"/auth/login?secure=true\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}}>\r\n\t\t\t\t\tInloggen\r\n\t\t\t\t</Button>\r\n\t\t\t</Paper>\r\n\t\t} else {\r\n\t\t\treturn this.props.children;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tsecureLogin: state.secureLogin,\r\n\t};\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(EnsureSecureLogin);\r\n\r\n\r\n\r\n","import React, { Component } from 'react';\r\n\r\nimport Field from '../../components/Field';\r\nimport EnsureSecureLogin from '../../components/EnsureSecureLogin';\r\nimport { Tooltip, TableSortLabel, Typography, Paper } from '@material-ui/core';\r\n\r\nconst EVALUATION_FORMATS = [{\r\n\tlabel: \"vink\",\r\n\tvalue: \"check\",\r\n\toptions: [{\r\n\t\tlabel: \"Gehaald\",\r\n\t\tvalue: \"passed\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Niet gehaald\",\r\n\t\tvalue: \"failed\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Niet deelgenomen\",\r\n\t\tvalue: \"ND\",\r\n\t}],\r\n},\r\n{\r\n\tlabel: \"trapsgewijs\",\r\n\tvalue: \"stepwise\",\r\n\toptions: [{\r\n\t\tlabel: \"Onvoldoende\",\r\n\t\tvalue: \"O\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Voldoende\",\r\n\t\tvalue: \"V\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Goed\",\r\n\t\tvalue: \"G\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Niet deelgenomen\",\r\n\t\tvalue: \"ND\",\r\n\t}],\r\n}, {\r\n\tlabel: \"cijfer\",\r\n\tvalue: \"decimal\",\r\n\toptions: \"decimal\",\r\n}];\r\n\r\nfunction getEvaluationColor(ev) {\r\n\tif (ev.assesment === \"ND\" || ev.assesment == null) {\r\n\t\treturn \"#673ab7\";\r\n\t}\r\n\tswitch (ev.type) {\r\n\t\tcase \"stepwise\":\r\n\t\t\treturn \"#3f51b5\";\r\n\t\tcase \"check\":\r\n\t\t\treturn \"#009688\";\r\n\t\tcase \"decimal\":\r\n\t\t\treturn \"#00bcd4\"\r\n\t\tdefault:\r\n\t\t\treturn \"#673ab7\";\r\n\t}\r\n}\r\n\r\nclass Evaluation extends Component {\r\n\r\n\trender() {\r\n\t\tconst e = this.props.evaluation;\r\n\t\tlet style = {\r\n\t\t\tunderline: false,\r\n\t\t\tflex: 1,\r\n\t\t};\r\n\t\tlet layout = { td: true };\r\n\t\tif (this.props.student) {\r\n\t\t\tstyle.type = \"headline\";\r\n\t\t\tstyle.color = \"primaryContrast\"\r\n\t\t\tlayout.td = false;\r\n\t\t\tlayout.alignment = \"right\";\r\n\t\t}\r\n\t\tif (e.type === \"decimal\") {\r\n\t\t\treturn <Field\r\n\t\t\t\tstyle={style}\r\n\t\t\t\tvalidate={{ min: 1, max: 10, type: \"decimalGrade\", notEmpty: true }}\r\n\t\t\t\tlayout={layout}\r\n\t\t\t\tlabel=\"Beoordeling\"\r\n\t\t\t\tname={e.userId}\r\n\t\t\t\tvalue={e.assesment ? e.assesment : \"\"}\r\n\t\t\t\teditable={this.props.editable}\r\n\t\t\t\tonChange={this.props.onChange}\r\n\t\t\t/>\r\n\t\t} else {\r\n\t\t\treturn <Field\r\n\t\t\t\tstyle={style}\r\n\t\t\t\tname={e.userId}\r\n\t\t\t\tlabel=\"Beoordeling\"\r\n\t\t\t\tlayout={layout}\r\n\t\t\t\tvalue={e.assesment ? e.assesment : \"\"}\r\n\t\t\t\toptions={EVALUATION_FORMATS.filter(f => f.value === e.type)[0].options}\r\n\t\t\t\teditable={this.props.editable}\r\n\t\t\t\tonChange={this.props.onChange}\r\n\t\t\t/>\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n\r\nclass EvaluationTab extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tsortValue: \"\",\r\n\t\t\tsortDirection: \"\",\r\n\t\t}\r\n\t}\r\n\r\n\tonSortChange = (value) => {\r\n\t\tthis.setState({\r\n\t\t\tsortValue: value,\r\n\t\t\tsortDirection: this.state.sortDirection === \"desc\" && this.state.sortValue === value ? \"asc\" : \"desc\"\r\n\t\t});\r\n\t}\r\n\r\n\thandleSingleChange = (newEv) => {\r\n\t\tlet newEvaluations = this.props.evaluations.map((e) => {\r\n\t\t\tif (e.userId === newEv.userId) {\r\n\t\t\t\treturn newEv;\r\n\t\t\t} else {\r\n\t\t\t\treturn { ...e }\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.props.handleChange(newEvaluations);\r\n\t}\r\n\r\n\thandleEvaluationTypeChange(newValue) {\r\n\t\tfor (let i in this.props.evaluations) {\r\n\t\t\tthis.handleSingleChange({ ...this.props.evaluations[i], type: newValue });\r\n\t\t}\r\n\t}\r\n\r\n\tsortEvaluations = () => {\r\n\t\tlet evaluations = this.props.evaluations;\r\n\t\tconst sortValue = this.state.sortValue;\r\n\t\tlet sortDirection = this.state.sortDirection === \"asc\" ? \"asc\" : \"desc\";\r\n\r\n\t\tif (sortValue === \"name\") {\r\n\t\t\tevaluations.sort((a, b) => {\r\n\t\t\t\tlet cmp = b.displayName - a.displayName;\r\n\t\t\t\treturn sortDirection === \"asc\" ? cmp : -cmp;\r\n\t\t\t})\r\n\t\t} else if (sortValue === \"evaluations\") {\r\n\t\t\tevaluations.sort((a, b) => {\r\n\t\t\t\ta = a[\"assesment\"];\r\n\t\t\t\tb = b[\"assesment\"];\r\n\t\t\t\tlet cmp = (b === null) - (a == null) || +(a > b) || -(a < b);\r\n\t\t\t\treturn sortDirection === \"asc\" ? cmp : -cmp;\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn evaluations;\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet sortValue = this.props.sortValue;\r\n\t\tlet sortDirection = this.props.sortDirection === \"asc\" ? \"asc\" : \"desc\";\r\n\t\tconst style = {\r\n\t\t\tmarginTop: \"10px\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tpaddingRight: \"15px\",\r\n\t\t\tpaddingLeft: \"15px\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t};\r\n\t\tconst evaluations = this.props.evaluations;\r\n\t\tif (evaluations.length === 0) {\r\n\t\t\treturn \"Er zijn nog geen beoordelingen beschikbaar\";\r\n\t\t}\r\n\t\tconst evComps = this.sortEvaluations()\r\n\t\t\t.map(ev => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Paper style={style} key={ev.userId} component=\"tr\">\r\n\t\t\t\t\t\t<Field style={{ type: \"title\", color: \"primary\", flex: 2 }} value={ev.displayName} layout={{}} />\r\n\t\t\t\t\t\t<Evaluation\r\n\t\t\t\t\t\t\teditable={this.props.editable}\r\n\t\t\t\t\t\t\tevaluation={ev}\r\n\t\t\t\t\t\t\tonChange={(assesment) => this.handleSingleChange({ ...ev, assesment })}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\tstyle={{ underline: false, flex: 5 }}\r\n\t\t\t\t\t\t\tlayout={{ area: true, td: true }}\r\n\t\t\t\t\t\t\tlabel={\"Uitleg\"}\r\n\t\t\t\t\t\t\tname={ev.userId}\r\n\t\t\t\t\t\t\tvalue={ev.explanation}\r\n\t\t\t\t\t\t\teditable={this.props.editable}\r\n\t\t\t\t\t\t\tonChange={(explanation) => this.handleSingleChange({ ...ev, explanation })}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Paper >\r\n\t\t\t\t);\r\n\t\t\t});\r\n\r\n\t\treturn (\r\n\t\t\t<EnsureSecureLogin active={this.props.editable}>\r\n\t\t\t\t<table style={{ width: \"100%\" }}>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t<Paper style={{ ...style, backgroundColor: \"#e0e0e0\" }} component=\"tr\">\r\n\t\t\t\t\t\t\t<td style={{ paddingLeft: \"15px\" }}>\r\n\t\t\t\t\t\t\t\t<Typography type=\"title\" color=\"primary\" style={{ padding: \"5px 0\" }} >\r\n\t\t\t\t\t\t\t\t\t<Tooltip title=\"Sorteer\" enterDelay={300} placement=\"bottom-start\">\r\n\t\t\t\t\t\t\t\t\t\t<TableSortLabel\r\n\t\t\t\t\t\t\t\t\t\t\tactive={sortValue === \"evaluations\"}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.onSortChange(\"evaluations\")}\r\n\t\t\t\t\t\t\t\t\t\t\tdirection={sortDirection}\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ color: \"inherit\", fontSize: \"1.5rem\", }}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tBeoordelingen\r\n\t\t\t\t\t\t\t\t\t</TableSortLabel>\r\n\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Tooltip title=\"Sorteer\" enterDelay={300} placement=\"bottom-start\">\r\n\t\t\t\t\t\t\t\t\t\t<TableSortLabel\r\n\t\t\t\t\t\t\t\t\t\t\tactive={sortValue === \"name\"}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.onSortChange(\"name\")}\r\n\t\t\t\t\t\t\t\t\t\t\tdirection={sortDirection}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tNaam\r\n\t\t\t\t\t\t\t\t\t\t</TableSortLabel>\r\n\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td style={{ flex: \"5\" }} />\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\tlabel=\"Beoordelingsformaat\"\r\n\t\t\t\t\t\t\t\t\tstyle={{ type: \"caption\", underline: false, margin: \"normal\", labelVisible: true }}\r\n\t\t\t\t\t\t\t\t\tlayout={{ alignment: \"right\" }}\r\n\t\t\t\t\t\t\t\t\tvalue={evaluations[0].type}\r\n\t\t\t\t\t\t\t\t\toptions={EVALUATION_FORMATS}\r\n\t\t\t\t\t\t\t\t\teditable={this.props.editable}\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleEvaluationTypeChange.bind(this)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t</Paper >\r\n\t\t\t\t\t\t{evComps}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table >\r\n\t\t\t</EnsureSecureLogin>\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nexport { Evaluation, EvaluationTab, getEvaluationColor };","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ChooseButton from './ChooseButton';\r\nimport Field from '../../components/Field';\r\nimport { Evaluation, getEvaluationColor } from './Evaluation';\r\n\r\nconst CARD_STYLE = {\r\n\twidth: \"400px\",\r\n\theight: \"338px\",\r\n\tpadding: \"15px\",\r\n\tverticalAlign: \"top\",\r\n\tmargin: \"12px\",\r\n\tmarginRight: \"0px\",\r\n\tmarginBottom: \"0px\",\r\n\tdisplay: \"inline-block\",\r\n\tposition: \"relative\",\r\n}\r\n\r\nclass GroupCard extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\thover: false,\r\n\t\t\tstyle: CARD_STYLE,\r\n\t\t}\r\n\t}\r\n\r\n\texpand() {\r\n\t\tthis.props.history.push(\"/groep/\" + this.props.group.id)\r\n\t}\r\n\r\n\tgetBottomSection() {\r\n\t\tconst style = {\r\n\t\t\tposition: \"absolute\",\r\n\t\t\tbottom: \"0px\",\r\n\t\t\twidth: \"400px\",\r\n\t\t\theight: \"55px\",\r\n\t\t\tmarginLeft: \"-15px\",\r\n\t\t\tborderBottomLeftRadius: \"4px\",\r\n\t\t\tborderBottomRightRadius: \"4px\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tpadding: \"5px\",\r\n\t\t\tpaddingLeft: \"20px\",\r\n\t\t\tpaddingRight: \"20px\",\r\n\t\t\tjustifyContent: \"space-between\"\r\n\t\t};\r\n\t\tif (this.props.group.evaluation &&\r\n\t\t\tthis.props.group.evaluation.assesment !== \"\" &&\r\n\t\t\tthis.props.group.evaluation.assesment !== null) {\r\n\t\t\tstyle.backgroundColor = getEvaluationColor(this.props.group.evaluation);\r\n\t\t\treturn (\r\n\t\t\t\t<div style={style} >\r\n\t\t\t\t\t<Field value=\"Beoordeling\" style={{ type: \"headline\", color: \"primaryContrast\", flex: 0.8 }} />\r\n\t\t\t\t\t<Evaluation evaluation={this.props.group.evaluation} student />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<div style={style} >\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\tonClick={this.expand.bind(this)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tBekijken\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.props.role === \"student\" &&\r\n\t\t\t\t\t\t<ChooseButton\r\n\t\t\t\t\t\t\tgroup={this.props.group}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div >\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst group = this.props.group;\r\n\t\treturn (\r\n\t\t\t<Paper\r\n\t\t\t\televation={this.state.hover ? 4 : 2}\r\n\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\r\n\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\r\n\t\t\t\tstyle={this.state.style}\r\n\t\t\t>\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tvariant=\"caption\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tstyle={{ overflow: \"hidden\", maxHeight: \"65px\", cursor: \"pointer\" }}\r\n\t\t\t\t\tonClick={() => { this.props.history.push(\"/groep/\" + group.id) }}\r\n\t\t\t\t>\r\n\t\t\t\t\t{group.subjectName}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tvariant=\"headline\"\r\n\t\t\t\t\tstyle={{ overflow: \"hidden\", height: \"64px\", cursor: \"pointer\", textTransform: \"uppercase\", fontSize: \"24px\" }}\r\n\t\t\t\t\tonClick={() => { this.props.history.push(\"/groep/\" + group.id) }}\r\n\t\t\t\t>\r\n\t\t\t\t\t{group.courseName}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Typography style={{ display: \"inline-block\", fontWeight: \"bold\", float: \"right\" }}>\r\n\t\t\t\t\t\t{\"Blok \" + group.period + \" - \" + group.day}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t<Typography style={{ display: \"inline-block\", fontWeight: \"bold\" }}>\r\n\t\t\t\t\t\t{group.enrollableFor || \"Iedereen\"}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tgroup.evaluation ?\r\n\t\t\t\t\t\t<Typography style={{ maxHeight: \"164px\", overflow: \"hidden\" }} gutterBottom>\r\n\t\t\t\t\t\t\t<b>Uitleg beoordeling: </b>\r\n\t\t\t\t\t\t\t{group.evaluation.explanation}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<Typography style={{ maxHeight: \"164px\", overflow: \"hidden\" }} gutterBottom>\r\n\t\t\t\t\t\t\t{group.courseDescription}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.getBottomSection()\r\n\t\t\t\t}\r\n\t\t\t</Paper >\r\n\t\t);\r\n\t}\r\n\r\n\r\n}\r\n\r\n\r\nexport default withRouter(GroupCard);\r\n\r\n","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router';\r\n\r\nimport Paper from '@material-ui/core/Paper';\r\nimport {Typography} from '@material-ui/core';\r\n\r\nclass GroupCard extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\thover: false,\r\n\t\t\tstyle: {\r\n\t\t\t\twidth: \"100%\",\r\n\t\t\t\theight: \"auto\",\r\n\t\t\t\tmargin: \"0px\",\r\n\t\t\t\tpadding: \"10px\",\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n\r\n\tformatPhoneNumber(number) {\r\n\t\tif (number == null) {\r\n\t\t\tnumber = \"\";\r\n\t\t}\r\n\t\tlet numberWithoutCharacters = number.replace(/\\D/g, '');\r\n\t\tif (numberWithoutCharacters.length === 10) { // Either 06... or regional i.e. 024 ...\r\n\t\t\tif (numberWithoutCharacters[1] === \"6\") { // 06...\r\n\t\t\t\treturn (numberWithoutCharacters.substr(0, 2) + \" \" + numberWithoutCharacters.substr(2, 8));\r\n\t\t\t} else { // 024 ...\r\n\t\t\t\treturn (numberWithoutCharacters.substr(0, 3) + \" \" + numberWithoutCharacters.substr(3, 7));\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst mobileTest = /(0031|31)0?(6)?([0-9]+)$/gm;\r\n\t\tconst match = mobileTest.exec(numberWithoutCharacters);\r\n\t\tif (match) {\r\n\t\t\tif (match[2]) { // +31 06 \r\n\t\t\t\treturn \"+31 06 \" + match[3];\r\n\t\t\t} else { // +31 ...\r\n\t\t\t\treturn \"+31 \" + match[3];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn number; // return input if unrecognizable \r\n\t\t}\r\n\t}\r\n\r\n\texpand() {\r\n\t\tthis.props.history.push(\"/user/\" + this.props.user.id)\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet user = { ...this.props.user };\r\n\t\tlet style = { ...this.state.style };\r\n\t\treturn (\r\n\t\t\t<tr>\r\n\t\t\t\t<Paper\r\n\t\t\t\t\televation={this.state.hover ? 2 : 1}\r\n\t\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\r\n\t\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\r\n\t\t\t\t\tcomponent=\"td\"\r\n\t\t\t\t\tstyle={style}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\tjustifyContent: \"space-between\"\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<Typography variant=\"title\" color={user.role === \"teacher\" ? \"secondary\" : \"primary\"} style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t{user.firstName + \" \" + user.lastName}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Typography variant=\"subheading\" style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t{user.school}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t{user.level + \" - \" + user.year}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t{user.role === \"teacher\" ? \"docent\" : \"leerling\"}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t{user.profile}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{this.props.role === \"admin\" &&\r\n\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\tjustifyContent: \"space-between\"\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t\t{user.email}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t\t{user.preferedEmail}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<div style={{ flex: 1 }} />\r\n\t\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t\t{this.formatPhoneNumber(user.phoneNumber)}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t\t{user.id}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t</Paper >\r\n\t\t\t</tr>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nexport default withRouter(GroupCard);\r\n\r\n","import React, { Component } from 'react';\r\nimport Page from '../Page';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Button from '@material-ui/core/Button';\r\nimport { connect } from 'react-redux';\r\nimport { setUser } from '../../store/actions';\r\nimport Field from '../../components/Field';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nconst profiles = [\"NT\", \"NG\", \"CM\", \"EM\", \"NT&NG\", \"EM&CM\"];\r\nconst levels = [\"VWO\", \"HAVO\"];\r\n\r\nclass UserPage extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tuser: this.props.user,\r\n\t\t};\r\n\t}\r\n\r\n\thandleChange = (name, value) => {\r\n\t\tthis.setState({\r\n\t\t\tuser: {\r\n\t\t\t\t...this.state.user,\r\n\t\t\t\t[name]: value,\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\thasChanged() {\r\n\t\treturn JSON.stringify(this.props.user) !== JSON.stringify(this.state.user)\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet user = null;\r\n\t\tif (this.props.user.id !== this.state.user.id) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tuser: this.props.user,\r\n\t\t\t});\r\n\t\t\tuser = this.props.user;\r\n\t\t} else {\r\n\t\t\tuser = this.state.user;\r\n\t\t}\r\n\t\tlet shouldFillIn = this.props.ownProfile && (\r\n\t\t\tthis.props.user.profile == null ||\r\n\t\t\tthis.props.user.profile === \"\" ||\r\n\t\t\tthis.props.user.year === null ||\r\n\t\t\tthis.props.user.year === \"\" ||\r\n\t\t\tthis.props.user.level === null ||\r\n\t\t\tthis.props.user.level === \"\" ||\r\n\t\t\tthis.props.user.phoneNumber === null ||\r\n\t\t\tthis.props.user.phoneNumber === \"\" ||\r\n\t\t\tthis.props.user.preferedEmail == null ||\r\n\t\t\tthis.props.user.preferedEmail === \"\") ? true : null;\r\n\t\treturn (\r\n\t\t\t<Page>\r\n\t\t\t\t<Field\r\n\t\t\t\t\tlabel=\"Naam\"\r\n\t\t\t\t\tvalue={user.displayName}\r\n\t\t\t\t\tstyle={{ type: \"headline\" }}\r\n\t\t\t\t/>\r\n\t\t\t\t<Field\r\n\t\t\t\t\tlabel=\"Rol\"\r\n\t\t\t\t\tlayout={{ alignment: \"right\" }}\r\n\t\t\t\t\tvalue={user.role}\r\n\t\t\t\t/>\r\n\t\t\t\t<Divider />\r\n\t\t\t\t<br />\r\n\t\t\t\t<div style={{ display: \"flex\" }} >\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tlabel=\"Leerjaar\"\r\n\t\t\t\t\t\tvalue={user.year}\r\n\t\t\t\t\t\tstyle={{ margin: \"normal\" }}\r\n\t\t\t\t\t\teditable={this.props.ownProfile}\r\n\t\t\t\t\t\tonChange={(value) => this.handleChange(\"year\", value)}\r\n\t\t\t\t\t\tvalidate={{\r\n\t\t\t\t\t\t\ttype: \"integer\",\r\n\t\t\t\t\t\t\tmin: 1,\r\n\t\t\t\t\t\t\tmax: 6,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tlabel=\"Opleidingsniveau\"\r\n\t\t\t\t\t\tvalue={user.level}\r\n\t\t\t\t\t\teditable={this.props.ownProfile}\r\n\t\t\t\t\t\tonChange={(value) => this.handleChange(\"level\", value)}\r\n\t\t\t\t\t\toptions={levels}\r\n\t\t\t\t\t\tvalidate={{ notEmpty: true, }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{this.props.ownProfile &&\r\n\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\tlabel=\"Profiel\"\r\n\t\t\t\t\t\t\tvalue={user.profile}\r\n\t\t\t\t\t\t\teditable={this.props.ownProfile}\r\n\t\t\t\t\t\t\toptions={profiles}\r\n\t\t\t\t\t\t\tonChange={(value) => this.handleChange(\"profile\", value)}\r\n\t\t\t\t\t\t\tvalidate={{ notEmpty: true }}\r\n\t\t\t\t\t\t/>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ display: \"flex\" }} >\r\n\t\t\t\t\t{this.props.ownProfile && <Field\r\n\t\t\t\t\t\tlabel=\"Voorkeurs email\"\r\n\t\t\t\t\t\tvalue={user.preferedEmail}\r\n\t\t\t\t\t\teditable={this.props.ownProfile}\r\n\t\t\t\t\t\tonChange={(value) => this.handleChange(\"preferedEmail\", value)}\r\n\t\t\t\t\t\tvalidate={{ type: \"email\" }}\r\n\t\t\t\t\t/>}\r\n\t\t\t\t\t{this.props.ownProfile && <Field\r\n\t\t\t\t\t\tlabel=\"Telefoonnummer\"\r\n\t\t\t\t\t\tvalue={user.phoneNumber}\r\n\t\t\t\t\t\teditable={this.props.ownProfile}\r\n\t\t\t\t\t\tonChange={(value) => this.handleChange(\"phoneNumber\", value)}\r\n\t\t\t\t\t\tvalidate={{ type: \"phoneNumber\" }}\r\n\t\t\t\t\t/>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<br />\r\n\t\t\t\t{\r\n\t\t\t\t\tshouldFillIn &&\r\n\t\t\t\t\t<Typography gutterBottom variant=\"title\" color=\"primary\" >\r\n\t\t\t\t\t\tControleer de bovenstaande gegevens en vul de ontbrekende gegevens aan.\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.hasChanged() ?\r\n\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" size=\"large\" onClick={() => this.props.save(this.state.user)}>\r\n\t\t\t\t\t\t\tOpslaan\r\n\t\t\t\t\t\t</Button> : null\r\n\t\t\t\t}\r\n\t\t\t</Page >\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tsave: (user) => dispatch(setUser(user)),\r\n\t};\r\n}\r\n\r\n\r\nexport default connect(null, mapDispatchToProps)(UserPage);\r\n\r\n","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router';\r\n\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nconst CARD_STYLE = {\r\n\twidth: \"300px\",\r\n\theight: \"80px\",\r\n\tpadding: \"20px\",\r\n\tverticalAlign: \"top\",\r\n\tmargin: \"20px\",\r\n\tdisplay: \"inline-block\",\r\n\tcursor: \"pointer\",\r\n}\r\n\r\nclass GroupCard extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\thover: false,\r\n\t\t\tstyle: {\r\n\t\t\t\t...CARD_STYLE,\r\n\t\t\t\t...this.props.style,\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\texpand() {\r\n\t\tthis.props.history.push(\"/gebruiker/\" + this.props.user.id)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst user = this.props.user;\r\n\t\treturn (\r\n\t\t\t<Paper\r\n\t\t\t\televation={this.state.hover ? 4 : 2}\r\n\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\r\n\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\r\n\t\t\t\tstyle={this.state.style}\r\n\t\t\t>\r\n\t\t\t\t<Typography variant=\"title\" color={user.role === \"teacher\"?\"secondary\":\"primary\"} >\r\n\t\t\t\t\t{user.firstName + \" \" + user.lastName}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<Typography variant=\"subheading\">\r\n\t\t\t\t\t{(user.role===\"teacher\"?\"docent\":\"leerling\") + \"\\t\" + user.school}\r\n\t\t\t\t</Typography>\r\n\t\t\t</Paper >\r\n\t\t);\r\n\t}\r\n\r\n\r\n}\r\n\r\n\r\nexport default withRouter(GroupCard);\r\n\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport UserRow from \"./UserRow\";\r\nimport UserPage from \"./UserPage\";\r\nimport UserCard from \"./UserCard\";\r\nimport { setSecureLogin, getCookie } from \"../../store/actions\"\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport Progress from '../../components/Progress'\r\nimport Field from \"../../components/Field\"\r\nimport queryString from \"query-string\";\r\n\r\nclass User extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tlet s = queryString.parse(nextProps.location.search);\r\n\t\tif (s.secureLogin != null) {\r\n\t\t\tnextProps.setSecureLogin(s.secureLogin);\r\n\t\t}\r\n\t\tif (s.from === \"login\" && nextProps.user != null && nextProps.role !== \"student\") {\r\n\t\t\tconst beforeLoginPath = getCookie(\"beforeLoginPath\");\r\n\t\t\tnextProps.history.push(beforeLoginPath);\r\n\t\t}\r\n\t\treturn prevState;\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.user == null) {\r\n\t\t\tif (this.props.display === \"page\") {\r\n\t\t\t\tif (this.props.notExists) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className=\"page\">\r\n\t\t\t\t\t\t\tDe opgevraagde gebruiker bestaat niet\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className=\"page\">\r\n\t\t\t\t\t\t\t<Progress />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (this.props.notExists) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn <Progress />;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tswitch (this.props.display) {\r\n\t\t\tcase \"name\":\r\n\t\t\t\treturn <Field value={this.props.user.displayName} style={{ type: \"title\" }} layout={{ td: true }} />;\r\n\t\t\tcase \"page\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<UserPage {...this.props} />\r\n\t\t\t\t);\r\n\t\t\tcase \"row\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<UserRow {...this.props} />\r\n\t\t\t\t);\r\n\t\t\tcase \"card\":\r\n\t\t\tdefault:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<UserCard {...this.props} />\r\n\t\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n\tlet id = ownProps.match.params.userId || ownProps.userId;\r\n\tlet display = ownProps.display || \"page\";\r\n\r\n\tlet notExists = false;\r\n\tlet user = null;\r\n\r\n\tif (id == null) {\r\n\t\tid = state.userId;\r\n\t}\r\n\r\n\tif (state.users == null || state.users[id] == null) {\r\n\t\tif (id == null || state.hasFetched.indexOf(\"User.get(\" + id + \")\") !== -1) {\r\n\t\t\tnotExists = true;\r\n\t\t}\r\n\t} else {\r\n\t\tuser = state.users[id];\r\n\t}\r\n\r\n\treturn {\r\n\t\trole: state.role,\r\n\t\tuser,\r\n\t\tnotExists,\r\n\t\tdisplay,\r\n\t\tuserId: id,\r\n\t\townProfile: (\"\" + id) === (\"\" + state.userId),\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tsetSecureLogin: (secureLogin) => dispatch(setSecureLogin(secureLogin)),\r\n\t};\r\n}\r\n\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(User));\r\n","import React, { Component } from 'react';\r\nimport map from \"lodash/map\"\r\nimport filter from \"lodash/filter\"\r\nimport User from \"../user/User\"\r\nimport Field from \"../../components/Field\"\r\nimport { Paper } from '@material-ui/core';\r\n\r\nclass PresenceTable extends Component {\r\n\r\n\tcreatePresenceComponent(presence, i) {\r\n\t\tlet options = [{ label: \"Actief\", value: \"present\" },\r\n\t\t{ label: \"Niet actief\", value: \"absent\" }];\r\n\t\tif (!this.props.editable && presence.userStatus === \"absent\") {\r\n\t\t\toptions[0].label = \"Afgemeld\";\r\n\t\t\toptions[1].label = \"Afgemeld\";\r\n\t\t}\r\n\t\treturn <Field\r\n\t\t\tkey={i}\r\n\t\t\tvalue={presence.status}\r\n\t\t\toptions={options}\r\n\t\t\tlabel={presence.userStatus === \"absent\" ? \"afgemeld\" : undefined}\r\n\t\t\tlayout={{ td: true, area: true }}\r\n\t\t\teditable={this.props.editable}\r\n\t\t\tonChange={(status) => {\r\n\t\t\t\tthis.props.handleChange({\r\n\t\t\t\t\t...presence,\r\n\t\t\t\t\tstatus,\r\n\t\t\t\t});\r\n\t\t\t}}\r\n\t\t/>;\r\n\t}\r\n\r\n\tcreateRow = (participantId) => {\r\n\t\tconst content = map(this.props.lessons, ((lesson, i) => {\r\n\t\t\tconst p = filter(this.props.presence, presence => {\r\n\t\t\t\treturn presence.lessonId === lesson.id && presence.userId === participantId;\r\n\t\t\t});\r\n\t\t\tif (p.length === 1) {\r\n\t\t\t\treturn this.createPresenceComponent(p[0], i);\r\n\t\t\t} else {\r\n\t\t\t\treturn \"err\";\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\treturn (\r\n\t\t\t<Paper component=\"tr\" elevation={1} key={\"p\" + participantId}>\r\n\t\t\t\t<User key={participantId} userId={participantId} display=\"name\" />\r\n\t\t\t\t{content}\r\n\t\t\t</Paper>\r\n\t\t);\r\n\t}\r\n\r\n\tcreateLessonHeader = (lesson) => {\r\n\t\tconst content = map(this.props.lessons, lesson => {\r\n\t\t\treturn <Field value={\"Les \" + lesson.numberInBlock} key={lesson.id} style={{ type: \"title\" }} layout={{ td: true, area: true }} />;\r\n\t\t});\r\n\t\treturn (\r\n\t\t\t<Paper component=\"tr\" elevation={2} key={\"l\" + lesson} style={{ backgroundColor: \"#e0e0e0\" }} >\r\n\t\t\t\t<Field value=\"\" layout={{ td: true, area: true }} />\r\n\t\t\t\t{content}\r\n\t\t\t</Paper>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet rows = this.props.participantIds.filter((partId) => {\r\n\t\t\treturn map(this.props.presence, (p) => p.userId).indexOf(partId) !== -1;\r\n\t\t}).map(this.createRow);\r\n\t\trows.unshift(this.createLessonHeader());\r\n\t\treturn <table>\r\n\t\t\t<tbody>\r\n\t\t\t\t{rows}\r\n\t\t\t</tbody>\r\n\t\t</table>;\r\n\t}\r\n\r\n}\r\n\r\nexport default PresenceTable;\r\n","import React, { Component } from 'react';\r\n\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Field from '../../components/Field';\r\nimport { Button } from '@material-ui/core';\r\nimport { setPresenceUserStatus } from \"../../store/actions\";\r\nimport { connect } from \"react-redux\";\r\n\r\nclass Lesson extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\thover: false,\r\n\t\t\tstyle: {\r\n\t\t\t\twidth: \"100%\",\r\n\t\t\t\theight: \"auto\",\r\n\t\t\t\tmarginTop: \"10px\",\r\n\t\t\t\tmarginBottom: \"10px\",\r\n\t\t\t\tpadding: \"2px\",\r\n\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\talignItems: \"start\",\r\n\t\t\t\tposition: \"relative\",\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n\r\n\tgetWeekdayString(number) {\r\n\t\treturn [\"zondag\", \"maandag\", \"dinsdag\", \"woensdag\", \"donderdag\", \"vrijdag\", \"zaterdag\"][number];\r\n\t}\r\n\r\n\tgetOptOutButton() {\r\n\t\tif (this.props.lesson.userStatus === \"absent\") {\r\n\t\t\treturn < div style={{ flex: 1 }}>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tstyle={{ width: \"70px\", float: \"right\" }}\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tmini\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tonClick={() => this.props.setPresenceUserStatus(this.props.lesson.id, \"present\", this.props.lesson.courseGroupId)}\r\n\t\t\t\t>\r\n\t\t\t\t\tAanmelden\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t}\r\n\t\treturn < div style={{ flex: 1 }}>\r\n\t\t\t<Button\r\n\t\t\t\tstyle={{ width: \"70px\", float: \"right\" }}\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\tmini\r\n\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\tonClick={() => this.props.setPresenceUserStatus(this.props.lesson.id, \"absent\", this.props.lesson.courseGroupId)}\r\n\t\t\t>\r\n\t\t\t\tAfmelden\r\n\t\t\t</Button>\r\n\t\t</div>\r\n\t}\r\n\r\n\r\n\thandleChange = (name, value) => {\r\n\t\tthis.props.handleChange({\r\n\t\t\t...this.props.lesson,\r\n\t\t\t[name]: value,\r\n\t\t});\r\n\t}\r\n\r\n\r\n\trender() {\r\n\t\tconst lesson = this.props.lesson;\r\n\t\tif (lesson.id === -1) {\r\n\t\t\treturn (\r\n\t\t\t\t<Paper\r\n\t\t\t\t\televation={this.state.hover ? 2 : 1}\r\n\t\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\r\n\t\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\r\n\t\t\t\t\tcomponent=\"tr\"\r\n\t\t\t\t\tstyle={{ backgroundColor: \"#e0e0e0\" }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<td style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n\t\t\t\t\t\t<Field style={{ fontWeight: \"bold\" }} value=\"Lesnummer\" />\r\n\t\t\t\t\t\t<Field style={{ fontWeight: \"bold\" }} value=\"Soort les\" />\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<Field style={{ flex: 4, fontWeight: \"bold\" }} value=\"Onderwerp\" layout={{ td: true }} />\r\n\t\t\t\t\t<Field style={{ flex: 8, fontWeight: \"bold\" }} value=\"Activiteiten\" layout={{ td: true }} />\r\n\t\t\t\t\t<td style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n\t\t\t\t\t\t<Field style={{ fontWeight: \"bold\" }} value=\"Datum\" layout={{ alignment: \"right\" }} />\r\n\t\t\t\t\t\t<Field style={{ fontWeight: \"bold\" }} value=\"Aanwezigheid\" layout={{ alignment: \"right\" }} />\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</Paper>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Paper\r\n\t\t\t\televation={this.state.hover ? 2 : 1}\r\n\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\r\n\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\r\n\t\t\t\tcomponent=\"tr\"\r\n\t\t\t>\r\n\t\t\t\t<td style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tlayout={{ area: true }}\r\n\t\t\t\t\t\tstyle={{ fontWeight: \"bold\" }}\r\n\t\t\t\t\t\tvalue={\"Les \" + lesson.numberInBlock}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tlabel=\"Soort les\"\r\n\t\t\t\t\t\tlayout={{ area: true }}\r\n\t\t\t\t\t\tvalue={lesson.kind}\r\n\t\t\t\t\t\teditable={this.props.editable}\r\n\t\t\t\t\t\tonChange={(value) => this.handleChange(\"kind\", value)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</td>\r\n\t\t\t\t<Field\r\n\t\t\t\t\tlabel=\"Onderwerp\"\r\n\t\t\t\t\tstyle={{ flex: 4 }}\r\n\t\t\t\t\tvalue={lesson.subject}\r\n\t\t\t\t\teditable={this.props.editable}\r\n\t\t\t\t\tonChange={(value) => this.handleChange(\"subject\", value)}\r\n\t\t\t\t\tlayout={{ td: true, area: true }}\r\n\t\t\t\t/>\r\n\t\t\t\t<Field\r\n\t\t\t\t\tlabel=\"Activiteiten\"\r\n\t\t\t\t\tstyle={{ flex: 8 }}\r\n\t\t\t\t\tvalue={lesson.activities}\r\n\t\t\t\t\teditable={this.props.editable}\r\n\t\t\t\t\tonChange={(value) => this.handleChange(\"activities\", value)}\r\n\t\t\t\t\tlayout={{ td: true, area: true }}\r\n\t\t\t\t/>\r\n\t\t\t\t<td style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tlayout={{ alignment: \"right\" }}\r\n\t\t\t\t\t\tvalue={this.getWeekdayString(new Date(lesson.date).getDay()) + \" \" + new Date(lesson.date).getDate() + \"-\" + (new Date(lesson.date).getMonth() + 1) + \"-\" + new Date(lesson.date).getFullYear()}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tlabel=\"Aanwezigheid\"\r\n\t\t\t\t\t\tstyle={{ labelVisible: true }}\r\n\t\t\t\t\t\tlayout={{ alignment: \"right\" }}\r\n\t\t\t\t\t\tvalue={lesson.presence}\r\n\t\t\t\t\t\teditable={this.props.editable}\r\n\t\t\t\t\t\tonChange={(value) => this.handleChange(\"presence\", value)}\r\n\t\t\t\t\t\toptions={[{ label: \"Noodzakelijk\", value: \"required\" }, { label: \"Eigen keuze\", value: \"optional\" }, { label: \"Geen bijeenkomst\", value: \"unrequired\" }]}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.props.userIsMemberOfGroup && this.props.role === \"student\" ? this.getOptOutButton() : null\r\n\t\t\t\t\t}\r\n\t\t\t\t</td>\r\n\t\t\t</Paper >\r\n\t\t);\r\n\t}\r\n\r\n\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tsetPresenceUserStatus: (lessonId, userStatus, groupId) => dispatch(setPresenceUserStatus(lessonId, userStatus, groupId)),\r\n\t};\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(Lesson);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Typography, Tooltip, TableSortLabel, Paper } from '@material-ui/core';\r\nimport User from \"./User\";\r\n\r\nclass UserList extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\thover: false,\r\n\t\t\tstyle: {\r\n\t\t\t\twidth: \"100%\",\r\n\t\t\t\theight: \"auto\",\r\n\t\t\t\tmargin: \"0px\",\r\n\t\t\t\tpadding: \"10px\",\r\n\t\t\t\tbackgroundColor: \"#e0e0e0\",\r\n\t\t\t},\r\n\t\t\tsortValue: \"\",\r\n\t\t\tsortDirection: \"\",\r\n\t\t}\r\n\t}\r\n\r\n\tonSortChange = (value) => {\r\n\t\tthis.setState({\r\n\t\t\tsortValue: value,\r\n\t\t\tsortDirection: this.state.sortDirection === \"desc\" && this.state.sortValue === value ? \"asc\" : \"desc\"\r\n\t\t});\r\n\t}\r\n\r\n\theaderTitle(variant, value, title) {\r\n\t\tlet sortValue = this.state.sortValue;\r\n\t\tlet sortDirection = this.state.sortDirection === \"asc\" ? \"asc\" : \"desc\";\r\n\t\treturn (\r\n\t\t\t<Typography variant={variant} color={variant === \"title\" ? \"primary\" : \"default\"} style={{ flex: 1 }} >\r\n\t\t\t\t<Tooltip title=\"Sorteer\" enterDelay={300} placement=\"bottom-start\">\r\n\t\t\t\t\t<TableSortLabel active={sortValue === value}\r\n\t\t\t\t\t\tdirection={sortDirection}\r\n\t\t\t\t\t\tonClick={() => this.onSortChange(value)}\r\n\t\t\t\t\t\tstyle={{ color: \"inherit\" }} >\r\n\t\t\t\t\t\t{title}\r\n\t\t\t\t\t</TableSortLabel>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</Typography>\r\n\t\t)\r\n\t}\r\n\r\n\tgetHeader = () => {\r\n\t\tlet style = { ...this.state.style };\r\n\t\treturn (\r\n\t\t\t<tr>\r\n\t\t\t\t<Paper\r\n\t\t\t\t\televation={this.state.hover ? 2 : 1}\r\n\t\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\r\n\t\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\r\n\t\t\t\t\tcomponent=\"td\"\r\n\t\t\t\t\tstyle={style}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\tjustifyContent: \"space-between\"\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{this.headerTitle(\"title\", \"name\", \"Naam\")}\r\n\t\t\t\t\t\t{this.headerTitle(\"subheading\", \"school\", \"School\")}\r\n\t\t\t\t\t\t{this.headerTitle(\"body1\", \"levelAndYear\", \"Niveau - Leerjaar\")}\r\n\t\t\t\t\t\t{this.headerTitle(\"body1\", \"role\", \"Rol\")}\r\n\t\t\t\t\t\t{this.headerTitle(\"body1\", \"profile\", \"Profiel\")}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{this.props.role === \"admin\" &&\r\n\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\tjustifyContent: \"space-between\"\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{this.headerTitle(\"body1\", \"email\", \"Office Email\")}\r\n\t\t\t\t\t\t\t{this.headerTitle(\"body1\", \"preferedEmail\", \"Voorkeurs email\")}\r\n\t\t\t\t\t\t\t<div style={{ flex: 1 }} />\r\n\t\t\t\t\t\t\t{this.headerTitle(\"body1\", \"phoneNumber\", \"Telefoonnummer\")}\r\n\t\t\t\t\t\t\t{this.headerTitle(\"body1\", \"id\", \"Gebruikers ID\")}\r\n\t\t\t\t\t\t</div>}\r\n\t\t\t\t</Paper >\r\n\t\t\t</tr>\r\n\t\t)\r\n\t}\r\n\r\n\tsortIds = () => {\r\n\t\tconst value = this.state.sortValue;\r\n\t\tconst direction = this.state.sortDirection;\r\n\t\tconst users = this.props.users;\r\n\t\tconst userIds = this.props.userIds;\r\n\t\tif (value === \"\") {\r\n\t\t\treturn userIds;\r\n\t\t}\r\n\t\tuserIds.sort((a, b) => {\r\n\t\t\tswitch (value) {\r\n\t\t\t\tcase \"name\":\r\n\t\t\t\t\ta = (users[a][\"firstName\"] + users[a][\"lastName\"]).toLowerCase();\r\n\t\t\t\t\tb = (users[b][\"firstName\"] + users[b][\"lastName\"]).toLowerCase()\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"levelAndYear\":\r\n\t\t\t\t\ta = (users[a][\"level\"] + users[a][\"year\"]).toString();// to string because otherwise no level and year would result in a being an integer\r\n\t\t\t\t\tb = (users[b][\"level\"] + users[b][\"year\"]).toString();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\ta = users[a][value];\r\n\t\t\t\t\tb = users[b][value];\r\n\t\t\t}\r\n\t\t\tlet cmp = (b == null) - (a == null) || +(a > b) || -(a < b);\r\n\t\t\treturn direction === \"asc\" ? cmp : -cmp;\r\n\t\t})\r\n\t\treturn userIds;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst header = this.getHeader();\r\n\t\tconst users = this.sortIds().map(id => {\r\n\t\t\treturn <User key={id} userId={id} display=\"row\" />\r\n\t\t});\r\n\t\treturn (\r\n\t\t\t<table style={{ width: \"100%\" }}>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{header}\r\n\t\t\t\t\t{users}\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n\treturn {\r\n\t\tusers: state.users,\r\n\t\trole: state.role,\r\n\t};\r\n}\r\n\r\nexport default connect(mapStateToProps)(UserList);","import React, { Component } from 'react';\r\nimport { Prompt } from 'react-router-dom';\r\n\r\nclass PageLeaveWarning extends Component {\r\n\r\n\trender() {\r\n\t\tconst message = \"Weet je zeker dat u de pagina wilt verlaten? Er zijn nog niet-opgeslagen gegevens!\";\r\n\t\tif (this.props.giveWarning) {\r\n\t\t\twindow.onbeforeunload = function (e) {\r\n\t\t\t\te.returnValue = message;\r\n\t\t\t\treturn message;\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\twindow.onbeforeunload = null;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Prompt\r\n\t\t\t\twhen={this.props.giveWarning}\r\n\t\t\t\tmessage={location => message}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nexport default PageLeaveWarning;","import React, { Component } from 'react';\r\nimport map from 'lodash/map';\r\n\r\nimport Field from '../../components/Field';\r\nimport User from \"../user/User\"\r\n\r\nimport Popover from '@material-ui/core/Popover';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nclass GroupData extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\thandleClickAway = () => {\r\n\t\tthis.setState({ anchorEl: null });\r\n\t}\r\n\r\n\tshowTeacherCard = event => {\r\n\t\tthis.setState({ anchorEl: event.currentTarget });\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst editable = this.props.editable;\r\n\t\tconst role = this.props.role;\r\n\t\tconst onChange = this.props.onChange;\r\n\t\tlet group = this.props.group;\r\n\t\treturn (\r\n\t\t\t<div style={{ position: \"relative\" }}>\r\n\t\t\t\t<div style={{ display: \"flex\" }}>\r\n\t\t\t\t\t<Field value={group.courseName} name=\"courseName\" onChange={onChange} editable={editable} style={{ flex: \"5\", type: \"headline\" }} validate={{ maxLength: 50 }} />\r\n\t\t\t\t\t<Field value={group.subjectId} name=\"subjectId\" onChange={onChange} layout={{ alignment: \"right\" }} style={{ type: \"headline\" }} editable={editable} options={map(this.props.subjects, (subject) => { return { value: subject.id, label: subject.name } })} />\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t!editable &&\r\n\t\t\t\t\t\t<Button color=\"secondary\" style={{ position: \"absolute\", display: \"block\", top: \"30px\", right: \"-15px\", zIndex: \"100\" }} onClick={this.showTeacherCard}>\r\n\t\t\t\t\t\t\t<div>{group.teacherName}</div>\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ display: \"flex\" }} className=\"ColumnFlexDirectionOnMobile\">\r\n\t\t\t\t\t<div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n\t\t\t\t\t\t<div style={{ flex: 1 }}>\r\n\t\t\t\t\t\t\t<Field value={group.period} name=\"period\" editable={editable && role === \"admin\"} onChange={onChange} style={{ width: \"100px\", type: \"caption\" }} options={[{ label: \"Blok 1\", value: 1 }, { label: \"Blok 2\", value: 2 }, { label: \"Blok 3\", value: 3 }, { label: \"Blok 4\", value: 4 }]} />\r\n\t\t\t\t\t\t\t<Field value={group.day} name=\"day\" editable={editable && role === \"admin\"} onChange={onChange} style={{ width: \"150px\", type: \"caption\" }} options={[\"maandag\", \"dinsdag\", \"woensdag\", \"donderdag\", \"vrijdag\", \"zaterdag\", \"zondag\"]} />\r\n\t\t\t\t\t\t\t<Field value={group.schoolYear} name=\"schoolYear\" editable={editable && role === \"admin\"} onChange={onChange} options={[\"2018/2019\", \"2019/2020\", \"2020/2021\", \"2021/2022\"]} style={{ width: \"120px\", type: \"caption\" }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<Field value={group.enrollableFor} label=\"Doelgroep\" style={{ width: \"100%\", labelVisible: true }} name=\"enrollableFor\" default=\"Iedereen\" editable={editable} onChange={onChange} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{ width: \"100%\" }}>\r\n\t\t\t\t\t\t<Field value={group.courseDescription} validate={{ maxLength: 440 }} name=\"courseDescription\" label=\"Omschrijving\" style={{ labelVisible: true }} onChange={onChange} layout={{ area: true }} editable={editable} />\r\n\t\t\t\t\t\t<Field value={group.remarks} label=\"Opmerkingen\" name=\"remarks\" style={{ width: \"80%\", labelVisible: true }} default=\"Geen voorkennis vereist\" editable={editable} onChange={onChange} />\r\n\t\t\t\t\t\t<Field value={group.studyTime} label=\"Studietijd\" name=\"studyTime\" default=\"onbekend\" editable={editable} style={{ labelVisible: true, unit: \"uur\" }} onChange={onChange} layout={{ alignment: \"right\" }} validate={{ type: \"integer\" }} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<br />\r\n\r\n\t\t\t\t<Popover\r\n\t\t\t\t\topen={this.state.anchorEl ? true : false}\r\n\t\t\t\t\tonClose={this.handleClickAway}\r\n\t\t\t\t\tanchorEl={this.state.anchorEl}\r\n\t\t\t\t\tanchorOrigin={{ horizontal: \"left\", vertical: \"top\" }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<User key={group.teacherId} userId={group.teacherId} display=\"card\" style={{ margin: \"0px\" }} />\r\n\t\t\t\t</Popover>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default GroupData;\r\n","import React, { Component } from \"react\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\nimport { connect } from 'react-redux';\r\nimport theme from \"../lib/MuiTheme\";\r\nimport { withStyles, Tooltip } from \"@material-ui/core\";\r\n\r\nconst style = {\r\n    colorPrimary:{\r\n        backgroundColor: theme.palette.primary.main\r\n    },\r\n    colorSecondary: {\r\n        backgroundColor: \"#ff8c00\"\r\n    },\r\n    colorError: {\r\n        backgroundColor: theme.palette.error.main\r\n    }\r\n}\r\n\r\nclass NotificationBadge extends Component {\r\n\r\n\r\n    render() {\r\n        const notifications = this.props.notifications;\r\n        const classes = this.props.classes;\r\n        let color = \"primary\";\r\n        let tooltipMessage = notifications.length > 0 ? notifications[0].message : \"\";\r\n        for ( let i = 0; i < notifications.length; i ++ ) { \r\n            if (notifications[i].priority === \"medium\" || notifications[i].priority === \"high\" ){\r\n                color=\"secondary\";\r\n                tooltipMessage=notifications[i].message;\r\n                for ( let j = i ; j < notifications.length; j++ ) {\r\n                    if ( notifications[j].priority === \"high\" ) {\r\n                        color = \"error\"\r\n                        tooltipMessage = notifications[j].message;\r\n                        break;\r\n                    }\r\n                }\r\n                break\r\n            }\r\n        }// tooltip is first message of highest priority\r\n        //color is highest priority\r\n\r\n        return (\r\n            <Tooltip title={tooltipMessage} >\r\n                <Badge badgeContent={notifications.length} classes={classes} color={color} >\r\n                    {this.props.children}\r\n                </Badge>\r\n            </Tooltip>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n\tlet notifications = state.notifications.filter((not) => {\r\n\t\ttry {\r\n            return not.type === \"badge\" && RegExp(not.scope).test(ownProps.scope);\r\n\t\t} catch (err) {\r\n\t\t\treturn true;\r\n\t\t}\r\n    });\r\n\treturn {\r\n\t\tnotifications: notifications,\r\n\t};\r\n}\r\n\r\nexport default withStyles(style)(connect(mapStateToProps,null)(NotificationBadge));","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router';\r\nimport map from 'lodash/map';\r\n\r\nimport PresenceTable from './PresenceTable';\r\nimport Lesson from './Lesson';\r\nimport { EvaluationTab } from './Evaluation';\r\nimport Page from '../Page';\r\nimport UserList from \"../user/UserList\"\r\n\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Progress from '../../components/Progress'\r\nimport PageLeaveWarning from '../../components/PageLeaveWarning'\r\nimport GroupData from './GroupData';\r\nimport ChooseButton from './ChooseButton';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Button from '@material-ui/core/Button';\r\nimport queryString from \"query-string\";\r\nimport NotificationBadge from '../../components/NotificationBadge';\r\n\r\nclass GroupPage extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\teditable: false,\r\n\t\t\tgroup: this.props.group,\r\n\t\t}\r\n\r\n\t\tswitch (this.props.role) {\r\n\t\t\tcase \"student\":\r\n\t\t\t\tif (this.props.userIsMemberOfGroup) {\r\n\t\t\t\t\tthis.state.tabs = [\"Lessen\", \"Deelnemers\"];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.state.tabs = [\"Lessen\"];\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"teacher\":\r\n\t\t\t\tif (this.props.userIsMemberOfGroup) {\r\n\t\t\t\t\tthis.state.tabs = [\"Inschrijvingen\", \"Lessen\", \"Deelnemers\", \"Actief\", \"Beoordeling\"];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.state.tabs = [\"Lessen\"];\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"admin\":\r\n\t\t\t\tthis.state.tabs = [\"Inschrijvingen\", \"Lessen\", \"Deelnemers\", \"Actief\", \"Beoordeling\"];\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tlet values = queryString.parse(nextProps.location.search);\r\n\t\treturn {\r\n\t\t\t...prevState,\r\n\t\t\tgroup: {\r\n\t\t\t\t...nextProps.group,\r\n\t\t\t\t...prevState.group,\r\n\t\t\t},\r\n\t\t\tcurrentTab: values.tab ? values.tab : prevState.tabs[0]\r\n\t\t}\r\n\t}\r\n\r\n\tgetCurrentTab(currentTab) {\r\n\t\tlet group = this.state.group;\r\n\t\tconst enrollmentIds = this.state.group.enrollmentIds;\r\n\t\tconst lessons = this.state.group.lessons;\r\n\t\tconst participantIds = this.state.group.participantIds;\r\n\t\tconst evaluations = this.state.group.evaluations;\r\n\t\tconst presence = this.state.group.presence;\r\n\r\n\t\tswitch (currentTab) {\r\n\t\t\tcase \"Inschrijvingen\":\r\n\t\t\t\tif (enrollmentIds == null) {\r\n\t\t\t\t\treturn <Progress />;\r\n\t\t\t\t}\r\n\t\t\t\tif (enrollmentIds.length === 0) {\r\n\t\t\t\t\treturn \"Er zijn geen inschrijvingen\";\r\n\t\t\t\t}\r\n\t\t\t\treturn <UserList userIds={enrollmentIds} />;\r\n\t\t\tcase \"Lessen\":\r\n\t\t\t\tif (lessons == null) {\r\n\t\t\t\t\treturn <Progress />;\r\n\t\t\t\t}\r\n\t\t\t\tif (lessons.length === 0) {\r\n\t\t\t\t\treturn \"Er zijn nog geen lessen bekend\";\r\n\t\t\t\t}\r\n\t\t\t\treturn <table style={{ width: \"100%\" }}>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{map({ 0: { id: -1 }, ...lessons }, lesson => {\r\n\t\t\t\t\t\t\treturn <Lesson\r\n\t\t\t\t\t\t\t\tlesson={lesson}\r\n\t\t\t\t\t\t\t\tkey={lesson.id}\r\n\t\t\t\t\t\t\t\trole={this.props.role}\r\n\t\t\t\t\t\t\t\tuserIsMemberOfGroup={this.props.userIsMemberOfGroup}\r\n\t\t\t\t\t\t\t\teditable={this.state.editable}\r\n\t\t\t\t\t\t\t\thandleChange={this.handleLessonChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\tcase \"Deelnemers\":\r\n\t\t\t\tif (participantIds == null) {\r\n\t\t\t\t\treturn <Progress />;\r\n\t\t\t\t}\r\n\t\t\t\tif (participantIds.length === 0) {\r\n\t\t\t\t\treturn \"Er zijn nog geen deelnemers toegevoegd\";\r\n\t\t\t\t}\r\n\t\t\t\treturn <UserList userIds={participantIds} />\r\n\t\t\tcase \"Actief\":\r\n\t\t\t\tif (participantIds == null || lessons == null || presence == null) {\r\n\t\t\t\t\treturn <Progress />;\r\n\t\t\t\t}\r\n\t\t\t\treturn <PresenceTable\r\n\t\t\t\t\tparticipantIds={participantIds}\r\n\t\t\t\t\tlessons={lessons}\r\n\t\t\t\t\tpresence={presence}\r\n\t\t\t\t\teditable={this.state.editable}\r\n\t\t\t\t\thandleChange={this.handlePresenceChange}\r\n\t\t\t\t/>\r\n\t\t\tcase \"Beoordeling\":\r\n\t\t\t\tif (participantIds == null || evaluations == null) {\r\n\t\t\t\t\treturn <Progress />;\r\n\t\t\t\t}\r\n\t\t\t\treturn <EvaluationTab\r\n\t\t\t\t\tevaluations={evaluations}\r\n\t\t\t\t\tgroupId={group.id}\r\n\t\t\t\t\teditable={this.state.editable}\r\n\t\t\t\t\thandleChange={this.handleEvaluationChange}\r\n\t\t\t\t/>\r\n\t\t\tdefault: return null;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tgetData() {\r\n\t\tlet group = this.state.group;\r\n\t\tconst enrollmentIds = this.state.group.enrollmentIds;\r\n\t\tconst lessons = this.state.group.lessons;\r\n\t\tconst participantIds = this.state.group.participantIds;\r\n\t\tconst evaluations = this.state.group.evaluations;\r\n\t\tconst presence = this.state.group.presence;\r\n\r\n\t\tswitch (this.state.currentTab) {\r\n\t\t\tcase \"Inschrijvingen\":\r\n\t\t\t\tif (enrollmentIds == null) {\r\n\t\t\t\t\tthis.props.getGroupEnrollments(group.id);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Lessen\":\r\n\t\t\t\tif (lessons == null) {\r\n\t\t\t\t\tthis.props.getGroupLessons(group.id);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Deelnemers\":\r\n\t\t\t\tif (participantIds == null) {\r\n\t\t\t\t\tthis.props.getGroupParticipants(group.id);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Actief\":\r\n\t\t\t\tif (participantIds == null) {\r\n\t\t\t\t\tthis.props.getGroupParticipants(group.id);\r\n\t\t\t\t}\r\n\t\t\t\tif (lessons == null) {\r\n\t\t\t\t\tthis.props.getGroupLessons(group.id);\r\n\t\t\t\t}\r\n\t\t\t\tif (presence == null) {\r\n\t\t\t\t\tthis.props.getGroupPresence(group.id);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Beoordeling\":\r\n\t\t\t\tif (evaluations == null) {\r\n\t\t\t\t\tthis.props.getGroupEvaluations(group.id);\r\n\t\t\t\t}\r\n\t\t\t\tif (participantIds == null) {\r\n\t\t\t\t\tthis.props.getGroupParticipants(group.id);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: break;\r\n\t\t}\r\n\t}\r\n\r\n\thandleChange = (event) => {\r\n\t\tthis.setState({\r\n\t\t\tgroup: {\r\n\t\t\t\t...this.state.group,\r\n\t\t\t\t[event.name]: event.target.value,\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\thandleLessonChange = (lesson) => {\r\n\t\tlet lessons = this.state.group.lessons || this.props.group.lessons;\r\n\t\tthis.setState({\r\n\t\t\tgroup: {\r\n\t\t\t\t...this.state.group,\r\n\t\t\t\tlessons: {\r\n\t\t\t\t\t...lessons,\r\n\t\t\t\t\t[lesson.id]: lesson,\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\thandleEvaluationChange = (newEvaluations) => {\r\n\t\tthis.setState({\r\n\t\t\tgroup: {\r\n\t\t\t\t...this.state.group,\r\n\t\t\t\tevaluations: newEvaluations,\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\thandlePresenceChange = (presenceObj) => {\r\n\t\tlet presence = this.state.group.presence || this.props.group.presence;\r\n\t\tthis.setState({\r\n\t\t\tgroup: {\r\n\t\t\t\t...this.state.group,\r\n\t\t\t\tpresence: {\r\n\t\t\t\t\t...presence,\r\n\t\t\t\t\t[presenceObj.id]: presenceObj,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tsetEditable = () => {\r\n\t\tthis.setState({\r\n\t\t\teditable: true,\r\n\t\t});\r\n\t}\r\n\r\n\tcancel = () => {\r\n\t\tthis.setState({\r\n\t\t\teditable: false,\r\n\t\t\tgroup: this.props.group,\r\n\t\t});\r\n\t}\r\n\r\n\tsave = () => {\r\n\t\tthis.props.setGroup(this.state.group);\r\n\t\tthis.setState({\r\n\t\t\teditable: false,\r\n\t\t});\r\n\t}\r\n\r\n\thandleTab = (event, newTab) => {\r\n\t\tthis.props.history.push({\r\n\t\t\tsearch: \"tab=\" + this.state.tabs[newTab],\r\n\t\t});\r\n\t};\r\n\r\n\r\n\trender() {\r\n\t\tconst editable = this.state.editable;\r\n\t\tconst role = this.props.role;\r\n\t\tlet group = this.state.group;\r\n\t\treturn (\r\n\t\t\t<Page>\r\n\t\t\t\t<GroupData {...this.props} editable={editable} group={group} onChange={this.handleChange} />\r\n\t\t\t\t<Divider />\r\n\t\t\t\t{\r\n\t\t\t\t\trole === \"student\" &&\r\n\t\t\t\t\t<ChooseButton\r\n\t\t\t\t\t\tgroup={group}\r\n\t\t\t\t\t\tstyle={{ margin: \"20px\" }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\t((role === \"teacher\" || role === \"admin\") && !editable) &&\r\n\t\t\t\t\t<Button color=\"secondary\" variant=\"contained\" style={{ margin: \"20px\" }} onClick={this.setEditable}>\r\n\t\t\t\t\t\t{\"Bewerken\"}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\teditable &&\r\n\t\t\t\t\t<Button color=\"secondary\" variant=\"contained\" style={{ margin: \"20px\" }} onClick={this.save}>\r\n\t\t\t\t\t\t{\"Opslaan\"}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\teditable &&\r\n\t\t\t\t\t<Button color=\"default\" style={{ margin: \"20px\" }} onClick={this.cancel}>\r\n\t\t\t\t\t\t{\"Annuleren\"}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t}\r\n\t\t\t\t<AppBar position=\"static\" color=\"default\">\r\n\t\t\t\t\t<Tabs\r\n\t\t\t\t\t\tvalue={this.state.tabs.indexOf(this.state.currentTab)}\r\n\t\t\t\t\t\tonChange={this.handleTab}\r\n\t\t\t\t\t\tindicatorColor=\"primary\"\r\n\t\t\t\t\t\ttextColor=\"primary\"\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tcentered\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{this.state.tabs.map(tab => \r\n\t\t\t\t\t\t<Tab key={tab} label={\r\n\t\t\t\t\t\t\t<NotificationBadge scope={\"groep/\" + ( group.id || \"\" ) + \"?tab=\" + tab} style={{paddingLeft:\"100px\"}}>\r\n\t\t\t\t\t\t\t\t{tab}\r\n\t\t\t\t\t\t\t</NotificationBadge>\r\n\t\t\t\t\t\t\t} />) }\r\n\t\t\t\t\t</Tabs>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<br />\r\n\t\t\t\t<div style={{ width: \"98%\", margin: \"auto\" }}>\r\n\t\t\t\t\t{this.getCurrentTab(this.state.currentTab)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<PageLeaveWarning giveWarning={this.state.editable} />\r\n\t\t\t</Page>\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\n\r\n\r\nexport default withRouter(GroupPage);\r\n\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport GroupCard from \"./GroupCard\";\r\nimport GroupPage from \"./GroupPage\";\r\nimport {\r\n\tsetGroup,\r\n\tgetGroup,\r\n\tgetGroupEnrollments,\r\n\tgetGroupLessons,\r\n\tgetGroupParticipants,\r\n\tgetGroupEvaluations,\r\n\tgetGroupPresence,\r\n\tgetSubjects,\r\n} from \"../../store/actions\";\r\nimport { withRouter } from 'react-router-dom';\r\nimport Progress from '../../components/Progress'\r\nimport Page from '../Page';\r\n\r\nclass Group extends Component {\r\n\r\n\tcomponentWillMount() {\r\n\t\tconst props = this.props;\r\n\t\tif (props.subjects == null) {\r\n\t\t\tprops.getSubjects();\r\n\t\t}\r\n\t\tif (props.group == null && !props.notExists) {\r\n\t\t\tprops.getGroup(props.groupId);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.group == null) {\r\n\t\t\tif (this.props.display === \"page\" && this.props.notExists) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Page>\r\n\t\t\t\t\t\tDe opgevraagde groep bestaat niet\r\n\t\t\t\t\t</Page>\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\treturn this.props.notExists ? null : <Progress />;\r\n\t\t\t}\r\n\t\t}\r\n\t\tswitch (this.props.display) {\r\n\t\t\tcase \"page\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<GroupPage {...this.props} />\r\n\t\t\t\t);\r\n\t\t\tcase \"card\":\r\n\t\t\tdefault:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<GroupCard {...this.props} />\r\n\t\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n\tlet id = (ownProps.match.params.groupId || ownProps.groupId) + \"\";\r\n\tlet display = ownProps.display || \"page\";\r\n\r\n\tlet notExists = false;\r\n\tlet group = null;\r\n\r\n\tlet userIsMemberOfGroup = state.users[state.userId].participatingGroupIds.indexOf(id) !== -1;\r\n\tif (state.groups == null || state.groups[id] == null) {\r\n\t\tif (id == null || state.hasFetched.indexOf(\"Group.get(\" + id + \")\") !== -1) {\r\n\t\t\tnotExists = true;\r\n\t\t}\r\n\t} else {\r\n\t\tgroup = state.groups[id];\r\n\t}\r\n\treturn {\r\n\t\tgroup,\r\n\t\tnotExists,\r\n\t\tdisplay,\r\n\t\trole: state.role,\r\n\t\tgroupId: id,\r\n\t\tsubjects: state.subjects,\r\n\t\tuserIsMemberOfGroup,\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tsetGroup: (group) => dispatch(setGroup(group)),\r\n\t\tgetGroup: (groupId) => dispatch(getGroup(groupId)),\r\n\t\tgetGroupEnrollments: (groupId) => dispatch(getGroupEnrollments(groupId)),\r\n\t\tgetGroupLessons: (groupId) => dispatch(getGroupLessons(groupId)),\r\n\t\tgetGroupParticipants: (groupId) => dispatch(getGroupParticipants(groupId)),\r\n\t\tgetGroupEvaluations: (groupId) => dispatch(getGroupEvaluations(groupId)),\r\n\t\tgetGroupPresence: (groupId) => dispatch(getGroupPresence(groupId)),\r\n\t\tgetSubjects: () => dispatch(getSubjects()),\r\n\t};\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Group));\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport filter from 'lodash/filter';\r\nimport map from 'lodash/map';\r\n\r\nimport Page from './Page';\r\nimport Progress from '../components/Progress';\r\nimport Field from '../components/Field';\r\nimport Group from './group/Group';\r\nimport { getSubjects, getGroups, getEnrolLments } from '../store/actions';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport queryString from \"query-string\";\r\n\r\nclass CourseSelect extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tsortMethod: null,\r\n\t\t\tfilterMethod: \"period\" + props.currentPeriod,\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tlet values = queryString.parse(nextProps.location.search);\r\n\t\tif (values.sort) {\r\n\t\t\treturn {\r\n\t\t\t\t...prevState,\r\n\t\t\t\t...{\r\n\t\t\t\t\tsortMethod: values.sort,\r\n\t\t\t\t\tfilterMethod: values.filter ? values.filter : \"period\" + nextProps.currentPeriod,\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (nextProps.subjects != null) {\r\n\t\t\treturn {\r\n\t\t\t\t...prevState,\r\n\t\t\t\t...{\r\n\t\t\t\t\tfilterMethod: values.filter ? values.filter : \"period\" + nextProps.currentPeriod,\r\n\t\t\t\t\tsortMethod: nextProps.subjects[Object.keys(nextProps.subjects)[0]].name,\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\t...prevState,\r\n\t\t\t\tsortMethod: null,\r\n\t\t\t\tfilterMethod: \"none\",\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.getSubjects();\r\n\t\tthis.props.getGroups();\r\n\t}\r\n\r\n\tgetGroupsPerSubject(subject) {\r\n\t\treturn filter(this.props.groups, (group) => {\r\n\t\t\treturn subject === group.subjectName;\r\n\t\t})\r\n\t}\r\n\r\n\thandleSortChange = subject => {\r\n\t\tthis.props.history.push({\r\n\t\t\tsearch: \"sort=\" + subject + \"&filter=\" + this.state.filterMethod,\r\n\t\t});\r\n\t};\r\n\r\n\thandleFilterChange = value => {\r\n\t\tthis.props.history.push({\r\n\t\t\tsearch: \"sort=\" + this.state.sortMethod + \"&filter=\" + value,\r\n\t\t});\r\n\t};\r\n\r\n\tgetMenuItem(title, subject) {\r\n\t\tlet color = (this.state.sortMethod === subject) ? \"primary\" : \"default\";\r\n\t\treturn (\r\n\t\t\t<ListItem button onClick={() => this.handleSortChange(subject)} key={title}>\r\n\t\t\t\t<ListItemText>\r\n\t\t\t\t\t<Typography variant=\"title\" color={color} style={{ minWidth: \"150px\" }}>\r\n\t\t\t\t\t\t{title}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</ListItemText>\r\n\t\t\t</ListItem >\r\n\t\t)\r\n\t}\r\n\r\n\tgetMenuItems() {\r\n\t\tconst subjectsComponents = map(this.props.subjects, (subject) => {\r\n\t\t\treturn this.getMenuItem(subject.name, subject.name);\r\n\t\t});\r\n\t\tif (this.props.role === \"student\") {\r\n\t\t\tsubjectsComponents.unshift(this.getMenuItem(\"Ingeschreven\", \"enrolled\"));\r\n\t\t}\r\n\t\treturn subjectsComponents;\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet data;\r\n\t\tif (this.state.sortMethod === \"enrolled\") {\r\n\t\t\tif (this.props.enrolledGroupsIds == null) {\r\n\t\t\t\tdata = <Progress />;\r\n\t\t\t\tthis.props.getEnrolLments();\r\n\t\t\t} else {\r\n\t\t\t\tdata = this.props.enrolledGroupsIds.map((groupId) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Group\r\n\t\t\t\t\t\t\tkey={groupId}\r\n\t\t\t\t\t\t\tgroupId={groupId}\r\n\t\t\t\t\t\t\tdisplay=\"card\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t\tif (this.props.enrolledGroupsIds.length === 0) {\r\n\t\t\t\t\tdata = (\r\n\t\t\t\t\t\t<div style={{ margin: \"15px\" }} >\r\n\t\t\t\t\t\t\tJe hebt je nog niet ingeschreven.\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this.props.subjects == null || this.props.groups == null || this.props.enrolledGroups === []) {\r\n\t\t\t\tdata = <Progress />\r\n\t\t\t}\r\n\t\t\tdata = this.getGroupsPerSubject(this.state.sortMethod)\r\n\t\t\t\t.sort((a, b) => a.period - b.period)\r\n\t\t\t\t.filter((group) => {\r\n\t\t\t\t\tswitch (this.state.filterMethod) {\r\n\t\t\t\t\t\tcase \"period1\":\r\n\t\t\t\t\t\t\treturn group.period === 1;\r\n\t\t\t\t\t\tcase \"period2\":\r\n\t\t\t\t\t\t\treturn group.period === 2;\r\n\t\t\t\t\t\tcase \"period3\":\r\n\t\t\t\t\t\t\treturn group.period === 3;\r\n\t\t\t\t\t\tcase \"period4\":\r\n\t\t\t\t\t\t\treturn group.period === 4;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.map((group) => {\r\n\t\t\t\t\treturn <Group\r\n\t\t\t\t\t\tkey={group.id}\r\n\t\t\t\t\t\tgroupId={group.id}\r\n\t\t\t\t\t\tdisplay=\"card\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t});\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Page>\r\n\t\t\t\t<Paper\r\n\t\t\t\t\televation={2}\r\n\t\t\t\t\tstyle={{ position: \"relative\" }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Toolbar style={{ display: \"flex\" }}>\r\n\t\t\t\t\t\t<Typography variant=\"subheading\" color=\"textSecondary\" style={{ flex: \"2 1 auto\" }}>\r\n\t\t\t\t\t\t\tSchrijf je in voor modules\r\n          \t</Typography>\r\n\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\tlabel=\"filter\"\r\n\t\t\t\t\t\t\tvalue={this.state.filterMethod}\r\n\t\t\t\t\t\t\teditable\r\n\t\t\t\t\t\t\toptions={[\r\n\t\t\t\t\t\t\t\t{ label: \"Geen\", value: \"none\" },\r\n\t\t\t\t\t\t\t\t{ label: \"Blok 1\", value: \"period1\" },\r\n\t\t\t\t\t\t\t\t{ label: \"Blok 2\", value: \"period2\" },\r\n\t\t\t\t\t\t\t\t{ label: \"Blok 3\", value: \"period3\" },\r\n\t\t\t\t\t\t\t\t{ label: \"Blok 4\", value: \"period4\" }]}\r\n\t\t\t\t\t\t\tonChange={this.handleFilterChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</Paper>\r\n\t\t\t\t<div style={{ display: \"flex\" }} className=\"ColumnFlexDirectionOnMobile\">\r\n\t\t\t\t\t<Paper elevation={2}>\r\n\t\t\t\t\t\t<List component=\"nav\" style={{ flex: 1 }}>\r\n\t\t\t\t\t\t\t{this.getMenuItems()}\r\n\t\t\t\t\t\t</List>\r\n\t\t\t\t\t</Paper>\r\n\t\t\t\t\t<div style={{ padding: \"12px\" }}>\r\n\t\t\t\t\t\t{data}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<br />\r\n\t\t\t\t<br />\r\n\t\t\t\t<br />\r\n\t\t\t</Page >\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\trole: state.role,\r\n\t\tcurrentPeriod: state.currentPeriod,\r\n\t\tenrollableGroups: state.enrollableGroups,\r\n\t\tgroups: state.groups,\r\n\t\tsubjects: state.subjects,\r\n\t\tenrolledGroupsIds: state.users[state.userId].enrollmentIds,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tgetSubjects: () => dispatch(getSubjects()),\r\n\t\tgetGroups: () => dispatch(getGroups()),\r\n\t\tgetEnrolLments: () => dispatch(getEnrolLments()),\r\n\t};\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CourseSelect);\r\n\r\n\r\n","import React, { Component } from \"react\";\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport {\r\n\tPaper, Typography, Table, TableHead, TableCell,\r\n\tTableBody, TableRow, Tooltip, TableSortLabel, Toolbar, Button\r\n} from \"@material-ui/core\";\r\nimport queryString from \"query-string\";\r\nimport Excel from \"exceljs/dist/es5/exceljs.browser\";\r\n\r\nimport Page from \"./Page\";\r\nimport Progress from '../components/Progress';\r\nimport Field from '../components/Field';\r\nimport EnsureSecureLogin from \"../components/EnsureSecureLogin\";\r\nimport $ from \"jquery\";\r\n\r\nconst splitValues = {\r\n\tusers: \"role\",\r\n\tevaluations: \"groupId\",\r\n\tenrollments: \"period\",\r\n}\r\n\r\nclass DataPage extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\ttables: null,\r\n\t\t\ttableSortColumns: {},\r\n\t\t\ttableSortDirections: {},\r\n\t\t};\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tlet values = queryString.parse(nextProps.location.search);\r\n\t\treturn {\r\n\t\t\t...prevState,\r\n\t\t\t...{\r\n\t\t\t\tdata: values.data ? values.data : \"evaluations\",\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount = () => {\r\n\t\tthis.fetchData(this.state.data)\r\n\t\t\t.then(tables => this.setState({ tables: this.splitTable(tables, splitValues[this.state.data]) }));\r\n\t}\r\n\r\n\thandleFilterChange = value => {\r\n\t\tthis.props.history.push({\r\n\t\t\tsearch: \"data=\" + value,\r\n\t\t});\r\n\t\tthis.fetchData(value)\r\n\t\t\t.then(tables => this.setState({ tables: this.splitTable(tables, splitValues[this.state.data]), tableSortColumns: Array(tables.length) }));\r\n\t}\r\n\r\n\tsort = (tableIndex) => {\r\n\t\tlet table = this.state.tables[tableIndex];\r\n\t\tconst column = this.state.tableSortColumns[tableIndex];\r\n\t\tconst order = this.state.tableSortDirections[tableIndex];\r\n\r\n\t\ttable = [table[0]].concat(table.slice(1, table.length).sort((a, b) => {\r\n\t\t\t//Only sort the slice 1-table.length because the header has to stick\r\n\t\t\ta = a[column];\r\n\t\t\tb = b[column];\r\n\t\t\tconst cmp = (b == null) - (a == null) || +(a > b) || -(a < b);\r\n\t\t\treturn order === \"asc\" ? cmp : -cmp;\r\n\t\t}));\r\n\r\n\t\tthis.setState(prevState => ({\r\n\t\t\ttables: [\r\n\t\t\t\t...prevState.tables.slice(0, tableIndex),\r\n\t\t\t\ttable,\r\n\t\t\t\t...prevState.tables.slice(tableIndex + 1),\r\n\t\t\t]\r\n\t\t}))\r\n\t}\r\n\r\n\thandleSortChange = (tableIndex, columnIndex) => {\r\n\t\tthis.setState(prevState => ({ //update the correct elements of the arrays of the state\r\n\t\t\ttableSortColumns: {\r\n\t\t\t\t...prevState.tableSortColumns,\r\n\t\t\t\t[tableIndex]: columnIndex,\r\n\t\t\t},\r\n\t\t\ttableSortDirections: {\r\n\t\t\t\t...prevState.tableSortDirections,\r\n\t\t\t\t[tableIndex]: prevState.tableSortDirections[tableIndex] === 'desc' && prevState.tableSortColumns[tableIndex] === columnIndex ? \"asc\" : \"desc\",// if this columns was selected and ordering desc, change to asc else desc\r\n\t\t\t}\r\n\t\t}), () => this.sort(tableIndex)); // when setting state is done start sorting\r\n\t}\r\n\r\n\tsplitTable = (table, splitValue) => {\r\n\t\tlet splitIndex = table[0].findIndex(x => x === splitValue);\r\n\t\tif (splitIndex < 0) {\r\n\t\t\treturn [table];\r\n\t\t}\r\n\t\tlet tables = [[table[0], table[1]]]; // initialize the tables with one table that has a header and a row\r\n\t\tfor (let i = 2; i < table.length; i++) {\r\n\t\t\tlet tableIndex = tables.findIndex(halfSplitTable => halfSplitTable[1][splitIndex] === table[i][splitIndex]); // see in what table this row has to go\r\n\t\t\tif (tableIndex < 0) {\r\n\t\t\t\ttables.push([table[0]]); // add a new table with a new header if a new value is found\r\n\t\t\t\ttableIndex = tables.length - 1;\r\n\t\t\t}\r\n\t\t\ttables[tableIndex].push(table[i]); // add row to correct table\r\n\t\t}\r\n\t\treturn tables;\r\n\t}\r\n\r\n\tfetchData = (table) => {\r\n\t\treturn $.ajax({\r\n\t\t\turl: \"api/function/data\",\r\n\t\t\ttype: \"post\",\r\n\t\t\tdata: {\r\n\t\t\t\ttable,\r\n\t\t\t\tsecureLogin: this.props.secureLogin,\r\n\t\t\t},\r\n\t\t\tdataType: \"json\",\r\n\t\t});\r\n\t}\r\n\r\n\tdownloadTables = () => {\r\n\t\tconst tables = this.state.tables;\r\n\t\tlet workbook = new Excel.Workbook();\r\n\t\tconst splitIndex = tables[0][0].findIndex(x => x === splitValues[this.state.data]);\r\n\t\tfor (let i = 0; i < tables.length; i++) { // add all the tables to a different sheet\r\n\t\t\tlet sheet = workbook.addWorksheet(tables[i][1][splitIndex]); // the sheet has the name of the value it's split on. I.e when splitting on courses every page is called what course it contains\r\n\t\t\tsheet.addRows(tables[i]);\r\n\t\t\tfor (let j = 1; j <= tables[i][0].length; j++) {\r\n\t\t\t\tsheet.getColumn(j).width = tables[i][0][j - 1].length < 10 ? 10 : tables[i][0][j - 1].length + 2;//set each column to at least fit the header\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst filenamePrefixes = { users: \"Gebruikers \", enrollments: \"Inschrijvingen \", evaluations: \"Beoordelingen \" };\r\n\t\tlet filename = filenamePrefixes[this.state.data] + (new Date()).toLocaleDateString() + \".xlsx\";\r\n\t\tthis.downloadWorkbook(workbook, filename);//gives for example: \"Gebruikers 3/3/2019.xlsx\"\r\n\t}\r\n\r\n\tdownloadWorkbook = (workbook, fileName) => { //magic\r\n\t\tworkbook.xlsx.writeBuffer({\r\n\t\t\tbase64: true\r\n\t\t})\r\n\t\t\t.then(function (xls64) {\r\n\t\t\t\tvar a = document.createElement(\"a\");\r\n\t\t\t\tvar data = new Blob([xls64], { type: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" });\r\n\t\t\t\tvar url = URL.createObjectURL(data);\r\n\t\t\t\ta.href = url;\r\n\t\t\t\ta.download = fileName;\r\n\t\t\t\tdocument.body.appendChild(a);\r\n\t\t\t\ta.click();\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\tdocument.body.removeChild(a);\r\n\t\t\t\t\twindow.URL.revokeObjectURL(url);\r\n\t\t\t\t}, 0);\r\n\t\t\t})\r\n\t\t\t.catch(function (error) {\r\n\t\t\t\tconsole.log(\"Something went wrong with downloading the excel file: \" + error.message);\r\n\t\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet content;\r\n\t\tif (this.state.tables == null) {\r\n\t\t\tcontent = <Progress />;\r\n\t\t} else {\r\n\t\t\tcontent = (this.state.tables).map((table, tableIndex) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Table key={tableIndex} style={tableIndex === 0 ? { marginTop: \"100px\" } : { marginTop: \"50px\" }}>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow key={0} style={{ height: \"auto\" }}>\r\n\t\t\t\t\t\t\t\t{table[0].map((title, columnIndex) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<TableCell key={columnIndex} style={{\r\n\t\t\t\t\t\t\t\t\t\t\tcolor: \"black\",\r\n\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: \"#e0e0e0\",\r\n\t\t\t\t\t\t\t\t\t\t\tfontSize: 13,\r\n\t\t\t\t\t\t\t\t\t\t\ttop: 0\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip title=\"Sorteer\" enterDelay={300} placement=\"bottom-start\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableSortLabel active={this.state.tableSortColumns[tableIndex] === columnIndex}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdirection={this.state.tableSortDirections[tableIndex]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={event => this.handleSortChange(tableIndex, columnIndex)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ zIndex: 0 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{title}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableSortLabel>\r\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttable.filter((_, index) => { return (index > 0); }) //take everything but the header\r\n\t\t\t\t\t\t\t\t\t.map((row, rowIndex) => {\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow key={rowIndex + 1} style={{ height: \"auto\" }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{row.map((cell, columnIndex) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell key={columnIndex} >{cell}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</ TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t)\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Page >\r\n\t\t\t\t<EnsureSecureLogin>\r\n\t\t\t\t\t<Paper elevation={2} style={{ position: \"absolute\", width: \"80%\", zIndex: 1 }}>\r\n\t\t\t\t\t\t<Toolbar style={{ display: \"flex\" }}>\r\n\t\t\t\t\t\t\t<Typography variant=\"subheading\" color=\"textSecondary\" style={{ flex: \"2 1 auto\" }}>\r\n\t\t\t\t\t\t\t\tGegevens\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={this.downloadTables} style={{ margin: \"0 10px\" }}>\r\n\t\t\t\t\t\t\t\tDownload\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\tlabel=\"Gegevens van\"\r\n\t\t\t\t\t\t\t\tvalue={this.state.data}\r\n\t\t\t\t\t\t\t\teditable\r\n\t\t\t\t\t\t\t\toptions={[\r\n\t\t\t\t\t\t\t\t\t{ label: \"Beoordelingen\", value: \"evaluations\" },\r\n\t\t\t\t\t\t\t\t\t{ label: \"Gebruikers\", value: \"users\" },\r\n\t\t\t\t\t\t\t\t\t{ label: \"Inschrijvingen\", value: \"enrollments\" }]}\r\n\t\t\t\t\t\t\t\tonChange={this.handleFilterChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t</Paper>\r\n\t\t\t\t\t{content}\r\n\t\t\t\t</EnsureSecureLogin>\r\n\t\t\t</Page>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tsecureLogin: state.secureLogin,\r\n\t}\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, null)(DataPage));","import React, { Component } from 'react';\r\nimport Page from './Page';\r\nimport Progress from '../components/Progress';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Field from '../components/Field';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport $ from \"jquery\";\r\nimport queryString from \"query-string\";\r\n\r\nclass Taxi extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tschedules: null,\r\n\t\t};\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tlet values = queryString.parse(nextProps.location.search);\r\n\t\treturn {\r\n\t\t\t...prevState,\r\n\t\t\t...{\r\n\t\t\t\tweek: values.week ? values.week : \"0\",\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\thandleFilterChange = value => {\r\n\t\tthis.props.history.push({\r\n\t\t\tsearch: \"week=\" + value,\r\n\t\t});\r\n\t\tthis.fetchSchedules(value);\r\n\t};\r\n\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.fetchSchedules(this.state.week);\r\n\t}\r\n\r\n\tfetchSchedules(week) {\r\n\t\treturn $.ajax({\r\n\t\t\turl: \"api/function/taxi\",\r\n\t\t\ttype: \"post\",\r\n\t\t\tdata: {\r\n\t\t\t\tweek,\r\n\t\t\t},\r\n\t\t\tdataType: \"json\",\r\n\t\t}).then(schedules => this.setState({\r\n\t\t\tschedules,\r\n\t\t}));\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet content;\r\n\t\tif (this.state.schedules == null) {\r\n\t\t\tcontent = <Progress />\r\n\t\t} else {\r\n\t\t\tcontent = this.state.schedules.map((s, i) =>\r\n\t\t\t\t<div\r\n\t\t\t\t\tstyle={{ width: \"80%\", margin: \"auto\" }}\r\n\t\t\t\t\tclassName=\"taxiScheduleHolder\"\r\n\t\t\t\t\tkey={i}\r\n\t\t\t\t\tdangerouslySetInnerHTML={{ __html: s }}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Page>\r\n\t\t\t\t<Paper\r\n\t\t\t\t\televation={2}\r\n\t\t\t\t\tstyle={{ position: \"relative\" }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Toolbar style={{ display: \"flex\" }}>\r\n\t\t\t\t\t\t<Typography variant=\"subheading\" color=\"textSecondary\" style={{ flex: \"2 1 auto\" }}>\r\n\t\t\t\t\t\t\tTaxischema\r\n          </Typography>\r\n\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\tlabel=\"week\"\r\n\t\t\t\t\t\t\tvalue={this.state.week}\r\n\t\t\t\t\t\t\teditable\r\n\t\t\t\t\t\t\toptions={[0, 1, 2, 3, 4, 5, 6, 7, 8].map(n => { return { label: n === 0 ? \"Basisrooster\" : \"Week \" + n, value: n + \"\" } })}\r\n\t\t\t\t\t\t\tonChange={this.handleFilterChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</Paper>\r\n\t\t\t\t{content}\r\n\t\t\t</Page>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Taxi;\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport { connect } from 'react-redux';\r\nimport { toggleMenu } from '../store/actions';\r\nimport { withRouter } from 'react-router-dom';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport List from '@material-ui/core/List';\r\n\r\n\r\nclass Header extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = { anchorEl: null };\r\n\t}\r\n\r\n\tlogoClick = () => {\r\n\t\tthis.props.history.push(\"/\");\r\n\t}\r\n\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<AppBar className=\"Header\">\r\n\t\t\t\t<Toolbar>\r\n\t\t\t\t\t<IconButton color=\"inherit\" aria-label=\"Menu\" onClick={this.props.toggleMenu} style={{position:\"absolute\"}} >\r\n\t\t\t\t\t\t<MenuIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<img src=\"/images/logo_qhighschool.svg\" alt=\"QHighschool Logo\" style={{height:\"60%\",margin:\"auto\",maxHeight:\"52px\", cursor:\"pointer\" }} onClick={this.logoClick} />\r\n\t\t\t\t\t<List color=\"inherit\" style={{ top:15,right: 20, position: \"absolute\"}} onClick={this.handleClick}>\r\n\t\t\t\t\t\t<PersonIcon style={{transform:\"scale(1.5)\",marginRight:\"10px\",float:\"left\"}}/>\r\n\t\t\t\t\t\t<span className=\"HiddenOnMobile\">\r\n\t\t\t\t\t\t\t{this.props.displayName}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</Toolbar>\r\n\t\t\t</AppBar>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tif (state.userId != null) {\r\n\t\treturn {\r\n\t\t\tdisplayName: state.users[state.userId].displayName,\r\n\t\t\tuserId: state.userId,\r\n\t\t};\r\n\t}\r\n\treturn {\r\n\t\tdisplayName: \"\",\r\n\t\tuserId: state.userId,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\ttoggleMenu: () => dispatch(toggleMenu()),\r\n\t};\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Header));\r\n\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport {IconButton, Snackbar, SnackbarContent} from '@material-ui/core/';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport theme from '../lib/MuiTheme'\r\nimport { removeNotification } from '../store/actions';\r\n\r\nclass NotificationBar extends Component {\r\n\r\n\r\n\tremoveNotification = (key) => {\r\n\t\tthis.props.removeNotification(this.props.notifications[key]);\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet notifications = this.props.notifications.map((not,key) => {\r\n\t\t\tlet color;\r\n\t\t\tswitch (not.priority) {\r\n\t\t\t\tcase \"high\":\r\n\t\t\t\t\tcolor = theme.palette.error.main;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"medium\":\r\n\t\t\t\t\tcolor = \"#ff8c00\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"light\":\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tcolor = theme.palette.primary.main;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<Snackbar\r\n\t\t\t\tkey={key}\r\n\t\t\t\tanchorOrigin={{\r\n\t\t\t\t  vertical: \"bottom\",\r\n\t\t\t\t  horizontal: \"right\"\r\n\t\t\t\t}}\r\n\t\t\t\topen={true}\r\n\t\t\t\tstyle = {{position:\"relative\"}}\r\n\t\t\t\tTransitionProps={{direction:\"left\"}}\r\n\t\t\t  >\r\n\t\t\t  <SnackbarContent\r\n\t\t\t  \tstyle={{background:color, marginBottom:\"4px\"}}\r\n\t\t\t\t\tmessage={<span id=\"message-id\">{not.message}</span>}\r\n\t\t\t\t\taction={[\r\n\t\t\t\t  <IconButton key=\"close\"\r\n\t\t\t\t\t\tonClick={() => {this.removeNotification(key)}} >\r\n\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t  </IconButton>\r\n\t\t\t\t]} />\r\n\t\t\t  </Snackbar>\t\t\r\n\t\t\t);\r\n\t\t});\r\n\t\treturn (\r\n\t\t\t<div style={{position:\"fixed\", bottom:0, right:0, width:\"auto\", zIndex:10}}>\r\n\t\t\t\t{notifications}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state,ownProps) {\r\n\tlet notifications = state.notifications.filter((not) => {\r\n\t\ttry {\r\n\t\t\treturn not.type === \"bar\" && new RegExp(not.scope).test(ownProps.location.pathname);\r\n\t\t} catch (err) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t});\r\n\treturn {\r\n\t\tnotifications: notifications,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tremoveNotification: (notification) => dispatch(removeNotification(notification)),\r\n\t};\r\n}\r\n\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(NotificationBar));","import React, { Component } from 'react';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport AssessmentIcon from '@material-ui/icons/Assessment';\r\nimport AssignmentIcon from '@material-ui/icons/Assignment';\r\nimport GroupIcon from '@material-ui/icons/Group';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport ExitIcon from '@material-ui/icons/ExitToApp';\r\nimport LocalTaxiIcon from '@material-ui/icons/LocalTaxi';\r\nimport BuildIcon from '@material-ui/icons/Build';\r\nimport ViewColumnIcon from '@material-ui/icons/ViewColumn';\r\nimport NotificationBadge from './NotificationBadge';\r\n\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport theme from '../lib/MuiTheme';\r\nimport $ from \"jquery\";\r\n\r\nclass Menu extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\t\tswitch (this.props.role) {\r\n\t\t\tcase \"student\":\r\n\t\t\t\tthis.state.pages = [\"aanbod\", \"portfolio\", \"profiel\", \"loguit\"];\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"teacher\":\r\n\t\t\t\tthis.state.pages = [\"groepen\", \"profiel\", \"loguit\"];\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"admin\":\r\n\t\t\t\tthis.state.pages = [\"groepen\", \"aanbod\", \"profiel\", \"gegevens\", \"taxi\", \"beheer\", \"loguit\"];\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"grade_admin\":\r\n\t\t\t\tthis.state.pages = [\"aanbod\", \"gegevens\", \"profiel\", \"loguit\"];\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthis.state.pages = [\"aanbod\", \"profiel\", \"loguit\"];\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tlogout() {\r\n\t\treturn $.ajax({\r\n\t\t\turl: \"/auth/logout\",\r\n\t\t\ttype: \"get\",\r\n\t\t\tdataType: \"json\",\r\n\t\t}).then(() => {\r\n\t\t\tdocument.location.reload();\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(page) {\r\n\t\tif (page === \"profiel\")\r\n\t\t\tthis.props.history.push(\"/gebruiker/\" + this.props.userId);\r\n\t\telse if (page === \"loguit\") {\r\n\t\t\tthis.logout();\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis.props.history.push(\"/\" + page);\r\n\t}\r\n\r\n\r\n\tgetIcon(iconName, color) {\r\n\t\tlet c = \"black\";\r\n\t\tif (theme.palette[color]) {\r\n\t\t\tc = theme.palette[color].main;\r\n\t\t}\r\n\t\tswitch (iconName) {\r\n\t\t\tcase \"Assignment\":\r\n\t\t\t\treturn <AssignmentIcon style={{ color: c }} />;\r\n\t\t\tcase \"Group\":\r\n\t\t\t\treturn <GroupIcon style={{ color: c }} />;\r\n\t\t\tcase \"Assessment\":\r\n\t\t\t\treturn <AssessmentIcon style={{ color: c }} />;\r\n\t\t\tcase \"Person\":\r\n\t\t\t\treturn <PersonIcon style={{ color: c }} />;\r\n\t\t\tcase \"ViewColumn\":\r\n\t\t\t\treturn <ViewColumnIcon style={{ color: c }} />;\r\n\t\t\tcase \"Exit\":\r\n\t\t\t\treturn <ExitIcon style={{ color: \"red\" }} />;\r\n\t\t\tcase \"Taxi\":\r\n\t\t\t\treturn <LocalTaxiIcon style={{ color: c }} />;\r\n\t\t\tcase \"Beheer\":\r\n\t\t\t\treturn <BuildIcon style={{ color: c }} />;\r\n\t\t\tdefault:\r\n\t\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\tgetItem(page, index) {\r\n\t\tconst isCurrentPage = (((\"/\" + page.id) === this.props.location.pathname));\r\n\t\tlet style = {};\r\n\t\tif (page.bottom) {\r\n\t\t\tstyle.position = \"absolute\";\r\n\t\t\tstyle.bottom = \"0px\";\r\n\t\t}\r\n\r\n\t\tconst color = isCurrentPage ? \"primary\" : \"inherit\";\r\n\t\tconst icon = (\r\n\t\t\t<ListItemIcon >\r\n\t\t\t\t<NotificationBadge scope={page.id}>\r\n\t\t\t\t\t{this.getIcon(page.icon, color)}\r\n\t\t\t\t</NotificationBadge>\r\n\t\t\t</ListItemIcon>\r\n\t\t);\r\n\t\treturn (\r\n\t\t\t<ListItem key={index} button onClick={() => this.onClick(page.id)} style={style}>\r\n\t\t\t\t{icon}\r\n\t\t\t\t<Typography variant=\"title\" color={color} className=\"HiddenOnMobile\">\r\n\t\t\t\t\t{page.title}\r\n\t\t\t\t</Typography>\r\n\t\t\t</ListItem>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst pages = [\r\n\t\t\t{\r\n\t\t\t\tid: \"aanbod\",\r\n\t\t\t\ttitle: \"Aanbod\",\r\n\t\t\t\ticon: \"Assignment\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: \"groepen\",\r\n\t\t\t\ttitle: \"Mijn groepen\",\r\n\t\t\t\ticon: \"Group\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: \"portfolio\",\r\n\t\t\t\ttitle: \"Portfolio\",\r\n\t\t\t\ticon: \"Assessment\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: \"gegevens\",\r\n\t\t\t\ttitle: \"Gegevens\",\r\n\t\t\t\ticon: \"ViewColumn\", // table_chart is more appropriate\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: \"taxi\",\r\n\t\t\t\ttitle: \"Taxi\",\r\n\t\t\t\ticon: \"Taxi\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: \"beheer\",\r\n\t\t\t\ttitle: \"Beheer\",\r\n\t\t\t\ticon: \"Beheer\",\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\tconst profile = [\r\n\t\t\t{\r\n\t\t\t\tid: \"profiel\",\r\n\t\t\t\ttitle: \"Profiel\",\r\n\t\t\t\ticon: \"Person\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: \"loguit\",\r\n\t\t\t\ttitle: \"Log uit\",\r\n\t\t\t\ticon: \"Exit\",\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\tconst visiblePages = pages\r\n\t\t\t.filter(page => this.state.pages.indexOf(page.id) !== -1)\r\n\t\t\t.map(this.getItem.bind(this));\r\n\r\n\t\tconst visibleProfile = profile\r\n\t\t\t.filter(page => this.state.pages.indexOf(page.id) !== -1)\r\n\t\t\t.map(this.getItem.bind(this));\r\n\r\n\t\treturn (\r\n\t\t\t<Paper elevation={8} className=\"Menu\">\r\n\t\t\t\t<List component=\"nav\" style={{ height: \"100%\" }}>\r\n\t\t\t\t\t{visiblePages}\r\n\t\t\t\t\t<div style={{ position: \"absolute\", bottom: \"20px\", width: \"100%\" }}>\r\n\t\t\t\t\t\t{visibleProfile}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</List>\r\n\t\t\t</Paper >\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tif (state.userId != null) {\r\n\t\treturn {\r\n\t\t\tdisplayName: state.users[state.userId].displayName,\r\n\t\t\tuserId: state.userId,\r\n\t\t\trole: state.role\r\n\t\t};\r\n\r\n\t}\r\n\treturn {\r\n\t\tdisplayName: \"\",\r\n\t\tuserId: state.userId,\r\n\t\trole: state.role\r\n\t};\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, null)(Menu));\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport map from 'lodash/map';\r\nimport forEach from 'lodash/forEach';\r\n\r\nimport Page from './Page';\r\nimport Progress from '../components/Progress';\r\nimport Field from '../components/Field';\r\nimport Group from './group/Group';\r\nimport { getSubjects, getGroups, getEnrolLments, getParticipatingGroups } from '../store/actions';\r\n\r\nimport { Typography, Divider, Toolbar, Paper } from '@material-ui/core';\r\nimport queryString from \"query-string\";\r\n\r\nclass Portfolio extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tlet values = queryString.parse(nextProps.location.search);\r\n\t\tif (values.filter) {\r\n\t\t\treturn {\r\n\t\t\t\t...prevState,\r\n\t\t\t\tfilter: values.filter\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\t...prevState,\r\n\t\t\t\tfilter: nextProps.role === \"student\" ? \"all\" : \"period\" + nextProps.currentPeriod,\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\thandleFilterChange = value => {\r\n\t\tthis.props.history.push({\r\n\t\t\tsearch: \"filter=\" + value,\r\n\t\t});\r\n\t};\r\n\r\n\torderGroups(groups, compareFunction) {\r\n\t\tlet orders = {};\r\n\t\tforEach(groups, group => {\r\n\t\t\tif (!orders[compareFunction(group)]) {\r\n\t\t\t\torders[compareFunction(group)] = [];\r\n\t\t\t}\r\n\t\t\torders[compareFunction(group)].push(group);\r\n\t\t});\r\n\t\treturn map(orders, this.getOrder);\r\n\t}\r\n\r\n\tgetOrder(groups, name) {\r\n\t\tgroups = map(groups, group =>\r\n\t\t\t<Group key={group.id}\r\n\t\t\t\tgroupId={group.id}\r\n\t\t\t\tdisplay=\"card\" />\r\n\t\t);\r\n\r\n\t\treturn <div key={name} style={{ padding: \"10px\" }}>\r\n\t\t\t<Field value={name} style={{ type: \"headline\", color: \"secondary\" }} layout={{ area: true }} />\r\n\t\t\t{groups}\r\n\t\t\t<Divider style={{ marginTop: \"20px\" }} />\r\n\t\t</div>\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet options = [{ label: \"Alle\", value: \"all\" }, { label: \"Blok 1\", value: \"period1\" }, { label: \"Blok 2\", value: \"period2\" }, { label: \"Blok 3\", value: \"period3\" }, { label: \"Blok 4\", value: \"period4\" }];\r\n\t\tif (this.props.role === \"student\") {\r\n\t\t\toptions.splice(1, 0, { label: \"Ingeschreven\", value: \"enrolled\" });\r\n\t\t}\r\n\r\n\t\tif (!this.props.groups) {\r\n\t\t\tthis.props.getParticipatingGroups();\r\n\t\t}\r\n\t\tif (!this.props.enrollmentIds) {\r\n\t\t\tthis.props.getEnrolLments();\r\n\t\t}\r\n\t\tlet groupIds = this.props.enrollmentIds || [];\r\n\t\tif (this.state.filter !== \"enrolled\") {\r\n\t\t\t/* If filter is not equal to enrolled, participating ids need to be added. \r\n\t\t\tFrom participating ids we first remove the ones that are already in enrolled ids. \r\n\t\t\tFinally, after adding participating ids, we filter on period */\r\n\t\t\tgroupIds = this.props.participatingGroupIds.filter(id => {\r\n\t\t\t\treturn (groupIds.indexOf(id) === -1);\r\n\t\t\t}).concat(groupIds).filter(\r\n\t\t\t\tid => {\r\n\t\t\t\t\tif (!this.props.groups || !this.props.groups[id]) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tswitch (this.state.filter) {\r\n\t\t\t\t\t\tcase \"period1\":\r\n\t\t\t\t\t\t\treturn this.props.groups[id].period === 1;\r\n\t\t\t\t\t\tcase \"period2\":\r\n\t\t\t\t\t\t\treturn this.props.groups[id].period === 2;\r\n\t\t\t\t\t\tcase \"period3\":\r\n\t\t\t\t\t\t\treturn this.props.groups[id].period === 3;\r\n\t\t\t\t\t\tcase \"period4\":\r\n\t\t\t\t\t\t\treturn this.props.groups[id].period === 4;\r\n\t\t\t\t\t\tdefault: // case all \r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tlet content;\r\n\t\tif (!this.props.groups || groupIds.filter(id => this.props.groups[id] == null).length !== 0) {\r\n\t\t\tcontent = <Progress />;\r\n\t\t} else {\r\n\t\t\tcontent = this.orderGroups(groupIds.map(id => this.props.groups[id]), function (group) {\r\n\t\t\t\treturn group.subjectName;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn <Page>\r\n\t\t\t<Paper\r\n\t\t\t\televation={2}\r\n\t\t\t\tstyle={{ position: \"relative\" }}\r\n\t\t\t>\r\n\t\t\t\t<Toolbar style={{ display: \"flex\" }}>\r\n\t\t\t\t\t<Typography variant=\"subheading\" color=\"textSecondary\" style={{ flex: \"2 1 auto\" }}>\r\n\t\t\t\t\t\t{this.props.role === \"student\" ? \"Portfolio\" : \"Mijn groepen\"}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tlabel=\"filter\"\r\n\t\t\t\t\t\tvalue={this.state.filter}\r\n\t\t\t\t\t\teditable\r\n\t\t\t\t\t\toptions={options}\r\n\t\t\t\t\t\tonChange={this.handleFilterChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Toolbar>\r\n\t\t\t</Paper>\r\n\t\t\t{content}\r\n\t\t</Page>;\r\n\t}\r\n\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tgroups: state.groups,\r\n\t\tparticipatingGroupIds: state.users[state.userId].participatingGroupIds,\r\n\t\tenrollmentIds: state.users[state.userId].enrollmentIds,\r\n\t\trole: state.role,\r\n\t\tcurrentPeriod: state.currentPeriod,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tgetSubjects: () => dispatch(getSubjects()),\r\n\t\tgetGroups: () => dispatch(getGroups()),\r\n\t\tgetEnrolLments: () => dispatch(getEnrolLments()),\r\n\t\tgetParticipatingGroups: () => dispatch(getParticipatingGroups()),\r\n\t};\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Portfolio);\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport MenuList from '@material-ui/core/MenuList';\r\nimport Popper from '@material-ui/core/Popper';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { connect } from 'react-redux';\r\nimport filter from \"lodash/filter\";\r\nimport { ClickAwayListener } from '@material-ui/core';\r\n\r\nimport Field from '../components/Field';\r\nimport { getAllUsers } from '../store/actions';\r\n\r\nclass Menu extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tinput: \"\",\r\n\t\t\tuserId: null,\r\n\t\t\topen: false,\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.getAllUsers();\r\n\t}\r\n\r\n\tselectUser = (userId, displayName) => {\r\n\t\tthis.setState({\r\n\t\t\tinput: displayName,\r\n\t\t\topen: false,\r\n\t\t\tuserId: userId,\r\n\t\t});\r\n\t\tthis.props.onChange(userId, displayName);\r\n\t}\r\n\r\n\tgetFittingUsers = () => {\r\n\t\tconst regExp = new RegExp(this.state.input.toLowerCase());\r\n\t\tlet count = 0;\r\n\t\treturn filter(this.props.users, (user) => {\r\n\t\t\tconst v = regExp.test(user.displayName.toLowerCase())\r\n\t\t\tif (v) {\r\n\t\t\t\tcount++;\r\n\t\t\t}\r\n\t\t\treturn v && count < 6;\r\n\t\t}).map(user => {\r\n\t\t\treturn (\r\n\t\t\t\t<MenuItem key={user.id + user.displayName} onClick={() => this.selectUser(user.id, user.displayName)}>\r\n\t\t\t\t\t{user.displayName}\r\n\t\t\t\t</MenuItem>\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\thandleInput = (event) => {\r\n\t\tif (this.state.userId) {\r\n\t\t\tthis.props.onChange(null, null);\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tinput: event.target.value,\r\n\t\t\topen: true,\r\n\t\t\tuserId: null,\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ClickAwayListener onClickAway={() => this.setState({ open: false })}>\r\n\t\t\t\t<span>\r\n\t\t\t\t\t<Field label=\"Gebruiker\" value={this.state.input} editable onChange={this.handleInput} style={{ margin: \"normal\" }} />\r\n\t\t\t\t\t<Popper open={this.state.aliasId == null && this.state.open} anchorEl={this.anchorEl} disablePortal >\r\n\t\t\t\t\t\t<Paper style={{position:\"relative\", zIndex:\"1\"}}>\r\n\t\t\t\t\t\t\t<MenuList>\r\n\t\t\t\t\t\t\t\t{this.getFittingUsers()}\r\n\t\t\t\t\t\t\t</MenuList>\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</Popper>\r\n\t\t\t\t</span>\r\n\t\t\t</ClickAwayListener>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tusers: state.users,\r\n\t}\r\n}\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tgetAllUsers: () => dispatch(getAllUsers()),\r\n\t};\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Menu);\r\n\r\n","import React, { Component } from 'react';\r\nimport EnsureSecureLogin from '../components/EnsureSecureLogin';\r\nimport Page from './Page';\r\nimport map from 'lodash/map';\r\nimport $ from \"jquery\";\r\n\r\nimport { connect } from 'react-redux';\r\nimport queryString from \"query-string\";\r\nimport SelectUser from '../components/SelectUser';\r\nimport { Divider, Toolbar, Button, Paper, Typography } from '@material-ui/core';\r\nimport Field from '../components/Field';\r\nimport { getSubjects, setAlias, addNotification, addSubject, addCourse, addGroup } from '../store/actions';\r\n\r\nconst initialValues = {\r\n\tsubject: {\r\n\t\tname: \"\",\r\n\t\tdescription: \"\",\r\n\t},\r\n\tcourse: {\r\n\t\tname: \"\",\r\n\t\tsubjectId: null,\r\n\t},\r\n\tgroup: {\r\n\t\tcourseId: null,\r\n\t\tteacherId: null,\r\n\t}\r\n}\r\n\r\nclass ControlPanel extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tcourses: [],\r\n\t\t\taliasId: null,\r\n\t\t\tsubject: initialValues.subject,\r\n\t\t\tcourse: initialValues.course,\r\n\t\t\tgroup: initialValues.group,\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tlet values = queryString.parse(nextProps.location.search);\r\n\t\treturn {\r\n\t\t\t...prevState,\r\n\t\t\t...{\r\n\t\t\t\taddType: values.addType ? values.addType : \"subject\",\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\t$.ajax({\r\n\t\t\turl: \"api/course/list\",\r\n\t\t\ttype: \"get\",\r\n\t\t\tdata: {},\r\n\t\t\tdataType: \"json\",\r\n\t\t}).then((courses) => {\r\n\t\t\tconsole.log(courses);\r\n\t\t\tthis.setState({\r\n\t\t\t\tcourses\r\n\t\t\t});\r\n\t\t});\r\n\t\tthis.props.getSubjects();\r\n\t}\r\n\r\n\tloginUsingAlias = () => {\r\n\t\tthis.props.dispatch(setAlias(this.state.aliasId));\r\n\t}\r\n\r\n\thandleAliasChange = (userId) => {\r\n\t\tthis.setState({\r\n\t\t\taliasId: userId,\r\n\t\t});\r\n\t}\r\n\r\n\tnotification = (typeObjectAdded, success) => {\r\n\t\tlet typeNames = { \"subject\": \"Vak\", \"course\": \"Module\", \"group\": \"Groep\" };\r\n\t\ttypeObjectAdded = typeNames[typeObjectAdded];\r\n\t\tif (success) {\r\n\t\t\tconsole.log(typeObjectAdded + \" added!\");\r\n\t\t} else {\r\n\t\t\tconsole.log(typeObjectAdded + \" not added :(\");\r\n\t\t}\r\n\t\t// if ( success ) {\r\n\t\t// \tthis.props.addNotification(\r\n\t\t// \t\t{\r\n\t\t// \t\t\tpriority:\"low\",\r\n\t\t// \t\t\ttype:\"bar\",\r\n\t\t// \t\t\tmessage:typeObjectAdded + \"succesvol toegevoegd!\",\r\n\t\t// \t\t\tscope: \"beheer\",\r\n\t\t// \t\t}\r\n\t\t// \t)\r\n\t\t// } else {\r\n\t\t// \tthis.props.addNotification(\r\n\t\t// \t\t{\r\n\t\t// \t\t\tpriority:\"medium\",\r\n\t\t// \t\t\ttype:\"bar\",\r\n\t\t// \t\t\tmessage:\"Er is iets misgegaan. \" + typeObjectAdded + \" is niet toegevoegd.\",\r\n\t\t// \t\t\tscope:\"beheer\",\r\n\t\t// \t\t}\r\n\t\t// \t)\r\n\t\t// }\r\n\t}\r\n\r\n\tadd(type) {\r\n\t\tconst typeValues = this.state[type];\r\n\t\tlet addFunction;\r\n\t\tswitch (type) {\r\n\t\t\tcase \"subject\": addFunction = async () => {\r\n\t\t\t\treturn this.props.addSubject(typeValues.name, typeValues.description).then(success => { return success.success })\r\n\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"course\": addFunction = async () => {\r\n\t\t\t\treturn this.props.addCourse(typeValues.name, typeValues.subjectId).then(success => { return success.success })\r\n\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: addFunction = async () => {\r\n\t\t\t\treturn this.props.addGroup(typeValues.courseId, typeValues.teacherId).then(success => { return success.success })\r\n\t\t\t}; // group\r\n\t\t}\r\n\t\taddFunction().then(success => {\r\n\t\t\tif (success) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\t[type]: initialValues[type],\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tthis.notification(type, success);\r\n\t\t})\r\n\t}\r\n\r\n\thandleChange = (name, value, type) => {\r\n\t\tthis.setState(prevState => ({\r\n\t\t\t[type]: {\r\n\t\t\t\t...prevState[type],\r\n\t\t\t\t[name]: value,\r\n\t\t\t}\r\n\t\t}))\r\n\t}\r\n\r\n\thandleTypeChange = value => {\r\n\t\tthis.props.history.push({\r\n\t\t\tsearch: \"addType=\" + value,\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst subject = this.state.subject;\r\n\t\tconst course = this.state.course;\r\n\t\tconst group = this.state.group;\r\n\t\tconst addType = this.state.addType;\r\n\t\tconst subjects = this.props.subjects || {};\r\n\t\tlet courses = this.state.courses;\r\n\t\tlet addView;\r\n\t\tswitch (addType) {\r\n\t\t\tcase \"subject\":\r\n\t\t\t\taddView = <div>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tlabel=\"Naam\"\r\n\t\t\t\t\t\tvalue={subject.name}\r\n\t\t\t\t\t\tonChange={(val) => this.handleChange(\"name\", val, \"subject\")}\r\n\t\t\t\t\t\teditable={true}\r\n\t\t\t\t\t\tvalidate={{ maxLength: 50 }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tlabel=\"Omschrijving\"\r\n\t\t\t\t\t\tvalue={subject.description}\r\n\t\t\t\t\t\tonChange={(event) => this.handleChange(\"description\", event, \"subject\")}\r\n\t\t\t\t\t\teditable={true}\r\n\t\t\t\t\t\tvalidate={{ maxLength: 440 }}\r\n\t\t\t\t\t\tlayout={{ area: true }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"course\":\r\n\t\t\t\taddView = <div >\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tlabel=\"Naam\"\r\n\t\t\t\t\t\tvalue={course.name}\r\n\t\t\t\t\t\tonChange={(event) => this.handleChange(\"name\", event, \"course\")}\r\n\t\t\t\t\t\teditable={true}\r\n\t\t\t\t\t\tvalidate={{ maxLength: 50 }}\r\n\t\t\t\t\t\tstyle={{ flex: \"1\" }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tvalue={course.subjectId}\r\n\t\t\t\t\t\tsubjectId label=\"Vak\"\r\n\t\t\t\t\t\tonChange={(event) => { this.handleChange(\"subjectId\", event, \"course\") }}\r\n\t\t\t\t\t\teditable={true}\r\n\t\t\t\t\t\toptions={map(subjects, (subject) => { return { value: subject.id, label: subject.name } })}\r\n\t\t\t\t\t\tstyle={{ minWidth: \"200px\" }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: //group\r\n\t\t\t\taddView = <div>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tvalue={group.courseId}\r\n\t\t\t\t\t\tlabel=\"Module\"\r\n\t\t\t\t\t\tonChange={(event) => this.handleChange(\"courseId\", event, \"group\")}\r\n\t\t\t\t\t\teditable={true}\r\n\t\t\t\t\t\toptions={courses.map((course) => { return { label: course.name, value: course.id } })}\r\n\t\t\t\t\t\tstyle={{ minWidth: \"200px\" }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<SelectUser\r\n\t\t\t\t\t\tvalue={group.teacherId}\r\n\t\t\t\t\t\tonChange={(userId) => this.handleChange(\"teacherId\", userId, \"group\")}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Page>\r\n\t\t\t\t<EnsureSecureLogin>\r\n\t\t\t\t\t<Paper\r\n\t\t\t\t\t\televation={2}\r\n\t\t\t\t\t\tstyle={{ position: \"relative\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Toolbar style={{ display: \"flex\" }}>\r\n\t\t\t\t\t\t\t<Typography variant=\"subheading\" color=\"textSecondary\" style={{ flex: \"2 1 auto\" }}>\r\n\t\t\t\t\t\t\t\tBeheer\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t</Paper>\r\n\t\t\t\t\t<div style={{ margin: \"10px 0\" }}>\r\n\t\t\t\t\t\t<SelectUser onChange={this.handleAliasChange} />\r\n\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" disabled={this.state.aliasId == null} onClick={this.loginUsingAlias}>Login in met alias</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Divider />\r\n\t\t\t\t\t<div >\r\n\t\t\t\t\t\t<Typography variant=\"title\" color=\"primary\" style={{ margin: \"18px 12px\", float: \"left\" }}>\r\n\t\t\t\t\t\t\tNieuw(e):\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Field value={addType} name=\"addType\" editable={true} onChange={this.handleTypeChange} options={[{ value: \"course\", label: \"Module\" }, { value: \"subject\", label: \"Vak\" }, { value: \"group\", label: \"Groep\" }]} style={{ minWidth: \"200px\", maxWidth: \"400px\", type: \"title\" }} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{addView}\r\n\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" style={{ height: \"37px\", margin: \"12px\" }} onClick={() => { this.add(addType) }}> Voeg toe\t</Button>\r\n\t\t\t\t</EnsureSecureLogin>\r\n\t\t\t</Page>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tsubjects: state.subjects,\r\n\t\tgroups: state.groups,\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\taddSubject: async (name, description) => dispatch(addSubject(name, description)),\r\n\t\taddCourse: async (name, subjectId) => dispatch(addCourse(name, subjectId)),\r\n\t\taddGroup: async (courseId, userId) => dispatch(addGroup(courseId, userId)),\r\n\t\taddNotification: (notification) => dispatch(addNotification(notification)),\r\n\t\tgetSubjects: () => dispatch(getSubjects()),\r\n\t\tdispatch: dispatch,\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ControlPanel);","import React, { Component } from \"react\";\r\nimport {\r\n\tRoute,\r\n\tSwitch,\r\n\tRedirect,\r\n\twithRouter,\r\n} from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { getSelf, addNotification } from './store/actions';\r\n\r\nimport Login from \"./pages/Login\";\r\nimport CourseSelect from \"./pages/CourseSelect\";\r\nimport Group from \"./pages/group/Group\";\r\nimport User from \"./pages/user/User\";\r\nimport DataPage from \"./pages/DataPage\";\r\nimport Taxi from \"./pages/Taxi\";\r\n\r\nimport Header from \"./components/Header\";\r\nimport NotificationBar from \"./components/NotificationBar\";\r\nimport Menu from \"./components/Menu\";\r\nimport Portfolio from \"./pages/Portfolio\";\r\nimport ControlPanel from \"./pages/ControlPanel\";\r\n\r\n\r\nclass App extends Component {\r\n\r\n\tcomponentWillMount() {\r\n\t\tthis.props.getSelf();\r\n\t}\r\n\r\n\thandleShowMenu() {\r\n\t\tlet showMenu = this.state.showMenu;\r\n\t\tthis.setState({\r\n\t\t\tshowMenu: !showMenu,\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (!this.props.userId && this.props.location.pathname !== \"/login\") {\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"App\">\r\n\t\t\t\t\t<Header />\r\n\t\t\t\t\t<NotificationBar />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t\tlet startPage = \"/groepen\";\r\n\t\tif ( this.props.role === \"student\" ) {\r\n\t\t\tstartPage =  \"/aanbod\";\r\n\t\t} else if ( this.props.role === \"grade_admin\" ){\r\n\t\t\tstartPage = \"/gegevens\";\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<NotificationBar />\r\n\t\t\t\t{this.props.showMenu && <Menu />}\r\n\t\t\t\t<Header />\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route path=\"/login\" component={Login} />\r\n\t\t\t\t\t<Route path=\"/aanbod\" component={CourseSelect} />\r\n\t\t\t\t\t<Route path=\"/groep/:groupId\" component={Group} />\r\n\t\t\t\t\t<Route path=\"/gebruiker/:userId\" component={User} />\r\n\t\t\t\t\t<Route path=\"/profiel/\" component={User} />\r\n\t\t\t\t\t<Route path=\"/portfolio/\" component={Portfolio} />\r\n\t\t\t\t\t<Route path=\"/groepen/\" component={Portfolio} />\r\n\t\t\t\t\t<Route path=\"/gegevens/\" component={DataPage} />\r\n\t\t\t\t\t<Route path=\"/taxi/\" component={Taxi} />\r\n\t\t\t\t\t<Route path=\"/beheer/\" component={ControlPanel} />\r\n\t\t\t\t\t<Redirect push to={this.props.role === \"student\" ? \"/aanbod\" : \"/groepen\"} />\r\n\t\t\t\t\t<Redirect push to={startPage} />\r\n\t\t\t\t</Switch>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tshowMenu: state.showMenu,\r\n\t\trole: state.role,\r\n\t\tuserId: state.userId,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tgetSelf: () => dispatch(getSelf()),\r\n\t\taddNotification: (notification) => dispatch(addNotification(notification)),\r\n\t};\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(App));\r\n","import React, { Component } from \"react\";\r\n\r\nimport { MuiThemeProvider } from '@material-ui/core/styles';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\n\r\nimport theme from './MuiTheme';\r\nimport App from '../App';\r\n\r\nclass GlobalProvider extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Provider store={this.props.store}>\r\n\t\t\t\t<MuiThemeProvider theme={theme}>\r\n\t\t\t\t\t<BrowserRouter>\r\n\t\t\t\t\t\t<App />\r\n\t\t\t\t\t</BrowserRouter>\r\n\t\t\t\t</MuiThemeProvider>\r\n\t\t\t</Provider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default GlobalProvider;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { createStore, applyMiddleware, compose as reduxCompose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport reducer from './store/mainReducer';\r\nimport GlobalProvider from './lib/GlobalProvider';\r\nimport \"./layout.css\";\r\nrequire('typeface-roboto');\r\n\r\nconst compose = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || reduxCompose;\r\nconst store = createStore(\r\n  reducer,\r\n  compose(\r\n    applyMiddleware(thunk),\r\n  ),\r\n);\r\n\r\nReactDOM.render(\r\n\t<GlobalProvider store={store} />,\r\n\tdocument.getElementById('root'));\r\n"],"sourceRoot":""}