{"version":3,"sources":["store/usersReducer.js","store/groupsReducer.js","store/mainReducer.js","lib/MuiTheme.js","components/Field.js","store/actions.js","pages/Login.js","pages/Page.js","components/Progress.js","pages/group/EnrollmentPopup.js","pages/group/ChooseButton.js","pages/user/UserRow.js","pages/user/UserPage.js","pages/user/UserCard.js","pages/user/User.js","components/EnsureSecureLogin.js","pages/group/Evaluation.js","pages/group/GroupCard.js","pages/group/PresenceTable.js","pages/group/Lesson.js","pages/user/UserList.js","components/PageLeaveWarning.js","pages/group/GroupData.js","components/NotificationBadge.js","pages/group/GroupPage.js","pages/group/Group.js","pages/CourseSelect.js","pages/DataPage.js","pages/Taxi.js","components/Header.js","components/NotificationBar.js","components/Menu.js","pages/Portfolio.js","components/SelectUser.js","pages/ControlPanel.js","App.js","lib/GlobalProvider.js","index.js"],"names":["DEFAULT_USERS","usersReducer","users","arguments","length","undefined","action","type","newUsers","x","Object","objectSpread","defineProperty","user","id","userId","enrollmentIds","concat","groupId","index","indexOf","toConsumableArray","slice","DEFAULT_GROUPS","groups","group","DEFAULT_STATE","enrollableGroups","currentPeriod","subjects","showMenu","notifications","hasFetched","mainReducer","state","role","secureLogin","notification","menuState","call","method","data","lessons","lessonId","userStatus","groupsReducer","theme","createMuiTheme","breakpoints","keys","values","xs","sm","md","lg","xl","direction","mixins","toolbar","minHeight","@media (min-width:0px) and (orientation: landscape)","@media (min-width:600px)","overrides","palette","common","black","white","primary","main","contrastText","light","dark","secondary","error","grey","50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700","contrastThreshold","tonalOffset","text","disabled","hint","divider","background","paper","default","active","hover","hoverOpacity","selected","disabledBackground","props","shadows","typography","fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","display4","fontWeight","letterSpacing","lineHeight","marginLeft","color","display3","display2","display1","headline","title","subheading","body2","body1","caption","button","textTransform","transitions","easing","easeInOut","easeOut","easeIn","sharp","duration","shortest","shorter","short","standard","complex","enteringScreen","leavingScreen","spacing","unit","zIndex","mobileStepper","appBar","drawer","modal","snackbar","tooltip","Field","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","event","onChange","name","menuItems","endAdornment","value","style","layout","label","multiline","fullWidth","options","disableUnderline","underline","margin","marginPx","classNames","alignment","float","textAlign","push","area","editable","labelVisible","a","filter","opt","map","option","react_default","createElement","MenuItem_default","key","InputAdornment_default","position","td","width","field","TextField_default","className","join","select","flex","bind","InputProps","inputProps","nextProps","prevState","validate","rules","test","isNaN","replace","min","parseFloat","max","notEmpty","maxLength","React","Component","apiErrorHandler","dispatch","e2","responseJSON","Math","random","priority","message","scope","fetchData","_x","_x2","_x3","_x4","_x5","_x6","_fetchData","apply","_callee","endpoint","getState","forceArray","f","i","o","regenerator_default","wrap","_context","prev","next","abrupt","Promise","reject","Error","$","ajax","url","dataType","then","list","Array","isArray","keyBy","catch","stop","getSubjects","getGroups","getSelf","addNotification","not","year","level","profile","preferedEmail","phoneNumber","addMissingInfoNotifications","removeNotification","window","location","pathname","setCookie","search","document","href","toggleMenu","getEnrolLments","enrollments","addSubject","description","addCourse","subjectId","addGroup","courseId","mainTeacherId","cname","cvalue","exhours","d","Date","setTime","getTime","expires","toUTCString","cookie","Login","generateEmail","interval","setInterval","school","schoolShort","studentNumber","floor","setState","clearInterval","Typography_default","variant","overflow","history","Paper_default","elevation","padding","gutterBottom","generateColoredEmail","Button_default","size","onClick","login","withRouter","connect","email","password","Page","children","Progress","isShowing","_this2","timeout","setTimeout","clearTimeout","CircularProgress_default","EnrollmentPopup","Dialog_default","open","keepMounted","DialogContent_default","DialogContentText_default","day","display","chosenDayGroupName","DialogActions_default","DialogTitle_default","courseName","handlePopup","Clear_default","_this3","_this4","remarks","preventPopupClose","page","getRemarkPage","getCancelPage","getDuplicatePage","getConfirmPage","hasChosen","hasChosenDay","ChooseButton","getEnrollableGroups","dialogOpen","preventClose","doEnroll","toggleEnrollment","dialog","group_EnrollmentPopup","loading","components_Progress","canChoose","period","ownProps","forEach","e","GroupCard","height","number","numberWithoutCharacters","substr","match","exec","onMouseEnter","onMouseLeave","component","justifyContent","index_es","firstName","lastName","formatPhoneNumber","profiles","levels","UserPage","target","JSON","stringify","shouldFillIn","ownProfile","pages_Page","components_Field","displayName","Divider_default","handleChange","hasChanged","save","setUser","CARD_STYLE","verticalAlign","cursor","User","notExists","user_UserPage","UserRow","UserCard","s","queryString","parse","setSecureLogin","params","EnsureSecureLogin","marginTop","EVALUATION_FORMATS","Evaluation","evaluation","student","assesment","EvaluationTab","onSortChange","sortValue","sortDirection","sortEvaluations","evaluations","sort","b","toLowerCase","cmp","newEvaluations","explanation","handleExplanationChange","alignItems","paddingRight","paddingLeft","evComps","user_User","Evaluation_Evaluation","handleEvaluationChange","getExplanationField","components_EnsureSecureLogin","backgroundColor","enterDelay","placement","handleEvaluationTypeChange","marginRight","marginBottom","bottom","borderBottomLeftRadius","borderBottomRightRadius","ev","getEvaluationColor","expand","group_ChooseButton","maxHeight","subjectName","enrollableFor","courseDescription","getBottomSection","PresenceTable","createRow","participantId","content","lesson","p","presence","createPresenceComponent","createLessonHeader","numberInBlock","status","rows","participantIds","partId","unshift","Lesson","mini","setPresenceUserStatus","courseGroupId","flexDirection","kind","subject","activities","getWeekdayString","date","getDay","getDate","getMonth","getFullYear","userIsMemberOfGroup","getOptOutButton","UserList","getHeader","headerTitle","sortIds","userIds","toString","header","PageLeaveWarning","giveWarning","onbeforeunload","returnValue","Prompt","when","GroupData","handleClickAway","anchorEl","showTeacherCard","currentTarget","top","right","teacherName","schoolYear","studyTime","Popover_default","onClose","anchorOrigin","horizontal","vertical","teacherId","colorPrimary","colorSecondary","colorError","NotificationBadge","classes","tooltipMessage","j","Badge_default","badgeContent","withStyles","RegExp","err","GroupPage","handleLessonChange","handlePresenceChange","presenceObj","setEditable","cancel","setGroup","handleTab","newTab","tabs","currentTab","user_UserList","0","group_Lesson","group_PresenceTable","Evaluation_EvaluationTab","getData","getGroupEnrollments","getGroupLessons","getGroupParticipants","getGroupPresence","getGroupEvaluations","group_GroupData","assign","AppBar_default","Tabs_default","indicatorColor","textColor","centered","tab","Tab_default","components_NotificationBadge","getCurrentTab","components_PageLeaveWarning","Group","getGroup","group_GroupPage","group_GroupCard","participatingGroupIds","getCourse","getCourseGroup","oldCourse","newCourse","oldCourseGroup","newCourseGroup","oldLessons","newLessons","oldPresence","newPresence","oldEvaluations","changedPresenceObjs","changedEvaluations","parseInt","participants","CourseSelect","handleSortChange","filterMethod","handleFilterChange","sortMethod","ListItem_default","ListItemText_default","minWidth","subjectsComponents","getMenuItem","enrolledGroupsIds","group_Group","enrolledGroups","getGroupsPerSubject","Toolbar_default","List_default","getMenuItems","splitValues","DataPage","componentDidMount","tables","splitTable","tableSortColumns","tableIndex","table","column","order","tableSortDirections","columnIndex","splitValue","splitIndex","findIndex","_loop","halfSplitTable","downloadTables","workbook","Excel","Workbook","sheet","addWorksheet","addRows","getColumn","filename","toLocaleDateString","downloadWorkbook","fileName","xlsx","writeBuffer","base64","xls64","Blob","URL","createObjectURL","download","body","appendChild","click","removeChild","revokeObjectURL","console","log","_","row","rowIndex","cell","Taxi","fetchSchedules","schedules","week","dangerouslySetInnerHTML","__html","n","Header","logoClick","IconButton_default","aria-label","Menu_default","src","alt","handleClick","Person_default","transform","NotificationBar","TransitionProps","Close_default","Menu","pages","reload","logout","iconName","c","Assignment_default","Group_default","Assessment_default","ViewColumn_default","ExitToApp_default","LocalTaxi_default","Build_default","isCurrentPage","icon","ListItemIcon_default","getIcon","visiblePages","getItem","visibleProfile","Portfolio","compareFunction","orders","getOrder","splice","getParticipatingGroups","groupIds","orderGroups","selectUser","input","getFittingUsers","regExp","count","v","handleInput","getAllUsers","onClickAway","Popper_default","aliasId","disablePortal","MenuList_default","initialValues","course","ControlPanel","loginUsingAlias","handleAliasChange","typeObjectAdded","success","handleTypeChange","courses","addFunction","typeValues","_ref2","asyncToGenerator","mark","_ref3","_callee2","_context2","_ref4","_callee3","_context3","addView","addType","SelectUser","maxWidth","add","_addSubject2","_callee4","_context4","_addCourse2","_callee5","_context5","_addGroup2","_callee6","_context6","App","components_Header","components_NotificationBar","startPage","components_Menu","Switch","Route","path","Redirect","to","GlobalProvider","react_redux_es","store","styles","BrowserRouter","src_App","require","compose","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","reduxCompose","createStore","reducer","applyMiddleware","thunk","ReactDOM","render","lib_GlobalProvider","getElementById"],"mappings":"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","file":"static/js/main.4172b031.chunk.js","sourcesContent":["const DEFAULT_USERS = {\r\n}\r\n\r\nfunction usersReducer(users = DEFAULT_USERS, action) {\r\n\tswitch (action.type) {\r\n\t\tcase \"CHANGE_USERS\":\r\n\t\t\tconst newUsers = users;\r\n\t\t\tfor (const x in action.users) {\r\n\t\t\t\tnewUsers[x] = { ...newUsers[x], ...action.users[x] }\r\n\t\t\t}\r\n\t\t\treturn newUsers;\r\n\t\tcase \"CHANGE_USER\":\r\n\t\t\treturn {\r\n\t\t\t\t...users,\r\n\t\t\t\t[action.user.id]: {\r\n\t\t\t\t\t...users[action.user.id],\r\n\t\t\t\t\t...action.user\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\tcase \"CHANGE_ENROLLMENTS\":\r\n\t\t\tif (action.action === \"ADD\") {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...users,\r\n\t\t\t\t\t[action.userId]: {\r\n\t\t\t\t\t\t...users[action.userId],\r\n\t\t\t\t\t\tenrollmentIds: (users[action.userId].enrollmentIds || []).concat(action.groupId)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (action.action === \"REMOVE\") {\r\n\t\t\t\tconst index = users[action.userId].enrollmentIds.indexOf(action.groupId);\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...users,\r\n\t\t\t\t\t[action.userId]: {\r\n\t\t\t\t\t\t...users[action.userId],\r\n\t\t\t\t\t\tenrollmentIds: [\r\n\t\t\t\t\t\t\t...users[action.userId].enrollmentIds.slice(0, index),\r\n\t\t\t\t\t\t\t...users[action.userId].enrollmentIds.slice(index + 1),\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...users,\r\n\t\t\t\t[action.userId]: {\r\n\t\t\t\t\t...users[action.userId],\r\n\t\t\t\t\tenrollmentIds: action.enrollmentIds,\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn users;\r\n\t}\r\n}\r\n\r\n\r\nexport default usersReducer;","const DEFAULT_GROUPS = {\r\n}\r\n\r\nfunction usersReducer(groups = DEFAULT_GROUPS, action) {\r\n\tswitch (action.type) {\r\n\t\tcase \"CHANGE_GROUPS\":\r\n\t\t\treturn { ...action.groups,...groups, };\r\n\t\tcase \"CHANGE_GROUP\":\r\n\t\t\treturn {\r\n\t\t\t\t\t...groups,\r\n\t\t\t\t\t[action.group.id]: {\r\n\t\t\t\t\t\t...groups[action.group.id], \r\n\t\t\t\t\t\t...action.group\r\n\t\t\t\t\t}\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn groups;\r\n\t}\r\n}\r\n\r\n\r\nexport default usersReducer;","import usersReducer from \"./usersReducer\";\r\nimport groupsReducer from \"./groupsReducer\";\r\n\r\nconst DEFAULT_STATE = {\r\n\tuserId: null,\r\n\tenrollableGroups: null,\r\n\tcurrentPeriod: 4,\r\n\tsubjects: null,\r\n\tgroups: null,\r\n\tusers: null,\r\n\tshowMenu: true,\r\n\tnotifications: [],\r\n\thasFetched: [],\r\n}\r\n\r\nfunction mainReducer(state = DEFAULT_STATE, action) {\r\n\tswitch (action.type) {\r\n\t\tcase \"SET_SELF\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuserId: action.user.id,\r\n\t\t\t\trole: action.user.role,\r\n\t\t\t\tnotifications: [...state.notifications, ...action.user.notifications],\r\n\t\t\t\tusers: {\r\n\t\t\t\t\t[action.user.id]: action.user,\r\n\t\t\t\t\t...state.users,\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\tcase \"SET_SECURE_LOGIN\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsecureLogin: action.secureLogin,\r\n\t\t\t}\r\n\t\tcase \"ADD_NOTIFICATION\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tnotifications: [...state.notifications, action.notification],\r\n\t\t\t};\r\n\t\tcase \"REMOVE_NOTIFICATION\":\r\n\t\t\tconst index = state.notifications.indexOf(action.notification);\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tnotifications: [\r\n\t\t\t\t\t...state.notifications.slice(0, index),\r\n\t\t\t\t\t...state.notifications.slice(index + 1)\r\n\t\t\t\t],\r\n\t\t\t};\r\n\t\tcase \"TOGGLE_MENU\":\r\n\t\t\tif (action.menuState != null) {\r\n\t\t\t\treturn { ...state, showMenu: action.menuState };\r\n\t\t\t} else {\r\n\t\t\t\treturn { ...state, showMenu: !state.showMenu };\r\n\t\t\t}\r\n\t\tcase \"HAS_FETCHED\":\r\n\t\t\treturn { ...state, hasFetched: [...state.hasFetched, { call: action.call, method: action.method, data: action.data }] };\r\n\t\tcase \"CHANGE_ENROLLABLE_GROUPS\":\r\n\t\t\treturn { ...state, enrollableGroups: action.enrollableGroups };\r\n\t\tcase \"CHANGE_SUBJECTS\":\r\n\t\t\treturn { ...state, subjects: { ...state.subjects, ...action.subjects } };\r\n\t\tcase \"CHANGE_PRESENCE_USER_STATUS\":\r\n\t\t\tlet lessons = state.groups[action.groupId].lessons;\r\n\t\t\tlessons[action.lessonId].userStatus = action.userStatus;\r\n\t\t\treturn { ...state, lessons }\r\n\t\tdefault:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: usersReducer(state.users, action),\r\n\t\t\t\tgroups: groupsReducer(state.groups, action),\r\n\t\t\t}\r\n\t}\r\n}\r\n\r\n\r\nexport default mainReducer;","import { createMuiTheme } from '@material-ui/core/styles';\r\n\r\n// const theme = createMuiTheme({\r\n// \tpalette: {\r\n// \t\tprimary: {\r\n// \t\t\t// light: '#5472d3',\r\n// \t\t\tmain: '#0d47a1',\r\n// \t\t\t// dark: '#002171',\r\n// \t\t\tcontrastText: '#fff',\r\n// \t\t},\r\n// \t\tsecondary: {\r\n// \t\t\t// light: '#60ad5e',\r\n// \t\t\tmain: '#2e7d32',\r\n// \t\t\t// dark: '#005005',\r\n// \t\t\tcontrastText: '#ffffff',\r\n// \t\t},\r\n// \t},\r\n// });\r\n\r\nconst theme = createMuiTheme({\r\n\t\"breakpoints\": {\r\n\t\t\"keys\": [\r\n\t\t\t\"xs\",\r\n\t\t\t\"sm\",\r\n\t\t\t\"md\",\r\n\t\t\t\"lg\",\r\n\t\t\t\"xl\"\r\n\t\t],\r\n\t\t\"values\": {\r\n\t\t\t\"xs\": 0,\r\n\t\t\t\"sm\": 600,\r\n\t\t\t\"md\": 960,\r\n\t\t\t\"lg\": 1280,\r\n\t\t\t\"xl\": 1920\r\n\t\t}\r\n\t},\r\n\t\"direction\": \"ltr\",\r\n\t\"mixins\": {\r\n\t\t\"toolbar\": {\r\n\t\t\t\"minHeight\": 56,\r\n\t\t\t\"@media (min-width:0px) and (orientation: landscape)\": {\r\n\t\t\t\t\"minHeight\": 48\r\n\t\t\t},\r\n\t\t\t\"@media (min-width:600px)\": {\r\n\t\t\t\t\"minHeight\": 64\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\"overrides\": {},\r\n\t\"palette\": {\r\n\t\t\"common\": {\r\n\t\t\t\"black\": \"#000\",\r\n\t\t\t\"white\": \"#fff\"\r\n\t\t},\r\n\t\t\"type\": \"light\",\r\n\t\t\"primary\": {\r\n\t\t\t\"main\": \"#08C8F9\",\r\n\t\t\t\"contrastText\": \"#fff\",\r\n\t\t\t\"light\": \"rgb(57, 211, 250)\",\r\n\t\t\t\"dark\": \"rgb(5, 140, 174)\"\r\n\t\t},\r\n\t\t\"secondary\": {\r\n\t\t\t\"main\": \"#C3386B\",\r\n\t\t\t\"contrastText\": \"#ffffff\",\r\n\t\t\t\"light\": \"rgb(207, 95, 136)\",\r\n\t\t\t\"dark\": \"rgb(136, 39, 74)\"\r\n\t\t},\r\n\t\t\"error\": {\r\n\t\t\t\"light\": \"#e57373\",\r\n\t\t\t\"main\": \"#f44336\",\r\n\t\t\t\"dark\": \"#d32f2f\",\r\n\t\t\t\"contrastText\": \"#fff\"\r\n\t\t},\r\n\t\t\"grey\": {\r\n\t\t\t\"50\": \"#fafafa\",\r\n\t\t\t\"100\": \"#f5f5f5\",\r\n\t\t\t\"200\": \"#eeeeee\",\r\n\t\t\t\"300\": \"#e0e0e0\",\r\n\t\t\t\"400\": \"#bdbdbd\",\r\n\t\t\t\"500\": \"#9e9e9e\",\r\n\t\t\t\"600\": \"#757575\",\r\n\t\t\t\"700\": \"#616161\",\r\n\t\t\t\"800\": \"#424242\",\r\n\t\t\t\"900\": \"#212121\",\r\n\t\t\t\"A100\": \"#d5d5d5\",\r\n\t\t\t\"A200\": \"#aaaaaa\",\r\n\t\t\t\"A400\": \"#303030\",\r\n\t\t\t\"A700\": \"#616161\"\r\n\t\t},\r\n\t\t\"contrastThreshold\": 3,\r\n\t\t\"tonalOffset\": 0.2,\r\n\t\t\"text\": {\r\n\t\t\t\"primary\": \"rgba(0, 0, 0, 0.87)\",\r\n\t\t\t\"secondary\": \"rgba(0, 0, 0, 0.54)\",\r\n\t\t\t\"disabled\": \"rgba(0, 0, 0, 0.38)\",\r\n\t\t\t\"hint\": \"rgba(0, 0, 0, 0.38)\"\r\n\t\t},\r\n\t\t\"divider\": \"rgba(0, 0, 0, 0.12)\",\r\n\t\t\"background\": {\r\n\t\t\t\"paper\": \"#fff\",\r\n\t\t\t\"default\": \"#fafafa\"\r\n\t\t},\r\n\t\t\"action\": {\r\n\t\t\t\"active\": \"rgba(0, 0, 0, 0.54)\",\r\n\t\t\t\"hover\": \"rgba(0, 0, 0, 0.08)\",\r\n\t\t\t\"hoverOpacity\": 0.08,\r\n\t\t\t\"selected\": \"rgba(0, 0, 0, 0.14)\",\r\n\t\t\t\"disabled\": \"rgba(0, 0, 0, 0.26)\",\r\n\t\t\t\"disabledBackground\": \"rgba(0, 0, 0, 0.12)\"\r\n\t\t}\r\n\t},\r\n\t\"props\": {},\r\n\t\"shadows\": [\r\n\t\t\"none\",\r\n\t\t\"0px 1px 3px 0px rgba(0, 0, 0, 0.2),0px 1px 1px 0px rgba(0, 0, 0, 0.14),0px 2px 1px -1px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 1px 5px 0px rgba(0, 0, 0, 0.2),0px 2px 2px 0px rgba(0, 0, 0, 0.14),0px 3px 1px -2px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 1px 8px 0px rgba(0, 0, 0, 0.2),0px 3px 4px 0px rgba(0, 0, 0, 0.14),0px 3px 3px -2px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 2px 4px -1px rgba(0, 0, 0, 0.2),0px 4px 5px 0px rgba(0, 0, 0, 0.14),0px 1px 10px 0px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 5px 8px 0px rgba(0, 0, 0, 0.14),0px 1px 14px 0px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 6px 10px 0px rgba(0, 0, 0, 0.14),0px 1px 18px 0px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 4px 5px -2px rgba(0, 0, 0, 0.2),0px 7px 10px 1px rgba(0, 0, 0, 0.14),0px 2px 16px 1px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 5px 6px -3px rgba(0, 0, 0, 0.2),0px 9px 12px 1px rgba(0, 0, 0, 0.14),0px 3px 16px 2px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 6px 6px -3px rgba(0, 0, 0, 0.2),0px 10px 14px 1px rgba(0, 0, 0, 0.14),0px 4px 18px 3px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 6px 7px -4px rgba(0, 0, 0, 0.2),0px 11px 15px 1px rgba(0, 0, 0, 0.14),0px 4px 20px 3px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 12px 17px 2px rgba(0, 0, 0, 0.14),0px 5px 22px 4px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 13px 19px 2px rgba(0, 0, 0, 0.14),0px 5px 24px 4px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 7px 9px -4px rgba(0, 0, 0, 0.2),0px 14px 21px 2px rgba(0, 0, 0, 0.14),0px 5px 26px 4px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 8px 9px -5px rgba(0, 0, 0, 0.2),0px 15px 22px 2px rgba(0, 0, 0, 0.14),0px 6px 28px 5px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 8px 10px -5px rgba(0, 0, 0, 0.2),0px 16px 24px 2px rgba(0, 0, 0, 0.14),0px 6px 30px 5px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 8px 11px -5px rgba(0, 0, 0, 0.2),0px 17px 26px 2px rgba(0, 0, 0, 0.14),0px 6px 32px 5px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 9px 11px -5px rgba(0, 0, 0, 0.2),0px 18px 28px 2px rgba(0, 0, 0, 0.14),0px 7px 34px 6px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 9px 12px -6px rgba(0, 0, 0, 0.2),0px 19px 29px 2px rgba(0, 0, 0, 0.14),0px 7px 36px 6px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 10px 13px -6px rgba(0, 0, 0, 0.2),0px 20px 31px 3px rgba(0, 0, 0, 0.14),0px 8px 38px 7px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 10px 13px -6px rgba(0, 0, 0, 0.2),0px 21px 33px 3px rgba(0, 0, 0, 0.14),0px 8px 40px 7px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 10px 14px -6px rgba(0, 0, 0, 0.2),0px 22px 35px 3px rgba(0, 0, 0, 0.14),0px 8px 42px 7px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 11px 14px -7px rgba(0, 0, 0, 0.2),0px 23px 36px 3px rgba(0, 0, 0, 0.14),0px 9px 44px 8px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 11px 15px -7px rgba(0, 0, 0, 0.2),0px 24px 38px 3px rgba(0, 0, 0, 0.14),0px 9px 46px 8px rgba(0, 0, 0, 0.12)\"\r\n\t],\r\n\t\"typography\": {\r\n\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\"fontSize\": 14,\r\n\t\t\"fontWeightLight\": 300,\r\n\t\t\"fontWeightRegular\": 400,\r\n\t\t\"fontWeightMedium\": 500,\r\n\t\t\"display4\": {\r\n\t\t\t\"fontSize\": \"7rem\",\r\n\t\t\t\"fontWeight\": 300,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"letterSpacing\": \"-.04em\",\r\n\t\t\t\"lineHeight\": \"1.14286em\",\r\n\t\t\t\"marginLeft\": \"-.04em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\r\n\t\t},\r\n\t\t\"display3\": {\r\n\t\t\t\"fontSize\": \"3.5rem\",\r\n\t\t\t\"fontWeight\": 400,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"letterSpacing\": \"-.02em\",\r\n\t\t\t\"lineHeight\": \"1.30357em\",\r\n\t\t\t\"marginLeft\": \"-.02em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\r\n\t\t},\r\n\t\t\"display2\": {\r\n\t\t\t\"fontSize\": \"2.8125rem\",\r\n\t\t\t\"fontWeight\": 400,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"lineHeight\": \"1.06667em\",\r\n\t\t\t\"marginLeft\": \"-.02em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\r\n\t\t},\r\n\t\t\"display1\": {\r\n\t\t\t\"fontSize\": \"2.125rem\",\r\n\t\t\t\"fontWeight\": 400,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"lineHeight\": \"1.20588em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\r\n\t\t},\r\n\t\t\"headline\": {\r\n\t\t\t\"fontSize\": \"1.5rem\",\r\n\t\t\t\"fontWeight\": 400,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"lineHeight\": \"1.35417em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\r\n\t\t},\r\n\t\t\"title\": {\r\n\t\t\t\"fontSize\": \"1.3125rem\",\r\n\t\t\t\"fontWeight\": 500,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"lineHeight\": \"1.16667em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\r\n\t\t},\r\n\t\t\"subheading\": {\r\n\t\t\t\"fontSize\": \"1rem\",\r\n\t\t\t\"fontWeight\": 400,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"lineHeight\": \"1.5em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\r\n\t\t},\r\n\t\t\"body2\": {\r\n\t\t\t\"fontSize\": \"0.875rem\",\r\n\t\t\t\"fontWeight\": 500,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"lineHeight\": \"1.71429em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\r\n\t\t},\r\n\t\t\"body1\": {\r\n\t\t\t\"fontSize\": \"0.875rem\",\r\n\t\t\t\"fontWeight\": 400,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"lineHeight\": \"1.46429em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\r\n\t\t},\r\n\t\t\"caption\": {\r\n\t\t\t\"fontSize\": \"0.75rem\",\r\n\t\t\t\"fontWeight\": 400,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"lineHeight\": \"1.375em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\r\n\t\t},\r\n\t\t\"button\": {\r\n\t\t\t\"fontSize\": \"0.875rem\",\r\n\t\t\t\"textTransform\": \"uppercase\",\r\n\t\t\t\"fontWeight\": 500,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\r\n\t\t}\r\n\t},\r\n\t\"transitions\": {\r\n\t\t\"easing\": {\r\n\t\t\t\"easeInOut\": \"cubic-bezier(0.4, 0, 0.2, 1)\",\r\n\t\t\t\"easeOut\": \"cubic-bezier(0.0, 0, 0.2, 1)\",\r\n\t\t\t\"easeIn\": \"cubic-bezier(0.4, 0, 1, 1)\",\r\n\t\t\t\"sharp\": \"cubic-bezier(0.4, 0, 0.6, 1)\"\r\n\t\t},\r\n\t\t\"duration\": {\r\n\t\t\t\"shortest\": 150,\r\n\t\t\t\"shorter\": 200,\r\n\t\t\t\"short\": 250,\r\n\t\t\t\"standard\": 300,\r\n\t\t\t\"complex\": 375,\r\n\t\t\t\"enteringScreen\": 225,\r\n\t\t\t\"leavingScreen\": 195\r\n\t\t}\r\n\t},\r\n\t\"spacing\": {\r\n\t\t\"unit\": 8\r\n\t},\r\n\t\"zIndex\": {\r\n\t\t\"mobileStepper\": 1000,\r\n\t\t\"appBar\": 1100,\r\n\t\t\"drawer\": 1200,\r\n\t\t\"modal\": 1300,\r\n\t\t\"snackbar\": 1400,\r\n\t\t\"tooltip\": 1500\r\n\t}\r\n});\r\n\r\nexport default theme;","import React from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport theme from '../lib/MuiTheme'\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Field extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\terror: false,\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\treturn {\r\n\t\t\t...prevState,\r\n\t\t\terror: nextProps.editable ? !Field.validate(nextProps.value, nextProps.validate) : false,\r\n\t\t}\r\n\t}\r\n\r\n\tstatic validate(value, rules = {}, options = [value]) {\r\n\t\tswitch (rules.type) {\r\n\t\t\tcase \"phoneNumber\":\r\n\t\t\t\tconst re = /(^\\+[0-9]{2}|^\\+[0-9]{2}\\(0\\)|^\\(\\+[0-9]{2}\\)\\(0\\)|^00[0-9]{2}|^0)([0-9]{9}$|[0-9\\-\\s]{10}$)/i;\r\n\t\t\t\tif (!re.test(value)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"email\":\r\n\t\t\t\tconst re2 = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/g;\r\n\t\t\t\tif (!re2.test(value)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"integer\":\r\n\t\t\t\tif (!/^\\+?[1-9][\\d]*$/i.test(value)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"float\":\r\n\t\t\t\tif (isNaN(value)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"decimalGrade\":\r\n\t\t\t\t//replace dot with comma and vice versa\r\n\t\t\t\tconst x = value.replace(/\\./g, \"_$comma$_\").replace(/,/g, \".\").replace(/_\\$comma\\$_/g, \",\");\r\n\t\t\t\tif (x === \"ND\") {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tif (isNaN(x)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: break;\r\n\t\t}\r\n\t\tif (rules.min) {\r\n\t\t\tif (parseFloat(value) < rules.min) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (rules.max) {\r\n\t\t\tif (parseFloat(value) > rules.max) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (rules.notEmpty) {\r\n\t\t\tif (value == null || value === \"\" || value === \" \" || options.indexOf(value) === -1) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (rules.maxLength) {\r\n\t\t\tif (value.length > rules.maxLength) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tonChange(event) {\r\n\t\tthis.props.onChange({\r\n\t\t\t...event,\r\n\t\t\tname: this.props.name,\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet value = this.props.value == null ? \"\" : this.props.value;\r\n\t\tlet style = this.props.style || {};\r\n\t\tlet layout = this.props.layout || {};\r\n\r\n\t\tlet label = this.props.label;\r\n\t\tlet disabled = true;\r\n\t\tlet multiline = false;\r\n\t\tlet fullWidth = false;\r\n\r\n\t\tlet options = this.props.options;\r\n\t\tlet disableUnderline = style.underline || true;\r\n\t\tlet margin = style.margin || \"none\";\r\n\t\tlet marginPx = 0;\r\n\t\tlet menuItems;\r\n\t\tlet endAdornment;\r\n\t\tlet classNames = [];\r\n\t\tif (this.props.style) {\r\n\t\t\tswitch (this.props.style.type) {\r\n\t\t\t\tcase \"headline\":\r\n\t\t\t\t\tstyle = {\r\n\t\t\t\t\t\t...style,\r\n\t\t\t\t\t\t...theme.typography.headline,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tstyle.color = theme.palette.primary.main;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"title\":\r\n\t\t\t\t\tstyle = {\r\n\t\t\t\t\t\t...style,\r\n\t\t\t\t\t\t...theme.typography.title\r\n\t\t\t\t\t};\r\n\t\t\t\t\tstyle.color = theme.palette.primary.main;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"caption\":\r\n\t\t\t\t\tstyle.color = theme.palette.text.secondary;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tstyle.color = theme.palette.text.primary;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tswitch (this.props.style.color) {\r\n\t\t\t\tcase \"primary\":\r\n\t\t\t\t\tstyle.color = theme.palette.primary.main;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"primaryContrast\":\r\n\t\t\t\t\tstyle.color = theme.palette.primary.contrastText;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"secondary\":\r\n\t\t\t\t\tstyle.color = theme.palette.secondary.main;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"error\":\r\n\t\t\t\t\tstyle.color = theme.palette.error.main;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (layout.alignment === \"right\") {\r\n\t\t\tstyle.float = \"right\";\r\n\t\t\tstyle.textAlign = \"right\";\r\n\t\t\tclassNames.push(\"right\");\r\n\t\t}\r\n\t\tif (layout.alignment === \"left\") {\r\n\t\t\tstyle.float = \"left\";\r\n\t\t}\r\n\r\n\t\tif (layout.area) {\r\n\t\t\tfullWidth = true;\r\n\t\t\tmultiline = true;\r\n\t\t}\r\n\r\n\t\tif (this.props.default && this.props.editable === false && (value === \"\" || value == null)) {\r\n\t\t\tvalue = this.props.default;\r\n\t\t}\r\n\r\n\t\tif (this.props.editable) {\r\n\t\t\tdisabled = false;\r\n\t\t\tdisableUnderline = style.underline || false;\r\n\t\t\tmargin = style.margin || \"normal\";\r\n\t\t} else {\r\n\t\t\tif (!(style.labelVisible === true)) {\r\n\t\t\t\tlabel = null;\r\n\t\t\t}\r\n\t\t\tif (options != null && options[0] != null && typeof options[0] !== \"string\") {\r\n\t\t\t\tconst a = options.filter((opt) => {\r\n\t\t\t\t\treturn opt.value === value;\r\n\t\t\t\t})[0];\r\n\t\t\t\tif (a != null) {\r\n\t\t\t\t\tvalue = a.label;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\toptions = null;\r\n\t\t}\r\n\r\n\t\tif (options) {\r\n\t\t\tmenuItems = options.map(option => {\r\n\t\t\t\tif (typeof option !== \"string\") {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<MenuItem key={option.value} value={option.value}>\r\n\t\t\t\t\t\t\t{option.label}\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<MenuItem key={option} value={option}>\r\n\t\t\t\t\t\t{option}\r\n\t\t\t\t\t</MenuItem>\r\n\t\t\t\t)\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (style.unit) {\r\n\t\t\tendAdornment = <InputAdornment position=\"end\">{style.unit}</InputAdornment>;\r\n\t\t}\r\n\t\tif (layout.td) {\r\n\t\t\tstyle.width = \"100%\";\r\n\t\t}\r\n\t\tswitch (margin) {\r\n\t\t\tcase \"dense\":\r\n\t\t\t\tmarginPx = 5;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"normal\":\r\n\t\t\t\tmarginPx = 12;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t}\r\n\r\n\t\tconst field = (\r\n\t\t\t<TextField\r\n\t\t\t\tvalue={value}\r\n\t\t\t\tmargin=\"none\"\r\n\t\t\t\tdisabled={disabled}\r\n\t\t\t\tfullWidth={fullWidth}\r\n\t\t\t\tmultiline={multiline}\r\n\t\t\t\tclassName={classNames.join(\" \")}\r\n\t\t\t\tlabel={label}\r\n\t\t\t\tselect={options ? true : false}\r\n\t\t\t\tstyle={{ flex: 1, ...style, margin: marginPx }}\r\n\t\t\t\tonChange={this.onChange.bind(this)}\r\n\t\t\t\terror={this.state.error}\r\n\t\t\t\tInputProps={{\r\n\t\t\t\t\tdisableUnderline,\r\n\t\t\t\t\tstyle,\r\n\t\t\t\t\tendAdornment: endAdornment ? endAdornment : null,\r\n\t\t\t\t\tinputProps: {\r\n\t\t\t\t\t\tstyle\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\r\n\t\t\t>\r\n\t\t\t\t{menuItems}\r\n\t\t\t</TextField>\r\n\t\t);\r\n\t\tif (layout.td) {\r\n\t\t\tstyle.width = undefined;\r\n\t\t\treturn (\r\n\t\t\t\t<td style={style}>\r\n\t\t\t\t\t{field}\r\n\t\t\t\t</td>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn field;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n\r\nField.propTypes = {\r\n\tvalidate: PropTypes.shape({\r\n\t\tmin: PropTypes.number,\r\n\t\tmax: PropTypes.number,\r\n\t\ttype: PropTypes.oneOf([\"phoneNumber\", \"email\", \"integer\", \"decimalGrade\"]),\r\n\t\tnotEmpty: PropTypes.bool,\r\n\t\tmaxLength: PropTypes.number,\r\n\t}),\r\n\tvalue: PropTypes.oneOfType([\r\n\t\tPropTypes.string,\r\n\t\tPropTypes.number,\r\n\t]),\r\n\tstyle: PropTypes.shape({\r\n\t\tlabelVisible: PropTypes.bool,\r\n\t\ttype: PropTypes.oneOf([\r\n\t\t\t\"title\",\r\n\t\t\t\"caption\",\r\n\t\t\t\"headline\",\r\n\t\t]),\r\n\t\tunderline: PropTypes.bool,\r\n\t\tcolor: PropTypes.oneOf([\"primary\", \"primaryContrast\", \"secondary\", \"error\"]),\r\n\t\tunit: PropTypes.string,\r\n\t\tmargin: PropTypes.oneOf([\"none\", \"dense\", \"normal\"]),\r\n\t}),\r\n\tlayout: PropTypes.shape({\r\n\t\tarea: PropTypes.bool,\r\n\t\talignment: PropTypes.oneOf([\"left\", \"right\"]),\r\n\t\ttd: PropTypes.bool,\r\n\t}),\r\n\tlabel: PropTypes.string,\r\n\toptions: PropTypes.any,\r\n\t// PropTypes.arrayOf(\r\n\t// \tPropTypes.oneOfType([\r\n\t// \t\tPropTypes.shape({\r\n\t// \t\t\tvalue: PropTypes.string,\r\n\t// \t\t\tlabel: PropTypes.string,\r\n\t// \t\t}),\r\n\t// \t\tPropTypes.string,\r\n\t// \t])),\r\n\teditable: PropTypes.bool,\r\n\tdefault: PropTypes.string,\r\n};\r\n\r\nexport default Field;","import filter from \"lodash/filter\"\r\nimport $ from \"jquery\";\r\nimport keyBy from \"lodash/keyBy\"\r\nimport map from \"lodash/map\"\r\nimport Field from \"../components/Field\"\r\n\r\nfunction apiErrorHandler(dispatch) {\r\n\treturn function handleError(error, e2) {\r\n\t\tconst responseJSON = error.responseJSON;\r\n\t\tdispatch({\r\n\t\t\ttype: \"ADD_NOTIFICATION\",\r\n\t\t\tnotification: {\r\n\t\t\t\tid: Math.random(),\r\n\t\t\t\tpriority: \"high\",\r\n\t\t\t\ttype: \"bar\",\r\n\t\t\t\tmessage: responseJSON && responseJSON.error ? responseJSON.error : \"Er is iets mis gegaan\",\r\n\t\t\t\tscope: \".\",\r\n\t\t\t}\r\n\t\t});\r\n\t\tthrow responseJSON;\r\n\t}\r\n}\r\n\r\nexport async function fetchData(endpoint, method, data, dispatch, getState, forceArray) {\r\n\tconst f = {\r\n\t\tcall: endpoint,\r\n\t\tmethod: method,\r\n\t\tdata: data,\r\n\t}\r\n\tfor (let i = 0; i < getState().hasFetched.length; i++) {\r\n\t\tconst o = getState().hasFetched[i];\r\n\t\tif (o.data === f.data && o.call === f.call && o.method === f.method) {\r\n\t\t\treturn Promise.reject(new Error(\"Duplicate api call\"));\r\n\t\t}\r\n\t};\r\n\tdispatch({\r\n\t\t...f,\r\n\t\ttype: \"HAS_FETCHED\",\r\n\t});\r\n\r\n\treturn $.ajax({\r\n\t\turl: \"/api/\" + endpoint,\r\n\t\ttype: method,\r\n\t\tdata: data,\r\n\t\tdataType: \"json\",\r\n\t}).then((list) => {\r\n\t\tif (method === \"put\" || method === \"patch\" || method === \"delete\") {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: \"ADD_NOTIFICATION\",\r\n\t\t\t\tnotification: {\r\n\t\t\t\t\tid: Math.random(),\r\n\t\t\t\t\tpriority: \"low\",\r\n\t\t\t\t\ttype: \"bar\",\r\n\t\t\t\t\tmessage: \"Opgeslagen\",\r\n\t\t\t\t\tscope: \"\",\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn (Array.isArray(list) && forceArray !== true) ? keyBy(list, \"id\") : list\r\n\t})\r\n\t\t.catch(apiErrorHandler(dispatch));\r\n}\r\n\r\n\r\nexport function getSubjects() {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"subject/list\", \"get\", null, dispatch, getState)\r\n\t\t\t.then((subjects) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_SUBJECTS\",\r\n\t\t\t\t\tsubjects,\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => { });\r\n\t}\r\n}\r\n\r\nexport function setAlias(userId) {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"function/alias\", \"post\", { userId, secureLogin: getState().secureLogin }, dispatch, getState)\r\n\t\t\t.then(() => {\r\n\t\t\t\tdocument.location.reload();\r\n\t\t\t})\r\n\t}\r\n}\r\n\r\nexport function getGroups() {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"group/list\", \"get\", null, dispatch, getState)\r\n\t\t\t.then((groups) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_GROUPS\",\r\n\t\t\t\t\tgroups,\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => {});\r\n\t}\r\n}\r\n\r\nexport function getParticipatingGroups() {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"user/groups\", \"get\", null, dispatch, getState)\r\n\t\t\t.then((groups) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_GROUPS\",\r\n\t\t\t\t\tgroups,\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => {});\r\n\t}\r\n}\r\n\r\nexport function getGroup(groupId) {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"group\", \"post\", { groupId: groupId }, dispatch, getState)\r\n\t\t\t.then((group) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_GROUPS\",\r\n\t\t\t\t\tgroups: { [groupId]: group }\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => { });\r\n\t}\r\n}\r\n\r\nfunction addMissingInfoNotifications(user, dispatch) {\r\n\tfunction not(field) {\r\n\t\tdispatch({\r\n\t\t\ttype: \"ADD_NOTIFICATION\",\r\n\t\t\tnotification: {\r\n\t\t\t\tid: Math.random(),\r\n\t\t\t\tpriority: \"high\",\r\n\t\t\t\ttype: \"badge\",\r\n\t\t\t\tmessage: \"Vul een geldige waarde voor \" + field + \" in\",\r\n\t\t\t\tscope: \"profiel\",\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tif (!Field.validate(user.year, {\r\n\t\ttype: \"integer\",\r\n\t\tmin: 1,\r\n\t\tmax: 6,\r\n\t})) { not(\"Leerjaar\") };\r\n\tif (!Field.validate(user.level, { notEmpty: true })) { not(\"Opleidingsniveau\") }\r\n\tif (!Field.validate(user.profile, { notEmpty: true })) { not(\"Profiel\") }\r\n\tif (!Field.validate(user.preferedEmail, { type: \"email\" })) { not(\"Voorkeurs email\") }\r\n\tif (!Field.validate(user.phoneNumber, { type: \"phoneNumber\" })) { not(\"Telefoonnummer\") }\r\n}\r\n\r\nexport function getSelf() {\r\n\treturn (dispatch, getState) => {\r\n\t\tconst notification = {\r\n\t\t\tid: -96,\r\n\t\t\tpriority: \"low\",\r\n\t\t\ttype: \"bar\",\r\n\t\t\tmessage: \"Bezig met laden\",\r\n\t\t\tscope: \".\",\r\n\t\t};\r\n\t\tdispatch(addNotification(notification));\r\n\t\tfetchData(\"user/self\", \"get\", null, dispatch, getState)\r\n\t\t\t.then((user) => {\r\n\t\t\t\taddMissingInfoNotifications(user, dispatch);\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"SET_SELF\",\r\n\t\t\t\t\tuser,\r\n\t\t\t\t});\r\n\t\t\t\tdispatch(removeNotification(notification));\r\n\t\t\t}).catch((error) => {\r\n\t\t\t\tdispatch(removeNotification(notification));\r\n\t\t\t\tif (error != null && error.error === \"Authentication Error\") {\r\n\t\t\t\t\tif (window.location.pathname !== \"/login\") {\r\n\t\t\t\t\t\tsetCookie(\"beforeLoginPath\", window.location.pathname + window.location.search, 24);\r\n\t\t\t\t\t\tdocument.location.href = \"/login\";\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdispatch(toggleMenu(false));\r\n\t\t\t\t\tdispatch(addNotification({\r\n\t\t\t\t\t\tid: -1,\r\n\t\t\t\t\t\tpriority: \"high\",\r\n\t\t\t\t\t\ttype: \"bar\",\r\n\t\t\t\t\t\tmessage: \"Kan geen verbinding met de server maken\",\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\nexport function setUser(user) {\r\n\treturn (dispatch, getState) => {\r\n\t\tdispatch({\r\n\t\t\ttype: \"CHANGE_USER\",\r\n\t\t\tuser,\r\n\t\t});\r\n\t\tfetchData(\"user\", \"patch\", user, dispatch, getState);\r\n\t}\r\n}\r\n\r\nexport function setPresenceUserStatus(lessonId, userStatus, groupId) {\r\n\treturn (dispatch, getState) => {\r\n\t\tdispatch({\r\n\t\t\ttype: \"CHANGE_PRESENCE_USER_STATUS\",\r\n\t\t\tlessonId,\r\n\t\t\tuserStatus,\r\n\t\t\tgroupId,\r\n\t\t});\r\n\t\tfetchData(\"group/userStatus\", \"patch\", { lessonId: lessonId, userStatus: userStatus }, dispatch, getState);\r\n\t}\r\n}\r\n\r\nexport function setGroup(group) {\r\n\treturn (dispatch, getState) => {\r\n\t\tfunction getCourse(group) {\r\n\t\t\treturn {\r\n\t\t\t\tcourseId: group.courseId,\r\n\t\t\t\tsubjectId: group.subjectId,\r\n\t\t\t\tname: group.courseName,\r\n\t\t\t\tdescription: group.courseDescription,\r\n\t\t\t\tstudyTime: group.studyTime,\r\n\t\t\t\tremarks: group.remarks,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction getCourseGroup(group) {\r\n\t\t\treturn {\r\n\t\t\t\tcourseId: group.courseId,\r\n\t\t\t\tgroupId: group.id,\r\n\t\t\t\tday: group.day,\r\n\t\t\t\tschoolYear: group.schoolYear,\r\n\t\t\t\tenrollableFor: group.enrollableFor,\r\n\t\t\t\tperiod: group.period,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst oldCourse = getCourse(getState().groups[group.id]);\r\n\t\tconst newCourse = getCourse(group);\r\n\r\n\t\tconst oldCourseGroup = getCourseGroup(getState().groups[group.id]);\r\n\t\tconst newCourseGroup = getCourseGroup(group);\r\n\r\n\t\tconst oldLessons = getState().groups[group.id].lessons;\r\n\t\tconst newLessons = group.lessons;\r\n\r\n\t\tconst oldPresence = getState().groups[group.id].presence;\r\n\t\tconst newPresence = group.presence;\r\n\r\n\t\tconst oldEvaluations = getState().groups[group.id].evaluations;\r\n\t\tconst newEvaluations = group.evaluations;\r\n\r\n\t\tif (JSON.stringify(oldCourse) !== JSON.stringify(newCourse)) {\r\n\t\t\tfetchData(\"course/\", \"patch\", newCourse, dispatch, getState);\r\n\t\t}\r\n\t\tif (JSON.stringify(oldCourseGroup) !== JSON.stringify(newCourseGroup)) {\r\n\t\t\tfetchData(\"group/\", \"patch\", newCourseGroup, dispatch, getState);\r\n\t\t}\r\n\r\n\t\tif (JSON.stringify(oldPresence) !== JSON.stringify(newPresence)) {\r\n\t\t\tconst changedPresenceObjs = filter(newPresence, (presence) => {\r\n\t\t\t\treturn JSON.stringify(presence) !== JSON.stringify(oldPresence[presence.id]);\r\n\t\t\t});\r\n\t\t\tfetchData(\"group/presence\", \"patch\",\r\n\t\t\t\t{\r\n\t\t\t\t\tpresence: JSON.stringify(map(changedPresenceObjs, (changedPresenceObjs) => { return changedPresenceObjs })),\r\n\t\t\t\t\tgroupId: group.id\r\n\t\t\t\t}, dispatch, getState);\r\n\t\t}\r\n\r\n\t\tif (newLessons != null && JSON.stringify(oldLessons) !== JSON.stringify(newLessons)) {\r\n\t\t\tfetchData(\"group/lessons\", \"patch\", { lessons: JSON.stringify(map(newLessons, (lesson) => { return lesson })), }, dispatch, getState);\r\n\t\t}\r\n\r\n\t\tif (JSON.stringify(oldEvaluations) !== JSON.stringify(newEvaluations)) {\r\n\t\t\tlet changedEvaluations = [];\r\n\t\t\tfor (let i = 0; i < newEvaluations.length; i++) {\r\n\t\t\t\tconst evaluation = newEvaluations[i];\r\n\t\t\t\tif (JSON.stringify(oldEvaluations[i]) !== JSON.stringify(evaluation)) {\r\n\t\t\t\t\tchangedEvaluations.push(evaluation);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfetchData(\"group/evaluations\", \"patch\", {\r\n\t\t\t\tevaluations: JSON.stringify(changedEvaluations),\r\n\t\t\t\tsecureLogin: getState().secureLogin\r\n\t\t\t}, dispatch, getState);\r\n\t\t}\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: \"CHANGE_GROUP\",\r\n\t\t\tgroup: group,\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport function getEnrollableGroups() {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"user/enrollableGroups\", \"get\", null, dispatch, getState, true)\r\n\t\t\t.then((enrollableGroups) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_ENROLLABLE_GROUPS\",\r\n\t\t\t\t\tenrollableGroups,\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => {});\r\n\t}\r\n}\r\n\r\nexport function getEnrolLments() {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"user/enrollments\", \"get\", null, dispatch, getState)\r\n\t\t\t.then((enrollments) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_GROUPS\",\r\n\t\t\t\t\tgroups: enrollments,\r\n\t\t\t\t});\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_ENROLLMENTS\",\r\n\t\t\t\t\tuserId: getState().userId,\r\n\t\t\t\t\tenrollmentIds: Object.keys(enrollments),\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => {});\r\n\t}\r\n}\r\n\r\nexport function getGroupEnrollments(groupId) {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"group/enrollments\", \"post\", { groupId: groupId }, dispatch, getState)\r\n\t\t\t.then((enrollments) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_GROUP\",\r\n\t\t\t\t\tgroup: {\r\n\t\t\t\t\t\tid: groupId,\r\n\t\t\t\t\t\tenrollmentIds: Object.keys(enrollments).map(id => parseInt(id, 10)),\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_USERS\",\r\n\t\t\t\t\tusers: enrollments,\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => {});\r\n\t}\r\n}\r\n\r\nexport function getGroupLessons(groupId) {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"group/lessons\", \"post\", { groupId: groupId }, dispatch, getState)\r\n\t\t\t.then((lessons) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_GROUP\",\r\n\t\t\t\t\tgroup: {\r\n\t\t\t\t\t\tid: groupId,\r\n\t\t\t\t\t\tlessons,\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\nexport function getGroupPresence(groupId) {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"group/presence\", \"post\", { groupId: groupId }, dispatch, getState)\r\n\t\t\t.then((presence) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_GROUP\",\r\n\t\t\t\t\tgroup: {\r\n\t\t\t\t\t\tid: groupId,\r\n\t\t\t\t\t\tpresence,\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\nexport function getGroupParticipants(groupId) {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"group/participants\", \"post\", { groupId: groupId }, dispatch, getState)\r\n\t\t\t.then((participants) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_GROUP\",\r\n\t\t\t\t\tgroup: {\r\n\t\t\t\t\t\tid: groupId,\r\n\t\t\t\t\t\tparticipantIds: Object.keys(participants).map(id => parseInt(id, 10)),\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_USERS\",\r\n\t\t\t\t\tusers: participants,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\nexport function getAllUsers() {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"user/list\", \"get\", null, dispatch, getState)\r\n\t\t\t.then((users) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_USERS\",\r\n\t\t\t\t\tusers,\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => {});\r\n\t}\r\n}\r\n\r\nexport function addNotification(notification) {\r\n\treturn {\r\n\t\ttype: \"ADD_NOTIFICATION\",\r\n\t\tnotification,\r\n\t}\r\n}\r\n\r\nexport function removeNotification(notification) {\r\n\treturn {\r\n\t\ttype: \"REMOVE_NOTIFICATION\",\r\n\t\tnotification,\r\n\t}\r\n}\r\n\r\nexport function toggleMenu(menuState) {\r\n\treturn {\r\n\t\ttype: \"TOGGLE_MENU\",\r\n\t\tmenuState,\r\n\t}\r\n}\r\n\r\nexport function setSecureLogin(secureLogin) {\r\n\treturn {\r\n\t\ttype: \"SET_SECURE_LOGIN\",\r\n\t\tsecureLogin,\r\n\t}\r\n}\r\n\r\nexport function toggleEnrollment(group) {\r\n\treturn (dispatch, getState) => {\r\n\t\tconst index = getState().users[getState().userId].enrollmentIds.indexOf(group.id);\r\n\t\tif (index === -1) {\r\n\t\t\tfetchData(\"user/enrollments\", \"put\", { groupId: group.id }, dispatch, getState)\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: \"CHANGE_ENROLLMENTS\",\r\n\t\t\t\t\t\taction: \"ADD\",\r\n\t\t\t\t\t\tuserId: getState().userId,\r\n\t\t\t\t\t\tgroupId: group.id,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tfetchData(\"user/enrollments\", \"delete\", { groupId: group.id }, dispatch, getState)\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: \"CHANGE_ENROLLMENTS\",\r\n\t\t\t\t\t\taction: \"REMOVE\",\r\n\t\t\t\t\t\tuserId: getState().userId,\r\n\t\t\t\t\t\tgroupId: group.id,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nexport function getGroupEvaluations(groupId) {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"group/evaluations\", \"post\", { groupId }, dispatch, getState, true).then((evaluations) => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: \"CHANGE_GROUP\",\r\n\t\t\t\tgroup: {\r\n\t\t\t\t\tid: groupId,\r\n\t\t\t\t\tevaluations: evaluations,\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport function addSubject(name, description) {\r\n\treturn (dispatch, getState) => {\r\n\t\treturn fetchData(\"subject\", \"put\", { name, description, secureLogin: getState().secureLogin }, dispatch, getState)\r\n\t\t\t.then(() => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"ADD_NOTIFICATION\",\r\n\t\t\t\t\tnotification: {\r\n\t\t\t\t\t\tid: Math.random(),\r\n\t\t\t\t\t\tpriority: \"low\",\r\n\t\t\t\t\t\ttype: \"bar\",\r\n\t\t\t\t\t\tmessage: \"Vak aangemaakt, refresh om te zien\",\r\n\t\t\t\t\t\tscope: \"beheer\",\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\nexport function addCourse(name, subjectId) {\r\n\treturn (dispatch, getState) => {\r\n\t\treturn fetchData(\"course\", \"put\", { name, subjectId, secureLogin: getState().secureLogin }, dispatch, getState)\r\n\t\t\t.then(() => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"ADD_NOTIFICATION\",\r\n\t\t\t\t\tnotification: {\r\n\t\t\t\t\t\tid: Math.random(),\r\n\t\t\t\t\t\tpriority: \"low\",\r\n\t\t\t\t\t\ttype: \"bar\",\r\n\t\t\t\t\t\tmessage: \"Module aangemaakt, refresh om te zien\",\r\n\t\t\t\t\t\tscope: \"beheer\",\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\nexport function addGroup(courseId, userId) {\r\n\treturn (dispatch, getState) => {\r\n\t\treturn fetchData(\"group\", \"put\", { courseId, mainTeacherId: userId, secureLogin: getState().secureLogin }, dispatch, getState)\r\n\t\t\t.then(() => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"ADD_NOTIFICATION\",\r\n\t\t\t\t\tnotification: {\r\n\t\t\t\t\t\tid: Math.random(),\r\n\t\t\t\t\t\tpriority: \"low\",\r\n\t\t\t\t\t\ttype: \"bar\",\r\n\t\t\t\t\t\tmessage: \"Groep aangemaakt, refresh om te zien\",\r\n\t\t\t\t\t\tscope: \"beheer\",\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\n\r\nexport function setCookie(cname, cvalue, exhours) {\r\n\tvar d = new Date();\r\n\td.setTime(d.getTime() + (exhours * 60 * 60 * 1000));\r\n\tvar expires = \"expires=\" + d.toUTCString();\r\n\tdocument.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\r\n}\r\n\r\nexport function getCookie(cname) {\r\n\tvar name = cname + \"=\";\r\n\tvar decodedCookie = decodeURIComponent(document.cookie);\r\n\tvar ca = decodedCookie.split(';');\r\n\tfor (var i = 0; i < ca.length; i++) {\r\n\t\tvar c = ca[i];\r\n\t\twhile (c.charAt(0) === ' ')\r\n\t\t\tc = c.substring(1);\r\n\t\tif (c.indexOf(name) === 0)\r\n\t\t\treturn c.substring(name.length, c.length);\r\n\t}\r\n\treturn \"\";\r\n}","import React, { Component } from \"react\";\r\nimport Button from '@material-ui/core/Button';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport theme from '../lib/MuiTheme';\r\nimport { toggleMenu } from '../store/actions';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nclass Login extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tcomponentWillMount() {\r\n\t\tthis.generateEmail.bind(this)();\r\n\t\tthis.interval = setInterval(this.generateEmail.bind(this), 1500);\r\n\t}\r\n\r\n\tgenerateEmail() {\r\n\t\tlet school = this.state.school;\r\n\t\tlet schoolShort = this.state.schoolShort;\r\n\t\tlet studentNumber = this.state.studentNumber;\r\n\t\tswitch (Math.floor(Math.random() * 14)) {\r\n\t\t\tcase 0:\r\n\t\t\t\tschool = \"beekdallyceum\";\r\n\t\t\t\tschoolShort = \"BD\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tschool = \"candea\";\r\n\t\t\t\tschoolShort = \"CC\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tschool = \"quadraam\";\r\n\t\t\t\tschoolShort = \"CB\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tschool = \"lyceumelst\";\r\n\t\t\t\tschoolShort = \"LE\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 4:\r\n\t\t\t\tschool = \"liemerscollege\";\r\n\t\t\t\tschoolShort = \"LC\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 5:\r\n\t\t\t\tschool = \"lorentzlyceum\";\r\n\t\t\t\tschoolShort = \"LL\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 6:\r\n\t\t\t\tschool = \"maartenvanrossem\";\r\n\t\t\t\tschoolShort = \"MvR\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 7:\r\n\t\t\t\tschool = \"montessoriarnhem\";\r\n\t\t\t\tschoolShort = \"MC\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 8:\r\n\t\t\t\tschool = \"olympuscollege\";\r\n\t\t\t\tschoolShort = \"OC\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 9:\r\n\t\t\t\tschool = \"produsarnhem\";\r\n\t\t\t\tschoolShort = \"PD\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 10:\r\n\t\t\t\tschool = \"gymnasiumarnhem\";\r\n\t\t\t\tschoolShort = \"SGA\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 11:\r\n\t\t\t\tschool = \"symbion\";\r\n\t\t\t\tschoolShort = \"SY\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 12:\r\n\t\t\t\tschool = \"vmbo-venster\";\r\n\t\t\t\tschoolShort = \"VE\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 13:\r\n\t\t\tdefault:\r\n\t\t\t\tschool = \"hetwesteraam\";\r\n\t\t\t\tschoolShort = \"HW\";\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tstudentNumber = Math.floor(Math.random() * 999999) + \"\";\r\n\t\tfor (let i = studentNumber.length; i < 6; i++) {\r\n\t\t\tstudentNumber = \"0\" + studentNumber;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tschool,\r\n\t\t\tschoolShort,\r\n\t\t\tstudentNumber,\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearInterval(this.interval);\r\n\t}\r\n\r\n\tlogin() {\r\n\t\tif (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\r\n\t\t\tdocument.location.href = \"http://localhost:26194/auth/login\"\r\n\t\t} else {\r\n\t\t\tdocument.location.href = \"/auth/login\"\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateColoredEmail(schoolShort, studentNumber, school) {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Typography variant=\"subheading\" style={{ fontFamily: \"'Courier New', Courier, monospace\", overflow:\"hidden\"}}>\r\n\t\t\t\t\t<span style={{ color: theme.palette.secondary.light, fontWeight: \"bold\" }}>\r\n\t\t\t\t\t\t{schoolShort}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<span style={{ color: theme.palette.secondary.dark, fontWeight: \"bolder\" }}>\r\n\t\t\t\t\t\t{studentNumber}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<span style={{ fontWeight: \"bold\" }}>\r\n\t\t\t\t\t\t@ll.\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<span style={{ color: theme.palette.secondary.light, fontWeight: \"bold\" }}>\r\n\t\t\t\t\t\t{school}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<span style={{ fontWeight: \"bold\" }}>\r\n\t\t\t\t\t\t.nl\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</Typography>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.userId != null) {\r\n\t\t\tthis.props.history.push(\"/\");\r\n\t\t\tthis.props.toggleMenu(true);\r\n\t\t} else {\r\n\t\t\tthis.props.toggleMenu(false);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Paper elevation={8} className=\"Login\">\r\n\t\t\t\t<div style={{ padding: \"20px\" }}>\r\n\t\t\t\t\t<Typography gutterBottom variant=\"headline\" color=\"primary\">\r\n\t\t\t\t\t\tLog in\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t<Typography variant=\"subheading\">\r\n\t\t\t\t\t\tGebruik je school-email om in te loggen:\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<center>\r\n\t\t\t\t\t\t{this.generateColoredEmail(\"schoolafkorting\", \"leerlingnummer\", \"school\")}\r\n\t\t\t\t\t\t{this.generateColoredEmail(this.state.schoolShort, this.state.studentNumber, this.state.school)}\r\n\t\t\t\t\t</center>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<Button type=\"submit\" variant=\"contained\" size=\"large\" color=\"primary\" fullWidth onClick={this.login}>\r\n\t\t\t\t\t\tLogin met je Microsoft school account\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</Paper >\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tuserId: state.userId,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tlogin: (email, password) => {\r\n\t\t\tdispatch(toggleMenu(true));\r\n\t\t},\r\n\t\ttoggleMenu: (state) => {\r\n\t\t\tdispatch(toggleMenu(state));\r\n\t\t},\r\n\t};\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Login));\r\n\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nclass Page extends Component {\r\n\r\n\trender() {\r\n\t\tlet className = \"\";\r\n\t\tif (this.props.showMenu) {\r\n\t\t\tclassName += \"menuShown\"\r\n\t\t} else {\r\n\t\t\tclassName += \"menuHidden\"\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div className={\"Page \" + className}>\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tshowMenu: state.showMenu,\r\n\t};\r\n}\r\n\r\nexport default connect(mapStateToProps)(Page);\r\n","import React, { Component } from 'react';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nclass Progress extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tisShowing: false,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.timeout = setTimeout(() => this.setState({ isShowing: true }), 200);\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearTimeout(this.timeout);\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.state.isShowing) {\r\n\t\t\treturn (\r\n\t\t\t\t<CircularProgress {...this.props}/>\r\n\t\t\t);\r\n\t\t}else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport default Progress;","import React, { Component } from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport Clear from '@material-ui/icons/Clear';\r\n\r\nclass EnrollmentPopup extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tif (nextProps.hasChosen) {\r\n\t\t\treturn { page: \"cancel\", ...prevState };\r\n\t\t}\r\n\t\tif (nextProps.hasChosenDay) {\r\n\t\t\treturn { page: \"hasChosenDay\", ...prevState };\r\n\t\t}\r\n\t\tif (nextProps.group.remarks != null && nextProps.group.remarks.length > 1) {\r\n\t\t\treturn { page: \"remarks\", ...prevState };\r\n\t\t}\r\n\t\treturn { page: \"confirm\", ...prevState };\r\n\t}\r\n\r\n\tgetDuplicatePage() {\r\n\t\treturn (\r\n\t\t\t<Dialog open keepMounted >\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<DialogContentText>\r\n\t\t\t\t\t\t<Typography color=\"error\" style={{ fontSize: \"16px\" }}>\r\n\t\t\t\t\t\t\t{\"Je hebt al een module gekozen voor \" + this.props.group.day + \"!\"}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\tSchrijf je eerst uit voor de module\r\n\t\t\t\t\t\t<Typography color=\"primary\" variant=\"title\" style={{ fontSize: \"16px\", display: \"inline-block\", margin: \"5px\" }}>\r\n\t\t\t\t\t\t\t{this.props.chosenDayGroupName}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\tom je in te kunnen schrijven\r\n\t\t\t\t\t</DialogContentText>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button color=\"primary\" variant=\"contained\">\r\n\t\t\t\t\t\tSluiten\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t);\r\n\t}\r\n\r\n\tgetCancelPage() {\r\n\t\treturn (\r\n\t\t\t<Dialog open keepMounted >\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\tUitschrijven\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<DialogContentText>\r\n\t\t\t\t\t\tWeet je zeker dat je wilt uitschrijven voor de module\r\n\t\t\t\t\t\t<Typography color=\"primary\" variant=\"title\" style={{ fontSize: \"16px\", display: \"inline\", margin: \"5px\" }}>\r\n\t\t\t\t\t\t\t{this.props.group.courseName}\r\n\t\t\t\t\t\t</Typography> ?\r\n\t\t\t\t\t</DialogContentText>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button color=\"default\">\r\n\t\t\t\t\t\tAnnuleren\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button name=\"test\" onClick={() => this.props.handlePopup(true)} color=\"primary\">\r\n\t\t\t\t\t\tUitschrijven\r\n\t\t\t\t\t\t<Clear />\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t);\r\n\t}\r\n\r\n\tgetConfirmPage() {\r\n\t\treturn (\r\n\t\t\t<Dialog open keepMounted >\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\tInschrijven\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<DialogContentText>\r\n\t\t\t\t\t\tWeet je zeker dat je wilt inschrijven voor de module\r\n\t\t\t\t\t\t<Typography color=\"primary\" variant=\"title\" style={{ fontSize: \"16px\", display: \"inline\", margin: \"5px\" }}>\r\n\t\t\t\t\t\t\t{this.props.group.courseName}\r\n\t\t\t\t\t\t</Typography> ?\r\n\t\t\t\t\t</DialogContentText>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button color=\"default\">\r\n\t\t\t\t\t\tAnnuleren\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button name=\"test\" onClick={() => this.props.handlePopup(true)} variant=\"contained\" color=\"primary\">\r\n\t\t\t\t\t\tInschrijven\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t);\r\n\t}\r\n\r\n\tgetRemarkPage() {\r\n\t\treturn (\r\n\t\t\t<Dialog open keepMounted >\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\tOpmerkingen\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t{this.props.group.remarks}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button color=\"default\">\r\n\t\t\t\t\t\tAnnuleren\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={() => {\r\n\t\t\t\t\t\tthis.props.preventPopupClose(true);\r\n\t\t\t\t\t\tthis.setState({ page: \"confirm\" })\r\n\t\t\t\t\t}} color=\"primary\">\r\n\t\t\t\t\t\tVerder\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tthis.props.preventPopupClose(false);\r\n\t\tswitch (this.state.page) {\r\n\t\t\tcase \"remarks\":\r\n\t\t\t\treturn this.getRemarkPage();\r\n\t\t\tcase \"cancel\":\r\n\t\t\t\treturn this.getCancelPage();\r\n\t\t\tcase \"hasChosenDay\":\r\n\t\t\t\treturn this.getDuplicatePage();\r\n\t\t\tcase \"confirm\":\r\n\t\t\tdefault:\r\n\t\t\t\treturn this.getConfirmPage();\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nexport default EnrollmentPopup;\r\n\r\n","import React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Clear from '@material-ui/icons/Clear';\r\nimport { connect } from 'react-redux';\r\nimport { toggleEnrollment, getEnrollableGroups, getEnrolLments } from '../../store/actions';\r\nimport Progress from '../../components/Progress';\r\nimport EnrollmentPopup from './EnrollmentPopup';\r\n\r\nclass ChooseButton extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.props.getEnrollableGroups();\r\n\t\tthis.props.getEnrolLments();\r\n\t\tthis.state = {\r\n\t\t\tdialogOpen: false,\r\n\t\t}\r\n\t}\r\n\r\n\tpreventPopupClose(preventClose) {\r\n\t\tthis.preventClose = preventClose;\r\n\t}\r\n\r\n\thandlePopup(doEnroll) {\r\n\t\tif (doEnroll) {\r\n\t\t\tthis.props.toggleEnrollment(this.props.group);\r\n\t\t}\r\n\t\tif (!this.preventClose) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tdialogOpen: !this.state.dialogOpen,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst props = this.props;\r\n\t\tlet dialog = this.state.dialogOpen ?\r\n\t\t\t<EnrollmentPopup\r\n\t\t\t\tgroup={props.group}\r\n\t\t\t\thasChosen={props.hasChosen}\r\n\t\t\t\thandlePopup={this.handlePopup.bind(this)}\r\n\t\t\t\thasChosenDay={props.hasChosenDay}\r\n\t\t\t\tchosenDayGroupName={props.chosenDayGroupName}\r\n\t\t\t\tpreventPopupClose={this.preventPopupClose.bind(this)}\r\n\t\t\t/> : null;\r\n\r\n\t\tif (props.loading) {\r\n\t\t\treturn (\r\n\t\t\t\t<Progress size={30} />\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tif (props.hasChosen) {\r\n\t\t\treturn (\r\n\t\t\t\t<Button color=\"primary\" onClick={() => this.handlePopup(false)} style={props.style}>\r\n\t\t\t\t\t{\"Ingeschreven\"}\r\n\t\t\t\t\t<Clear />\r\n\t\t\t\t\t{dialog}\r\n\t\t\t\t</Button>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (this.props.canChoose) {\r\n\t\t\treturn (\r\n\t\t\t\t<Button color=\"primary\" variant=\"contained\" onClick={() => this.handlePopup(false)} style={this.props.style}>\r\n\t\t\t\t\t{\"Inschrijven\" + (this.props.hasChosenDay ? \"*\" : \"\")}\r\n\t\t\t\t\t{dialog}\r\n\t\t\t\t</Button>\r\n\t\t\t);\r\n\t\t} else if (props.group.period < this.props.currentPeriod){\r\n\t\t\treturn (\r\n\t\t\t\t<Button disabled color=\"primary\" style={props.style}>\r\n\t\t\t\t\tInschrijfperiode verlopen\r\n\t\t\t\t\t{dialog}\r\n\t\t\t\t</Button>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<Button disabled color=\"primary\" style={props.style}>\r\n\t\t\t\t\tComing Soon\r\n\t\t\t\t\t{dialog}\r\n\t\t\t\t</Button>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n\tif (state.users[state.userId].enrollmentIds == null || state.enrollableGroups == null) {\r\n\t\treturn {\r\n\t\t\tloading: true,\r\n\t\t}\r\n\t}\r\n\r\n\tlet chosenDayGroupName = -1;\r\n\tstate.users[state.userId].enrollmentIds.forEach(groupId => {\r\n\t\tconst group = state.groups[groupId];\r\n\t\tif (group.day === ownProps.group.day && group.period === ownProps.group.period) {\r\n\t\t\tchosenDayGroupName = group.courseName;\r\n\t\t}\r\n\t});\r\n\r\n\treturn {\r\n\t\tcanChoose: state.enrollableGroups.map(e => e.id).indexOf(ownProps.group.id) !== -1,\r\n\t\thasChosen: state.users[state.userId].enrollmentIds.indexOf(ownProps.group.id) !== -1,\r\n\t\thasChosenDay: chosenDayGroupName !== -1,\r\n\t\tchosenDayGroupName,\r\n\t\tcurrentPeriod: state.currentPeriod,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\ttoggleEnrollment: (group) => dispatch(toggleEnrollment(group)),\r\n\t\tgetEnrollableGroups: () => dispatch(getEnrollableGroups()),\r\n\t\tgetEnrolLments: () => dispatch(getEnrolLments()),\r\n\t};\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ChooseButton);\r\n","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router';\r\n\r\nimport Paper from '@material-ui/core/Paper';\r\nimport {Typography} from '@material-ui/core';\r\n\r\nclass GroupCard extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\thover: false,\r\n\t\t\tstyle: {\r\n\t\t\t\twidth: \"100%\",\r\n\t\t\t\theight: \"auto\",\r\n\t\t\t\tmargin: \"0px\",\r\n\t\t\t\tpadding: \"10px\",\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n\r\n\tformatPhoneNumber(number) {\r\n\t\tif (number == null) {\r\n\t\t\tnumber = \"\";\r\n\t\t}\r\n\t\tlet numberWithoutCharacters = number.replace(/\\D/g, '');\r\n\t\tif (numberWithoutCharacters.length === 10) { // Either 06... or regional i.e. 024 ...\r\n\t\t\tif (numberWithoutCharacters[1] === \"6\") { // 06...\r\n\t\t\t\treturn (numberWithoutCharacters.substr(0, 2) + \" \" + numberWithoutCharacters.substr(2, 8));\r\n\t\t\t} else { // 024 ...\r\n\t\t\t\treturn (numberWithoutCharacters.substr(0, 3) + \" \" + numberWithoutCharacters.substr(3, 7));\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst mobileTest = /(0031|31)0?(6)?([0-9]+)$/gm;\r\n\t\tconst match = mobileTest.exec(numberWithoutCharacters);\r\n\t\tif (match) {\r\n\t\t\tif (match[2]) { // +31 06 \r\n\t\t\t\treturn \"+31 06 \" + match[3];\r\n\t\t\t} else { // +31 ...\r\n\t\t\t\treturn \"+31 \" + match[3];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn number; // return input if unrecognizable \r\n\t\t}\r\n\t}\r\n\r\n\texpand() {\r\n\t\tthis.props.history.push(\"/user/\" + this.props.user.id)\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet user = { ...this.props.user };\r\n\t\tlet style = { ...this.state.style };\r\n\t\treturn (\r\n\t\t\t<tr>\r\n\t\t\t\t<Paper\r\n\t\t\t\t\televation={this.state.hover ? 2 : 1}\r\n\t\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\r\n\t\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\r\n\t\t\t\t\tcomponent=\"td\"\r\n\t\t\t\t\tstyle={style}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\tjustifyContent: \"space-between\"\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<Typography variant=\"title\" color={user.role === \"teacher\" ? \"secondary\" : \"primary\"} style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t{user.firstName + \" \" + user.lastName}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Typography variant=\"subheading\" style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t{user.school}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t{user.level + \" - \" + user.year}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t{user.role === \"teacher\" ? \"docent\" : \"leerling\"}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t{user.profile}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{this.props.role === \"admin\" &&\r\n\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\tjustifyContent: \"space-between\"\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t\t{user.email}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t\t{user.preferedEmail}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<div style={{ flex: 1 }} />\r\n\t\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t\t{this.formatPhoneNumber(user.phoneNumber)}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t\t{user.id}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t</Paper >\r\n\t\t\t</tr>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nexport default withRouter(GroupCard);\r\n\r\n","import React, { Component } from 'react';\r\nimport Page from '../Page';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Button from '@material-ui/core/Button';\r\nimport { connect } from 'react-redux';\r\nimport { setUser } from '../../store/actions';\r\nimport Field from '../../components/Field';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nconst profiles = [\"NT\", \"NG\", \"CM\", \"EM\", \"NT&NG\", \"EM&CM\"];\r\nconst levels = [\"VWO\", \"HAVO\"];\r\n\r\nclass UserPage extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tuser: this.props.user,\r\n\t\t};\r\n\t}\r\n\r\n\thandleChange(event) {\r\n\t\tthis.setState({\r\n\t\t\tuser: {\r\n\t\t\t\t...this.state.user,\r\n\t\t\t\t[event.name]: event.target.value,\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\thasChanged() {\r\n\t\treturn JSON.stringify(this.props.user) !== JSON.stringify(this.state.user)\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet user = null;\r\n\t\tif (this.props.user.id !== this.state.user.id) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tuser: this.props.user,\r\n\t\t\t});\r\n\t\t\tuser = this.props.user;\r\n\t\t} else {\r\n\t\t\tuser = this.state.user;\r\n\t\t}\r\n\t\tlet shouldFillIn = this.props.ownProfile && (\r\n\t\t\tthis.props.user.profile == null ||\r\n\t\t\tthis.props.user.profile === \"\" ||\r\n\t\t\tthis.props.user.year === null ||\r\n\t\t\tthis.props.user.year === \"\" ||\r\n\t\t\tthis.props.user.level === null ||\r\n\t\t\tthis.props.user.level === \"\" ||\r\n\t\t\tthis.props.user.phoneNumber === null ||\r\n\t\t\tthis.props.user.phoneNumber === \"\" ||\r\n\t\t\tthis.props.user.preferedEmail == null ||\r\n\t\t\tthis.props.user.preferedEmail === \"\") ? true : null;\r\n\t\treturn (\r\n\t\t\t<Page>\r\n\t\t\t\t<Field\r\n\t\t\t\t\tlabel=\"Naam\"\r\n\t\t\t\t\tvalue={user.displayName}\r\n\t\t\t\t\tstyle={{ type: \"headline\" }}\r\n\t\t\t\t/>\r\n\t\t\t\t<Field\r\n\t\t\t\t\tlabel=\"Rol\"\r\n\t\t\t\t\tlayout={{ alignment: \"right\" }}\r\n\t\t\t\t\tvalue={user.role}\r\n\t\t\t\t/>\r\n\t\t\t\t<Divider />\r\n\t\t\t\t<br />\r\n\t\t\t\t<div style={{ display: \"flex\" }} >\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tlabel=\"Leerjaar\"\r\n\t\t\t\t\t\tvalue={user.year}\r\n\t\t\t\t\t\tname=\"year\"\r\n\t\t\t\t\t\tstyle={{ margin: \"normal\" }}\r\n\t\t\t\t\t\teditable={this.props.ownProfile}\r\n\t\t\t\t\t\tonChange={this.handleChange.bind(this)}\r\n\t\t\t\t\t\tvalidate={{\r\n\t\t\t\t\t\t\ttype: \"integer\",\r\n\t\t\t\t\t\t\tmin: 1,\r\n\t\t\t\t\t\t\tmax: 6,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tlabel=\"Opleidingsniveau\"\r\n\t\t\t\t\t\tvalue={user.level}\r\n\t\t\t\t\t\tname=\"level\"\r\n\t\t\t\t\t\teditable={this.props.ownProfile}\r\n\t\t\t\t\t\tonChange={this.handleChange.bind(this)}\r\n\t\t\t\t\t\toptions={levels}\r\n\t\t\t\t\t\tvalidate={{ notEmpty: true, }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{this.props.ownProfile &&\r\n\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\tlabel=\"Profiel\"\r\n\t\t\t\t\t\t\tname=\"profile\"\r\n\t\t\t\t\t\t\tvalue={user.profile}\r\n\t\t\t\t\t\t\teditable={this.props.ownProfile}\r\n\t\t\t\t\t\t\toptions={profiles}\r\n\t\t\t\t\t\t\tonChange={this.handleChange.bind(this)}\r\n\t\t\t\t\t\t\tvalidate={{ notEmpty: true }}\r\n\t\t\t\t\t\t/>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ display: \"flex\" }} >\r\n\t\t\t\t\t{this.props.ownProfile && <Field\r\n\t\t\t\t\t\tlabel=\"Voorkeurs email\"\r\n\t\t\t\t\t\tname=\"preferedEmail\"\r\n\t\t\t\t\t\tvalue={user.preferedEmail}\r\n\t\t\t\t\t\teditable={this.props.ownProfile}\r\n\t\t\t\t\t\tonChange={this.handleChange.bind(this)}\r\n\t\t\t\t\t\tvalidate={{ type: \"email\" }}\r\n\t\t\t\t\t/>}\r\n\t\t\t\t\t{this.props.ownProfile && <Field\r\n\t\t\t\t\t\tlabel=\"Telefoonnummer\"\r\n\t\t\t\t\t\tname=\"phoneNumber\"\r\n\t\t\t\t\t\tvalue={user.phoneNumber}\r\n\t\t\t\t\t\teditable={this.props.ownProfile}\r\n\t\t\t\t\t\tonChange={this.handleChange.bind(this)}\r\n\t\t\t\t\t\tvalidate={{ type: \"phoneNumber\" }}\r\n\t\t\t\t\t/>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<br />\r\n\t\t\t\t{\r\n\t\t\t\t\tshouldFillIn &&\r\n\t\t\t\t\t<Typography gutterBottom variant=\"title\" color=\"primary\" >\r\n\t\t\t\t\t\tControleer de bovenstaande gegevens en vul de ontbrekende gegevens aan.\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.hasChanged() ?\r\n\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" size=\"large\" onClick={() => this.props.save(this.state.user)}>\r\n\t\t\t\t\t\t\tOpslaan\r\n\t\t\t\t\t\t</Button> : null\r\n\t\t\t\t}\r\n\t\t\t</Page >\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tsave: (user) => dispatch(setUser(user)),\r\n\t};\r\n}\r\n\r\n\r\nexport default connect(null, mapDispatchToProps)(UserPage);\r\n\r\n","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router';\r\n\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nconst CARD_STYLE = {\r\n\twidth: \"300px\",\r\n\theight: \"80px\",\r\n\tpadding: \"20px\",\r\n\tverticalAlign: \"top\",\r\n\tmargin: \"20px\",\r\n\tdisplay: \"inline-block\",\r\n\tcursor: \"pointer\",\r\n}\r\n\r\nclass GroupCard extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\thover: false,\r\n\t\t\tstyle: {\r\n\t\t\t\t...CARD_STYLE,\r\n\t\t\t\t...this.props.style,\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\texpand() {\r\n\t\tthis.props.history.push(\"/gebruiker/\" + this.props.user.id)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst user = this.props.user;\r\n\t\treturn (\r\n\t\t\t<Paper\r\n\t\t\t\televation={this.state.hover ? 4 : 2}\r\n\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\r\n\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\r\n\t\t\t\tstyle={this.state.style}\r\n\t\t\t>\r\n\t\t\t\t<Typography variant=\"title\" color={user.role === \"teacher\"?\"secondary\":\"primary\"} >\r\n\t\t\t\t\t{user.firstName + \" \" + user.lastName}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<Typography variant=\"subheading\">\r\n\t\t\t\t\t{(user.role===\"teacher\"?\"docent\":\"leerling\") + \"\\t\" + user.school}\r\n\t\t\t\t</Typography>\r\n\t\t\t</Paper >\r\n\t\t);\r\n\t}\r\n\r\n\r\n}\r\n\r\n\r\nexport default withRouter(GroupCard);\r\n\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport UserRow from \"./UserRow\";\r\nimport UserPage from \"./UserPage\";\r\nimport UserCard from \"./UserCard\";\r\nimport { setSecureLogin } from \"../../store/actions\"\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport Progress from '../../components/Progress'\r\nimport Field from \"../../components/Field\"\r\nimport queryString from \"query-string\";\r\n\r\nclass User extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tlet s = queryString.parse(nextProps.location.search);\r\n\t\tif (s.secureLogin != null) {\r\n\t\t\tnextProps.setSecureLogin(s.secureLogin);\r\n\t\t}\r\n\t\t// if (s.from === \"login\" && nextProps.user != null && (nextProps.user.year != null || nextProps.role !== \"student\")) {\r\n\t\t// \tconst beforeLoginPath = getCookie(\"beforeLoginPath\");\r\n\t\t// \tnextProps.history.push(beforeLoginPath);\r\n\t\t// }\r\n\t\treturn prevState;\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.user == null ) {\r\n\t\t\tif (this.props.display === \"page\") {\r\n\t\t\t\tif (this.props.notExists) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className=\"page\">\r\n\t\t\t\t\t\t\tDe opgevraagde gebruiker bestaat niet\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className=\"page\">\r\n\t\t\t\t\t\t\t<Progress />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (this.props.notExists) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn <Progress />;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tswitch (this.props.display) {\r\n\t\t\tcase \"name\":\r\n\t\t\t\treturn <Field value={this.props.user.displayName} style={{ type: \"title\" }} layout={{ td: true }} />;\r\n\t\t\tcase \"page\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<UserPage {...this.props} />\r\n\t\t\t\t);\r\n\t\t\tcase \"row\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<UserRow {...this.props} />\r\n\t\t\t\t);\r\n\t\t\tcase \"card\":\r\n\t\t\tdefault:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<UserCard {...this.props} />\r\n\t\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n\tlet id = ownProps.match.params.userId || ownProps.userId;\r\n\tlet display = ownProps.display || \"page\";\r\n\r\n\tlet notExists = false;\r\n\tlet user = null;\r\n\r\n\tif (id == null) {\r\n\t\tid = state.userId;\r\n\t}\r\n\r\n\tif (state.users == null || state.users[id] == null) {\r\n\t\tif (id == null || state.hasFetched.indexOf(\"User.get(\" + id + \")\") !== -1) {\r\n\t\t\tnotExists = true;\r\n\t\t}\r\n\t} else {\r\n\t\tuser = state.users[id];\r\n\t}\r\n\r\n\treturn {\r\n\t\trole: state.role,\r\n\t\tuser,\r\n\t\tnotExists,\r\n\t\tdisplay,\r\n\t\tuserId: id,\r\n\t\townProfile: (\"\" + id) === (\"\" + state.userId),\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tsetSecureLogin: (secureLogin) => dispatch(setSecureLogin(secureLogin)),\r\n\t};\r\n}\r\n\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(User));\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Button from '@material-ui/core/Button';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { setCookie } from \"../store/actions\"\r\nimport Field from \"../components/Field\"\r\n\r\nclass EnsureSecureLogin extends Component {\r\n\r\n\trender() {\r\n\t\tif (!(this.props.active === false) && this.props.secureLogin == null) {\r\n\t\t\treturn <Paper style={{ padding: \"20px\", marginTop: \"25px\" }}>\r\n\t\t\t\t<Field value=\"Log opnieuw in om toegang te krijgen\" layout={{ area: true }} />\r\n\t\t\t\t<Button color=\"primary\" variant=\"contained\" onClick={() => {\r\n\t\t\t\t\tsetCookie(\"beforeLoginPath\", window.location.pathname + window.location.search, 24);\r\n\t\t\t\t\tif (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\r\n\t\t\t\t\t\tdocument.location.href = \"http://localhost:26194/auth/login?secure=true\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdocument.location.href = \"/auth/login?secure=true\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}}>\r\n\t\t\t\t\tInloggen\r\n\t\t\t\t</Button>\r\n\t\t\t</Paper>\r\n\t\t} else {\r\n\t\t\treturn this.props.children;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tsecureLogin: state.secureLogin,\r\n\t};\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(EnsureSecureLogin);\r\n\r\n\r\n\r\n","import React, { Component } from 'react';\r\n\r\nimport Field from '../../components/Field';\r\nimport User from '../user/User';\r\nimport EnsureSecureLogin from '../../components/EnsureSecureLogin';\r\nimport { Tooltip, TableSortLabel, Typography,Paper } from '@material-ui/core';\r\n\r\nconst EVALUATION_FORMATS = [{\r\n\tlabel: \"vink\",\r\n\tvalue: \"check\",\r\n\toptions: [{\r\n\t\tlabel: \"Gehaald\",\r\n\t\tvalue: \"passed\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Niet gehaald\",\r\n\t\tvalue: \"failed\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Niet deelgenomen\",\r\n\t\tvalue: \"ND\",\r\n\t}],\r\n},\r\n{\r\n\tlabel: \"trapsgewijs\",\r\n\tvalue: \"stepwise\",\r\n\toptions: [{\r\n\t\tlabel: \"Onvoldoende\",\r\n\t\tvalue: \"O\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Voldoende\",\r\n\t\tvalue: \"V\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Goed\",\r\n\t\tvalue: \"G\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Niet deelgenomen\",\r\n\t\tvalue: \"ND\",\r\n\t}],\r\n}, {\r\n\tlabel: \"cijfer\",\r\n\tvalue: \"decimal\",\r\n\toptions: \"decimal\",\r\n}];\r\n\r\nfunction getEvaluationColor(ev) {\r\n\tif (ev.assesment === \"ND\" || ev.assesment == null) {\r\n\t\treturn \"#673ab7\";\r\n\t}\r\n\tswitch (ev.type) {\r\n\t\tcase \"stepwise\":\r\n\t\t\treturn \"#3f51b5\";\r\n\t\tcase \"check\":\r\n\t\t\treturn \"#009688\";\r\n\t\tcase \"decimal\":\r\n\t\t\treturn \"#00bcd4\"\r\n\t\tdefault:\r\n\t\t\treturn \"#673ab7\";\r\n\t}\r\n}\r\n\r\nclass Evaluation extends Component {\r\n\r\n\trender() {\r\n\t\tconst e = this.props.evaluation;\r\n\t\tlet style = {\r\n\t\t\tunderline: false,\r\n\t\t\tflex: 1,\r\n\t\t};\r\n\t\tlet layout = { td: true };\r\n\t\tif (this.props.student) {\r\n\t\t\tstyle.type = \"headline\";\r\n\t\t\tstyle.color = \"primaryContrast\"\r\n\t\t\tlayout.td = false;\r\n\t\t\tlayout.alignment = \"right\";\r\n\t\t}\r\n\t\tif (e.type === \"decimal\") {\r\n\t\t\treturn <Field\r\n\t\t\t\tstyle={style}\r\n\t\t\t\tvalidate={{ min: 1, max: 10, type: \"decimalGrade\", notEmpty: true }}\r\n\t\t\t\tlayout={layout}\r\n\t\t\t\tlabel=\"Beoordeling\"\r\n\t\t\t\tname={e.userId}\r\n\t\t\t\tvalue={e.assesment ? e.assesment : \"\"}\r\n\t\t\t\teditable={this.props.editable}\r\n\t\t\t\tonChange={this.props.handleChange}\r\n\t\t\t/>\r\n\t\t} else {\r\n\t\t\treturn <Field\r\n\t\t\t\tstyle={style}\r\n\t\t\t\tname={e.userId}\r\n\t\t\t\tlabel=\"Beoordeling\"\r\n\t\t\t\tlayout={layout}\r\n\t\t\t\tvalue={e.assesment ? e.assesment : \"\"}\r\n\t\t\t\toptions={EVALUATION_FORMATS.filter(f => f.value === e.type)[0].options}\r\n\t\t\t\teditable={this.props.editable}\r\n\t\t\t\tonChange={this.props.handleChange}\r\n\t\t\t/>\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n\r\nclass EvaluationTab extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tsortValue: \"\",\r\n\t\t\tsortDirection: \"\",\r\n\t\t}\r\n\t}\r\n\r\n\tonSortChange = (value) => {\r\n\t\tthis.setState({\r\n\t\t\tsortValue: value,\r\n\t\t\tsortDirection: this.state.sortDirection === \"desc\" && this.state.sortValue === value ? \"asc\" : \"desc\"\r\n\t\t});\r\n\t}\r\n\r\n\thandleEvaluationChange(event) {\r\n\t\tlet newEvaluations = this.props.evaluations.map((e) => {\r\n\t\t\tif (e.userId === event.name) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...e,\r\n\t\t\t\t\tassesment: event.target.value,\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn { ...e }\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.props.handleChange(newEvaluations);\r\n\t}\r\n\r\n\r\n\thandleExplanationChange(event) {\r\n\t\tlet newEvaluations = this.props.evaluations.map((e) => {\r\n\t\t\tif (e.userId === event.name) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...e,\r\n\t\t\t\t\texplanation: event.target.value,\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn { ...e }\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.props.handleChange(newEvaluations);\r\n\r\n\t}\r\n\r\n\thandleEvaluationTypeChange(event) {\r\n\t\tlet newEvaluations = [];\r\n\t\tfor (let i = 0; i < this.props.evaluations.length; i++) {\r\n\t\t\tnewEvaluations.push({\r\n\t\t\t\t...this.props.evaluations[i],\r\n\t\t\t\ttype: event.target.value,\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.props.handleChange(newEvaluations);\r\n\t}\r\n\r\n\tgetExplanationField(e, editable) {\r\n\t\treturn <Field\r\n\t\t\tstyle={{ underline: false, flex: 5 }}\r\n\t\t\tlayout={{ area: true, td: true }}\r\n\t\t\tlabel={\"Uitleg\"}\r\n\t\t\tname={e.userId}\r\n\t\t\tvalue={e.explanation}\r\n\t\t\teditable={editable}\r\n\t\t\tonChange={this.handleExplanationChange.bind(this)}\r\n\t\t/>\r\n\t}\r\n\r\n\tsortEvaluations = () => {\r\n\t\tlet evaluations = this.props.evaluations;\r\n\t\tconst sortValue = this.state.sortValue;\r\n\t\tconst users = this.props.users;\r\n\t\tlet sortDirection = this.state.sortDirection === \"asc\" ? \"asc\" : \"desc\";\r\n\t\tif (sortValue === \"name\") {\r\n\t\t\tevaluations.sort((a, b) => {\r\n\t\t\t\ta = (users[a[\"userId\"]][\"displayName\"]).toLowerCase();\r\n\t\t\t\tb = (users[b[\"userId\"]][\"displayName\"]).toLowerCase();\r\n\t\t\t\tlet cmp = (b == null) - (a == null) || +(a > b) || -(a < b);\r\n\t\t\t\treturn sortDirection === \"asc\" ? cmp : -cmp;\r\n\t\t\t})\r\n\t\t} else if (sortValue === \"evaluations\") {\r\n\t\t\tevaluations.sort((a, b) => {\r\n\t\t\t\ta = a[\"assesment\"];\r\n\t\t\t\tb = b[\"assesment\"];\r\n\t\t\t\tlet cmp = (b === null) - (a == null) || +(a > b) || -(a < b);\r\n\t\t\t\treturn sortDirection === \"asc\" ? cmp : -cmp;\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn evaluations;\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet sortValue = this.props.sortValue;\r\n\t\tlet sortDirection = this.props.sortDirection === \"asc\" ? \"asc\" : \"desc\";\r\n\t\tconst style = {\r\n\t\t\tmarginTop: \"10px\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tpaddingRight: \"15px\",\r\n\t\t\tpaddingLeft: \"15px\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t};\r\n\t\tconst evaluations = this.props.evaluations;\r\n\t\tif (evaluations.length === 0) {\r\n\t\t\treturn \"Er zijn nog geen beoordelingen beschikbaar\";\r\n\t\t}\r\n\t\tconst evComps = this.sortEvaluations()\r\n\t\t\t.map(evaluation => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Paper style={style} key={evaluation.userId} component=\"tr\">\r\n\t\t\t\t\t\t<User display=\"name\" userId={evaluation.userId} />\r\n\t\t\t\t\t\t<Evaluation editable={this.props.editable} evaluation={evaluation} handleChange={this.handleEvaluationChange.bind(this)} />\r\n\t\t\t\t\t\t{this.getExplanationField(evaluation, this.props.editable)}\r\n\t\t\t\t\t</Paper >\r\n\t\t\t\t);\r\n\t\t\t});\r\n\r\n\t\treturn (\r\n\t\t\t<EnsureSecureLogin active={this.props.editable}>\r\n\t\t\t\t<table style={{ width: \"100%\" }}>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t<Paper style={{ ...style, backgroundColor: \"#e0e0e0\" }} component=\"tr\">\r\n\t\t\t\t\t\t\t<td style={{ paddingLeft: \"15px\" }}>\r\n\t\t\t\t\t\t\t\t<Typography type=\"title\" color=\"primary\" style={{ padding: \"5px 0\" }} >\r\n\t\t\t\t\t\t\t\t\t<Tooltip title=\"Sorteer\" enterDelay={300} placement=\"bottom-start\">\r\n\t\t\t\t\t\t\t\t\t\t<TableSortLabel\r\n\t\t\t\t\t\t\t\t\t\t\tactive={sortValue === \"evaluations\"}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.onSortChange(\"evaluations\")}\r\n\t\t\t\t\t\t\t\t\t\t\tdirection={sortDirection}\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ color: \"inherit\", fontSize: \"1.5rem\", }}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tBeoordelingen\r\n\t\t\t\t\t\t\t\t\t</TableSortLabel>\r\n\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Tooltip title=\"Sorteer\" enterDelay={300} placement=\"bottom-start\">\r\n\t\t\t\t\t\t\t\t\t\t<TableSortLabel\r\n\t\t\t\t\t\t\t\t\t\t\tactive={sortValue === \"name\"}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.onSortChange(\"name\")}\r\n\t\t\t\t\t\t\t\t\t\t\tdirection={sortDirection}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tNaam\r\n\t\t\t\t\t\t\t\t\t\t</TableSortLabel>\r\n\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td style={{ flex: \"5\" }} />\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\tlabel=\"Beoordelingsformaat\"\r\n\t\t\t\t\t\t\t\t\tstyle={{ type: \"caption\", underline: false, margin: \"normal\", labelVisible: true }}\r\n\t\t\t\t\t\t\t\t\tlayout={{ alignment: \"right\" }}\r\n\t\t\t\t\t\t\t\t\tvalue={evaluations[0].type}\r\n\t\t\t\t\t\t\t\t\toptions={EVALUATION_FORMATS}\r\n\t\t\t\t\t\t\t\t\teditable={this.props.editable}\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleEvaluationTypeChange.bind(this)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t</Paper >\r\n\t\t\t\t\t\t{evComps}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table >\r\n\t\t\t</EnsureSecureLogin>\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nexport { Evaluation, EvaluationTab, getEvaluationColor };","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ChooseButton from './ChooseButton';\r\nimport Field from '../../components/Field';\r\nimport { Evaluation, getEvaluationColor } from './Evaluation';\r\n\r\nconst CARD_STYLE = {\r\n\twidth: \"400px\",\r\n\theight: \"338px\",\r\n\tpadding: \"15px\",\r\n\tverticalAlign: \"top\",\r\n\tmargin: \"12px\",\r\n\tmarginRight: \"0px\",\r\n\tmarginBottom: \"0px\",\r\n\tdisplay: \"inline-block\",\r\n\tposition: \"relative\",\r\n}\r\n\r\nclass GroupCard extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\thover: false,\r\n\t\t\tstyle: CARD_STYLE,\r\n\t\t}\r\n\t}\r\n\r\n\texpand() {\r\n\t\tthis.props.history.push(\"/groep/\" + this.props.group.id)\r\n\t}\r\n\r\n\tgetBottomSection() {\r\n\t\tconst style = {\r\n\t\t\tposition: \"absolute\",\r\n\t\t\tbottom: \"0px\",\r\n\t\t\twidth: \"400px\",\r\n\t\t\theight: \"55px\",\r\n\t\t\tmarginLeft: \"-15px\",\r\n\t\t\tborderBottomLeftRadius: \"4px\",\r\n\t\t\tborderBottomRightRadius: \"4px\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tpadding: \"5px\",\r\n\t\t\tpaddingLeft: \"20px\",\r\n\t\t\tpaddingRight: \"20px\",\r\n\t\t\tjustifyContent: \"space-between\"\r\n\t\t};\r\n\t\tif (this.props.group.evaluation &&\r\n\t\t\tthis.props.group.evaluation.assesment !== \"\" &&\r\n\t\t\tthis.props.group.evaluation.assesment !== null) {\r\n\t\t\tstyle.backgroundColor = getEvaluationColor(this.props.group.evaluation);\r\n\t\t\treturn (\r\n\t\t\t\t<div style={style} >\r\n\t\t\t\t\t<Field value=\"Beoordeling\" style={{ type: \"headline\", color: \"primaryContrast\", flex: 0.8 }} />\r\n\t\t\t\t\t<Evaluation evaluation={this.props.group.evaluation} student />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<div style={style} >\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\tonClick={this.expand.bind(this)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tBekijken\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.props.role === \"student\" &&\r\n\t\t\t\t\t\t<ChooseButton\r\n\t\t\t\t\t\t\tgroup={this.props.group}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div >\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst group = this.props.group;\r\n\t\treturn (\r\n\t\t\t<Paper\r\n\t\t\t\televation={this.state.hover ? 4 : 2}\r\n\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\r\n\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\r\n\t\t\t\tstyle={this.state.style}\r\n\t\t\t>\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tvariant=\"caption\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tstyle={{ overflow: \"hidden\", maxHeight: \"65px\", cursor: \"pointer\" }}\r\n\t\t\t\t\tonClick={() => { this.props.history.push(\"/groep/\" + group.id) }}\r\n\t\t\t\t>\r\n\t\t\t\t\t{group.subjectName}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tvariant=\"headline\"\r\n\t\t\t\t\tstyle={{ overflow: \"hidden\", height: \"64px\", cursor: \"pointer\", textTransform: \"uppercase\", fontSize: \"24px\" }}\r\n\t\t\t\t\tonClick={() => { this.props.history.push(\"/groep/\" + group.id) }}\r\n\t\t\t\t>\r\n\t\t\t\t\t{group.courseName}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Typography style={{ display: \"inline-block\", fontWeight: \"bold\", float: \"right\" }}>\r\n\t\t\t\t\t\t{\"Blok \" + group.period + \" - \" + group.day}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t<Typography style={{ display: \"inline-block\", fontWeight: \"bold\" }}>\r\n\t\t\t\t\t\t{group.enrollableFor || \"Iedereen\"}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tgroup.evaluation ?\r\n\t\t\t\t\t\t<Typography style={{ maxHeight: \"164px\", overflow: \"hidden\" }} gutterBottom>\r\n\t\t\t\t\t\t\t<b>Uitleg beoordeling: </b>\r\n\t\t\t\t\t\t\t{group.evaluation.explanation}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<Typography style={{ maxHeight: \"164px\", overflow: \"hidden\" }} gutterBottom>\r\n\t\t\t\t\t\t\t{group.courseDescription}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.getBottomSection()\r\n\t\t\t\t}\r\n\t\t\t</Paper >\r\n\t\t);\r\n\t}\r\n\r\n\r\n}\r\n\r\n\r\nexport default withRouter(GroupCard);\r\n\r\n","import React, { Component } from 'react';\r\nimport map from \"lodash/map\"\r\nimport filter from \"lodash/filter\"\r\nimport User from \"../user/User\"\r\nimport Field from \"../../components/Field\"\r\nimport { Paper } from '@material-ui/core';\r\n\r\nclass PresenceTable extends Component {\r\n\r\n\tcreatePresenceComponent(presence, i) {\r\n\t\tlet options = [{ label: \"Actief\", value: \"present\" },\r\n\t\t{ label: \"Niet actief\", value: \"absent\" }];\r\n\t\tif (!this.props.editable && presence.userStatus === \"absent\") {\r\n\t\t\toptions[0].label = \"Afgemeld\";\r\n\t\t\toptions[1].label = \"Afgemeld\";\r\n\t\t}\r\n\t\treturn <Field\r\n\t\t\tkey={i}\r\n\t\t\tvalue={presence.status}\r\n\t\t\toptions={options}\r\n\t\t\tlabel={presence.userStatus === \"absent\" ? \"afgemeld\" : undefined}\r\n\t\t\tlayout={{ td: true, area: true }}\r\n\t\t\teditable={this.props.editable}\r\n\t\t\tonChange={(event) => {\r\n\t\t\t\tthis.props.handleChange({\r\n\t\t\t\t\t...presence,\r\n\t\t\t\t\tstatus: event.target.value,\r\n\t\t\t\t});\r\n\t\t\t}}\r\n\t\t/>;\r\n\t}\r\n\r\n\tcreateRow = (participantId) => {\r\n\t\tconst content = map(this.props.lessons, ((lesson, i) => {\r\n\t\t\tconst p = filter(this.props.presence, presence => {\r\n\t\t\t\treturn presence.lessonId === lesson.id && presence.userId === participantId;\r\n\t\t\t});\r\n\t\t\tif (p.length === 1) {\r\n\t\t\t\treturn this.createPresenceComponent(p[0], i);\r\n\t\t\t} else {\r\n\t\t\t\treturn \"err\";\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\treturn (\r\n\t\t\t<Paper component=\"tr\" elevation={1} key={\"p\" + participantId}>\r\n\t\t\t\t<User key={participantId} userId={participantId} display=\"name\" />\r\n\t\t\t\t{content}\r\n\t\t\t</Paper>\r\n\t\t);\r\n\t}\r\n\r\n\tcreateLessonHeader = (lesson) => {\r\n\t\tconst content = map(this.props.lessons, lesson => {\r\n\t\t\treturn <Field value={\"Les \" + lesson.numberInBlock} key={lesson.id} style={{ type: \"title\" }} layout={{ td: true, area: true }} />;\r\n\t\t});\r\n\t\treturn (\r\n\t\t\t<Paper component=\"tr\" elevation={2} key={\"l\" + lesson} style={{ backgroundColor: \"#e0e0e0\" }} >\r\n\t\t\t\t<Field value=\"\" layout={{ td: true, area: true }} />\r\n\t\t\t\t{content}\r\n\t\t\t</Paper>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet rows = this.props.participantIds.filter((partId) => {\r\n\t\t\treturn map(this.props.presence, (p) => p.userId).indexOf(partId) !== -1;\r\n\t\t}).map(this.createRow);\r\n\t\trows.unshift(this.createLessonHeader());\r\n\t\treturn <table>\r\n\t\t\t<tbody>\r\n\t\t\t\t{rows}\r\n\t\t\t</tbody>\r\n\t\t</table>;\r\n\t}\r\n\r\n}\r\n\r\nexport default PresenceTable;\r\n","import React, { Component } from 'react';\r\n\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Field from '../../components/Field';\r\nimport { Button } from '@material-ui/core';\r\nimport { setPresenceUserStatus } from \"../../store/actions\";\r\nimport { connect } from \"react-redux\";\r\n\r\nclass Lesson extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\thover: false,\r\n\t\t\tstyle: {\r\n\t\t\t\twidth: \"100%\",\r\n\t\t\t\theight: \"auto\",\r\n\t\t\t\tmarginTop: \"10px\",\r\n\t\t\t\tmarginBottom: \"10px\",\r\n\t\t\t\tpadding: \"2px\",\r\n\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\talignItems: \"start\",\r\n\t\t\t\tposition: \"relative\",\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n\r\n\tgetWeekdayString(number) {\r\n\t\treturn [\"zondag\", \"maandag\", \"dinsdag\", \"woensdag\", \"donderdag\", \"vrijdag\", \"zaterdag\"][number];\r\n\t}\r\n\r\n\tgetOptOutButton() {\r\n\t\tif (this.props.lesson.userStatus === \"absent\") {\r\n\t\t\treturn < div style={{ flex: 1 }}>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tstyle={{ width: \"70px\", float: \"right\" }}\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tmini\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tonClick={() => this.props.setPresenceUserStatus(this.props.lesson.id, \"present\", this.props.lesson.courseGroupId)}\r\n\t\t\t\t>\r\n\t\t\t\t\tAanmelden\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t}\r\n\t\treturn < div style={{ flex: 1 }}>\r\n\t\t\t<Button\r\n\t\t\t\tstyle={{ width: \"70px\", float: \"right\" }}\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\tmini\r\n\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\tonClick={() => this.props.setPresenceUserStatus(this.props.lesson.id, \"absent\", this.props.lesson.courseGroupId)}\r\n\t\t\t>\r\n\t\t\t\tAfmelden\r\n\t\t\t</Button>\r\n\t\t</div>\r\n\t}\r\n\r\n\r\n\thandleChange = (event) => {\r\n\t\tthis.props.handleChange({\r\n\t\t\t...this.props.lesson,\r\n\t\t\t[event.name]: event.target.value,\r\n\t\t});\r\n\t}\r\n\r\n\r\n\trender() {\r\n\t\tconst lesson = this.props.lesson;\r\n\t\tif (lesson.id === -1) {\r\n\t\t\treturn (\r\n\t\t\t\t<Paper\r\n\t\t\t\t\televation={this.state.hover ? 2 : 1}\r\n\t\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\r\n\t\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\r\n\t\t\t\t\tcomponent=\"tr\"\r\n\t\t\t\t\tstyle={{ backgroundColor: \"#e0e0e0\" }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<td style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n\t\t\t\t\t\t<Field style={{ fontWeight: \"bold\" }} value=\"Lesnummer\" />\r\n\t\t\t\t\t\t<Field style={{ fontWeight: \"bold\" }} value=\"Soort les\" />\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<Field style={{ flex: 4, fontWeight: \"bold\" }} value=\"Onderwerp\" layout={{ td: true }} />\r\n\t\t\t\t\t<Field style={{ flex: 8, fontWeight: \"bold\" }} value=\"Activiteiten\" layout={{ td: true }} />\r\n\t\t\t\t\t<td style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n\t\t\t\t\t\t<Field style={{ fontWeight: \"bold\" }} value=\"Datum\" layout={{ alignment: \"right\" }} />\r\n\t\t\t\t\t\t<Field style={{ fontWeight: \"bold\" }} value=\"Aanwezigheid\" layout={{ alignment: \"right\" }} />\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</Paper>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Paper\r\n\t\t\t\televation={this.state.hover ? 2 : 1}\r\n\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\r\n\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\r\n\t\t\t\tcomponent=\"tr\"\r\n\t\t\t>\r\n\t\t\t\t<td style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tlayout={{ area: true }}\r\n\t\t\t\t\t\tstyle={{ fontWeight: \"bold\" }}\r\n\t\t\t\t\t\tvalue={\"Les \" + lesson.numberInBlock}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tlabel=\"Soort les\"\r\n\t\t\t\t\t\tname=\"kind\"\r\n\t\t\t\t\t\tlayout={{ area: true }}\r\n\t\t\t\t\t\tvalue={lesson.kind}\r\n\t\t\t\t\t\teditable={this.props.editable}\r\n\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</td>\r\n\t\t\t\t<Field\r\n\t\t\t\t\tlabel=\"Onderwerp\"\r\n\t\t\t\t\tname=\"subject\"\r\n\t\t\t\t\tstyle={{ flex: 4 }}\r\n\t\t\t\t\tvalue={lesson.subject}\r\n\t\t\t\t\teditable={this.props.editable}\r\n\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\tlayout={{ td: true, area: true }}\r\n\t\t\t\t/>\r\n\t\t\t\t<Field\r\n\t\t\t\t\tlabel=\"Activiteiten\"\r\n\t\t\t\t\tname=\"activities\"\r\n\t\t\t\t\tstyle={{ flex: 8 }}\r\n\t\t\t\t\tvalue={lesson.activities}\r\n\t\t\t\t\teditable={this.props.editable}\r\n\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\tlayout={{ td: true, area: true }}\r\n\t\t\t\t/>\r\n\t\t\t\t<td style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tlayout={{ alignment: \"right\" }}\r\n\t\t\t\t\t\tvalue={this.getWeekdayString(new Date(lesson.date).getDay()) + \" \" + new Date(lesson.date).getDate() + \"-\" + (new Date(lesson.date).getMonth() + 1) + \"-\" + new Date(lesson.date).getFullYear()}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tname=\"presence\"\r\n\t\t\t\t\t\tlabel=\"Aanwezigheid\"\r\n\t\t\t\t\t\tstyle={{ labelVisible: true }}\r\n\t\t\t\t\t\tlayout={{ alignment: \"right\" }}\r\n\t\t\t\t\t\tvalue={lesson.presence}\r\n\t\t\t\t\t\teditable={this.props.editable}\r\n\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\toptions={[{ label: \"Noodzakelijk\", value: \"required\" }, { label: \"Eigen keuze\", value: \"optional\" }, { label: \"Geen bijeenkomst\", value: \"unrequired\" }]}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.props.userIsMemberOfGroup && this.props.role === \"student\" ? this.getOptOutButton() : null\r\n\t\t\t\t\t}\r\n\t\t\t\t</td>\r\n\t\t\t</Paper >\r\n\t\t);\r\n\t}\r\n\r\n\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tsetPresenceUserStatus: (lessonId, userStatus, groupId) => dispatch(setPresenceUserStatus(lessonId, userStatus, groupId)),\r\n\t};\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(Lesson);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Typography, Tooltip, TableSortLabel, Paper } from '@material-ui/core';\r\nimport User from \"./User\";\r\n\r\nclass UserList extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\thover: false,\r\n\t\t\tstyle: {\r\n\t\t\t\twidth: \"100%\",\r\n\t\t\t\theight: \"auto\",\r\n\t\t\t\tmargin: \"0px\",\r\n\t\t\t\tpadding: \"10px\",\r\n\t\t\t\tbackgroundColor: \"#e0e0e0\",\r\n\t\t\t},\r\n\t\t\tsortValue: \"\",\r\n\t\t\tsortDirection: \"\",\r\n\t\t}\r\n\t}\r\n\r\n\tonSortChange = (value) => {\r\n\t\tthis.setState({\r\n\t\t\tsortValue: value,\r\n\t\t\tsortDirection: this.state.sortDirection === \"desc\" && this.state.sortValue === value ? \"asc\" : \"desc\"\r\n\t\t});\r\n\t}\r\n\r\n\theaderTitle(variant, value, title) {\r\n\t\tlet sortValue = this.state.sortValue;\r\n\t\tlet sortDirection = this.state.sortDirection === \"asc\" ? \"asc\" : \"desc\";\r\n\t\treturn (\r\n\t\t\t<Typography variant={variant} color={variant === \"title\" ? \"primary\" : \"default\"} style={{ flex: 1 }} >\r\n\t\t\t\t<Tooltip title=\"Sorteer\" enterDelay={300} placement=\"bottom-start\">\r\n\t\t\t\t\t<TableSortLabel active={sortValue === value}\r\n\t\t\t\t\t\tdirection={sortDirection}\r\n\t\t\t\t\t\tonClick={() => this.onSortChange(value)}\r\n\t\t\t\t\t\tstyle={{ color: \"inherit\" }} >\r\n\t\t\t\t\t\t{title}\r\n\t\t\t\t\t</TableSortLabel>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</Typography>\r\n\t\t)\r\n\t}\r\n\r\n\tgetHeader = () => {\r\n\t\tlet style = { ...this.state.style };\r\n\t\treturn (\r\n\t\t\t<tr>\r\n\t\t\t\t<Paper\r\n\t\t\t\t\televation={this.state.hover ? 2 : 1}\r\n\t\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\r\n\t\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\r\n\t\t\t\t\tcomponent=\"td\"\r\n\t\t\t\t\tstyle={style}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\tjustifyContent: \"space-between\"\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{this.headerTitle(\"title\", \"name\", \"Naam\")}\r\n\t\t\t\t\t\t{this.headerTitle(\"subheading\", \"school\", \"School\")}\r\n\t\t\t\t\t\t{this.headerTitle(\"body1\", \"levelAndYear\", \"Niveau - Leerjaar\")}\r\n\t\t\t\t\t\t{this.headerTitle(\"body1\", \"role\", \"Rol\")}\r\n\t\t\t\t\t\t{this.headerTitle(\"body1\", \"profile\", \"Profiel\")}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{this.props.role === \"admin\" &&\r\n\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\tjustifyContent: \"space-between\"\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{this.headerTitle(\"body1\", \"email\", \"Office Email\")}\r\n\t\t\t\t\t\t\t{this.headerTitle(\"body1\", \"preferedEmail\", \"Voorkeurs email\")}\r\n\t\t\t\t\t\t\t<div style={{ flex: 1 }} />\r\n\t\t\t\t\t\t\t{this.headerTitle(\"body1\", \"phoneNumber\", \"Telefoonnummer\")}\r\n\t\t\t\t\t\t\t{this.headerTitle(\"body1\", \"id\", \"Gebruikers ID\")}\r\n\t\t\t\t\t\t</div>}\r\n\t\t\t\t</Paper >\r\n\t\t\t</tr>\r\n\t\t)\r\n\t}\r\n\r\n\tsortIds = () => {\r\n\t\tconst value = this.state.sortValue;\r\n\t\tconst direction = this.state.sortDirection;\r\n\t\tconst users = this.props.users;\r\n\t\tconst userIds = this.props.userIds;\r\n\t\tif (value === \"\") {\r\n\t\t\treturn userIds;\r\n\t\t}\r\n\t\tuserIds.sort((a, b) => {\r\n\t\t\tswitch (value) {\r\n\t\t\t\tcase \"name\":\r\n\t\t\t\t\ta = (users[a][\"firstName\"] + users[a][\"lastName\"]).toLowerCase();\r\n\t\t\t\t\tb = (users[b][\"firstName\"] + users[b][\"lastName\"]).toLowerCase()\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"levelAndYear\":\r\n\t\t\t\t\ta = (users[a][\"level\"] + users[a][\"year\"]).toString();// to string because otherwise no level and year would result in a being an integer\r\n\t\t\t\t\tb = (users[b][\"level\"] + users[b][\"year\"]).toString();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\ta = users[a][value];\r\n\t\t\t\t\tb = users[b][value];\r\n\t\t\t}\r\n\t\t\tlet cmp = (b == null) - (a == null) || +(a > b) || -(a < b);\r\n\t\t\treturn direction === \"asc\" ? cmp : -cmp;\r\n\t\t})\r\n\t\treturn userIds;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst header = this.getHeader();\r\n\t\tconst users = this.sortIds().map(id => {\r\n\t\t\treturn <User key={id} userId={id} display=\"row\" />\r\n\t\t});\r\n\t\treturn (\r\n\t\t\t<table style={{ width: \"100%\" }}>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{header}\r\n\t\t\t\t\t{users}\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n\treturn {\r\n\t\tusers: state.users,\r\n\t\trole: state.role,\r\n\t};\r\n}\r\n\r\nexport default connect(mapStateToProps)(UserList);","import React, { Component } from 'react';\r\nimport { Prompt } from 'react-router-dom';\r\n\r\nclass PageLeaveWarning extends Component {\r\n\r\n\trender() {\r\n\t\tconst message = \"Weet je zeker dat u de pagina wilt verlaten? Er zijn nog niet-opgeslagen gegevens!\";\r\n\t\tif (this.props.giveWarning) {\r\n\t\t\twindow.onbeforeunload = function (e) {\r\n\t\t\t\te.returnValue = message;\r\n\t\t\t\treturn message;\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\twindow.onbeforeunload = null;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Prompt\r\n\t\t\t\twhen={this.props.giveWarning}\r\n\t\t\t\tmessage={location => message}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nexport default PageLeaveWarning;","import React, { Component } from 'react';\r\nimport map from 'lodash/map';\r\n\r\nimport Field from '../../components/Field';\r\nimport User from \"../user/User\"\r\n\r\nimport Popover from '@material-ui/core/Popover';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nclass GroupData extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\thandleClickAway = () => {\r\n\t\tthis.setState({ anchorEl: null });\r\n\t}\r\n\r\n\tshowTeacherCard = event => {\r\n\t\tthis.setState({ anchorEl: event.currentTarget });\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst editable = this.props.editable;\r\n\t\tconst role = this.props.role;\r\n\t\tconst onChange = this.props.onChange;\r\n\t\tlet group = this.props.group;\r\n\t\treturn (\r\n\t\t\t<div style={{ position: \"relative\" }}>\r\n\t\t\t\t<div style={{ display: \"flex\" }}>\r\n\t\t\t\t\t<Field value={group.courseName} name=\"courseName\" onChange={onChange} editable={editable} style={{ flex: \"5\", type: \"headline\" }} validate={{ maxLength: 50 }} />\r\n\t\t\t\t\t<Field value={group.subjectId} name=\"subjectId\" onChange={onChange} layout={{ alignment: \"right\" }} style={{ type: \"headline\" }} editable={editable} options={map(this.props.subjects, (subject) => { return { value: subject.id, label: subject.name } })} />\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t!editable &&\r\n\t\t\t\t\t\t<Button color=\"secondary\" style={{ position: \"absolute\", display: \"block\", top: \"30px\", right: \"-15px\", zIndex: \"100\" }} onClick={this.showTeacherCard}>\r\n\t\t\t\t\t\t\t<div>{group.teacherName}</div>\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ display: \"flex\" }} className=\"ColumnFlexDirectionOnMobile\">\r\n\t\t\t\t\t<div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n\t\t\t\t\t\t<div style={{ flex: 1 }}>\r\n\t\t\t\t\t\t\t<Field value={group.period} name=\"period\" editable={editable && role === \"admin\"} onChange={onChange} style={{ width: \"100px\", type: \"caption\" }} options={[{ label: \"Blok 1\", value: 1 }, { label: \"Blok 2\", value: 2 }, { label: \"Blok 3\", value: 3 }, { label: \"Blok 4\", value: 4 }]} />\r\n\t\t\t\t\t\t\t<Field value={group.day} name=\"day\" editable={editable && role === \"admin\"} onChange={onChange} style={{ width: \"150px\", type: \"caption\" }} options={[\"maandag\", \"dinsdag\", \"woensdag\", \"donderdag\", \"vrijdag\", \"zaterdag\", \"zondag\"]} />\r\n\t\t\t\t\t\t\t<Field value={group.schoolYear} name=\"schoolYear\" editable={editable && role === \"admin\"} onChange={onChange} options={[\"2018/2019\", \"2019/2020\", \"2020/2021\", \"2021/2022\"]} style={{ width: \"120px\", type: \"caption\" }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<Field value={group.enrollableFor} label=\"Doelgroep\" style={{ width: \"100%\", labelVisible: true }} name=\"enrollableFor\" default=\"Iedereen\" editable={editable} onChange={onChange} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{ width: \"100%\" }}>\r\n\t\t\t\t\t\t<Field value={group.courseDescription} validate={{ maxLength: 440 }} name=\"courseDescription\" label=\"Omschrijving\" style={{ labelVisible: true }} onChange={onChange} layout={{ area: true }} editable={editable} />\r\n\t\t\t\t\t\t<Field value={group.remarks} label=\"Opmerkingen\" name=\"remarks\" style={{ width: \"80%\", labelVisible: true }} default=\"Geen voorkennis vereist\" editable={editable} onChange={onChange} />\r\n\t\t\t\t\t\t<Field value={group.studyTime} label=\"Studietijd\" name=\"studyTime\" default=\"onbekend\" editable={editable} style={{ labelVisible: true, unit: \"uur\" }} onChange={onChange} layout={{ alignment: \"right\" }} validate={{ type: \"integer\" }} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<br />\r\n\r\n\t\t\t\t<Popover\r\n\t\t\t\t\topen={this.state.anchorEl ? true : false}\r\n\t\t\t\t\tonClose={this.handleClickAway}\r\n\t\t\t\t\tanchorEl={this.state.anchorEl}\r\n\t\t\t\t\tanchorOrigin={{ horizontal: \"left\", vertical: \"top\" }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<User key={group.teacherId} userId={group.teacherId} display=\"card\" style={{ margin: \"0px\" }} />\r\n\t\t\t\t</Popover>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default GroupData;\r\n","import React, { Component } from \"react\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\nimport { connect } from 'react-redux';\r\nimport theme from \"../lib/MuiTheme\";\r\nimport { withStyles, Tooltip } from \"@material-ui/core\";\r\n\r\nconst style = {\r\n    colorPrimary:{\r\n        backgroundColor: theme.palette.primary.main\r\n    },\r\n    colorSecondary: {\r\n        backgroundColor: \"#ff8c00\"\r\n    },\r\n    colorError: {\r\n        backgroundColor: theme.palette.error.main\r\n    }\r\n}\r\n\r\nclass NotificationBadge extends Component {\r\n\r\n\r\n    render() {\r\n        const notifications = this.props.notifications;\r\n        const classes = this.props.classes;\r\n        let color = \"primary\";\r\n        let tooltipMessage = notifications.length > 0 ? notifications[0].message : \"\";\r\n        for ( let i = 0; i < notifications.length; i ++ ) { \r\n            if (notifications[i].priority === \"medium\" || notifications[i].priority === \"high\" ){\r\n                color=\"secondary\";\r\n                tooltipMessage=notifications[i].message;\r\n                for ( let j = i ; j < notifications.length; j++ ) {\r\n                    if ( notifications[j].priority === \"high\" ) {\r\n                        color = \"error\"\r\n                        tooltipMessage = notifications[j].message;\r\n                        break;\r\n                    }\r\n                }\r\n                break\r\n            }\r\n        }// tooltip is first message of highest priority\r\n        //color is highest priority\r\n\r\n        return (\r\n            <Tooltip title={tooltipMessage} >\r\n                <Badge badgeContent={notifications.length} classes={classes} color={color} >\r\n                    {this.props.children}\r\n                </Badge>\r\n            </Tooltip>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n\tlet notifications = state.notifications.filter((not) => {\r\n\t\ttry {\r\n            return not.type === \"badge\" && RegExp(not.scope).test(ownProps.scope);\r\n\t\t} catch (err) {\r\n\t\t\treturn true;\r\n\t\t}\r\n    });\r\n\treturn {\r\n\t\tnotifications: notifications,\r\n\t};\r\n}\r\n\r\nexport default withStyles(style)(connect(mapStateToProps,null)(NotificationBadge));","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router';\r\nimport map from 'lodash/map';\r\n\r\nimport PresenceTable from './PresenceTable';\r\nimport Lesson from './Lesson';\r\nimport { EvaluationTab } from './Evaluation';\r\nimport Page from '../Page';\r\nimport UserList from \"../user/UserList\"\r\n\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Progress from '../../components/Progress'\r\nimport PageLeaveWarning from '../../components/PageLeaveWarning'\r\nimport GroupData from './GroupData';\r\nimport ChooseButton from './ChooseButton';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Button from '@material-ui/core/Button';\r\nimport queryString from \"query-string\";\r\nimport NotificationBadge from '../../components/NotificationBadge';\r\n\r\nclass GroupPage extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\teditable: false,\r\n\t\t\tgroup: this.props.group,\r\n\t\t}\r\n\r\n\t\tswitch (this.props.role) {\r\n\t\t\tcase \"student\":\r\n\t\t\t\tif (this.props.userIsMemberOfGroup) {\r\n\t\t\t\t\tthis.state.tabs = [\"Lessen\", \"Deelnemers\"];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.state.tabs = [\"Lessen\"];\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"teacher\":\r\n\t\t\t\tif (this.props.userIsMemberOfGroup) {\r\n\t\t\t\t\tthis.state.tabs = [\"Inschrijvingen\", \"Lessen\", \"Deelnemers\", \"Actief\", \"Beoordeling\"];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.state.tabs = [\"Lessen\"];\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"admin\":\r\n\t\t\t\tthis.state.tabs = [\"Inschrijvingen\", \"Lessen\", \"Deelnemers\", \"Actief\", \"Beoordeling\"];\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tlet values = queryString.parse(nextProps.location.search);\r\n\t\treturn {\r\n\t\t\t...prevState,\r\n\t\t\tgroup: {\r\n\t\t\t\t...nextProps.group,\r\n\t\t\t\t...prevState.group,\r\n\t\t\t},\r\n\t\t\tcurrentTab: values.tab ? values.tab : prevState.tabs[0]\r\n\t\t}\r\n\t}\r\n\r\n\tgetCurrentTab(currentTab) {\r\n\t\tlet group = this.state.group;\r\n\t\tconst enrollmentIds = this.state.group.enrollmentIds;\r\n\t\tconst lessons = this.state.group.lessons;\r\n\t\tconst participantIds = this.state.group.participantIds;\r\n\t\tconst evaluations = this.state.group.evaluations;\r\n\t\tconst presence = this.state.group.presence;\r\n\r\n\t\tswitch (currentTab) {\r\n\t\t\tcase \"Inschrijvingen\":\r\n\t\t\t\tif (enrollmentIds == null) {\r\n\t\t\t\t\treturn <Progress />;\r\n\t\t\t\t}\r\n\t\t\t\tif (enrollmentIds.length === 0) {\r\n\t\t\t\t\treturn \"Er zijn geen inschrijvingen\";\r\n\t\t\t\t}\r\n\t\t\t\treturn <UserList userIds={enrollmentIds} />;\r\n\t\t\tcase \"Lessen\":\r\n\t\t\t\tif (lessons == null) {\r\n\t\t\t\t\treturn <Progress />;\r\n\t\t\t\t}\r\n\t\t\t\tif (lessons.length === 0) {\r\n\t\t\t\t\treturn \"Er zijn nog geen lessen bekend\";\r\n\t\t\t\t}\r\n\t\t\t\treturn <table style={{ width: \"100%\" }}>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{map({ 0: { id: -1 }, ...lessons }, lesson => {\r\n\t\t\t\t\t\t\treturn <Lesson\r\n\t\t\t\t\t\t\t\tlesson={lesson}\r\n\t\t\t\t\t\t\t\tkey={lesson.id}\r\n\t\t\t\t\t\t\t\trole={this.props.role}\r\n\t\t\t\t\t\t\t\tuserIsMemberOfGroup={this.props.userIsMemberOfGroup}\r\n\t\t\t\t\t\t\t\teditable={this.state.editable}\r\n\t\t\t\t\t\t\t\thandleChange={this.handleLessonChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\tcase \"Deelnemers\":\r\n\t\t\t\tif (participantIds == null) {\r\n\t\t\t\t\treturn <Progress />;\r\n\t\t\t\t}\r\n\t\t\t\tif (participantIds.length === 0) {\r\n\t\t\t\t\treturn \"Er zijn nog geen deelnemers toegevoegd\";\r\n\t\t\t\t}\r\n\t\t\t\treturn <UserList userIds={participantIds} />\r\n\t\t\tcase \"Actief\":\r\n\t\t\t\tif (participantIds == null || lessons == null || presence == null) {\r\n\t\t\t\t\treturn <Progress />;\r\n\t\t\t\t}\r\n\t\t\t\treturn <PresenceTable\r\n\t\t\t\t\tparticipantIds={participantIds}\r\n\t\t\t\t\tlessons={lessons}\r\n\t\t\t\t\tpresence={presence}\r\n\t\t\t\t\teditable={this.state.editable}\r\n\t\t\t\t\thandleChange={this.handlePresenceChange}\r\n\t\t\t\t/>\r\n\t\t\tcase \"Beoordeling\":\r\n\t\t\t\tif (participantIds == null || evaluations == null) {\r\n\t\t\t\t\treturn <Progress />;\r\n\t\t\t\t}\r\n\t\t\t\treturn <EvaluationTab\r\n\t\t\t\t\tevaluations={evaluations}\r\n\t\t\t\t\tgroupId={group.id}\r\n\t\t\t\t\teditable={this.state.editable}\r\n\t\t\t\t\thandleChange={this.handleEvaluationChange}\r\n\t\t\t\t/>\r\n\t\t\tdefault: return null;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tgetData() {\r\n\t\tlet group = this.state.group;\r\n\t\tconst enrollmentIds = this.state.group.enrollmentIds;\r\n\t\tconst lessons = this.state.group.lessons;\r\n\t\tconst participantIds = this.state.group.participantIds;\r\n\t\tconst evaluations = this.state.group.evaluations;\r\n\t\tconst presence = this.state.group.presence;\r\n\r\n\t\tswitch (this.state.currentTab) {\r\n\t\t\tcase \"Inschrijvingen\":\r\n\t\t\t\tif (enrollmentIds == null) {\r\n\t\t\t\t\tthis.props.getGroupEnrollments(group.id);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Lessen\":\r\n\t\t\t\tif (lessons == null) {\r\n\t\t\t\t\tthis.props.getGroupLessons(group.id);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Deelnemers\":\r\n\t\t\t\tif (participantIds == null) {\r\n\t\t\t\t\tthis.props.getGroupParticipants(group.id);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Actief\":\r\n\t\t\t\tif (participantIds == null) {\r\n\t\t\t\t\tthis.props.getGroupParticipants(group.id);\r\n\t\t\t\t}\r\n\t\t\t\tif (lessons == null) {\r\n\t\t\t\t\tthis.props.getGroupLessons(group.id);\r\n\t\t\t\t}\r\n\t\t\t\tif (presence == null) {\r\n\t\t\t\t\tthis.props.getGroupPresence(group.id);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Beoordeling\":\r\n\t\t\t\tif (evaluations == null) {\r\n\t\t\t\t\tthis.props.getGroupEvaluations(group.id);\r\n\t\t\t\t}\r\n\t\t\t\tif (participantIds == null) {\r\n\t\t\t\t\tthis.props.getGroupParticipants(group.id);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: break;\r\n\t\t}\r\n\t}\r\n\r\n\thandleChange = (event) => {\r\n\t\tthis.setState({\r\n\t\t\tgroup: {\r\n\t\t\t\t...this.state.group,\r\n\t\t\t\t[event.name]: event.target.value,\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\thandleLessonChange = (lesson) => {\r\n\t\tlet lessons = this.state.group.lessons || this.props.group.lessons;\r\n\t\tthis.setState({\r\n\t\t\tgroup: {\r\n\t\t\t\t...this.state.group,\r\n\t\t\t\tlessons: {\r\n\t\t\t\t\t...lessons,\r\n\t\t\t\t\t[lesson.id]: lesson,\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\thandleEvaluationChange = (newEvaluations) => {\r\n\t\tthis.setState({\r\n\t\t\tgroup: {\r\n\t\t\t\t...this.state.group,\r\n\t\t\t\tevaluations: newEvaluations,\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\thandlePresenceChange = (presenceObj) => {\r\n\t\tlet presence = this.state.group.presence || this.props.group.presence;\r\n\t\tthis.setState({\r\n\t\t\tgroup: {\r\n\t\t\t\t...this.state.group,\r\n\t\t\t\tpresence: {\r\n\t\t\t\t\t...presence,\r\n\t\t\t\t\t[presenceObj.id]: presenceObj,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tsetEditable = () => {\r\n\t\tthis.setState({\r\n\t\t\teditable: true,\r\n\t\t});\r\n\t}\r\n\r\n\tcancel = () => {\r\n\t\tthis.setState({\r\n\t\t\teditable: false,\r\n\t\t\tgroup: this.props.group,\r\n\t\t});\r\n\t}\r\n\r\n\tsave = () => {\r\n\t\tthis.props.setGroup(this.state.group);\r\n\t\tthis.setState({\r\n\t\t\teditable: false,\r\n\t\t});\r\n\t}\r\n\r\n\thandleTab = (event, newTab) => {\r\n\t\tthis.props.history.push({\r\n\t\t\tsearch: \"tab=\" + this.state.tabs[newTab],\r\n\t\t});\r\n\t};\r\n\r\n\r\n\trender() {\r\n\t\tconst editable = this.state.editable;\r\n\t\tconst role = this.props.role;\r\n\t\tlet group = this.state.group;\r\n\t\treturn (\r\n\t\t\t<Page>\r\n\t\t\t\t<GroupData {...this.props} editable={editable} group={group} onChange={this.handleChange} />\r\n\t\t\t\t<Divider />\r\n\t\t\t\t{\r\n\t\t\t\t\trole === \"student\" &&\r\n\t\t\t\t\t<ChooseButton\r\n\t\t\t\t\t\tgroup={group}\r\n\t\t\t\t\t\tstyle={{ margin: \"20px\" }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\t((role === \"teacher\" || role === \"admin\") && !editable) &&\r\n\t\t\t\t\t<Button color=\"secondary\" variant=\"contained\" style={{ margin: \"20px\" }} onClick={this.setEditable}>\r\n\t\t\t\t\t\t{\"Bewerken\"}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\teditable &&\r\n\t\t\t\t\t<Button color=\"secondary\" variant=\"contained\" style={{ margin: \"20px\" }} onClick={this.save}>\r\n\t\t\t\t\t\t{\"Opslaan\"}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\teditable &&\r\n\t\t\t\t\t<Button color=\"default\" style={{ margin: \"20px\" }} onClick={this.cancel}>\r\n\t\t\t\t\t\t{\"Annuleren\"}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t}\r\n\t\t\t\t<AppBar position=\"static\" color=\"default\">\r\n\t\t\t\t\t<Tabs\r\n\t\t\t\t\t\tvalue={this.state.tabs.indexOf(this.state.currentTab)}\r\n\t\t\t\t\t\tonChange={this.handleTab}\r\n\t\t\t\t\t\tindicatorColor=\"primary\"\r\n\t\t\t\t\t\ttextColor=\"primary\"\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tcentered\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{this.state.tabs.map(tab => \r\n\t\t\t\t\t\t<Tab key={tab} label={\r\n\t\t\t\t\t\t\t<NotificationBadge scope={\"groep/\" + ( group.id || \"\" ) + \"?tab=\" + tab} style={{paddingLeft:\"100px\"}}>\r\n\t\t\t\t\t\t\t\t{tab}\r\n\t\t\t\t\t\t\t</NotificationBadge>\r\n\t\t\t\t\t\t\t} />) }\r\n\t\t\t\t\t</Tabs>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<br />\r\n\t\t\t\t<div style={{ width: \"98%\", margin: \"auto\" }}>\r\n\t\t\t\t\t{this.getCurrentTab(this.state.currentTab)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<PageLeaveWarning giveWarning={this.state.editable} />\r\n\t\t\t</Page>\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\n\r\n\r\nexport default withRouter(GroupPage);\r\n\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport GroupCard from \"./GroupCard\";\r\nimport GroupPage from \"./GroupPage\";\r\nimport {\r\n\tsetGroup,\r\n\tgetGroup,\r\n\tgetGroupEnrollments,\r\n\tgetGroupLessons,\r\n\tgetGroupParticipants,\r\n\tgetGroupEvaluations,\r\n\tgetGroupPresence,\r\n\tgetSubjects,\r\n} from \"../../store/actions\";\r\nimport { withRouter } from 'react-router-dom';\r\nimport Progress from '../../components/Progress'\r\nimport Page from '../Page';\r\n\r\nclass Group extends Component {\r\n\r\n\tcomponentWillMount() {\r\n\t\tconst props = this.props;\r\n\t\tif (props.subjects == null) {\r\n\t\t\tprops.getSubjects();\r\n\t\t}\r\n\t\tif (props.group == null && !props.notExists) {\r\n\t\t\tprops.getGroup(props.groupId);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.group == null) {\r\n\t\t\tif (this.props.display === \"page\" && this.props.notExists) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Page>\r\n\t\t\t\t\t\tDe opgevraagde groep bestaat niet\r\n\t\t\t\t\t</Page>\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\treturn this.props.notExists ? null : <Progress />;\r\n\t\t\t}\r\n\t\t}\r\n\t\tswitch (this.props.display) {\r\n\t\t\tcase \"page\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<GroupPage {...this.props} />\r\n\t\t\t\t);\r\n\t\t\tcase \"card\":\r\n\t\t\tdefault:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<GroupCard {...this.props} />\r\n\t\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n\tlet id = (ownProps.match.params.groupId || ownProps.groupId) + \"\";\r\n\tlet display = ownProps.display || \"page\";\r\n\r\n\tlet notExists = false;\r\n\tlet group = null;\r\n\r\n\tlet userIsMemberOfGroup = state.users[state.userId].participatingGroupIds.indexOf(id) !== -1;\r\n\tif (state.groups == null || state.groups[id] == null) {\r\n\t\tif (id == null || state.hasFetched.indexOf(\"Group.get(\" + id + \")\") !== -1) {\r\n\t\t\tnotExists = true;\r\n\t\t}\r\n\t} else {\r\n\t\tgroup = state.groups[id];\r\n\t}\r\n\treturn {\r\n\t\tgroup,\r\n\t\tnotExists,\r\n\t\tdisplay,\r\n\t\trole: state.role,\r\n\t\tgroupId: id,\r\n\t\tsubjects: state.subjects,\r\n\t\tuserIsMemberOfGroup,\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tsetGroup: (group) => dispatch(setGroup(group)),\r\n\t\tgetGroup: (groupId) => dispatch(getGroup(groupId)),\r\n\t\tgetGroupEnrollments: (groupId) => dispatch(getGroupEnrollments(groupId)),\r\n\t\tgetGroupLessons: (groupId) => dispatch(getGroupLessons(groupId)),\r\n\t\tgetGroupParticipants: (groupId) => dispatch(getGroupParticipants(groupId)),\r\n\t\tgetGroupEvaluations: (groupId) => dispatch(getGroupEvaluations(groupId)),\r\n\t\tgetGroupPresence: (groupId) => dispatch(getGroupPresence(groupId)),\r\n\t\tgetSubjects: () => dispatch(getSubjects()),\r\n\t};\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Group));\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport filter from 'lodash/filter';\r\nimport map from 'lodash/map';\r\n\r\nimport Page from './Page';\r\nimport Progress from '../components/Progress';\r\nimport Field from '../components/Field';\r\nimport Group from './group/Group';\r\nimport { getSubjects, getGroups, getEnrolLments } from '../store/actions';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport queryString from \"query-string\";\r\n\r\nclass CourseSelect extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tsortMethod: null,\r\n\t\t\tfilterMethod: \"period\" + props.currentPeriod,\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tlet values = queryString.parse(nextProps.location.search);\r\n\t\tif (values.sort) {\r\n\t\t\treturn {\r\n\t\t\t\t...prevState,\r\n\t\t\t\t...{\r\n\t\t\t\t\tsortMethod: values.sort,\r\n\t\t\t\t\tfilterMethod: values.filter ? values.filter : \"period\" + nextProps.currentPeriod,\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (nextProps.subjects != null) {\r\n\t\t\treturn {\r\n\t\t\t\t...prevState,\r\n\t\t\t\t...{\r\n\t\t\t\t\tfilterMethod: values.filter ? values.filter : \"period\" + nextProps.currentPeriod,\r\n\t\t\t\t\tsortMethod: nextProps.subjects[Object.keys(nextProps.subjects)[0]].name,\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\t...prevState,\r\n\t\t\t\tsortMethod: null,\r\n\t\t\t\tfilterMethod: \"none\",\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.getSubjects();\r\n\t\tthis.props.getGroups();\r\n\t}\r\n\r\n\tgetGroupsPerSubject(subject) {\r\n\t\treturn filter(this.props.groups, (group) => {\r\n\t\t\treturn subject === group.subjectName;\r\n\t\t})\r\n\t}\r\n\r\n\thandleSortChange = subject => {\r\n\t\tthis.props.history.push({\r\n\t\t\tsearch: \"sort=\" + subject + \"&filter=\" + this.state.filterMethod,\r\n\t\t});\r\n\t};\r\n\r\n\thandleFilterChange = event => {\r\n\t\tthis.props.history.push({\r\n\t\t\tsearch: \"sort=\" + this.state.sortMethod + \"&filter=\" + event.target.value,\r\n\t\t});\r\n\t};\r\n\r\n\tgetMenuItem(title, subject) {\r\n\t\tlet color = (this.state.sortMethod === subject) ? \"primary\" : \"default\";\r\n\t\treturn (\r\n\t\t\t<ListItem button onClick={() => this.handleSortChange(subject)} key={title}>\r\n\t\t\t\t<ListItemText>\r\n\t\t\t\t\t<Typography variant=\"title\" color={color} style={{ minWidth: \"150px\" }}>\r\n\t\t\t\t\t\t{title}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</ListItemText>\r\n\t\t\t</ListItem >\r\n\t\t)\r\n\t}\r\n\r\n\tgetMenuItems() {\r\n\t\tconst subjectsComponents = map(this.props.subjects, (subject) => {\r\n\t\t\treturn this.getMenuItem(subject.name, subject.name);\r\n\t\t});\r\n\t\tif (this.props.role === \"student\") {\r\n\t\t\tsubjectsComponents.unshift(this.getMenuItem(\"Ingeschreven\", \"enrolled\"));\r\n\t\t}\r\n\t\treturn subjectsComponents;\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet data;\r\n\t\tif (this.state.sortMethod === \"enrolled\") {\r\n\t\t\tif (this.props.enrolledGroupsIds == null) {\r\n\t\t\t\tdata = <Progress />;\r\n\t\t\t\tthis.props.getEnrolLments();\r\n\t\t\t} else {\r\n\t\t\t\tdata = this.props.enrolledGroupsIds.map((groupId) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Group\r\n\t\t\t\t\t\t\tkey={groupId}\r\n\t\t\t\t\t\t\tgroupId={groupId}\r\n\t\t\t\t\t\t\tdisplay=\"card\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t\tif (this.props.enrolledGroupsIds.length === 0) {\r\n\t\t\t\t\tdata = (\r\n\t\t\t\t\t\t<div style={{ margin: \"15px\" }} >\r\n\t\t\t\t\t\t\tJe hebt je nog niet ingeschreven.\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this.props.subjects == null || this.props.groups == null || this.props.enrolledGroups === []) {\r\n\t\t\t\tdata = <Progress />\r\n\t\t\t}\r\n\t\t\tdata = this.getGroupsPerSubject(this.state.sortMethod)\r\n\t\t\t\t.sort((a, b) => a.period - b.period)\r\n\t\t\t\t.filter((group) => {\r\n\t\t\t\t\tswitch (this.state.filterMethod) {\r\n\t\t\t\t\t\tcase \"period1\":\r\n\t\t\t\t\t\t\treturn group.period === 1;\r\n\t\t\t\t\t\tcase \"period2\":\r\n\t\t\t\t\t\t\treturn group.period === 2;\r\n\t\t\t\t\t\tcase \"period3\":\r\n\t\t\t\t\t\t\treturn group.period === 3;\r\n\t\t\t\t\t\tcase \"period4\":\r\n\t\t\t\t\t\t\treturn group.period === 4;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.map((group) => {\r\n\t\t\t\t\treturn <Group\r\n\t\t\t\t\t\tkey={group.id}\r\n\t\t\t\t\t\tgroupId={group.id}\r\n\t\t\t\t\t\tdisplay=\"card\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t});\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Page>\r\n\t\t\t\t<Paper\r\n\t\t\t\t\televation={2}\r\n\t\t\t\t\tstyle={{ position: \"relative\" }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Toolbar style={{ display: \"flex\" }}>\r\n\t\t\t\t\t\t<Typography variant=\"subheading\" color=\"textSecondary\" style={{ flex: \"2 1 auto\" }}>\r\n\t\t\t\t\t\t\tSchrijf je in voor modules\r\n          \t</Typography>\r\n\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\tlabel=\"filter\"\r\n\t\t\t\t\t\t\tvalue={this.state.filterMethod}\r\n\t\t\t\t\t\t\teditable\r\n\t\t\t\t\t\t\toptions={[\r\n\t\t\t\t\t\t\t\t{ label: \"Geen\", value: \"none\" },\r\n\t\t\t\t\t\t\t\t{ label: \"Blok 1\", value: \"period1\" },\r\n\t\t\t\t\t\t\t\t{ label: \"Blok 2\", value: \"period2\" },\r\n\t\t\t\t\t\t\t\t{ label: \"Blok 3\", value: \"period3\" },\r\n\t\t\t\t\t\t\t\t{ label: \"Blok 4\", value: \"period4\" }]}\r\n\t\t\t\t\t\t\tonChange={this.handleFilterChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</Paper>\r\n\t\t\t\t<div style={{ display: \"flex\" }} className=\"ColumnFlexDirectionOnMobile\">\r\n\t\t\t\t\t<Paper elevation={2}>\r\n\t\t\t\t\t\t<List component=\"nav\" style={{ flex: 1 }}>\r\n\t\t\t\t\t\t\t{this.getMenuItems()}\r\n\t\t\t\t\t\t</List>\r\n\t\t\t\t\t</Paper>\r\n\t\t\t\t\t<div style={{padding:\"12px\"}}>\r\n\t\t\t\t\t\t{data}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<br />\r\n\t\t\t\t<br />\r\n\t\t\t\t<br />\r\n\t\t\t</Page >\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\trole: state.role,\r\n\t\tcurrentPeriod: state.currentPeriod,\r\n\t\tenrollableGroups: state.enrollableGroups,\r\n\t\tgroups: state.groups,\r\n\t\tsubjects: state.subjects,\r\n\t\tenrolledGroupsIds: state.users[state.userId].enrollmentIds,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tgetSubjects: () => dispatch(getSubjects()),\r\n\t\tgetGroups: () => dispatch(getGroups()),\r\n\t\tgetEnrolLments: () => dispatch(getEnrolLments()),\r\n\t};\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CourseSelect);\r\n\r\n\r\n","import React, { Component } from \"react\";\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport {\r\n\tPaper, Typography, Table, TableHead, TableCell,\r\n\tTableBody, TableRow, Tooltip, TableSortLabel, Toolbar, Button\r\n} from \"@material-ui/core\";\r\nimport queryString from \"query-string\";\r\nimport Excel from \"exceljs/dist/es5/exceljs.browser\";\r\n\r\nimport Page from \"./Page\";\r\nimport Progress from '../components/Progress';\r\nimport Field from '../components/Field';\r\nimport EnsureSecureLogin from \"../components/EnsureSecureLogin\";\r\nimport $ from \"jquery\";\r\n\r\nconst splitValues = {\r\n\tusers: \"role\",\r\n\tevaluations: \"groupId\",\r\n\tenrollments: \"period\",\r\n}\r\n\r\nclass DataPage extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\ttables: null,\r\n\t\t\ttableSortColumns: {},\r\n\t\t\ttableSortDirections: {},\r\n\t\t};\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tlet values = queryString.parse(nextProps.location.search);\r\n\t\treturn {\r\n\t\t\t...prevState,\r\n\t\t\t...{\r\n\t\t\t\tdata: values.data ? values.data : \"evaluations\",\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount = () => {\r\n\t\tthis.fetchData(this.state.data)\r\n\t\t\t.then(tables => this.setState({ tables: this.splitTable(tables, splitValues[this.state.data]) }));\r\n\t}\r\n\r\n\thandleFilterChange = event => {\r\n\t\tthis.props.history.push({\r\n\t\t\tsearch: \"data=\" + event.target.value,\r\n\t\t});\r\n\t\tthis.fetchData(event.target.value)\r\n\t\t\t.then(tables => this.setState({ tables: this.splitTable(tables, splitValues[this.state.data]), tableSortColumns: Array(tables.length) }));\r\n\t}\r\n\r\n\tsort = (tableIndex) => {\r\n\t\tlet table = this.state.tables[tableIndex];\r\n\t\tconst column = this.state.tableSortColumns[tableIndex];\r\n\t\tconst order = this.state.tableSortDirections[tableIndex];\r\n\r\n\t\ttable = [table[0]].concat(table.slice(1, table.length).sort((a, b) => {\r\n\t\t\t//Only sort the slice 1-table.length because the header has to stick\r\n\t\t\ta = a[column];\r\n\t\t\tb = b[column];\r\n\t\t\tconst cmp = (b == null) - (a == null) || +(a > b) || -(a < b);\r\n\t\t\treturn order === \"asc\" ? cmp : -cmp;\r\n\t\t}));\r\n\r\n\t\tthis.setState(prevState => ({\r\n\t\t\ttables: [\r\n\t\t\t\t...prevState.tables.slice(0, tableIndex),\r\n\t\t\t\ttable,\r\n\t\t\t\t...prevState.tables.slice(tableIndex + 1),\r\n\t\t\t]\r\n\t\t}))\r\n\t}\r\n\r\n\thandleSortChange = (tableIndex, columnIndex) => {\r\n\t\tthis.setState(prevState => ({ //update the correct elements of the arrays of the state\r\n\t\t\ttableSortColumns: {\r\n\t\t\t\t...prevState.tableSortColumns,\r\n\t\t\t\t[tableIndex]: columnIndex,\r\n\t\t\t},\r\n\t\t\ttableSortDirections: {\r\n\t\t\t\t...prevState.tableSortDirections,\r\n\t\t\t\t[tableIndex]: prevState.tableSortDirections[tableIndex] === 'desc' && prevState.tableSortColumns[tableIndex] === columnIndex ? \"asc\" : \"desc\",// if this columns was selected and ordering desc, change to asc else desc\r\n\t\t\t}\r\n\t\t}), () => this.sort(tableIndex)); // when setting state is done start sorting\r\n\t}\r\n\r\n\tsplitTable = (table, splitValue) => {\r\n\t\tlet splitIndex = table[0].findIndex(x => x === splitValue);\r\n\t\tif (splitIndex < 0) {\r\n\t\t\treturn [table];\r\n\t\t}\r\n\t\tlet tables = [[table[0], table[1]]]; // initialize the tables with one table that has a header and a row\r\n\t\tfor (let i = 2; i < table.length; i++) {\r\n\t\t\tlet tableIndex = tables.findIndex(halfSplitTable => halfSplitTable[1][splitIndex] === table[i][splitIndex]); // see in what table this row has to go\r\n\t\t\tif (tableIndex < 0) {\r\n\t\t\t\ttables.push([table[0]]); // add a new table with a new header if a new value is found\r\n\t\t\t\ttableIndex = tables.length - 1;\r\n\t\t\t}\r\n\t\t\ttables[tableIndex].push(table[i]); // add row to correct table\r\n\t\t}\r\n\t\treturn tables;\r\n\t}\r\n\r\n\tfetchData = (table) => {\r\n\t\treturn $.ajax({\r\n\t\t\turl: \"api/function/data\",\r\n\t\t\ttype: \"post\",\r\n\t\t\tdata: {\r\n\t\t\t\ttable,\r\n\t\t\t\tsecureLogin: this.props.secureLogin,\r\n\t\t\t},\r\n\t\t\tdataType: \"json\",\r\n\t\t});\r\n\t}\r\n\r\n\tdownloadTables = () => {\r\n\t\tconst tables = this.state.tables;\r\n\t\tlet workbook = new Excel.Workbook();\r\n\t\tconst splitIndex = tables[0][0].findIndex(x => x === splitValues[this.state.data]);\r\n\t\tfor (let i = 0; i < tables.length; i++) { // add all the tables to a different sheet\r\n\t\t\tlet sheet = workbook.addWorksheet(tables[i][1][splitIndex]); // the sheet has the name of the value it's split on. I.e when splitting on courses every page is called what course it contains\r\n\t\t\tsheet.addRows(tables[i]);\r\n\t\t\tfor (let j = 1; j <= tables[i][0].length; j++) {\r\n\t\t\t\tsheet.getColumn(j).width = tables[i][0][j - 1].length < 10 ? 10 : tables[i][0][j - 1].length + 2;//set each column to at least fit the header\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst filenamePrefixes = { users: \"Gebruikers \", enrollments: \"Inschrijvingen \", evaluations: \"Beoordelingen \" };\r\n\t\tlet filename = filenamePrefixes[this.state.data] + (new Date()).toLocaleDateString() + \".xlsx\";\r\n\t\tthis.downloadWorkbook(workbook, filename);//gives for example: \"Gebruikers 3/3/2019.xlsx\"\r\n\t}\r\n\r\n\tdownloadWorkbook = (workbook, fileName) => { //magic\r\n\t\tworkbook.xlsx.writeBuffer({\r\n\t\t\tbase64: true\r\n\t\t})\r\n\t\t\t.then(function (xls64) {\r\n\t\t\t\tvar a = document.createElement(\"a\");\r\n\t\t\t\tvar data = new Blob([xls64], { type: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" });\r\n\t\t\t\tvar url = URL.createObjectURL(data);\r\n\t\t\t\ta.href = url;\r\n\t\t\t\ta.download = fileName;\r\n\t\t\t\tdocument.body.appendChild(a);\r\n\t\t\t\ta.click();\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\tdocument.body.removeChild(a);\r\n\t\t\t\t\twindow.URL.revokeObjectURL(url);\r\n\t\t\t\t}, 0);\r\n\t\t\t})\r\n\t\t\t.catch(function (error) {\r\n\t\t\t\tconsole.log(\"Something went wrong with downloading the excel file: \" + error.message);\r\n\t\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet content;\r\n\t\tif (this.state.tables == null) {\r\n\t\t\tcontent = <Progress />;\r\n\t\t} else {\r\n\t\t\tcontent = (this.state.tables).map((table, tableIndex) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Table key={tableIndex} style={tableIndex === 0 ? { marginTop: \"100px\" } : { marginTop: \"50px\" }}>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow key={0} style={{height: \"auto\"}}>\r\n\t\t\t\t\t\t\t\t{table[0].map((title, columnIndex) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<TableCell key={columnIndex} style={{\r\n\t\t\t\t\t\t\t\t\t\t\tcolor: \"black\",\r\n\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: \"#e0e0e0\",\r\n\t\t\t\t\t\t\t\t\t\t\tfontSize: 13,\r\n\t\t\t\t\t\t\t\t\t\t\ttop: 0\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip title=\"Sorteer\" enterDelay={300} placement=\"bottom-start\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableSortLabel active={this.state.tableSortColumns[tableIndex] === columnIndex}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdirection={this.state.tableSortDirections[tableIndex]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={event => this.handleSortChange(tableIndex, columnIndex)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ zIndex: 0 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{title}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableSortLabel>\r\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttable.filter((_, index) => { return (index > 0); }) //take everything but the header\r\n\t\t\t\t\t\t\t\t\t.map((row, rowIndex) => {\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow key={rowIndex + 1} style={{height: \"auto\"}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{row.map((cell, columnIndex) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell key={columnIndex} >{cell}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</ TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t)\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Page >\r\n\t\t\t\t<EnsureSecureLogin>\r\n\t\t\t\t\t<Paper elevation={2} style={{ position: \"absolute\", width: \"80%\", zIndex: 1 }}>\r\n\t\t\t\t\t\t<Toolbar style={{ display: \"flex\" }}>\r\n\t\t\t\t\t\t\t<Typography variant=\"subheading\" color=\"textSecondary\" style={{ flex: \"2 1 auto\" }}>\r\n\t\t\t\t\t\t\t\tGegevens\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={this.downloadTables} style={{ margin: \"0 10px\" }}>\r\n\t\t\t\t\t\t\t\tDownload\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\tlabel=\"Gegevens van\"\r\n\t\t\t\t\t\t\t\tvalue={this.state.data}\r\n\t\t\t\t\t\t\t\teditable\r\n\t\t\t\t\t\t\t\toptions={[\r\n\t\t\t\t\t\t\t\t\t{ label: \"Beoordelingen\", value: \"evaluations\" },\r\n\t\t\t\t\t\t\t\t\t{ label: \"Gebruikers\", value: \"users\" },\r\n\t\t\t\t\t\t\t\t\t{ label: \"Inschrijvingen\", value: \"enrollments\" }]}\r\n\t\t\t\t\t\t\t\tonChange={this.handleFilterChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t</Paper>\r\n\t\t\t\t\t{content}\r\n\t\t\t\t</EnsureSecureLogin>\r\n\t\t\t</Page>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tsecureLogin: state.secureLogin,\r\n\t}\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, null)(DataPage));","import React, { Component } from 'react';\r\nimport Page from './Page';\r\nimport Progress from '../components/Progress';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Field from '../components/Field';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport $ from \"jquery\";\r\nimport queryString from \"query-string\";\r\n\r\nclass Taxi extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tschedules: null,\r\n\t\t};\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tlet values = queryString.parse(nextProps.location.search);\r\n\t\treturn {\r\n\t\t\t...prevState,\r\n\t\t\t...{\r\n\t\t\t\tweek: values.week ? values.week : \"0\",\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\thandleFilterChange = event => {\r\n\t\tthis.props.history.push({\r\n\t\t\tsearch: \"week=\" + event.target.value,\r\n\t\t});\r\n\t\tthis.fetchSchedules(event.target.value);\r\n\t};\r\n\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.fetchSchedules(this.state.week);\r\n\t}\r\n\r\n\tfetchSchedules(week) {\r\n\t\treturn $.ajax({\r\n\t\t\turl: \"api/function/taxi\",\r\n\t\t\ttype: \"post\",\r\n\t\t\tdata: {\r\n\t\t\t\tweek,\r\n\t\t\t},\r\n\t\t\tdataType: \"json\",\r\n\t\t}).then(schedules => this.setState({\r\n\t\t\tschedules,\r\n\t\t}));\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet content;\r\n\t\tif (this.state.schedules == null) {\r\n\t\t\tcontent = <Progress />\r\n\t\t} else {\r\n\t\t\tcontent = this.state.schedules.map((s, i) =>\r\n\t\t\t\t<div\r\n\t\t\t\t\tstyle={{ width: \"80%\", margin: \"auto\" }}\r\n\t\t\t\t\tclassName=\"taxiScheduleHolder\"\r\n\t\t\t\t\tkey={i}\r\n\t\t\t\t\tdangerouslySetInnerHTML={{ __html: s }}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Page>\r\n\t\t\t\t<Paper\r\n\t\t\t\t\televation={2}\r\n\t\t\t\t\tstyle={{ position: \"relative\" }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Toolbar style={{ display: \"flex\" }}>\r\n\t\t\t\t\t\t<Typography variant=\"subheading\" color=\"textSecondary\" style={{ flex: \"2 1 auto\" }}>\r\n\t\t\t\t\t\t\tTaxischema\r\n          </Typography>\r\n\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\tlabel=\"week\"\r\n\t\t\t\t\t\t\tvalue={this.state.week}\r\n\t\t\t\t\t\t\teditable\r\n\t\t\t\t\t\t\toptions={[0, 1, 2, 3, 4, 5, 6, 7, 8].map(n => { return { label: n === 0 ? \"Basisrooster\" : \"Week \" + n, value: n + \"\" } })}\r\n\t\t\t\t\t\t\tonChange={this.handleFilterChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</Paper>\r\n\t\t\t\t{content}\r\n\t\t\t</Page>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Taxi;\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport { connect } from 'react-redux';\r\nimport { toggleMenu } from '../store/actions';\r\nimport { withRouter } from 'react-router-dom';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport List from '@material-ui/core/List';\r\n\r\n\r\nclass Header extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = { anchorEl: null };\r\n\t}\r\n\r\n\tlogoClick = () => {\r\n\t\tthis.props.history.push(\"/\");\r\n\t}\r\n\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<AppBar className=\"Header\">\r\n\t\t\t\t<Toolbar>\r\n\t\t\t\t\t<IconButton color=\"inherit\" aria-label=\"Menu\" onClick={this.props.toggleMenu} style={{position:\"absolute\"}} >\r\n\t\t\t\t\t\t<MenuIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<img src=\"/images/logo_qhighschool.svg\" alt=\"QHighschool Logo\" style={{height:\"60%\",margin:\"auto\",maxHeight:\"52px\", cursor:\"pointer\" }} onClick={this.logoClick} />\r\n\t\t\t\t\t<List color=\"inherit\" style={{ top:15,right: 20, position: \"absolute\"}} onClick={this.handleClick}>\r\n\t\t\t\t\t\t<PersonIcon style={{transform:\"scale(1.5)\",marginRight:\"10px\",float:\"left\"}}/>\r\n\t\t\t\t\t\t<span className=\"HiddenOnMobile\">\r\n\t\t\t\t\t\t\t{this.props.displayName}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</Toolbar>\r\n\t\t\t</AppBar>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tif (state.userId != null) {\r\n\t\treturn {\r\n\t\t\tdisplayName: state.users[state.userId].displayName,\r\n\t\t\tuserId: state.userId,\r\n\t\t};\r\n\t}\r\n\treturn {\r\n\t\tdisplayName: \"\",\r\n\t\tuserId: state.userId,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\ttoggleMenu: () => dispatch(toggleMenu()),\r\n\t};\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Header));\r\n\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport {IconButton, Snackbar, SnackbarContent} from '@material-ui/core/';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport theme from '../lib/MuiTheme'\r\nimport { removeNotification } from '../store/actions';\r\n\r\nclass NotificationBar extends Component {\r\n\r\n\r\n\tremoveNotification = (key) => {\r\n\t\tthis.props.removeNotification(this.props.notifications[key]);\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet notifications = this.props.notifications.map((not,key) => {\r\n\t\t\tlet color;\r\n\t\t\tswitch (not.priority) {\r\n\t\t\t\tcase \"high\":\r\n\t\t\t\t\tcolor = theme.palette.error.main;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"medium\":\r\n\t\t\t\t\tcolor = \"#ff8c00\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"light\":\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tcolor = theme.palette.primary.main;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<Snackbar\r\n\t\t\t\tkey={key}\r\n\t\t\t\tanchorOrigin={{\r\n\t\t\t\t  vertical: \"bottom\",\r\n\t\t\t\t  horizontal: \"right\"\r\n\t\t\t\t}}\r\n\t\t\t\topen={true}\r\n\t\t\t\tstyle = {{position:\"relative\"}}\r\n\t\t\t\tTransitionProps={{direction:\"left\"}}\r\n\t\t\t  >\r\n\t\t\t  <SnackbarContent\r\n\t\t\t  \tstyle={{background:color, marginBottom:\"4px\"}}\r\n\t\t\t\t\tmessage={<span id=\"message-id\">{not.message}</span>}\r\n\t\t\t\t\taction={[\r\n\t\t\t\t  <IconButton key=\"close\"\r\n\t\t\t\t\t\tonClick={() => {this.removeNotification(key)}} >\r\n\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t  </IconButton>\r\n\t\t\t\t]} />\r\n\t\t\t  </Snackbar>\t\t\r\n\t\t\t);\r\n\t\t});\r\n\t\treturn (\r\n\t\t\t<div style={{position:\"fixed\", bottom:0, right:0, width:\"auto\", zIndex:10}}>\r\n\t\t\t\t{notifications}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state,ownProps) {\r\n\tlet notifications = state.notifications.filter((not) => {\r\n\t\ttry {\r\n\t\t\treturn not.type === \"bar\" && new RegExp(not.scope).test(ownProps.location.pathname);\r\n\t\t} catch (err) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t});\r\n\treturn {\r\n\t\tnotifications: notifications,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tremoveNotification: (notification) => dispatch(removeNotification(notification)),\r\n\t};\r\n}\r\n\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(NotificationBar));","import React, { Component } from 'react';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport AssessmentIcon from '@material-ui/icons/Assessment';\r\nimport AssignmentIcon from '@material-ui/icons/Assignment';\r\nimport GroupIcon from '@material-ui/icons/Group';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport ExitIcon from '@material-ui/icons/ExitToApp';\r\nimport LocalTaxiIcon from '@material-ui/icons/LocalTaxi';\r\nimport BuildIcon from '@material-ui/icons/Build';\r\nimport ViewColumnIcon from '@material-ui/icons/ViewColumn';\r\nimport NotificationBadge from './NotificationBadge';\r\n\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport theme from '../lib/MuiTheme';\r\nimport $ from \"jquery\";\r\n\r\nclass Menu extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\t\tswitch (this.props.role) {\r\n\t\t\tcase \"student\":\r\n\t\t\t\tthis.state.pages = [\"aanbod\", \"portfolio\", \"profiel\", \"loguit\"];\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"teacher\":\r\n\t\t\t\tthis.state.pages = [\"groepen\", \"profiel\", \"loguit\"];\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"admin\":\r\n\t\t\t\tthis.state.pages = [\"groepen\", \"aanbod\", \"profiel\", \"gegevens\", \"taxi\", \"beheer\", \"loguit\"];\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"grade_admin\":\r\n\t\t\t\tthis.state.pages = [\"aanbod\", \"gegevens\", \"profiel\", \"loguit\"];\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthis.state.pages = [\"aanbod\", \"profiel\", \"loguit\"];\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tlogout() {\r\n\t\treturn $.ajax({\r\n\t\t\turl: \"/auth/logout\",\r\n\t\t\ttype: \"get\",\r\n\t\t\tdataType: \"json\",\r\n\t\t}).then(() => {\r\n\t\t\tdocument.location.reload();\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(page) {\r\n\t\tif (page === \"profiel\")\r\n\t\t\tthis.props.history.push(\"/gebruiker/\" + this.props.userId);\r\n\t\telse if (page === \"loguit\") {\r\n\t\t\tthis.logout();\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis.props.history.push(\"/\" + page);\r\n\t}\r\n\r\n\r\n\tgetIcon(iconName, color) {\r\n\t\tlet c = \"black\";\r\n\t\tif (theme.palette[color]) {\r\n\t\t\tc = theme.palette[color].main;\r\n\t\t}\r\n\t\tswitch (iconName) {\r\n\t\t\tcase \"Assignment\":\r\n\t\t\t\treturn <AssignmentIcon style={{ color: c }} />;\r\n\t\t\tcase \"Group\":\r\n\t\t\t\treturn <GroupIcon style={{ color: c }} />;\r\n\t\t\tcase \"Assessment\":\r\n\t\t\t\treturn <AssessmentIcon style={{ color: c }} />;\r\n\t\t\tcase \"Person\":\r\n\t\t\t\treturn <PersonIcon style={{ color: c }} />;\r\n\t\t\tcase \"ViewColumn\":\r\n\t\t\t\treturn <ViewColumnIcon style={{ color: c }} />;\r\n\t\t\tcase \"Exit\":\r\n\t\t\t\treturn <ExitIcon style={{ color: \"red\" }} />;\r\n\t\t\tcase \"Taxi\":\r\n\t\t\t\treturn <LocalTaxiIcon style={{ color: c }} />;\r\n\t\t\tcase \"Beheer\":\r\n\t\t\t\treturn <BuildIcon style={{ color: c }} />;\r\n\t\t\tdefault:\r\n\t\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\tgetItem(page, index) {\r\n\t\tconst isCurrentPage = (((\"/\" + page.id) === this.props.location.pathname));\r\n\t\tlet style = {};\r\n\t\tif (page.bottom) {\r\n\t\t\tstyle.position = \"absolute\";\r\n\t\t\tstyle.bottom = \"0px\";\r\n\t\t}\r\n\r\n\t\tconst color = isCurrentPage ? \"primary\" : \"inherit\";\r\n\t\tconst icon = (\r\n\t\t\t<ListItemIcon >\r\n\t\t\t\t<NotificationBadge scope={page.id}>\r\n\t\t\t\t\t{this.getIcon(page.icon, color)}\r\n\t\t\t\t</NotificationBadge>\r\n\t\t\t</ListItemIcon>\r\n\t\t);\r\n\t\treturn (\r\n\t\t\t<ListItem key={index} button onClick={() => this.onClick(page.id)} style={style}>\r\n\t\t\t\t{icon}\r\n\t\t\t\t<Typography variant=\"title\" color={color} className=\"HiddenOnMobile\">\r\n\t\t\t\t\t{page.title}\r\n\t\t\t\t</Typography>\r\n\t\t\t</ListItem>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst pages = [\r\n\t\t\t{\r\n\t\t\t\tid: \"aanbod\",\r\n\t\t\t\ttitle: \"Aanbod\",\r\n\t\t\t\ticon: \"Assignment\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: \"groepen\",\r\n\t\t\t\ttitle: \"Mijn groepen\",\r\n\t\t\t\ticon: \"Group\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: \"portfolio\",\r\n\t\t\t\ttitle: \"Portfolio\",\r\n\t\t\t\ticon: \"Assessment\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: \"gegevens\",\r\n\t\t\t\ttitle: \"Gegevens\",\r\n\t\t\t\ticon: \"ViewColumn\", // table_chart is more appropriate\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: \"taxi\",\r\n\t\t\t\ttitle: \"Taxi\",\r\n\t\t\t\ticon: \"Taxi\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: \"beheer\",\r\n\t\t\t\ttitle: \"Beheer\",\r\n\t\t\t\ticon: \"Beheer\",\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\tconst profile = [\r\n\t\t\t{\r\n\t\t\t\tid: \"profiel\",\r\n\t\t\t\ttitle: \"Profiel\",\r\n\t\t\t\ticon: \"Person\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: \"loguit\",\r\n\t\t\t\ttitle: \"Log uit\",\r\n\t\t\t\ticon: \"Exit\",\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\tconst visiblePages = pages\r\n\t\t\t.filter(page => this.state.pages.indexOf(page.id) !== -1)\r\n\t\t\t.map(this.getItem.bind(this));\r\n\r\n\t\tconst visibleProfile = profile\r\n\t\t\t.filter(page => this.state.pages.indexOf(page.id) !== -1)\r\n\t\t\t.map(this.getItem.bind(this));\r\n\r\n\t\treturn (\r\n\t\t\t<Paper elevation={8} className=\"Menu\">\r\n\t\t\t\t<List component=\"nav\" style={{ height: \"100%\" }}>\r\n\t\t\t\t\t{visiblePages}\r\n\t\t\t\t\t<div style={{ position: \"absolute\", bottom: \"20px\", width: \"100%\" }}>\r\n\t\t\t\t\t\t{visibleProfile}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</List>\r\n\t\t\t</Paper >\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tif (state.userId != null) {\r\n\t\treturn {\r\n\t\t\tdisplayName: state.users[state.userId].displayName,\r\n\t\t\tuserId: state.userId,\r\n\t\t\trole: state.role\r\n\t\t};\r\n\r\n\t}\r\n\treturn {\r\n\t\tdisplayName: \"\",\r\n\t\tuserId: state.userId,\r\n\t\trole: state.role\r\n\t};\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, null)(Menu));\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport map from 'lodash/map';\r\nimport forEach from 'lodash/forEach';\r\n\r\nimport Page from './Page';\r\nimport Progress from '../components/Progress';\r\nimport Field from '../components/Field';\r\nimport Group from './group/Group';\r\nimport { getSubjects, getGroups, getEnrolLments, getParticipatingGroups } from '../store/actions';\r\n\r\nimport {Typography, Divider, Toolbar, Paper } from '@material-ui/core';\r\nimport queryString from \"query-string\";\r\n\r\nclass Portfolio extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tlet values = queryString.parse(nextProps.location.search);\r\n\t\tif (values.filter) {\r\n\t\t\treturn {\r\n\t\t\t\t...prevState,\r\n\t\t\t\tfilter: values.filter\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\t...prevState,\r\n\t\t\t\tfilter: nextProps.role === \"student\" ? \"all\": \"period\"+ nextProps.currentPeriod, \r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\thandleFilterChange = event => {\r\n\t\tthis.props.history.push({\r\n\t\t\tsearch: \"filter=\" + event.target.value,\r\n\t\t});\r\n\t};\r\n\r\n\torderGroups(groups, compareFunction) {\r\n\t\tlet orders = {};\r\n\t\tforEach(groups, group => {\r\n\t\t\tif (!orders[compareFunction(group)]) {\r\n\t\t\t\torders[compareFunction(group)] = [];\r\n\t\t\t}\r\n\t\t\torders[compareFunction(group)].push(group);\r\n\t\t});\r\n\t\treturn map(orders, this.getOrder);\r\n\t}\r\n\r\n\tgetOrder(groups, name) {\r\n\t\tgroups = map(groups, group =>\r\n\t\t\t<Group key={group.id}\r\n\t\t\t\tgroupId={group.id}\r\n\t\t\t\tdisplay=\"card\" />\r\n\t\t);\r\n\r\n\t\treturn <div key={name} style={{ padding: \"10px\" }}>\r\n\t\t\t<Field value={name} style={{ type: \"headline\", color: \"secondary\" }} layout={{ area: true }} />\r\n\t\t\t{groups}\r\n\t\t\t<Divider style={{ marginTop: \"20px\" }} />\r\n\t\t</div>\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet options = [ { label: \"Alle\", value: \"all\" }, {label: \"Blok 1\", value: \"period1\"},  {label: \"Blok 2\", value: \"period2\"}, {label: \"Blok 3\", value: \"period3\"}, {label: \"Blok 4\", value: \"period4\"}];\r\n\t\tif ( this.props.role === \"student\" ) {\r\n\t\t\toptions.splice(1,0,{ label: \"Ingeschreven\", value: \"enrolled\" });\r\n\t\t}\r\n\r\n\t\tif (!this.props.groups) {\r\n\t\t\tthis.props.getParticipatingGroups();\r\n\t\t}\r\n\t\tif (!this.props.enrollmentIds) {\r\n\t\t\tthis.props.getEnrolLments();\r\n\t\t}\r\n\t\tlet groupIds = this.props.enrollmentIds || [];\r\n\t\tif ( this.state.filter !== \"enrolled\") {\r\n\t\t\t/* If filter is not equal to enrolled, participating ids need to be added. \r\n\t\t\tFrom participating ids we first remove the ones that are already in enrolled ids. \r\n\t\t\tFinally, after adding participating ids, we filter on period */\r\n\t\t\tgroupIds = this.props.participatingGroupIds.filter(id => {\r\n\t\t\t\treturn (groupIds.indexOf(id) === -1);\r\n\t\t\t}).concat(groupIds).filter(\r\n\t\t\t\tid => {\r\n\t\t\t\t\tif ( !this.props.groups || !this.props.groups[id]) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tswitch (this.state.filter) {\r\n\t\t\t\t\t\tcase \"period1\":\r\n\t\t\t\t\t\t\treturn this.props.groups[id].period === 1;\r\n\t\t\t\t\t\tcase \"period2\":\r\n\t\t\t\t\t\t\treturn this.props.groups[id].period === 2;\r\n\t\t\t\t\t\tcase \"period3\":\r\n\t\t\t\t\t\t\treturn this.props.groups[id].period === 3;\r\n\t\t\t\t\t\tcase \"period4\":\r\n\t\t\t\t\t\t\treturn this.props.groups[id].period === 4;\r\n\t\t\t\t\t\tdefault: // case all \r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tlet content;\r\n\t\tif (!this.props.groups || groupIds.filter(id => this.props.groups[id] == null).length !== 0) {\r\n\t\t\tcontent = <Progress />;\r\n\t\t} else {\r\n\t\t\tcontent = this.orderGroups(groupIds.map(id => this.props.groups[id]), function (group) {\r\n\t\t\t\treturn group.subjectName;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn <Page>\r\n\t\t\t<Paper\r\n\t\t\t\televation={2}\r\n\t\t\t\tstyle={{ position: \"relative\" }}\r\n\t\t\t>\r\n\t\t\t\t<Toolbar style={{ display: \"flex\" }}>\r\n\t\t\t\t\t<Typography variant=\"subheading\" color=\"textSecondary\" style={{ flex: \"2 1 auto\" }}>\r\n\t\t\t\t\t\t\t{this.props.role === \"student\" ? \"Portfolio\" : \"Mijn groepen\"} \t\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tlabel=\"filter\"\r\n\t\t\t\t\t\tvalue={this.state.filter}\r\n\t\t\t\t\t\teditable\r\n\t\t\t\t\t\toptions={options}\r\n\t\t\t\t\t\tonChange={this.handleFilterChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Toolbar>\r\n\t\t\t</Paper>\r\n\t\t\t{content}\r\n\t\t</Page>;\r\n\t}\r\n\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tgroups: state.groups,\r\n\t\tparticipatingGroupIds: state.users[state.userId].participatingGroupIds,\r\n\t\tenrollmentIds: state.users[state.userId].enrollmentIds,\r\n\t\trole: state.role,\r\n\t\tcurrentPeriod: state.currentPeriod,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tgetSubjects: () => dispatch(getSubjects()),\r\n\t\tgetGroups: () => dispatch(getGroups()),\r\n\t\tgetEnrolLments: () => dispatch(getEnrolLments()),\r\n\t\tgetParticipatingGroups: () => dispatch(getParticipatingGroups()),\r\n\t};\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Portfolio);\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport MenuList from '@material-ui/core/MenuList';\r\nimport Popper from '@material-ui/core/Popper';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { connect } from 'react-redux';\r\nimport filter from \"lodash/filter\";\r\nimport { ClickAwayListener } from '@material-ui/core';\r\n\r\nimport Field from '../components/Field';\r\nimport { getAllUsers } from '../store/actions';\r\n\r\nclass Menu extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tinput: \"\",\r\n\t\t\tuserId: null,\r\n\t\t\topen: false,\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.getAllUsers();\r\n\t}\r\n\r\n\tselectUser = (userId, displayName) => {\r\n\t\tthis.setState({\r\n\t\t\tinput: displayName,\r\n\t\t\topen: false,\r\n\t\t\tuserId: userId,\r\n\t\t});\r\n\t\tthis.props.onChange(userId, displayName);\r\n\t}\r\n\r\n\tgetFittingUsers = () => {\r\n\t\tconst regExp = new RegExp(this.state.input.toLowerCase());\r\n\t\tlet count = 0;\r\n\t\treturn filter(this.props.users, (user) => {\r\n\t\t\tconst v = regExp.test(user.displayName.toLowerCase())\r\n\t\t\tif (v) {\r\n\t\t\t\tcount++;\r\n\t\t\t}\r\n\t\t\treturn v && count < 6;\r\n\t\t}).map(user => {\r\n\t\t\treturn (\r\n\t\t\t\t<MenuItem key={user.id + user.displayName} onClick={() => this.selectUser(user.id, user.displayName)}>\r\n\t\t\t\t\t{user.displayName}\r\n\t\t\t\t</MenuItem>\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\thandleInput = (event) => {\r\n\t\tif (this.state.userId) {\r\n\t\t\tthis.props.onChange(null, null);\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tinput: event.target.value,\r\n\t\t\topen: true,\r\n\t\t\tuserId: null,\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ClickAwayListener onClickAway={() => this.setState({ open: false })}>\r\n\t\t\t\t<span>\r\n\t\t\t\t\t<Field label=\"Gebruiker\" value={this.state.input} editable onChange={this.handleInput} style={{ margin: \"normal\" }} />\r\n\t\t\t\t\t<Popper open={this.state.aliasId == null && this.state.open} anchorEl={this.anchorEl} disablePortal >\r\n\t\t\t\t\t\t<Paper style={{position:\"relative\", zIndex:\"1\"}}>\r\n\t\t\t\t\t\t\t<MenuList>\r\n\t\t\t\t\t\t\t\t{this.getFittingUsers()}\r\n\t\t\t\t\t\t\t</MenuList>\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</Popper>\r\n\t\t\t\t</span>\r\n\t\t\t</ClickAwayListener>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tusers: state.users,\r\n\t}\r\n}\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tgetAllUsers: () => dispatch(getAllUsers()),\r\n\t};\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Menu);\r\n\r\n","import React, { Component } from 'react';\r\nimport EnsureSecureLogin from '../components/EnsureSecureLogin';\r\nimport Page from './Page';\r\nimport map from 'lodash/map';\r\nimport $ from \"jquery\";\r\n\r\nimport { connect } from 'react-redux';\r\nimport queryString from \"query-string\";\r\nimport SelectUser from '../components/SelectUser';\r\nimport { Divider, Toolbar, Button, Paper, Typography } from '@material-ui/core';\r\nimport Field from '../components/Field';\r\nimport { getSubjects, setAlias, addNotification, addSubject, addCourse, addGroup } from '../store/actions';\r\n\r\nconst initialValues = {\r\n\tsubject: {\r\n\t\tname: \"\",\r\n\t\tdescription: \"\",\r\n\t},\r\n\tcourse: {\r\n\t\tname: \"\",\r\n\t\tsubjectId: null,\r\n\t},\r\n\tgroup: {\r\n\t\tcourseId: null,\r\n\t\tteacherId: null,\r\n\t}\r\n}\r\n\r\nclass ControlPanel extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tcourses: [],\r\n\t\t\taliasId: null,\r\n\t\t\tsubject: initialValues.subject,\r\n\t\t\tcourse: initialValues.course,\r\n\t\t\tgroup: initialValues.group,\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tlet values = queryString.parse(nextProps.location.search);\r\n\t\treturn {\r\n\t\t\t...prevState,\r\n\t\t\t...{\r\n\t\t\t\taddType: values.addType ? values.addType : \"subject\",\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\t$.ajax({\r\n\t\t\turl: \"api/course/list\",\r\n\t\t\ttype: \"get\",\r\n\t\t\tdata: {},\r\n\t\t\tdataType: \"json\",\r\n\t\t}).then((courses) => {\r\n\t\t\tconsole.log(courses);\r\n\t\t\tthis.setState({\r\n\t\t\t\tcourses\r\n\t\t\t});\r\n\t\t});\r\n\t\tthis.props.getSubjects();\r\n\t}\r\n\r\n\tloginUsingAlias = () => {\r\n\t\tthis.props.dispatch(setAlias(this.state.aliasId));\r\n\t}\r\n\r\n\thandleAliasChange = (userId) => {\r\n\t\tthis.setState({\r\n\t\t\taliasId: userId,\r\n\t\t});\r\n\t}\r\n\r\n\tnotification = (typeObjectAdded, success) => {\r\n\t\tlet typeNames = { \"subject\": \"Vak\", \"course\": \"Module\", \"group\": \"Groep\" };\r\n\t\ttypeObjectAdded = typeNames[typeObjectAdded];\r\n\t\tif (success) {\r\n\t\t\tconsole.log(typeObjectAdded + \" added!\");\r\n\t\t} else {\r\n\t\t\tconsole.log(typeObjectAdded + \" not added :(\");\r\n\t\t}\r\n\t\t// if ( success ) {\r\n\t\t// \tthis.props.addNotification(\r\n\t\t// \t\t{\r\n\t\t// \t\t\tpriority:\"low\",\r\n\t\t// \t\t\ttype:\"bar\",\r\n\t\t// \t\t\tmessage:typeObjectAdded + \"succesvol toegevoegd!\",\r\n\t\t// \t\t\tscope: \"beheer\",\r\n\t\t// \t\t}\r\n\t\t// \t)\r\n\t\t// } else {\r\n\t\t// \tthis.props.addNotification(\r\n\t\t// \t\t{\r\n\t\t// \t\t\tpriority:\"medium\",\r\n\t\t// \t\t\ttype:\"bar\",\r\n\t\t// \t\t\tmessage:\"Er is iets misgegaan. \" + typeObjectAdded + \" is niet toegevoegd.\",\r\n\t\t// \t\t\tscope:\"beheer\",\r\n\t\t// \t\t}\r\n\t\t// \t)\r\n\t\t// }\r\n\t}\r\n\r\n\tadd(type) {\r\n\t\tconst typeValues = this.state[type];\r\n\t\tlet addFunction;\r\n\t\tswitch (type) {\r\n\t\t\tcase \"subject\": addFunction = async () => {\r\n\t\t\t\treturn this.props.addSubject(typeValues.name, typeValues.description).then(success => { return success.success })\r\n\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"course\": addFunction = async () => {\r\n\t\t\t\treturn this.props.addCourse(typeValues.name, typeValues.subjectId).then(success => { return success.success })\r\n\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: addFunction = async () => {\r\n\t\t\t\treturn this.props.addGroup(typeValues.courseId, typeValues.teacherId).then(success => { return success.success })\r\n\t\t\t}; // group\r\n\t\t}\r\n\t\taddFunction().then(success => {\r\n\t\t\tif (success) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\t[type]: initialValues[type],\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tthis.notification(type, success);\r\n\t\t})\r\n\t}\r\n\r\n\thandleChange = (event, type) => {\r\n\t\tthis.setState(prevState => ({\r\n\t\t\t[type]: {\r\n\t\t\t\t...prevState[type],\r\n\t\t\t\t[event.name]: event.target.value,\r\n\t\t\t}\r\n\t\t}))\r\n\t}\r\n\r\n\thandleTypeChange = event => {\r\n\t\tthis.props.history.push({\r\n\t\t\tsearch: \"addType=\" + event.target.value,\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst subject = this.state.subject;\r\n\t\tconst course = this.state.course;\r\n\t\tconst group = this.state.group;\r\n\t\tconst addType = this.state.addType;\r\n\t\tconst subjects = this.props.subjects || {};\r\n\t\tlet courses = this.state.courses;\r\n\t\tlet addView;\r\n\t\tswitch (addType) {\r\n\t\t\tcase \"subject\":\r\n\t\t\t\taddView = <div>\r\n\t\t\t\t\t<Field name=\"name\" label={\"Naam\"} value={subject.name} onChange={(event) => { this.handleChange(event, \"subject\") }} editable={true} validate={{ maxLength: 50 }} />\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<Field name=\"description\" label=\"Omschrijving\" value={subject.description} onChange={(event) => { this.handleChange(event, \"subject\") }} editable={true} validate={{ maxLength: 440 }} layout={{ area: true }} />\r\n\t\t\t\t</div>\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"course\":\r\n\t\t\t\taddView = <div >\r\n\t\t\t\t\t<Field name=\"name\" label={\"Naam\"} value={course.name} onChange={(event) => { this.handleChange(event, \"course\") }} editable={true} validate={{ maxLength: 50 }} style={{ flex: \"1\" }} />\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<Field value={course.subjectId} name=\"subjectId\" label=\"Vak\" onChange={(event) => { this.handleChange(event, \"course\") }} editable={true} options={map(subjects, (subject) => { return { value: subject.id, label: subject.name } })} style={{ minWidth: \"200px\" }} />\r\n\t\t\t\t</div>\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: //group\r\n\t\t\t\taddView = <div>\r\n\t\t\t\t\t<Field value={group.courseId} name=\"courseId\" label=\"Module\" onChange={(event) => { this.handleChange(event, \"group\") }} editable={true} options={courses.map((course) => { return { label: course.name, value: course.id } })} style={{ minWidth: \"200px\" }} />\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<SelectUser name=\"teacher\" value={group.teacherId} onChange={(userId) => { let event = { target: { value: userId }, name: \"teacherId\" }; this.handleChange(event, \"group\") }} />\r\n\t\t\t\t\t{/* for the SelectUsers's onChange we fake an 'event' because SelectUser is special */}\r\n\t\t\t\t</div>\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Page>\r\n\t\t\t\t<EnsureSecureLogin>\r\n\t\t\t\t\t<Paper\r\n\t\t\t\t\t\televation={2}\r\n\t\t\t\t\t\tstyle={{ position: \"relative\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Toolbar style={{ display: \"flex\" }}>\r\n\t\t\t\t\t\t\t<Typography variant=\"subheading\" color=\"textSecondary\" style={{ flex: \"2 1 auto\" }}>\r\n\t\t\t\t\t\t\t\tBeheer\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t</Paper>\r\n\t\t\t\t\t<div style={{ margin: \"10px 0\" }}>\r\n\t\t\t\t\t\t<SelectUser onChange={this.handleAliasChange} />\r\n\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" disabled={this.state.aliasId == null} onClick={this.loginUsingAlias}>Login in met alias</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Divider />\r\n\t\t\t\t\t<div >\r\n\t\t\t\t\t\t<Typography variant=\"title\" color=\"primary\" style={{ margin: \"18px 12px\", float: \"left\" }}>\r\n\t\t\t\t\t\t\tNieuw(e):\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Field value={addType} name=\"addType\" editable={true} onChange={this.handleTypeChange} options={[{ value: \"course\", label: \"Module\" }, { value: \"subject\", label: \"Vak\" }, { value: \"group\", label: \"Groep\" }]} style={{ minWidth: \"200px\", maxWidth: \"400px\", type: \"title\" }} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{addView}\r\n\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" style={{ height: \"37px\", margin: \"12px\" }} onClick={() => { this.add(addType) }}> Voeg toe\t</Button>\r\n\t\t\t\t</EnsureSecureLogin>\r\n\t\t\t</Page>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tsubjects: state.subjects,\r\n\t\tgroups: state.groups,\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\taddSubject: async (name, description) => dispatch(addSubject(name, description)),\r\n\t\taddCourse: async (name, subjectId) => dispatch(addCourse(name, subjectId)),\r\n\t\taddGroup: async (courseId, userId) => dispatch(addGroup(courseId, userId)),\r\n\t\taddNotification: (notification) => dispatch(addNotification(notification)),\r\n\t\tgetSubjects: () => dispatch(getSubjects()),\r\n\t\tdispatch: dispatch,\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ControlPanel);","import React, { Component } from \"react\";\r\nimport {\r\n\tRoute,\r\n\tSwitch,\r\n\tRedirect,\r\n\twithRouter,\r\n} from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { getSelf, addNotification } from './store/actions';\r\n\r\nimport Login from \"./pages/Login\";\r\nimport CourseSelect from \"./pages/CourseSelect\";\r\nimport Group from \"./pages/group/Group\";\r\nimport User from \"./pages/user/User\";\r\nimport DataPage from \"./pages/DataPage\";\r\nimport Taxi from \"./pages/Taxi\";\r\n\r\nimport Header from \"./components/Header\";\r\nimport NotificationBar from \"./components/NotificationBar\";\r\nimport Menu from \"./components/Menu\";\r\nimport Portfolio from \"./pages/Portfolio\";\r\nimport ControlPanel from \"./pages/ControlPanel\";\r\n\r\n\r\nclass App extends Component {\r\n\r\n\tcomponentWillMount() {\r\n\t\tthis.props.getSelf();\r\n\t}\r\n\r\n\thandleShowMenu() {\r\n\t\tlet showMenu = this.state.showMenu;\r\n\t\tthis.setState({\r\n\t\t\tshowMenu: !showMenu,\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (!this.props.userId && this.props.location.pathname !== \"/login\") {\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"App\">\r\n\t\t\t\t\t<Header />\r\n\t\t\t\t\t<NotificationBar />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t\tlet startPage = \"/groepen\";\r\n\t\tif ( this.props.role === \"student\" ) {\r\n\t\t\tstartPage =  \"/aanbod\";\r\n\t\t} else if ( this.props.role === \"grade_admin\" ){\r\n\t\t\tstartPage = \"/gegevens\";\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<NotificationBar />\r\n\t\t\t\t{this.props.showMenu && <Menu />}\r\n\t\t\t\t<Header />\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route path=\"/login\" component={Login} />\r\n\t\t\t\t\t<Route path=\"/aanbod\" component={CourseSelect} />\r\n\t\t\t\t\t<Route path=\"/groep/:groupId\" component={Group} />\r\n\t\t\t\t\t<Route path=\"/gebruiker/:userId\" component={User} />\r\n\t\t\t\t\t<Route path=\"/profiel/\" component={User} />\r\n\t\t\t\t\t<Route path=\"/portfolio/\" component={Portfolio} />\r\n\t\t\t\t\t<Route path=\"/groepen/\" component={Portfolio} />\r\n\t\t\t\t\t<Route path=\"/gegevens/\" component={DataPage} />\r\n\t\t\t\t\t<Route path=\"/taxi/\" component={Taxi} />\r\n\t\t\t\t\t<Route path=\"/beheer/\" component={ControlPanel} />\r\n\t\t\t\t\t<Redirect push to={this.props.role === \"student\" ? \"/aanbod\" : \"/groepen\"} />\r\n\t\t\t\t\t<Redirect push to={startPage} />\r\n\t\t\t\t</Switch>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tshowMenu: state.showMenu,\r\n\t\trole: state.role,\r\n\t\tuserId: state.userId,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tgetSelf: () => dispatch(getSelf()),\r\n\t\taddNotification: (notification) => dispatch(addNotification(notification)),\r\n\t};\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(App));\r\n","import React, { Component } from \"react\";\r\n\r\nimport { MuiThemeProvider } from '@material-ui/core/styles';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\n\r\nimport theme from './MuiTheme';\r\nimport App from '../App';\r\n\r\nclass GlobalProvider extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Provider store={this.props.store}>\r\n\t\t\t\t<MuiThemeProvider theme={theme}>\r\n\t\t\t\t\t<BrowserRouter>\r\n\t\t\t\t\t\t<App />\r\n\t\t\t\t\t</BrowserRouter>\r\n\t\t\t\t</MuiThemeProvider>\r\n\t\t\t</Provider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default GlobalProvider;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { createStore, applyMiddleware, compose as reduxCompose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport reducer from './store/mainReducer';\r\nimport GlobalProvider from './lib/GlobalProvider';\r\nimport \"./layout.css\";\r\nrequire('typeface-roboto');\r\n\r\nconst compose = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || reduxCompose;\r\nconst store = createStore(\r\n  reducer,\r\n  compose(\r\n    applyMiddleware(thunk),\r\n  ),\r\n);\r\n\r\nReactDOM.render(\r\n\t<GlobalProvider store={store} />,\r\n\tdocument.getElementById('root'));\r\n"],"sourceRoot":""}