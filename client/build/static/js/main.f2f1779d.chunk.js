(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{389:function(e,t,n){e.exports=n(830)},694:function(e,t){},713:function(e,t){},715:function(e,t){},828:function(e,t,n){},830:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(36),i=n.n(o),l=n(99),s=n(321),u=n(28),c=n(40),p=n(3),d={};var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_USERS":var n=e;for(var a in t.users)n[a]=Object(p.a)({},n[a],t.users[a]);return n;case"CHANGE_USER":return Object(p.a)({},e,Object(u.a)({},t.user.id,Object(p.a)({},e[t.user.id],t.user)));case"CHANGE_ENROLLMENTS":if("ADD"===t.action)return Object(p.a)({},e,Object(u.a)({},t.userId,Object(p.a)({},e[t.userId],{enrollmentIds:(e[t.userId].enrollmentIds||[]).concat(t.groupId)})));if("REMOVE"===t.action){var r=e[t.userId].enrollmentIds.indexOf(t.groupId);return Object(p.a)({},e,Object(u.a)({},t.userId,Object(p.a)({},e[t.userId],{enrollmentIds:[].concat(Object(c.a)(e[t.userId].enrollmentIds.slice(0,r)),Object(c.a)(e[t.userId].enrollmentIds.slice(r+1)))})))}return Object(p.a)({},e,Object(u.a)({},t.userId,Object(p.a)({},e[t.userId],{enrollmentIds:t.enrollmentIds})));default:return e}},m={};var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_GROUPS":return Object(p.a)({},t.groups,e);case"CHANGE_GROUP":return Object(p.a)({},e,Object(u.a)({},t.group.id,Object(p.a)({},e[t.group.id],t.group)));default:return e}},b={userId:null,enrollableGroups:null,currentPeriod:4,subjects:null,groups:null,users:null,showMenu:!0,notifications:[],hasFetched:[]};var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SELF":return Object(p.a)({},e,{userId:t.user.id,role:t.user.role,notifications:[].concat(Object(c.a)(e.notifications),Object(c.a)(t.user.notifications)),users:Object(p.a)(Object(u.a)({},t.user.id,t.user),e.users)});case"SET_SECURE_LOGIN":return Object(p.a)({},e,{secureLogin:t.secureLogin});case"ADD_NOTIFICATION":return Object(p.a)({},e,{notifications:[].concat(Object(c.a)(e.notifications),[t.notification])});case"REMOVE_NOTIFICATION":var n=e.notifications.indexOf(t.notification);return Object(p.a)({},e,{notifications:[].concat(Object(c.a)(e.notifications.slice(0,n)),Object(c.a)(e.notifications.slice(n+1)))});case"TOGGLE_MENU":return null!=t.menuState?Object(p.a)({},e,{showMenu:t.menuState}):Object(p.a)({},e,{showMenu:!e.showMenu});case"HAS_FETCHED":return Object(p.a)({},e,{hasFetched:[].concat(Object(c.a)(e.hasFetched),[{call:t.call,method:t.method,data:t.data}])});case"CHANGE_ENROLLABLE_GROUPS":return Object(p.a)({},e,{enrollableGroups:t.enrollableGroups});case"CHANGE_SUBJECTS":return Object(p.a)({},e,{subjects:Object(p.a)({},e.subjects,t.subjects)});case"CHANGE_PRESENCE_USER_STATUS":var a=e.groups[t.groupId].lessons;return a[t.lessonId].userStatus=t.userStatus,Object(p.a)({},e,{lessons:a});default:return Object(p.a)({},e,{users:h(e.users,t),groups:g(e.groups,t)})}},y=n(7),v=n(8),x=n(10),E=n(9),O=n(11),j=n(39),k=n(834),C=n(18),I=Object(j.createMuiTheme)({breakpoints:{keys:["xs","sm","md","lg","xl"],values:{xs:0,sm:600,md:960,lg:1280,xl:1920}},direction:"ltr",mixins:{toolbar:{minHeight:56,"@media (min-width:0px) and (orientation: landscape)":{minHeight:48},"@media (min-width:600px)":{minHeight:64}}},overrides:{},palette:{common:{black:"#000",white:"#fff"},type:"light",primary:{main:"#08C8F9",contrastText:"#fff",light:"rgb(57, 211, 250)",dark:"rgb(5, 140, 174)"},secondary:{main:"#C3386B",contrastText:"#ffffff",light:"rgb(207, 95, 136)",dark:"rgb(136, 39, 74)"},error:{light:"#e57373",main:"#f44336",dark:"#d32f2f",contrastText:"#fff"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},contrastThreshold:3,tonalOffset:.2,text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:"#fff",default:"#fafafa"},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.08)",hoverOpacity:.08,selected:"rgba(0, 0, 0, 0.14)",disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)"}},props:{},shadows:["none","0px 1px 3px 0px rgba(0, 0, 0, 0.2),0px 1px 1px 0px rgba(0, 0, 0, 0.14),0px 2px 1px -1px rgba(0, 0, 0, 0.12)","0px 1px 5px 0px rgba(0, 0, 0, 0.2),0px 2px 2px 0px rgba(0, 0, 0, 0.14),0px 3px 1px -2px rgba(0, 0, 0, 0.12)","0px 1px 8px 0px rgba(0, 0, 0, 0.2),0px 3px 4px 0px rgba(0, 0, 0, 0.14),0px 3px 3px -2px rgba(0, 0, 0, 0.12)","0px 2px 4px -1px rgba(0, 0, 0, 0.2),0px 4px 5px 0px rgba(0, 0, 0, 0.14),0px 1px 10px 0px rgba(0, 0, 0, 0.12)","0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 5px 8px 0px rgba(0, 0, 0, 0.14),0px 1px 14px 0px rgba(0, 0, 0, 0.12)","0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 6px 10px 0px rgba(0, 0, 0, 0.14),0px 1px 18px 0px rgba(0, 0, 0, 0.12)","0px 4px 5px -2px rgba(0, 0, 0, 0.2),0px 7px 10px 1px rgba(0, 0, 0, 0.14),0px 2px 16px 1px rgba(0, 0, 0, 0.12)","0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0, 0, 0, 0.12)","0px 5px 6px -3px rgba(0, 0, 0, 0.2),0px 9px 12px 1px rgba(0, 0, 0, 0.14),0px 3px 16px 2px rgba(0, 0, 0, 0.12)","0px 6px 6px -3px rgba(0, 0, 0, 0.2),0px 10px 14px 1px rgba(0, 0, 0, 0.14),0px 4px 18px 3px rgba(0, 0, 0, 0.12)","0px 6px 7px -4px rgba(0, 0, 0, 0.2),0px 11px 15px 1px rgba(0, 0, 0, 0.14),0px 4px 20px 3px rgba(0, 0, 0, 0.12)","0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 12px 17px 2px rgba(0, 0, 0, 0.14),0px 5px 22px 4px rgba(0, 0, 0, 0.12)","0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 13px 19px 2px rgba(0, 0, 0, 0.14),0px 5px 24px 4px rgba(0, 0, 0, 0.12)","0px 7px 9px -4px rgba(0, 0, 0, 0.2),0px 14px 21px 2px rgba(0, 0, 0, 0.14),0px 5px 26px 4px rgba(0, 0, 0, 0.12)","0px 8px 9px -5px rgba(0, 0, 0, 0.2),0px 15px 22px 2px rgba(0, 0, 0, 0.14),0px 6px 28px 5px rgba(0, 0, 0, 0.12)","0px 8px 10px -5px rgba(0, 0, 0, 0.2),0px 16px 24px 2px rgba(0, 0, 0, 0.14),0px 6px 30px 5px rgba(0, 0, 0, 0.12)","0px 8px 11px -5px rgba(0, 0, 0, 0.2),0px 17px 26px 2px rgba(0, 0, 0, 0.14),0px 6px 32px 5px rgba(0, 0, 0, 0.12)","0px 9px 11px -5px rgba(0, 0, 0, 0.2),0px 18px 28px 2px rgba(0, 0, 0, 0.14),0px 7px 34px 6px rgba(0, 0, 0, 0.12)","0px 9px 12px -6px rgba(0, 0, 0, 0.2),0px 19px 29px 2px rgba(0, 0, 0, 0.14),0px 7px 36px 6px rgba(0, 0, 0, 0.12)","0px 10px 13px -6px rgba(0, 0, 0, 0.2),0px 20px 31px 3px rgba(0, 0, 0, 0.14),0px 8px 38px 7px rgba(0, 0, 0, 0.12)","0px 10px 13px -6px rgba(0, 0, 0, 0.2),0px 21px 33px 3px rgba(0, 0, 0, 0.14),0px 8px 40px 7px rgba(0, 0, 0, 0.12)","0px 10px 14px -6px rgba(0, 0, 0, 0.2),0px 22px 35px 3px rgba(0, 0, 0, 0.14),0px 8px 42px 7px rgba(0, 0, 0, 0.12)","0px 11px 14px -7px rgba(0, 0, 0, 0.2),0px 23px 36px 3px rgba(0, 0, 0, 0.14),0px 9px 44px 8px rgba(0, 0, 0, 0.12)","0px 11px 15px -7px rgba(0, 0, 0, 0.2),0px 24px 38px 3px rgba(0, 0, 0, 0.14),0px 9px 46px 8px rgba(0, 0, 0, 0.12)"],typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:14,fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:500,display4:{fontSize:"7rem",fontWeight:300,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',letterSpacing:"-.04em",lineHeight:"1.14286em",marginLeft:"-.04em",color:"rgba(0, 0, 0, 0.54)"},display3:{fontSize:"3.5rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',letterSpacing:"-.02em",lineHeight:"1.30357em",marginLeft:"-.02em",color:"rgba(0, 0, 0, 0.54)"},display2:{fontSize:"2.8125rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.06667em",marginLeft:"-.02em",color:"rgba(0, 0, 0, 0.54)"},display1:{fontSize:"2.125rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.20588em",color:"rgba(0, 0, 0, 0.54)"},headline:{fontSize:"1.5rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.35417em",color:"rgba(0, 0, 0, 0.87)"},title:{fontSize:"1.3125rem",fontWeight:500,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.16667em",color:"rgba(0, 0, 0, 0.87)"},subheading:{fontSize:"1rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.5em",color:"rgba(0, 0, 0, 0.87)"},body2:{fontSize:"0.875rem",fontWeight:500,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.71429em",color:"rgba(0, 0, 0, 0.87)"},body1:{fontSize:"0.875rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.46429em",color:"rgba(0, 0, 0, 0.87)"},caption:{fontSize:"0.75rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.375em",color:"rgba(0, 0, 0, 0.54)"},button:{fontSize:"0.875rem",textTransform:"uppercase",fontWeight:500,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',color:"rgba(0, 0, 0, 0.87)"}},transitions:{easing:{easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration:{shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195}},spacing:{unit:8},zIndex:{mobileStepper:1e3,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500}}),S=n(836),w=n(833),N=n(835),G=n(832),A=n(34),D=n.n(A),L=n(55),T=n(64),M=n.n(T),P=n(49),H=n.n(P),R=n(323),_=n.n(R),z=n(31),F=n.n(z),B=n(154),U=n.n(B),W=n(75),V=n.n(W),J=n(153),$=n.n(J),Y=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).onChange=function(e){n.props.onChange(e.target.value)},n.state={error:!1},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e,t,n=null==this.props.value?"":this.props.value,a=this.props.style||{},o=this.props.layout||{},i=this.props.label,l=!0,s=!1,u=!1,c=this.props.options,d=a.underline||!0,h=a.margin||"none",m=0,g=[];if(this.props.style){switch(this.props.style.type){case"headline":(a=Object(p.a)({},a,I.typography.headline)).color=I.palette.primary.main;break;case"title":(a=Object(p.a)({},a,I.typography.title)).color=I.palette.primary.main;break;case"caption":a.color=I.palette.text.secondary;break;default:a.color=I.palette.text.primary}switch(this.props.style.color){case"primary":a.color=I.palette.primary.main;break;case"primaryContrast":a.color=I.palette.primary.contrastText;break;case"secondary":a.color=I.palette.secondary.main;break;case"error":a.color=I.palette.error.main}}if("right"===o.alignment&&(a.float="right",a.textAlign="right",g.push("right")),"left"===o.alignment&&(a.float="left"),o.area&&(u=!0,s=!0),!this.props.default||!1!==this.props.editable||""!==n&&null!=n||(n=this.props.default),this.props.editable)l=!1,d=a.underline||!1,h=a.margin||"normal";else{if(!0!==a.labelVisible&&(i=null),null!=c&&null!=c[0]&&"string"!==typeof c[0]){var b=c.filter(function(e){return e.value===n})[0];null!=b&&(n=b.label)}c=null}switch(c&&(e=c.map(function(e){return"string"!==typeof e?r.a.createElement(V.a,{key:e.value,value:e.value},e.label):r.a.createElement(V.a,{key:e,value:e},e)})),a.unit&&(t=r.a.createElement($.a,{position:"end"},a.unit)),o.td&&(a.width="100%"),h){case"dense":m=5;break;case"normal":m=12}var f=r.a.createElement(U.a,{value:n,margin:"none",disabled:l,fullWidth:u,multiline:s,className:g.join(" "),label:i,select:!!c,style:Object(p.a)({flex:1},a,{margin:m}),onChange:this.onChange,error:this.state.error,InputProps:{disableUnderline:d,style:a,endAdornment:t||null,inputProps:{style:a}}},e);return o.td?(a.width=void 0,r.a.createElement("td",{style:a},f)):f}}],[{key:"getDerivedStateFromProps",value:function(e,n){return Object(p.a)({},n,{error:!!e.editable&&!t.validate(e.value,e.validate)})}},{key:"validate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[e];switch(t.type){case"phoneNumber":if(!/(^\+[0-9]{2}|^\+[0-9]{2}\(0\)|^\(\+[0-9]{2}\)\(0\)|^00[0-9]{2}|^0)([0-9]{9}$|[0-9\-\s]{10}$)/i.test(e))return!1;break;case"email":if(!/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/g.test(e))return!1;break;case"integer":if(!/^\+?[1-9][\d]*$/i.test(e))return!1;break;case"float":if(isNaN(e))return!1;break;case"decimalGrade":var a=e.replace(/\./g,"_$comma$_").replace(/,/g,".").replace(/_\$comma\$_/g,",");if("ND"===a)return!0;if(isNaN(a))return!1}return!(t.min&&parseFloat(e)<t.min)&&(!(t.max&&parseFloat(e)>t.max)&&((!t.notEmpty||null!=e&&""!==e&&" "!==e&&-1!==n.indexOf(e))&&!(t.maxLength&&e.length>t.maxLength)))}}]),t}(r.a.Component);function Z(e){return function(t,n){var a=t.responseJSON;throw e({type:"ADD_NOTIFICATION",notification:{id:Math.random(),priority:"high",type:"bar",message:a&&a.error?a.error:"Er is iets mis gegaan",scope:"."}}),a}}function q(e,t,n,a,r,o){return X.apply(this,arguments)}function X(){return(X=Object(L.a)(D.a.mark(function e(t,n,a,r,o,i){var l,s,u;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l={call:t,method:n,data:a},s=0;case 2:if(!(s<o().hasFetched.length)){e.next=9;break}if((u=o().hasFetched[s]).data!==l.data||u.call!==l.call||u.method!==l.method){e.next=6;break}return e.abrupt("return",Promise.reject(new Error("Duplicate api call")));case 6:s++,e.next=2;break;case 9:return r(Object(p.a)({},l,{type:"HAS_FETCHED"})),e.abrupt("return",H.a.ajax({url:"/api/"+t,type:n,data:a,dataType:"json"}).then(function(e){return"put"!==n&&"patch"!==n&&"delete"!==n||r({type:"ADD_NOTIFICATION",notification:{id:Math.random(),priority:"low",type:"bar",message:"Opgeslagen",scope:""}}),Array.isArray(e)&&!0!==i?_()(e,"id"):e}).catch(Z(r)));case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function K(){return function(e,t){q("subject/list","get",null,e,t).then(function(t){e({type:"CHANGE_SUBJECTS",subjects:t})}).catch(function(){})}}function Q(){return function(e,t){q("group/list","get",null,e,t).then(function(t){e({type:"CHANGE_GROUPS",groups:t})}).catch(function(){})}}function ee(){return function(e,t){var n={id:-96,priority:"low",type:"bar",message:"Bezig met laden",scope:"."};e(ne(n)),q("user/self","get",null,e,t).then(function(t){!function(e,t){function n(e){t({type:"ADD_NOTIFICATION",notification:{id:Math.random(),priority:"high",type:"badge",message:"Vul een geldige waarde voor "+e+" in",scope:"profiel"}})}Y.validate(e.year,{type:"integer",min:1,max:6})||n("Leerjaar"),Y.validate(e.level,{notEmpty:!0})||n("Opleidingsniveau"),Y.validate(e.profile,{notEmpty:!0})||n("Profiel"),Y.validate(e.preferedEmail,{type:"email"})||n("Voorkeurs email"),Y.validate(e.phoneNumber,{type:"phoneNumber"})||n("Telefoonnummer")}(t,e),e({type:"SET_SELF",user:t}),e(ae(n))}).catch(function(t){e(ae(n)),null!=t&&"Authentication Error"===t.error?"/login"!==window.location.pathname&&(se("beforeLoginPath",window.location.pathname+window.location.search,24),document.location.href="/login"):(e(re(!1)),e(ne({id:-1,priority:"high",type:"bar",message:"Kan geen verbinding met de server maken"})))})}}function te(){return function(e,t){q("user/enrollments","get",null,e,t).then(function(n){e({type:"CHANGE_GROUPS",groups:n}),e({type:"CHANGE_ENROLLMENTS",userId:t().userId,enrollmentIds:Object.keys(n)})}).catch(function(){})}}function ne(e){return{type:"ADD_NOTIFICATION",notification:e}}function ae(e){return{type:"REMOVE_NOTIFICATION",notification:e}}function re(e){return{type:"TOGGLE_MENU",menuState:e}}function oe(e,t){return function(n,a){return q("subject","put",{name:e,description:t,secureLogin:a().secureLogin},n,a).then(function(){n({type:"ADD_NOTIFICATION",notification:{id:Math.random(),priority:"low",type:"bar",message:"Vak aangemaakt, refresh om te zien",scope:"beheer"}})})}}function ie(e,t){return function(n,a){return q("course","put",{name:e,subjectId:t,secureLogin:a().secureLogin},n,a).then(function(){n({type:"ADD_NOTIFICATION",notification:{id:Math.random(),priority:"low",type:"bar",message:"Module aangemaakt, refresh om te zien",scope:"beheer"}})})}}function le(e,t){return function(n,a){return q("group","put",{courseId:e,mainTeacherId:t,secureLogin:a().secureLogin},n,a).then(function(){n({type:"ADD_NOTIFICATION",notification:{id:Math.random(),priority:"low",type:"bar",message:"Groep aangemaakt, refresh om te zien",scope:"beheer"}})})}}function se(e,t,n){var a=new Date;a.setTime(a.getTime()+60*n*60*1e3);var r="expires="+a.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"}var ue=n(26),ce=n.n(ue),pe=n(27),de=n.n(pe),he=n(20),me=n.n(he),ge=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).state={},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"componentWillMount",value:function(){this.generateEmail.bind(this)(),this.interval=setInterval(this.generateEmail.bind(this),1500)}},{key:"generateEmail",value:function(){var e=this.state.school,t=this.state.schoolShort,n=this.state.studentNumber;switch(Math.floor(14*Math.random())){case 0:e="beekdallyceum",t="BD";break;case 1:e="candea",t="CC";break;case 2:e="quadraam",t="CB";break;case 3:e="lyceumelst",t="LE";break;case 4:e="liemerscollege",t="LC";break;case 5:e="lorentzlyceum",t="LL";break;case 6:e="maartenvanrossem",t="MvR";break;case 7:e="montessoriarnhem",t="MC";break;case 8:e="olympuscollege",t="OC";break;case 9:e="produsarnhem",t="PD";break;case 10:e="gymnasiumarnhem",t="SGA";break;case 11:e="symbion",t="SY";break;case 12:e="vmbo-venster",t="VE";break;case 13:default:e="hetwesteraam",t="HW"}for(var a=(n=Math.floor(999999*Math.random())+"").length;a<6;a++)n="0"+n;this.setState({school:e,schoolShort:t,studentNumber:n})}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"login",value:function(){document.location.href="/auth/login"}},{key:"generateColoredEmail",value:function(e,t,n){return r.a.createElement(me.a,{variant:"subheading",style:{fontFamily:"'Courier New', Courier, monospace",overflow:"hidden"}},r.a.createElement("span",{style:{color:I.palette.secondary.light,fontWeight:"bold"}},e),r.a.createElement("span",{style:{color:I.palette.secondary.dark,fontWeight:"bolder"}},t),r.a.createElement("span",{style:{fontWeight:"bold"}},"@ll."),r.a.createElement("span",{style:{color:I.palette.secondary.light,fontWeight:"bold"}},n),r.a.createElement("span",{style:{fontWeight:"bold"}},".nl"))}},{key:"render",value:function(){return null!=this.props.userId?(this.props.history.push("/"),this.props.toggleMenu(!0)):this.props.toggleMenu(!1),r.a.createElement(de.a,{elevation:8,className:"Login",style:{minHeight:"330px"}},r.a.createElement("div",{style:{padding:"20px"}},r.a.createElement(me.a,{gutterBottom:!0,variant:"headline",color:"primary"},"Log in"),r.a.createElement(me.a,{variant:"subheading"},"Gebruik je school-email om in te loggen:"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("center",null,this.generateColoredEmail("schoolafkorting","leerlingnummer","school"),this.generateColoredEmail(this.state.schoolShort,this.state.studentNumber,this.state.school)),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ce.a,{type:"submit",variant:"contained",size:"large",color:"primary",fullWidth:!0,onClick:this.login},"Login met je Microsoft school account")))}}]),t}(a.Component);var be=Object(G.a)(Object(C.b)(function(e){return{userId:e.userId}},function(e){return{login:function(t,n){e(re(!0))},toggleMenu:function(t){e(re(t))}}})(ge)),fe=function(e){function t(){return Object(y.a)(this,t),Object(x.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e="";return this.props.showMenu?e+="menuShown":e+="menuHidden",r.a.createElement("div",{className:"Page "+e},this.props.children)}}]),t}(a.Component);var ye=Object(C.b)(function(e){return{showMenu:e.showMenu}})(fe),ve=n(155),xe=n.n(ve),Ee=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).state={isShowing:!1},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.timeout=setTimeout(function(){return e.setState({isShowing:!0})},200)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){return this.state.isShowing?r.a.createElement(xe.a,this.props):null}}]),t}(a.Component),Oe=n(324),je=n(166),ke=n.n(je),Ce=n(76),Ie=n.n(Ce),Se=n(78),we=n.n(Se),Ne=n(77),Ge=n.n(Ne),Ae=n(97),De=n.n(Ae),Le=n(98),Te=n.n(Le),Me=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).state={},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"getDuplicatePage",value:function(){return r.a.createElement(Ie.a,{open:!0,keepMounted:!0},r.a.createElement(Ge.a,null,r.a.createElement(De.a,null,r.a.createElement(me.a,{color:"error",style:{fontSize:"16px"}},"Je hebt al een module gekozen voor "+this.props.group.day+"!"),"Schrijf je eerst uit voor de module",r.a.createElement(me.a,{color:"primary",variant:"title",style:{fontSize:"16px",display:"inline-block",margin:"5px"}},this.props.chosenDayGroupName),"om je in te kunnen schrijven")),r.a.createElement(we.a,null,r.a.createElement(ce.a,{color:"primary",variant:"contained"},"Sluiten")))}},{key:"getCancelPage",value:function(){var e=this;return r.a.createElement(Ie.a,{open:!0,keepMounted:!0},r.a.createElement(Te.a,null,"Uitschrijven"),r.a.createElement(Ge.a,null,r.a.createElement(De.a,null,"Weet je zeker dat je wilt uitschrijven voor de module",r.a.createElement(me.a,{color:"primary",variant:"title",style:{fontSize:"16px",display:"inline",margin:"5px"}},this.props.group.courseName)," ?")),r.a.createElement(we.a,null,r.a.createElement(ce.a,{color:"default"},"Annuleren"),r.a.createElement(ce.a,{name:"test",onClick:function(){return e.props.handlePopup(!0)},color:"primary"},"Uitschrijven",r.a.createElement(ke.a,null))))}},{key:"getConfirmPage",value:function(){var e=this;return r.a.createElement(Ie.a,{open:!0,keepMounted:!0},r.a.createElement(Te.a,null,"Inschrijven"),r.a.createElement(Ge.a,null,r.a.createElement(De.a,null,"Weet je zeker dat je wilt inschrijven voor de module",r.a.createElement(me.a,{color:"primary",variant:"title",style:{fontSize:"16px",display:"inline",margin:"5px"}},this.props.group.courseName)," ?")),r.a.createElement(we.a,null,r.a.createElement(ce.a,{color:"default"},"Annuleren"),r.a.createElement(ce.a,{name:"test",onClick:function(){return e.props.handlePopup(!0)},variant:"contained",color:"primary"},"Inschrijven")))}},{key:"getRemarkPage",value:function(){var e=this;return r.a.createElement(Ie.a,{open:!0,keepMounted:!0},r.a.createElement(Te.a,null,"Opmerkingen"),r.a.createElement(Ge.a,null,r.a.createElement(me.a,null,this.props.group.remarks)),r.a.createElement(we.a,null,r.a.createElement(ce.a,{color:"default"},"Annuleren"),r.a.createElement(ce.a,{onClick:function(){e.props.preventPopupClose(!0),e.setState({page:"confirm"})},color:"primary"},"Verder")))}},{key:"render",value:function(){switch(this.props.preventPopupClose(!1),this.state.page){case"remarks":return this.getRemarkPage();case"cancel":return this.getCancelPage();case"hasChosenDay":return this.getDuplicatePage();case"confirm":default:return this.getConfirmPage()}}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.hasChosen?Object(p.a)({page:"cancel"},t):e.hasChosenDay?Object(p.a)({page:"hasChosenDay"},t):null!=e.group.remarks&&e.group.remarks.length>1?Object(p.a)({page:"remarks"},t):Object(p.a)({page:"confirm"},t)}}]),t}(a.Component),Pe=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).props.getEnrollableGroups(),n.props.getEnrolLments(),n.state={dialogOpen:!1},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"preventPopupClose",value:function(e){this.preventClose=e}},{key:"handlePopup",value:function(e){e&&this.props.toggleEnrollment(this.props.group),this.preventClose||this.setState({dialogOpen:!this.state.dialogOpen})}},{key:"render",value:function(){var e=this,t=this.props,n=this.state.dialogOpen?r.a.createElement(Me,{group:t.group,hasChosen:t.hasChosen,handlePopup:this.handlePopup.bind(this),hasChosenDay:t.hasChosenDay,chosenDayGroupName:t.chosenDayGroupName,preventPopupClose:this.preventPopupClose.bind(this)}):null;return t.loading?r.a.createElement(Ee,{size:30}):t.hasChosen?r.a.createElement(ce.a,{color:"primary",onClick:function(){return e.handlePopup(!1)},style:t.style},"Ingeschreven",r.a.createElement(ke.a,null),n):this.props.canChoose?r.a.createElement(ce.a,{color:"primary",variant:"contained",onClick:function(){return e.handlePopup(!1)},style:this.props.style},"Inschrijven"+(this.props.hasChosenDay?"*":""),n):t.group.period<this.props.currentPeriod?r.a.createElement(ce.a,{disabled:!0,color:"primary",style:t.style},"Inschrijfperiode verlopen",n):r.a.createElement(ce.a,{disabled:!0,color:"primary",style:t.style},"Coming Soon",n)}}]),t}(a.Component);var He=Object(C.b)(function(e,t){if(null==e.users[e.userId].enrollmentIds||null==e.enrollableGroups)return{loading:!0};var n=-1;return e.users[e.userId].enrollmentIds.forEach(function(a){var r=e.groups[a];r.day===t.group.day&&r.period===t.group.period&&(n=r.courseName)}),{canChoose:-1!==e.enrollableGroups.map(function(e){return e.id}).indexOf(t.group.id),hasChosen:-1!==e.users[e.userId].enrollmentIds.indexOf(t.group.id),hasChosenDay:-1!==n,chosenDayGroupName:n,currentPeriod:e.currentPeriod}},function(e){return{toggleEnrollment:function(t){return e(function(e){return function(t,n){-1===n().users[n().userId].enrollmentIds.indexOf(e.id)?q("user/enrollments","put",{groupId:e.id},t,n).then(function(){t({type:"CHANGE_ENROLLMENTS",action:"ADD",userId:n().userId,groupId:e.id})}):q("user/enrollments","delete",{groupId:e.id},t,n).then(function(){t({type:"CHANGE_ENROLLMENTS",action:"REMOVE",userId:n().userId,groupId:e.id})})}}(t))},getEnrollableGroups:function(){return e(function(e,t){q("user/enrollableGroups","get",null,e,t,!0).then(function(t){e({type:"CHANGE_ENROLLABLE_GROUPS",enrollableGroups:t})}).catch(function(){})})},getEnrolLments:function(){return e(te())}}})(Pe),Re=function(e){function t(){return Object(y.a)(this,t),Object(x.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return!1!==this.props.active&&null==this.props.secureLogin?r.a.createElement(de.a,{style:{padding:"20px",marginTop:"25px"}},r.a.createElement(Y,{value:"Log opnieuw in om toegang te krijgen",layout:{area:!0}}),r.a.createElement(ce.a,{color:"primary",variant:"contained",onClick:function(){se("beforeLoginPath",window.location.pathname+window.location.search,24),document.location.href="/auth/login?secure=true"}},"Inloggen")):this.props.children}}]),t}(a.Component);var _e=Object(C.b)(function(e){return{secureLogin:e.secureLogin}},null)(Re),ze=n(12),Fe=[{label:"vink",value:"check",options:[{label:"Gehaald",value:"passed"},{label:"Niet gehaald",value:"failed"},{label:"Niet deelgenomen",value:"ND"}]},{label:"trapsgewijs",value:"stepwise",options:[{label:"Onvoldoende",value:"O"},{label:"Voldoende",value:"V"},{label:"Goed",value:"G"},{label:"Niet deelgenomen",value:"ND"}]},{label:"cijfer",value:"decimal",options:"decimal"}];var Be=function(e){function t(){return Object(y.a)(this,t),Object(x.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.props.evaluation,t={underline:!1,flex:1},n={td:!0};return this.props.student&&(t.type="headline",t.color="primaryContrast",n.td=!1,n.alignment="right"),"decimal"===e.type?r.a.createElement(Y,{style:t,validate:{min:1,max:10,type:"decimalGrade",notEmpty:!0},layout:n,label:"Beoordeling",name:e.userId,value:e.assesment?e.assesment:"",editable:this.props.editable,onChange:this.props.onChange}):r.a.createElement(Y,{style:t,name:e.userId,label:"Beoordeling",layout:n,value:e.assesment?e.assesment:"",options:Fe.filter(function(t){return t.value===e.type})[0].options,editable:this.props.editable,onChange:this.props.onChange})}}]),t}(a.Component),Ue=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).onSortChange=function(e){n.setState({sortValue:e,sortDirection:"desc"===n.state.sortDirection&&n.state.sortValue===e?"asc":"desc"})},n.handleSingleChange=function(e){var t=n.props.evaluations.map(function(t){return t.userId===e.userId?e:Object(p.a)({},t)});n.props.handleChange(t)},n.sortEvaluations=function(){var e=n.props.evaluations,t=n.state.sortValue,a="asc"===n.state.sortDirection?"asc":"desc";return"name"===t?e.sort(function(e,t){var n=t.displayName-e.displayName;return"asc"===a?n:-n}):"evaluations"===t&&e.sort(function(e,t){e=e.assesment;var n=(null===(t=t.assesment))-(null==e)||+(e>t)||-(e<t);return"asc"===a?n:-n}),e},n.state={sortValue:"",sortDirection:""},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"handleEvaluationTypeChange",value:function(e){for(var t in this.props.evaluations)this.handleSingleChange(Object(p.a)({},this.props.evaluations[t],{type:e}))}},{key:"render",value:function(){var e=this,t=this.props.sortValue,n="asc"===this.props.sortDirection?"asc":"desc",a={marginTop:"10px",alignItems:"center",paddingRight:"15px",paddingLeft:"15px",display:"flex"},o=this.props.evaluations;if(0===o.length)return"Er zijn nog geen beoordelingen beschikbaar";var i=this.sortEvaluations().map(function(t){return r.a.createElement(ze.e,{style:a,key:t.userId,component:"tr"},r.a.createElement(Y,{style:{type:"title",color:"primary",flex:2},value:t.displayName,layout:{}}),r.a.createElement(Be,{editable:e.props.editable,evaluation:t,onChange:function(n){return e.handleSingleChange(Object(p.a)({},t,{assesment:n}))}}),r.a.createElement(Y,{style:{underline:!1,flex:5},layout:{area:!0,td:!0},label:"Uitleg",name:t.userId,value:t.explanation,editable:e.props.editable,onChange:function(n){return e.handleSingleChange(Object(p.a)({},t,{explanation:n}))}}))});return r.a.createElement(_e,{active:this.props.editable},r.a.createElement("table",{style:{width:"100%"}},r.a.createElement("tbody",null,r.a.createElement(ze.e,{style:Object(p.a)({},a,{backgroundColor:"#e0e0e0"}),component:"tr"},r.a.createElement("td",{style:{paddingLeft:"15px"}},r.a.createElement(ze.p,{type:"title",color:"primary",style:{padding:"5px 0"}},r.a.createElement(ze.o,{title:"Sorteer",enterDelay:300,placement:"bottom-start"},r.a.createElement(ze.m,{active:"evaluations"===t,onClick:function(){return e.onSortChange("evaluations")},direction:n,style:{color:"inherit",fontSize:"1.5rem"}},"Beoordelingen"))),r.a.createElement("div",null,r.a.createElement(ze.o,{title:"Sorteer",enterDelay:300,placement:"bottom-start"},r.a.createElement(ze.m,{active:"name"===t,onClick:function(){return e.onSortChange("name")},direction:n},"Naam")))),r.a.createElement("td",{style:{flex:"5"}}),r.a.createElement("td",null,r.a.createElement(Y,{label:"Beoordelingsformaat",style:{type:"caption",underline:!1,margin:"normal",labelVisible:!0},layout:{alignment:"right"},value:o[0].type,options:Fe,editable:this.props.editable,onChange:this.handleEvaluationTypeChange.bind(this)}))),i)))}}]),t}(a.Component),We={width:"400px",height:"338px",padding:"15px",verticalAlign:"top",margin:"12px",marginRight:"0px",marginBottom:"0px",display:"inline-block",position:"relative"},Ve=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).state={hover:!1,style:We},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"expand",value:function(){this.props.history.push("/groep/"+this.props.group.id)}},{key:"getBottomSection",value:function(){var e={position:"absolute",bottom:"0px",width:"400px",height:"55px",marginLeft:"-15px",borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px",display:"flex",padding:"5px",paddingLeft:"20px",paddingRight:"20px",justifyContent:"space-between"};return this.props.group.evaluation&&""!==this.props.group.evaluation.assesment&&null!==this.props.group.evaluation.assesment?(e.backgroundColor=function(e){if("ND"===e.assesment||null==e.assesment)return"#673ab7";switch(e.type){case"stepwise":return"#3f51b5";case"check":return"#009688";case"decimal":return"#00bcd4";default:return"#673ab7"}}(this.props.group.evaluation),r.a.createElement("div",{style:e},r.a.createElement(Y,{value:"Beoordeling",style:{type:"headline",color:"primaryContrast",flex:.8}}),r.a.createElement(Be,{evaluation:this.props.group.evaluation,student:!0}))):r.a.createElement("div",{style:e},r.a.createElement(ce.a,{color:"secondary",onClick:this.expand.bind(this)},"Bekijken"),"student"===this.props.role&&r.a.createElement(He,{group:this.props.group}))}},{key:"render",value:function(){var e=this,t=this.props.group;return r.a.createElement(de.a,{elevation:this.state.hover?4:2,onMouseEnter:function(){return e.setState({hover:!0})},onMouseLeave:function(){return e.setState({hover:!1})},style:this.state.style},r.a.createElement(me.a,{variant:"caption",color:"primary",style:{overflow:"hidden",maxHeight:"65px",cursor:"pointer"},onClick:function(){e.props.history.push("/groep/"+t.id)}},t.subjectName),r.a.createElement(me.a,{variant:"headline",style:{overflow:"hidden",height:"64px",cursor:"pointer",textTransform:"uppercase",fontSize:"24px"},onClick:function(){e.props.history.push("/groep/"+t.id)}},t.courseName),r.a.createElement("div",null,r.a.createElement(me.a,{style:{display:"inline-block",fontWeight:"bold",float:"right"}},"Blok "+t.period+" - "+t.day),r.a.createElement(me.a,{style:{display:"inline-block",fontWeight:"bold"}},t.enrollableFor||"Iedereen")),t.evaluation?r.a.createElement(me.a,{style:{maxHeight:"164px",overflow:"hidden"},gutterBottom:!0},r.a.createElement("b",null,"Uitleg beoordeling: "),t.evaluation.explanation):r.a.createElement(me.a,{style:{maxHeight:"164px",overflow:"hidden"},gutterBottom:!0},t.courseDescription),this.getBottomSection())}}]),t}(a.Component),Je=Object(Oe.a)(Ve),$e=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).state={hover:!1,style:{width:"100%",height:"auto",margin:"0px",padding:"10px"}},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"formatPhoneNumber",value:function(e){null==e&&(e="");var t=e.replace(/\D/g,"");if(10===t.length)return"6"===t[1]?t.substr(0,2)+" "+t.substr(2,8):t.substr(0,3)+" "+t.substr(3,7);var n=/(0031|31)0?(6)?([0-9]+)$/gm.exec(t);return n?n[2]?"+31 06 "+n[3]:"+31 "+n[3]:e}},{key:"expand",value:function(){this.props.history.push("/user/"+this.props.user.id)}},{key:"render",value:function(){var e=this,t=Object(p.a)({},this.props.user),n=Object(p.a)({},this.state.style);return r.a.createElement("tr",null,r.a.createElement(de.a,{elevation:this.state.hover?2:1,onMouseEnter:function(){return e.setState({hover:!0})},onMouseLeave:function(){return e.setState({hover:!1})},component:"td",style:n},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(ze.p,{variant:"title",color:"teacher"===t.role?"secondary":"primary",style:{flex:1}},t.firstName+" "+t.lastName),r.a.createElement(ze.p,{variant:"subheading",style:{flex:1}},t.school),r.a.createElement(ze.p,{variant:"body1",style:{flex:1}},t.level+" - "+t.year),r.a.createElement(ze.p,{variant:"body1",style:{flex:1}},"teacher"===t.role?"docent":"leerling"),r.a.createElement(ze.p,{variant:"body1",style:{flex:1}},t.profile)),"admin"===this.props.role&&r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(ze.p,{variant:"body1",style:{flex:1}},t.email),r.a.createElement(ze.p,{variant:"body1",style:{flex:1}},t.preferedEmail),r.a.createElement("div",{style:{flex:1}}),r.a.createElement(ze.p,{variant:"body1",style:{flex:1}},this.formatPhoneNumber(t.phoneNumber)),r.a.createElement(ze.p,{variant:"body1",style:{flex:1}},t.id))))}}]),t}(a.Component),Ye=Object(Oe.a)($e),Ze=n(95),qe=n.n(Ze),Xe=["NT","NG","CM","EM","NT&NG","EM&CM"],Ke=["VWO","HAVO"],Qe=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).handleChange=function(e,t){n.setState({user:Object(p.a)({},n.state.user,Object(u.a)({},e,t))})},n.state={user:n.props.user},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"hasChanged",value:function(){return JSON.stringify(this.props.user)!==JSON.stringify(this.state.user)}},{key:"render",value:function(){var e=this,t=null;this.props.user.id!==this.state.user.id?(this.setState({user:this.props.user}),t=this.props.user):t=this.state.user;var n=!(!this.props.ownProfile||null!=this.props.user.profile&&""!==this.props.user.profile&&null!==this.props.user.year&&""!==this.props.user.year&&null!==this.props.user.level&&""!==this.props.user.level&&null!==this.props.user.phoneNumber&&""!==this.props.user.phoneNumber&&null!=this.props.user.preferedEmail&&""!==this.props.user.preferedEmail)||null;return r.a.createElement(ye,null,r.a.createElement(Y,{label:"Naam",value:t.displayName,style:{type:"headline"}}),r.a.createElement(Y,{label:"Rol",layout:{alignment:"right"},value:t.role}),r.a.createElement(qe.a,null),r.a.createElement("br",null),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Y,{label:"Leerjaar",value:t.year,style:{margin:"normal"},editable:this.props.ownProfile,onChange:function(t){return e.handleChange("year",t)},validate:{type:"integer",min:1,max:6}}),r.a.createElement(Y,{label:"Opleidingsniveau",value:t.level,editable:this.props.ownProfile,onChange:function(t){return e.handleChange("level",t)},options:Ke,validate:{notEmpty:!0}}),this.props.ownProfile&&r.a.createElement(Y,{label:"Profiel",value:t.profile,editable:this.props.ownProfile,options:Xe,onChange:function(t){return e.handleChange("profile",t)},validate:{notEmpty:!0}})),r.a.createElement("div",{style:{display:"flex"}},this.props.ownProfile&&r.a.createElement(Y,{label:"Voorkeurs email",value:t.preferedEmail,editable:this.props.ownProfile,onChange:function(t){return e.handleChange("preferedEmail",t)},validate:{type:"email"}}),this.props.ownProfile&&r.a.createElement(Y,{label:"Telefoonnummer",value:t.phoneNumber,editable:this.props.ownProfile,onChange:function(t){return e.handleChange("phoneNumber",t)},validate:{type:"phoneNumber"}})),r.a.createElement("br",null),n&&r.a.createElement(me.a,{gutterBottom:!0,variant:"title",color:"primary"},"Controleer de bovenstaande gegevens en vul de ontbrekende gegevens aan."),this.hasChanged()?r.a.createElement(ce.a,{variant:"contained",color:"secondary",size:"large",onClick:function(){return e.props.save(e.state.user)}},"Opslaan"):null)}}]),t}(a.Component);var et=Object(C.b)(null,function(e){return{save:function(t){return e(function(e){return function(t,n){t({type:"CHANGE_USER",user:e}),q("user","patch",e,t,n)}}(t))}}})(Qe),tt={width:"300px",height:"80px",padding:"20px",verticalAlign:"top",margin:"20px",display:"inline-block",cursor:"pointer"},nt=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).state={hover:!1,style:Object(p.a)({},tt,n.props.style)},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"expand",value:function(){this.props.history.push("/gebruiker/"+this.props.user.id)}},{key:"render",value:function(){var e=this,t=this.props.user;return r.a.createElement(de.a,{elevation:this.state.hover?4:2,onMouseEnter:function(){return e.setState({hover:!0})},onMouseLeave:function(){return e.setState({hover:!1})},style:this.state.style},r.a.createElement(me.a,{variant:"title",color:"teacher"===t.role?"secondary":"primary"},t.firstName+" "+t.lastName),r.a.createElement(me.a,{variant:"subheading"},("teacher"===t.role?"docent":"leerling")+"\t"+t.school))}}]),t}(a.Component),at=Object(Oe.a)(nt),rt=n(37),ot=n.n(rt),it=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).state={},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){if(null==this.props.user)return"page"===this.props.display?this.props.notExists?r.a.createElement("div",{className:"page"},"De opgevraagde gebruiker bestaat niet"):r.a.createElement("div",{className:"page"},r.a.createElement(Ee,null)):this.props.notExists?null:r.a.createElement(Ee,null);switch(this.props.display){case"name":return r.a.createElement(Y,{value:this.props.user.displayName,style:{type:"title"},layout:{td:!0}});case"page":return r.a.createElement(et,this.props);case"row":return r.a.createElement(Ye,this.props);case"card":default:return r.a.createElement(at,this.props)}}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=ot.a.parse(e.location.search);if(null!=n.secureLogin&&e.setSecureLogin(n.secureLogin),"login"===n.from&&null!=e.user&&"student"!==e.role){var a=function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),a=0;a<n.length;a++){for(var r=n[a];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""}("beforeLoginPath");e.history.push(a)}return t}}]),t}(a.Component);var lt=Object(G.a)(Object(C.b)(function(e,t){var n=t.match.params.userId||t.userId,a=t.display||"page",r=!1,o=null;return null==n&&(n=e.userId),null==e.users||null==e.users[n]?null!=n&&-1===e.hasFetched.indexOf("User.get("+n+")")||(r=!0):o=e.users[n],{role:e.role,user:o,notExists:r,display:a,userId:n,ownProfile:""+n===""+e.userId}},function(e){return{setSecureLogin:function(t){return e(function(e){return{type:"SET_SECURE_LOGIN",secureLogin:e}}(t))}}})(it)),st=function(e){function t(){var e,n;Object(y.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(x.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(o)))).createRow=function(e){var t=F()(n.props.lessons,function(t,a){var r=M()(n.props.presence,function(n){return n.lessonId===t.id&&n.userId===e});return 1===r.length?n.createPresenceComponent(r[0],a):"err"});return r.a.createElement(ze.e,{component:"tr",elevation:1,key:"p"+e},r.a.createElement(lt,{key:e,userId:e,display:"name"}),t)},n.createLessonHeader=function(e){var t=F()(n.props.lessons,function(e){return r.a.createElement(Y,{value:"Les "+e.numberInBlock,key:e.id,style:{type:"title"},layout:{td:!0,area:!0}})});return r.a.createElement(ze.e,{component:"tr",elevation:2,key:"l"+e,style:{backgroundColor:"#e0e0e0"}},r.a.createElement(Y,{value:"",layout:{td:!0,area:!0}}),t)},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"createPresenceComponent",value:function(e,t){var n=this,a=[{label:"Actief",value:"present"},{label:"Niet actief",value:"absent"}];return this.props.editable||"absent"!==e.userStatus||(a[0].label="Afgemeld",a[1].label="Afgemeld"),r.a.createElement(Y,{key:t,value:e.status,options:a,label:"absent"===e.userStatus?"afgemeld":void 0,layout:{td:!0,area:!0},editable:this.props.editable,onChange:function(t){n.props.handleChange(Object(p.a)({},e,{status:t}))}})}},{key:"render",value:function(){var e=this,t=this.props.participantIds.filter(function(t){return-1!==F()(e.props.presence,function(e){return e.userId}).indexOf(t)}).map(this.createRow);return t.unshift(this.createLessonHeader()),r.a.createElement("table",null,r.a.createElement("tbody",null,t))}}]),t}(a.Component),ut=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).handleChange=function(e,t){n.props.handleChange(Object(p.a)({},n.props.lesson,Object(u.a)({},e,t)))},n.state={hover:!1,style:{width:"100%",height:"auto",marginTop:"10px",marginBottom:"10px",padding:"2px",display:"flex",alignItems:"start",position:"relative"}},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"getWeekdayString",value:function(e){return["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"][e]}},{key:"getOptOutButton",value:function(){var e=this;return"absent"===this.props.lesson.userStatus?r.a.createElement("div",{style:{flex:1}},r.a.createElement(ze.a,{style:{width:"70px",float:"right"},size:"small",mini:!0,color:"primary",onClick:function(){return e.props.setPresenceUserStatus(e.props.lesson.id,"present",e.props.lesson.courseGroupId)}},"Aanmelden")):r.a.createElement("div",{style:{flex:1}},r.a.createElement(ze.a,{style:{width:"70px",float:"right"},size:"small",mini:!0,color:"secondary",onClick:function(){return e.props.setPresenceUserStatus(e.props.lesson.id,"absent",e.props.lesson.courseGroupId)}},"Afmelden"))}},{key:"render",value:function(){var e=this,t=this.props.lesson;return-1===t.id?r.a.createElement(de.a,{elevation:this.state.hover?2:1,onMouseEnter:function(){return e.setState({hover:!0})},onMouseLeave:function(){return e.setState({hover:!1})},component:"tr",style:{backgroundColor:"#e0e0e0"}},r.a.createElement("td",{style:{display:"flex",flexDirection:"column"}},r.a.createElement(Y,{style:{fontWeight:"bold"},value:"Lesnummer"}),r.a.createElement(Y,{style:{fontWeight:"bold"},value:"Soort les"})),r.a.createElement(Y,{style:{flex:4,fontWeight:"bold"},value:"Onderwerp",layout:{td:!0}}),r.a.createElement(Y,{style:{flex:8,fontWeight:"bold"},value:"Activiteiten",layout:{td:!0}}),r.a.createElement("td",{style:{display:"flex",flexDirection:"column"}},r.a.createElement(Y,{style:{fontWeight:"bold"},value:"Datum",layout:{alignment:"right"}}),r.a.createElement(Y,{style:{fontWeight:"bold"},value:"Aanwezigheid",layout:{alignment:"right"}}))):r.a.createElement(de.a,{elevation:this.state.hover?2:1,onMouseEnter:function(){return e.setState({hover:!0})},onMouseLeave:function(){return e.setState({hover:!1})},component:"tr"},r.a.createElement("td",{style:{display:"flex",flexDirection:"column"}},r.a.createElement(Y,{color:"primary",layout:{area:!0},style:{fontWeight:"bold"},value:"Les "+t.numberInBlock}),r.a.createElement(Y,{label:"Soort les",layout:{area:!0},value:t.kind,editable:this.props.editable,onChange:function(t){return e.handleChange("kind",t)}})),r.a.createElement(Y,{label:"Onderwerp",style:{flex:4},value:t.subject,editable:this.props.editable,onChange:function(t){return e.handleChange("subject",t)},layout:{td:!0,area:!0}}),r.a.createElement(Y,{label:"Activiteiten",style:{flex:8},value:t.activities,editable:this.props.editable,onChange:function(t){return e.handleChange("activities",t)},layout:{td:!0,area:!0}}),r.a.createElement("td",{style:{display:"flex",flexDirection:"column"}},r.a.createElement(Y,{layout:{alignment:"right"},value:this.getWeekdayString(new Date(t.date).getDay())+" "+new Date(t.date).getDate()+"-"+(new Date(t.date).getMonth()+1)+"-"+new Date(t.date).getFullYear()}),r.a.createElement(Y,{label:"Aanwezigheid",style:{labelVisible:!0},layout:{alignment:"right"},value:t.presence,editable:this.props.editable,onChange:function(t){return e.handleChange("presence",t)},options:[{label:"Noodzakelijk",value:"required"},{label:"Eigen keuze",value:"optional"},{label:"Geen bijeenkomst",value:"unrequired"}]}),this.props.userIsMemberOfGroup&&"student"===this.props.role?this.getOptOutButton():null))}}]),t}(a.Component);var ct=Object(C.b)(null,function(e){return{setPresenceUserStatus:function(t,n,a){return e(function(e,t,n){return function(a,r){a({type:"CHANGE_PRESENCE_USER_STATUS",lessonId:e,userStatus:t,groupId:n}),q("group/userStatus","patch",{lessonId:e,userStatus:t},a,r)}}(t,n,a))}}})(ut),pt=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).onSortChange=function(e){n.setState({sortValue:e,sortDirection:"desc"===n.state.sortDirection&&n.state.sortValue===e?"asc":"desc"})},n.getHeader=function(){var e=Object(p.a)({},n.state.style);return r.a.createElement("tr",null,r.a.createElement(ze.e,{elevation:n.state.hover?2:1,onMouseEnter:function(){return n.setState({hover:!0})},onMouseLeave:function(){return n.setState({hover:!1})},component:"td",style:e},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},n.headerTitle("title","name","Naam"),n.headerTitle("subheading","school","School"),n.headerTitle("body1","levelAndYear","Niveau - Leerjaar"),n.headerTitle("body1","role","Rol"),n.headerTitle("body1","profile","Profiel")),"admin"===n.props.role&&r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},n.headerTitle("body1","email","Office Email"),n.headerTitle("body1","preferedEmail","Voorkeurs email"),r.a.createElement("div",{style:{flex:1}}),n.headerTitle("body1","phoneNumber","Telefoonnummer"),n.headerTitle("body1","id","Gebruikers ID"))))},n.sortIds=function(){var e=n.state.sortValue,t=n.state.sortDirection,a=n.props.users,r=n.props.userIds;return""===e?r:(r.sort(function(n,r){switch(e){case"name":n=(a[n].firstName+a[n].lastName).toLowerCase(),r=(a[r].firstName+a[r].lastName).toLowerCase();break;case"levelAndYear":n=(a[n].level+a[n].year).toString(),r=(a[r].level+a[r].year).toString();break;default:n=a[n][e],r=a[r][e]}var o=(null==r)-(null==n)||+(n>r)||-(n<r);return"asc"===t?o:-o}),r)},n.state={hover:!1,style:{width:"100%",height:"auto",margin:"0px",padding:"10px",backgroundColor:"#e0e0e0"},sortValue:"",sortDirection:""},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"headerTitle",value:function(e,t,n){var a=this,o=this.state.sortValue,i="asc"===this.state.sortDirection?"asc":"desc";return r.a.createElement(ze.p,{variant:e,color:"title"===e?"primary":"default",style:{flex:1}},r.a.createElement(ze.o,{title:"Sorteer",enterDelay:300,placement:"bottom-start"},r.a.createElement(ze.m,{active:o===t,direction:i,onClick:function(){return a.onSortChange(t)},style:{color:"inherit"}},n)))}},{key:"render",value:function(){var e=this.getHeader(),t=this.sortIds().map(function(e){return r.a.createElement(lt,{key:e,userId:e,display:"row"})});return r.a.createElement("table",{style:{width:"100%"}},r.a.createElement("tbody",null,e,t))}}]),t}(a.Component);var dt=Object(C.b)(function(e,t){return{users:e.users,role:e.role}})(pt),ht=n(96),mt=n.n(ht),gt=n(158),bt=n.n(gt),ft=n(159),yt=n.n(ft),vt=n(837),xt=function(e){function t(){return Object(y.a)(this,t),Object(x.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e="Weet je zeker dat u de pagina wilt verlaten? Er zijn nog niet-opgeslagen gegevens!";return this.props.giveWarning?window.onbeforeunload=function(t){return t.returnValue=e,e}:window.onbeforeunload=null,r.a.createElement(vt.a,{when:this.props.giveWarning,message:function(t){return e}})}}]),t}(a.Component),Et=n(114),Ot=n.n(Et),jt=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).handleClickAway=function(){n.setState({anchorEl:null})},n.showTeacherCard=function(e){n.setState({anchorEl:e.currentTarget})},n.state={},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.props.editable,t=this.props.role,n=this.props.onChange,a=this.props.group;return r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Y,{value:a.courseName,name:"courseName",onChange:n,editable:e,style:{flex:"5",type:"headline"},validate:{maxLength:50}}),r.a.createElement(Y,{value:a.subjectId,name:"subjectId",onChange:n,layout:{alignment:"right"},style:{type:"headline"},editable:e,options:F()(this.props.subjects,function(e){return{value:e.id,label:e.name}})}),!e&&r.a.createElement(ce.a,{color:"secondary",style:{position:"absolute",display:"block",top:"30px",right:"-15px",zIndex:"100"},onClick:this.showTeacherCard},r.a.createElement("div",null,a.teacherName))),r.a.createElement("div",{style:{display:"flex"},className:"ColumnFlexDirectionOnMobile"},r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement("div",{style:{flex:1}},r.a.createElement(Y,{value:a.period,name:"period",editable:e&&"admin"===t,onChange:n,style:{width:"100px",type:"caption"},options:[{label:"Blok 1",value:1},{label:"Blok 2",value:2},{label:"Blok 3",value:3},{label:"Blok 4",value:4}]}),r.a.createElement(Y,{value:a.day,name:"day",editable:e&&"admin"===t,onChange:n,style:{width:"150px",type:"caption"},options:["maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag","zondag"]}),r.a.createElement(Y,{value:a.schoolYear,name:"schoolYear",editable:e&&"admin"===t,onChange:n,options:["2018/2019","2019/2020","2020/2021","2021/2022"],style:{width:"120px",type:"caption"}})),r.a.createElement("div",null,r.a.createElement(Y,{value:a.enrollableFor,label:"Doelgroep",style:{width:"100%",labelVisible:!0},name:"enrollableFor",default:"Iedereen",editable:e,onChange:n}))),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(Y,{value:a.courseDescription,validate:{maxLength:440},name:"courseDescription",label:"Omschrijving",style:{labelVisible:!0},onChange:n,layout:{area:!0},editable:e}),r.a.createElement(Y,{value:a.remarks,label:"Opmerkingen",name:"remarks",style:{width:"80%",labelVisible:!0},default:"Geen voorkennis vereist",editable:e,onChange:n}),r.a.createElement(Y,{value:a.studyTime,label:"Studietijd",name:"studyTime",default:"onbekend",editable:e,style:{labelVisible:!0,unit:"uur"},onChange:n,layout:{alignment:"right"},validate:{type:"integer"}}))),r.a.createElement("br",null),r.a.createElement(Ot.a,{open:!!this.state.anchorEl,onClose:this.handleClickAway,anchorEl:this.state.anchorEl,anchorOrigin:{horizontal:"left",vertical:"top"}},r.a.createElement(lt,{key:a.teacherId,userId:a.teacherId,display:"card",style:{margin:"0px"}})))}}]),t}(a.Component),kt=n(157),Ct=n.n(kt),It={colorPrimary:{backgroundColor:I.palette.primary.main},colorSecondary:{backgroundColor:"#ff8c00"},colorError:{backgroundColor:I.palette.error.main}},St=function(e){function t(){return Object(y.a)(this,t),Object(x.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){for(var e=this.props.notifications,t=this.props.classes,n="primary",a=e.length>0?e[0].message:"",o=0;o<e.length;o++)if("medium"===e[o].priority||"high"===e[o].priority){n="secondary",a=e[o].message;for(var i=o;i<e.length;i++)if("high"===e[i].priority){n="error",a=e[i].message;break}break}return r.a.createElement(ze.o,{title:a},r.a.createElement(Ct.a,{badgeContent:e.length,classes:t,color:n},this.props.children))}}]),t}(a.Component);var wt=Object(j.withStyles)(It)(Object(C.b)(function(e,t){return{notifications:e.notifications.filter(function(e){try{return"badge"===e.type&&RegExp(e.scope).test(t.scope)}catch(n){return!0}})}},null)(St)),Nt=function(e){function t(e){var n;switch(Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).handleChange=function(e){n.setState({group:Object(p.a)({},n.state.group,Object(u.a)({},e.name,e.target.value))})},n.handleLessonChange=function(e){var t=n.state.group.lessons||n.props.group.lessons;n.setState({group:Object(p.a)({},n.state.group,{lessons:Object(p.a)({},t,Object(u.a)({},e.id,e))})})},n.handleEvaluationChange=function(e){n.setState({group:Object(p.a)({},n.state.group,{evaluations:e})})},n.handlePresenceChange=function(e){var t=n.state.group.presence||n.props.group.presence;n.setState({group:Object(p.a)({},n.state.group,{presence:Object(p.a)({},t,Object(u.a)({},e.id,e))})})},n.setEditable=function(){n.setState({editable:!0})},n.cancel=function(){n.setState({editable:!1,group:n.props.group})},n.save=function(){n.props.setGroup(n.state.group),n.setState({editable:!1})},n.handleTab=function(e,t){n.props.history.push({search:"tab="+n.state.tabs[t]})},n.state={editable:!1,group:n.props.group},n.props.role){case"student":n.props.userIsMemberOfGroup?n.state.tabs=["Lessen","Deelnemers"]:n.state.tabs=["Lessen"];break;case"teacher":n.props.userIsMemberOfGroup?n.state.tabs=["Inschrijvingen","Lessen","Deelnemers","Actief","Beoordeling"]:n.state.tabs=["Lessen"];break;case"admin":n.state.tabs=["Inschrijvingen","Lessen","Deelnemers","Actief","Beoordeling"]}return n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"getCurrentTab",value:function(e){var t=this,n=this.state.group,a=this.state.group.enrollmentIds,o=this.state.group.lessons,i=this.state.group.participantIds,l=this.state.group.evaluations,s=this.state.group.presence;switch(e){case"Inschrijvingen":return null==a?r.a.createElement(Ee,null):0===a.length?"Er zijn geen inschrijvingen":r.a.createElement(dt,{userIds:a});case"Lessen":return null==o?r.a.createElement(Ee,null):0===o.length?"Er zijn nog geen lessen bekend":r.a.createElement("table",{style:{width:"100%"}},r.a.createElement("tbody",null,F()(Object(p.a)({0:{id:-1}},o),function(e){return r.a.createElement(ct,{lesson:e,key:e.id,role:t.props.role,userIsMemberOfGroup:t.props.userIsMemberOfGroup,editable:t.state.editable,handleChange:t.handleLessonChange})})));case"Deelnemers":return null==i?r.a.createElement(Ee,null):0===i.length?"Er zijn nog geen deelnemers toegevoegd":r.a.createElement(dt,{userIds:i});case"Actief":return null==i||null==o||null==s?r.a.createElement(Ee,null):r.a.createElement(st,{participantIds:i,lessons:o,presence:s,editable:this.state.editable,handleChange:this.handlePresenceChange});case"Beoordeling":return null==i||null==l?r.a.createElement(Ee,null):r.a.createElement(Ue,{evaluations:l,groupId:n.id,editable:this.state.editable,handleChange:this.handleEvaluationChange});default:return null}}},{key:"componentDidMount",value:function(){this.getData()}},{key:"componentDidUpdate",value:function(){this.getData()}},{key:"getData",value:function(){var e=this.state.group,t=this.state.group.enrollmentIds,n=this.state.group.lessons,a=this.state.group.participantIds,r=this.state.group.evaluations,o=this.state.group.presence;switch(this.state.currentTab){case"Inschrijvingen":null==t&&this.props.getGroupEnrollments(e.id);break;case"Lessen":null==n&&this.props.getGroupLessons(e.id);break;case"Deelnemers":null==a&&this.props.getGroupParticipants(e.id);break;case"Actief":null==a&&this.props.getGroupParticipants(e.id),null==n&&this.props.getGroupLessons(e.id),null==o&&this.props.getGroupPresence(e.id);break;case"Beoordeling":null==r&&this.props.getGroupEvaluations(e.id),null==a&&this.props.getGroupParticipants(e.id)}}},{key:"render",value:function(){var e=this.state.editable,t=this.props.role,n=this.state.group;return r.a.createElement(ye,null,r.a.createElement(jt,Object.assign({},this.props,{editable:e,group:n,onChange:this.handleChange})),r.a.createElement(qe.a,null),"student"===t&&r.a.createElement(He,{group:n,style:{margin:"20px"}}),("teacher"===t||"admin"===t)&&!e&&r.a.createElement(ce.a,{color:"secondary",variant:"contained",style:{margin:"20px"},onClick:this.setEditable},"Bewerken"),e&&r.a.createElement(ce.a,{color:"secondary",variant:"contained",style:{margin:"20px"},onClick:this.save},"Opslaan"),e&&r.a.createElement(ce.a,{color:"default",style:{margin:"20px"},onClick:this.cancel},"Annuleren"),r.a.createElement(mt.a,{position:"static",color:"default"},r.a.createElement(bt.a,{value:this.state.tabs.indexOf(this.state.currentTab),onChange:this.handleTab,indicatorColor:"primary",textColor:"primary",fullWidth:!0,centered:!0},this.state.tabs.map(function(e){return r.a.createElement(yt.a,{key:e,label:r.a.createElement(wt,{scope:"groep/"+(n.id||"")+"?tab="+e,style:{paddingLeft:"100px"}},e)})}))),r.a.createElement("br",null),r.a.createElement("div",{style:{width:"98%",margin:"auto"}},this.getCurrentTab(this.state.currentTab)),r.a.createElement(xt,{giveWarning:this.state.editable}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=ot.a.parse(e.location.search);return Object(p.a)({},t,{group:Object(p.a)({},e.group,t.group),currentTab:n.tab?n.tab:t.tabs[0]})}}]),t}(a.Component),Gt=Object(Oe.a)(Nt),At=function(e){function t(){return Object(y.a)(this,t),Object(x.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(v.a)(t,[{key:"componentWillMount",value:function(){var e=this.props;null==e.subjects&&e.getSubjects(),null!=e.group||e.notExists||e.getGroup(e.groupId)}},{key:"render",value:function(){if(null==this.props.group)return"page"===this.props.display&&this.props.notExists?r.a.createElement(ye,null,"De opgevraagde groep bestaat niet"):this.props.notExists?null:r.a.createElement(Ee,null);switch(this.props.display){case"page":return r.a.createElement(Gt,this.props);case"card":default:return r.a.createElement(Je,this.props)}}}]),t}(a.Component);var Dt=Object(G.a)(Object(C.b)(function(e,t){var n=(t.match.params.groupId||t.groupId)+"",a=t.display||"page",r=!1,o=null,i=-1!==e.users[e.userId].participatingGroupIds.indexOf(n);return null==e.groups||null==e.groups[n]?null!=n&&-1===e.hasFetched.indexOf("Group.get("+n+")")||(r=!0):o=e.groups[n],{group:o,notExists:r,display:a,role:e.role,groupId:n,subjects:e.subjects,userIsMemberOfGroup:i}},function(e){return{setGroup:function(t){return e(function(e){return function(t,n){function a(e){return{courseId:e.courseId,subjectId:e.subjectId,name:e.courseName,description:e.courseDescription,studyTime:e.studyTime,remarks:e.remarks}}function r(e){return{courseId:e.courseId,groupId:e.id,day:e.day,schoolYear:e.schoolYear,enrollableFor:e.enrollableFor,period:e.period}}var o=a(n().groups[e.id]),i=a(e),l=r(n().groups[e.id]),s=r(e),u=n().groups[e.id].lessons,c=e.lessons,p=n().groups[e.id].presence,d=e.presence,h=n().groups[e.id].evaluations,m=e.evaluations;if(JSON.stringify(o)!==JSON.stringify(i)&&q("course/","patch",i,t,n),JSON.stringify(l)!==JSON.stringify(s)&&q("group/","patch",s,t,n),JSON.stringify(p)!==JSON.stringify(d)){var g=M()(d,function(e){return JSON.stringify(e)!==JSON.stringify(p[e.id])});q("group/presence","patch",{presence:JSON.stringify(F()(g,function(e){return e})),groupId:e.id},t,n)}if(null!=c&&JSON.stringify(u)!==JSON.stringify(c)&&q("group/lessons","patch",{lessons:JSON.stringify(F()(c,function(e){return e}))},t,n),JSON.stringify(h)!==JSON.stringify(m)){for(var b=[],f=0;f<m.length;f++){var y=m[f];JSON.stringify(h[f])!==JSON.stringify(y)&&b.push(y)}q("group/evaluations","patch",{evaluations:JSON.stringify(b),secureLogin:n().secureLogin},t,n)}t({type:"CHANGE_GROUP",group:e})}}(t))},getGroup:function(t){return e(function(e){return function(t,n){q("group","post",{groupId:e},t,n).then(function(n){t({type:"CHANGE_GROUPS",groups:Object(u.a)({},e,n)})}).catch(function(){})}}(t))},getGroupEnrollments:function(t){return e(function(e){return function(t,n){q("group/enrollments","post",{groupId:e},t,n).then(function(n){t({type:"CHANGE_GROUP",group:{id:e,enrollmentIds:Object.keys(n).map(function(e){return parseInt(e,10)})}}),t({type:"CHANGE_USERS",users:n})}).catch(function(){})}}(t))},getGroupLessons:function(t){return e(function(e){return function(t,n){q("group/lessons","post",{groupId:e},t,n).then(function(n){t({type:"CHANGE_GROUP",group:{id:e,lessons:n}})})}}(t))},getGroupParticipants:function(t){return e(function(e){return function(t,n){q("group/participants","post",{groupId:e},t,n).then(function(n){t({type:"CHANGE_GROUP",group:{id:e,participantIds:Object.keys(n).map(function(e){return parseInt(e,10)})}}),t({type:"CHANGE_USERS",users:n})})}}(t))},getGroupEvaluations:function(t){return e(function(e){return function(t,n){q("group/evaluations","post",{groupId:e},t,n,!0).then(function(n){t({type:"CHANGE_GROUP",group:{id:e,evaluations:n}})})}}(t))},getGroupPresence:function(t){return e(function(e){return function(t,n){q("group/presence","post",{groupId:e},t,n).then(function(n){t({type:"CHANGE_GROUP",group:{id:e,presence:n}})})}}(t))},getSubjects:function(){return e(K())}}})(At)),Lt=n(63),Tt=n.n(Lt),Mt=n(54),Pt=n.n(Mt),Ht=n(74),Rt=n.n(Ht),_t=n(160),zt=n.n(_t),Ft=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).handleSortChange=function(e){n.props.history.push({search:"sort="+e+"&filter="+n.state.filterMethod})},n.handleFilterChange=function(e){n.props.history.push({search:"sort="+n.state.sortMethod+"&filter="+e})},n.state={sortMethod:null,filterMethod:"period"+e.currentPeriod},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){this.props.getSubjects(),this.props.getGroups()}},{key:"getGroupsPerSubject",value:function(e){return M()(this.props.groups,function(t){return e===t.subjectName})}},{key:"getMenuItem",value:function(e,t){var n=this,a=this.state.sortMethod===t?"primary":"default";return r.a.createElement(Rt.a,{button:!0,onClick:function(){return n.handleSortChange(t)},key:e},r.a.createElement(zt.a,null,r.a.createElement(me.a,{variant:"title",color:a,style:{minWidth:"150px"}},e)))}},{key:"getMenuItems",value:function(){var e=this,t=F()(this.props.subjects,function(t){return e.getMenuItem(t.name,t.name)});return"student"===this.props.role&&t.unshift(this.getMenuItem("Ingeschreven","enrolled")),t}},{key:"render",value:function(){var e,t=this;return"enrolled"===this.state.sortMethod?null==this.props.enrolledGroupsIds?(e=r.a.createElement(Ee,null),this.props.getEnrolLments()):(e=this.props.enrolledGroupsIds.map(function(e){return r.a.createElement(Dt,{key:e,groupId:e,display:"card"})}),0===this.props.enrolledGroupsIds.length&&(e=r.a.createElement("div",{style:{margin:"15px"}},"Je hebt je nog niet ingeschreven."))):(null!=this.props.subjects&&null!=this.props.groups&&this.props.enrolledGroups!==[]||(e=r.a.createElement(Ee,null)),e=this.getGroupsPerSubject(this.state.sortMethod).sort(function(e,t){return e.period-t.period}).filter(function(e){switch(t.state.filterMethod){case"period1":return 1===e.period;case"period2":return 2===e.period;case"period3":return 3===e.period;case"period4":return 4===e.period;default:return!0}}).map(function(e){return r.a.createElement(Dt,{key:e.id,groupId:e.id,display:"card"})})),r.a.createElement(ye,null,r.a.createElement(de.a,{elevation:2,style:{position:"relative"}},r.a.createElement(Tt.a,{style:{display:"flex"}},r.a.createElement(me.a,{variant:"subheading",color:"textSecondary",style:{flex:"2 1 auto"}},"Schrijf je in voor modules"),r.a.createElement(Y,{label:"filter",value:this.state.filterMethod,editable:!0,options:[{label:"Geen",value:"none"},{label:"Blok 1",value:"period1"},{label:"Blok 2",value:"period2"},{label:"Blok 3",value:"period3"},{label:"Blok 4",value:"period4"}],onChange:this.handleFilterChange}))),r.a.createElement("div",{style:{display:"flex"},className:"ColumnFlexDirectionOnMobile"},r.a.createElement(de.a,{elevation:2},r.a.createElement(Pt.a,{component:"nav",style:{flex:1}},this.getMenuItems())),r.a.createElement("div",{style:{padding:"12px"}},e)),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=ot.a.parse(e.location.search);return n.sort?Object(p.a)({},t,{sortMethod:n.sort,filterMethod:n.filter?n.filter:"period"+e.currentPeriod}):null!=e.subjects?Object(p.a)({},t,{filterMethod:n.filter?n.filter:"period"+e.currentPeriod,sortMethod:e.subjects[Object.keys(e.subjects)[0]].name}):Object(p.a)({},t,{sortMethod:null,filterMethod:"none"})}}]),t}(a.Component);var Bt=Object(C.b)(function(e){return{role:e.role,currentPeriod:e.currentPeriod,enrollableGroups:e.enrollableGroups,groups:e.groups,subjects:e.subjects,enrolledGroupsIds:e.users[e.userId].enrollmentIds}},function(e){return{getSubjects:function(){return e(K())},getGroups:function(){return e(Q())},getEnrolLments:function(){return e(te())}}})(Ft),Ut=n(326),Wt=n.n(Ut),Vt={users:"role",evaluations:"groupId",enrollments:"period"},Jt=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).componentDidMount=function(){n.fetchData(n.state.data).then(function(e){return n.setState({tables:n.splitTable(e,Vt[n.state.data])})})},n.handleFilterChange=function(e){n.props.history.push({search:"data="+e}),n.fetchData(e).then(function(e){return n.setState({tables:n.splitTable(e,Vt[n.state.data]),tableSortColumns:Array(e.length)})})},n.sort=function(e){var t=n.state.tables[e],a=n.state.tableSortColumns[e],r=n.state.tableSortDirections[e];t=[t[0]].concat(t.slice(1,t.length).sort(function(e,t){e=e[a];var n=(null==(t=t[a]))-(null==e)||+(e>t)||-(e<t);return"asc"===r?n:-n})),n.setState(function(n){return{tables:[].concat(Object(c.a)(n.tables.slice(0,e)),[t],Object(c.a)(n.tables.slice(e+1)))}})},n.handleSortChange=function(e,t){n.setState(function(n){return{tableSortColumns:Object(p.a)({},n.tableSortColumns,Object(u.a)({},e,t)),tableSortDirections:Object(p.a)({},n.tableSortDirections,Object(u.a)({},e,"desc"===n.tableSortDirections[e]&&n.tableSortColumns[e]===t?"asc":"desc"))}},function(){return n.sort(e)})},n.splitTable=function(e,t){var n=e[0].findIndex(function(e){return e===t});if(n<0)return[e];for(var a=[[e[0],e[1]]],r=function(t){var r=a.findIndex(function(a){return a[1][n]===e[t][n]});r<0&&(a.push([e[0]]),r=a.length-1),a[r].push(e[t])},o=2;o<e.length;o++)r(o);return a},n.fetchData=function(e){return H.a.ajax({url:"api/function/data",type:"post",data:{table:e,secureLogin:n.props.secureLogin},dataType:"json"})},n.downloadTables=function(){for(var e=n.state.tables,t=new Wt.a.Workbook,a=e[0][0].findIndex(function(e){return e===Vt[n.state.data]}),r=0;r<e.length;r++){var o=t.addWorksheet(e[r][1][a]);o.addRows(e[r]);for(var i=1;i<=e[r][0].length;i++)o.getColumn(i).width=e[r][0][i-1].length<10?10:e[r][0][i-1].length+2}var l={users:"Gebruikers ",enrollments:"Inschrijvingen ",evaluations:"Beoordelingen "}[n.state.data]+(new Date).toLocaleDateString()+".xlsx";n.downloadWorkbook(t,l)},n.downloadWorkbook=function(e,t){e.xlsx.writeBuffer({base64:!0}).then(function(e){var n=document.createElement("a"),a=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),r=URL.createObjectURL(a);n.href=r,n.download=t,document.body.appendChild(n),n.click(),setTimeout(function(){document.body.removeChild(n),window.URL.revokeObjectURL(r)},0)}).catch(function(e){console.log("Something went wrong with downloading the excel file: "+e.message)})},n.state={tables:null,tableSortColumns:{},tableSortDirections:{}},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e,t=this;return e=null==this.state.tables?r.a.createElement(Ee,null):this.state.tables.map(function(e,n){return r.a.createElement(ze.h,{key:n,style:0===n?{marginTop:"100px"}:{marginTop:"50px"}},r.a.createElement(ze.k,null,r.a.createElement(ze.l,{key:0,style:{height:"auto"}},e[0].map(function(e,a){return r.a.createElement(ze.j,{key:a,style:{color:"black",backgroundColor:"#e0e0e0",fontSize:13,top:0}},r.a.createElement(ze.o,{title:"Sorteer",enterDelay:300,placement:"bottom-start"},r.a.createElement(ze.m,{active:t.state.tableSortColumns[n]===a,direction:t.state.tableSortDirections[n],onClick:function(e){return t.handleSortChange(n,a)},style:{zIndex:0}},e)))}))),r.a.createElement(ze.i,null,e.filter(function(e,t){return t>0}).map(function(e,t){return r.a.createElement(ze.l,{key:t+1,style:{height:"auto"}},e.map(function(e,t){return r.a.createElement(ze.j,{key:t},e)}))})))}),r.a.createElement(ye,null,r.a.createElement(_e,null,r.a.createElement(ze.e,{elevation:2,style:{position:"absolute",width:"80%",zIndex:1}},r.a.createElement(ze.n,{style:{display:"flex"}},r.a.createElement(ze.p,{variant:"subheading",color:"textSecondary",style:{flex:"2 1 auto"}},"Gegevens"),r.a.createElement(ze.a,{variant:"contained",color:"primary",onClick:this.downloadTables,style:{margin:"0 10px"}},"Download"),r.a.createElement(Y,{label:"Gegevens van",value:this.state.data,editable:!0,options:[{label:"Beoordelingen",value:"evaluations"},{label:"Gebruikers",value:"users"},{label:"Inschrijvingen",value:"enrollments"}],onChange:this.handleFilterChange}))),e))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=ot.a.parse(e.location.search);return Object(p.a)({},t,{data:n.data?n.data:"evaluations"})}}]),t}(a.Component);var $t=Object(G.a)(Object(C.b)(function(e){return{secureLogin:e.secureLogin}},null)(Jt)),Yt=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).handleFilterChange=function(e){n.props.history.push({search:"week="+e}),n.fetchSchedules(e)},n.state={schedules:null},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){this.fetchSchedules(this.state.week)}},{key:"fetchSchedules",value:function(e){var t=this;return H.a.ajax({url:"api/function/taxi",type:"post",data:{week:e},dataType:"json"}).then(function(e){return t.setState({schedules:e})})}},{key:"render",value:function(){var e;return e=null==this.state.schedules?r.a.createElement(Ee,null):this.state.schedules.map(function(e,t){return r.a.createElement("div",{style:{width:"80%",margin:"auto"},className:"taxiScheduleHolder",key:t,dangerouslySetInnerHTML:{__html:e}})}),r.a.createElement(ye,null,r.a.createElement(de.a,{elevation:2,style:{position:"relative"}},r.a.createElement(Tt.a,{style:{display:"flex"}},r.a.createElement(me.a,{variant:"subheading",color:"textSecondary",style:{flex:"2 1 auto"}},"Taxischema"),r.a.createElement(Y,{label:"week",value:this.state.week,editable:!0,options:[0,1,2,3,4,5,6,7,8].map(function(e){return{label:0===e?"Basisrooster":"Week "+e,value:e+""}}),onChange:this.handleFilterChange}))),e)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=ot.a.parse(e.location.search);return Object(p.a)({},t,{week:n.week?n.week:"0"})}}]),t}(a.Component),Zt=n(156),qt=n.n(Zt),Xt=n(327),Kt=n.n(Xt),Qt=n(167),en=n.n(Qt),tn=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).logoClick=function(){n.props.history.push("/")},n.state={anchorEl:null},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return r.a.createElement(mt.a,{className:"Header"},r.a.createElement(Tt.a,null,r.a.createElement(qt.a,{color:"inherit","aria-label":"Menu",onClick:this.props.toggleMenu,style:{position:"absolute"}},r.a.createElement(Kt.a,null)),r.a.createElement("img",{src:"/images/logo_qhighschool.svg",alt:"QHighschool Logo",style:{height:"60%",margin:"auto",maxHeight:"52px",cursor:"pointer"},onClick:this.logoClick}),r.a.createElement(Pt.a,{color:"inherit",style:{top:15,right:20,position:"absolute"},onClick:this.handleClick},r.a.createElement(en.a,{style:{transform:"scale(1.5)",marginRight:"10px",float:"left"}}),r.a.createElement("span",{className:"HiddenOnMobile"},this.props.displayName))))}}]),t}(a.Component);var nn=Object(G.a)(Object(C.b)(function(e){return null!=e.userId?{displayName:e.users[e.userId].displayName,userId:e.userId}:{displayName:"",userId:e.userId}},function(e){return{toggleMenu:function(){return e(re())}}})(tn)),an=n(328),rn=n.n(an),on=function(e){function t(){var e,n;Object(y.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(x.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).removeNotification=function(e){n.props.removeNotification(n.props.notifications[e])},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this,t=this.props.notifications.map(function(t,n){var a;switch(t.priority){case"high":a=I.palette.error.main;break;case"medium":a="#ff8c00";break;case"light":default:a=I.palette.primary.main}return r.a.createElement(ze.f,{key:n,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:!0,style:{position:"relative"},TransitionProps:{direction:"left"}},r.a.createElement(ze.g,{style:{background:a,marginBottom:"4px"},message:r.a.createElement("span",{id:"message-id"},t.message),action:[r.a.createElement(ze.d,{key:"close",onClick:function(){e.removeNotification(n)}},r.a.createElement(rn.a,null))]}))});return r.a.createElement("div",{style:{position:"fixed",bottom:0,right:0,width:"auto",zIndex:10}},t)}}]),t}(a.Component);var ln=Object(Oe.a)(Object(C.b)(function(e,t){return{notifications:e.notifications.filter(function(e){try{return"bar"===e.type&&new RegExp(e.scope).test(t.location.pathname)}catch(n){return!0}})}},function(e){return{removeNotification:function(t){return e(ae(t))}}})(on)),sn=n(161),un=n.n(sn),cn=n(331),pn=n.n(cn),dn=n(329),hn=n.n(dn),mn=n(330),gn=n.n(mn),bn=n(333),fn=n.n(bn),yn=n(334),vn=n.n(yn),xn=n(335),En=n.n(xn),On=n(332),jn=n.n(On),kn=function(e){function t(e){var n;switch(Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).state={},n.props.role){case"student":n.state.pages=["aanbod","portfolio","profiel","loguit"];break;case"teacher":n.state.pages=["groepen","profiel","loguit"];break;case"admin":n.state.pages=["groepen","aanbod","profiel","gegevens","taxi","beheer","loguit"];break;case"grade_admin":n.state.pages=["aanbod","gegevens","profiel","loguit"];break;default:n.state.pages=["aanbod","profiel","loguit"]}return n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"logout",value:function(){return H.a.ajax({url:"/auth/logout",type:"get",dataType:"json"}).then(function(){document.location.reload()})}},{key:"onClick",value:function(e){"profiel"===e?this.props.history.push("/gebruiker/"+this.props.userId):"loguit"===e?this.logout():this.props.history.push("/"+e)}},{key:"getIcon",value:function(e,t){var n="black";switch(I.palette[t]&&(n=I.palette[t].main),e){case"Assignment":return r.a.createElement(hn.a,{style:{color:n}});case"Group":return r.a.createElement(gn.a,{style:{color:n}});case"Assessment":return r.a.createElement(pn.a,{style:{color:n}});case"Person":return r.a.createElement(en.a,{style:{color:n}});case"ViewColumn":return r.a.createElement(jn.a,{style:{color:n}});case"Exit":return r.a.createElement(fn.a,{style:{color:"red"}});case"Taxi":return r.a.createElement(vn.a,{style:{color:n}});case"Beheer":return r.a.createElement(En.a,{style:{color:n}});default:return null}}},{key:"getItem",value:function(e,t){var n=this,a="/"+e.id===this.props.location.pathname,o={};e.bottom&&(o.position="absolute",o.bottom="0px");var i=a?"primary":"inherit",l=r.a.createElement(un.a,null,r.a.createElement(wt,{scope:e.id},this.getIcon(e.icon,i)));return r.a.createElement(Rt.a,{key:t,button:!0,onClick:function(){return n.onClick(e.id)},style:o},l,r.a.createElement(me.a,{variant:"title",color:i,className:"HiddenOnMobile"},e.title))}},{key:"render",value:function(){var e=this,t=[{id:"aanbod",title:"Aanbod",icon:"Assignment"},{id:"groepen",title:"Mijn groepen",icon:"Group"},{id:"portfolio",title:"Portfolio",icon:"Assessment"},{id:"gegevens",title:"Gegevens",icon:"ViewColumn"},{id:"taxi",title:"Taxi",icon:"Taxi"},{id:"beheer",title:"Beheer",icon:"Beheer"}].filter(function(t){return-1!==e.state.pages.indexOf(t.id)}).map(this.getItem.bind(this)),n=[{id:"profiel",title:"Profiel",icon:"Person"},{id:"loguit",title:"Log uit",icon:"Exit"}].filter(function(t){return-1!==e.state.pages.indexOf(t.id)}).map(this.getItem.bind(this));return r.a.createElement(de.a,{elevation:8,className:"Menu"},r.a.createElement(Pt.a,{component:"nav",style:{height:"100%"}},t,r.a.createElement("div",{style:{position:"absolute",bottom:"20px",width:"100%"}},n)))}}]),t}(a.Component);var Cn=Object(G.a)(Object(C.b)(function(e){return null!=e.userId?{displayName:e.users[e.userId].displayName,userId:e.userId,role:e.role}:{displayName:"",userId:e.userId,role:e.role}},null)(kn)),In=n(336),Sn=n.n(In),wn=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).handleFilterChange=function(e){n.props.history.push({search:"filter="+e})},n.state={},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"orderGroups",value:function(e,t){var n={};return Sn()(e,function(e){n[t(e)]||(n[t(e)]=[]),n[t(e)].push(e)}),F()(n,this.getOrder)}},{key:"getOrder",value:function(e,t){return e=F()(e,function(e){return r.a.createElement(Dt,{key:e.id,groupId:e.id,display:"card"})}),r.a.createElement("div",{key:t,style:{padding:"10px"}},r.a.createElement(Y,{value:t,style:{type:"headline",color:"secondary"},layout:{area:!0}}),e,r.a.createElement(ze.c,{style:{marginTop:"20px"}}))}},{key:"render",value:function(){var e=this,t=[{label:"Alle",value:"all"},{label:"Blok 1",value:"period1"},{label:"Blok 2",value:"period2"},{label:"Blok 3",value:"period3"},{label:"Blok 4",value:"period4"}];"student"===this.props.role&&t.splice(1,0,{label:"Ingeschreven",value:"enrolled"}),this.props.groups||this.props.getParticipatingGroups(),this.props.enrollmentIds||this.props.getEnrolLments();var n,a=this.props.enrollmentIds||[];return"enrolled"!==this.state.filter&&(a=this.props.participatingGroupIds.filter(function(e){return-1===a.indexOf(e)}).concat(a).filter(function(t){if(!e.props.groups||!e.props.groups[t])return!1;switch(e.state.filter){case"period1":return 1===e.props.groups[t].period;case"period2":return 2===e.props.groups[t].period;case"period3":return 3===e.props.groups[t].period;case"period4":return 4===e.props.groups[t].period;default:return!0}})),n=this.props.groups&&0===a.filter(function(t){return null==e.props.groups[t]}).length?this.orderGroups(a.map(function(t){return e.props.groups[t]}),function(e){return e.subjectName}):r.a.createElement(Ee,null),r.a.createElement(ye,null,r.a.createElement(ze.e,{elevation:2,style:{position:"relative"}},r.a.createElement(ze.n,{style:{display:"flex"}},r.a.createElement(ze.p,{variant:"subheading",color:"textSecondary",style:{flex:"2 1 auto"}},"student"===this.props.role?"Portfolio":"Mijn groepen"),r.a.createElement(Y,{label:"filter",value:this.state.filter,editable:!0,options:t,onChange:this.handleFilterChange}))),n)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=ot.a.parse(e.location.search);return n.filter?Object(p.a)({},t,{filter:n.filter}):Object(p.a)({},t,{filter:"student"===e.role?"all":"period"+e.currentPeriod})}}]),t}(a.Component);var Nn=Object(C.b)(function(e){return{groups:e.groups,participatingGroupIds:e.users[e.userId].participatingGroupIds,enrollmentIds:e.users[e.userId].enrollmentIds,role:e.role,currentPeriod:e.currentPeriod}},function(e){return{getSubjects:function(){return e(K())},getGroups:function(){return e(Q())},getEnrolLments:function(){return e(te())},getParticipatingGroups:function(){return e(function(e,t){q("user/groups","get",null,e,t).then(function(t){e({type:"CHANGE_GROUPS",groups:t})}).catch(function(){})})}}})(wn),Gn=n(115),An=n.n(Gn),Dn=n(116),Ln=n.n(Dn),Tn=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).selectUser=function(e,t){n.setState({input:t,open:!1,userId:e}),n.props.onChange(e,t)},n.getFittingUsers=function(){var e=new RegExp(n.state.input.toLowerCase()),t=0;return M()(n.props.users,function(n){var a=e.test(n.displayName.toLowerCase());return a&&t++,a&&t<6}).map(function(e){return r.a.createElement(V.a,{key:e.id+e.displayName,onClick:function(){return n.selectUser(e.id,e.displayName)}},e.displayName)})},n.handleInput=function(e){n.state.userId&&n.props.onChange(null,null),n.setState({input:e.target.value,open:!0,userId:null})},n.state={input:"",userId:null,open:!1},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){this.props.getAllUsers()}},{key:"render",value:function(){var e=this;return r.a.createElement(ze.b,{onClickAway:function(){return e.setState({open:!1})}},r.a.createElement("span",null,r.a.createElement(Y,{label:"Gebruiker",value:this.state.input,editable:!0,onChange:this.handleInput,style:{margin:"normal"}}),r.a.createElement(Ln.a,{open:null==this.state.aliasId&&this.state.open,anchorEl:this.anchorEl,disablePortal:!0},r.a.createElement(de.a,{style:{position:"relative",zIndex:"1"}},r.a.createElement(An.a,null,this.getFittingUsers())))))}}]),t}(a.Component);var Mn=Object(C.b)(function(e){return{users:e.users}},function(e){return{getAllUsers:function(){return e(function(e,t){q("user/list","get",null,e,t).then(function(t){e({type:"CHANGE_USERS",users:t})}).catch(function(){})})}}})(Tn),Pn={subject:{name:"",description:""},course:{name:"",subjectId:null},group:{courseId:null,teacherId:null}},Hn=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(x.a)(this,Object(E.a)(t).call(this,e))).loginUsingAlias=function(){var e;n.props.dispatch((e=n.state.aliasId,function(t,n){q("function/alias","post",{userId:e,secureLogin:n().secureLogin},t,n).then(function(){document.location.reload()})}))},n.handleAliasChange=function(e){n.setState({aliasId:e})},n.notification=function(e,t){e={subject:"Vak",course:"Module",group:"Groep"}[e],t?console.log(e+" added!"):console.log(e+" not added :(")},n.handleChange=function(e,t,a){n.setState(function(n){return Object(u.a)({},a,Object(p.a)({},n[a],Object(u.a)({},e,t)))})},n.handleTypeChange=function(e){n.props.history.push({search:"addType="+e})},n.state={courses:[],aliasId:null,subject:Pn.subject,course:Pn.course,group:Pn.group},n}return Object(O.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this;H.a.ajax({url:"api/course/list",type:"get",data:{},dataType:"json"}).then(function(t){console.log(t),e.setState({courses:t})}),this.props.getSubjects()}},{key:"add",value:function(e){var t,n=this,a=this.state[e];switch(e){case"subject":t=function(){var e=Object(L.a)(D.a.mark(function e(){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.props.addSubject(a.name,a.description).then(function(e){return e.success}));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();break;case"course":t=function(){var e=Object(L.a)(D.a.mark(function e(){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.props.addCourse(a.name,a.subjectId).then(function(e){return e.success}));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();break;default:t=function(){var e=Object(L.a)(D.a.mark(function e(){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.props.addGroup(a.courseId,a.teacherId).then(function(e){return e.success}));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}t().then(function(t){t&&n.setState(Object(u.a)({},e,Pn[e])),n.notification(e,t)})}},{key:"render",value:function(){var e,t=this,n=this.state.subject,a=this.state.course,o=this.state.group,i=this.state.addType,l=this.props.subjects||{},s=this.state.courses;switch(i){case"subject":e=r.a.createElement("div",null,r.a.createElement(Y,{label:"Naam",value:n.name,onChange:function(e){return t.handleChange("name",e,"subject")},editable:!0,validate:{maxLength:50}}),r.a.createElement("br",null),r.a.createElement(Y,{label:"Omschrijving",value:n.description,onChange:function(e){return t.handleChange("description",e,"subject")},editable:!0,validate:{maxLength:440},layout:{area:!0}}));break;case"course":e=r.a.createElement("div",null,r.a.createElement(Y,{label:"Naam",value:a.name,onChange:function(e){return t.handleChange("name",e,"course")},editable:!0,validate:{maxLength:50},style:{flex:"1"}}),r.a.createElement("br",null),r.a.createElement(Y,{value:a.subjectId,subjectId:!0,label:"Vak",onChange:function(e){t.handleChange("subjectId",e,"course")},editable:!0,options:F()(l,function(e){return{value:e.id,label:e.name}}),style:{minWidth:"200px"}}));break;default:e=r.a.createElement("div",null,r.a.createElement(Y,{value:o.courseId,label:"Module",onChange:function(e){return t.handleChange("courseId",e,"group")},editable:!0,options:s.map(function(e){return{label:e.name,value:e.id}}),style:{minWidth:"200px"}}),r.a.createElement("br",null),r.a.createElement(Mn,{value:o.teacherId,onChange:function(e){return t.handleChange("teacherId",e,"group")}}))}return r.a.createElement(ye,null,r.a.createElement(_e,null,r.a.createElement(ze.e,{elevation:2,style:{position:"relative"}},r.a.createElement(ze.n,{style:{display:"flex"}},r.a.createElement(ze.p,{variant:"subheading",color:"textSecondary",style:{flex:"2 1 auto"}},"Beheer"))),r.a.createElement("div",{style:{margin:"10px 0"}},r.a.createElement(Mn,{onChange:this.handleAliasChange}),r.a.createElement(ze.a,{variant:"contained",color:"primary",disabled:null==this.state.aliasId,onClick:this.loginUsingAlias},"Login in met alias")),r.a.createElement(ze.c,null),r.a.createElement("div",null,r.a.createElement(ze.p,{variant:"title",color:"primary",style:{margin:"18px 12px",float:"left"}},"Nieuw(e):"),r.a.createElement(Y,{value:i,name:"addType",editable:!0,onChange:this.handleTypeChange,options:[{value:"course",label:"Module"},{value:"subject",label:"Vak"},{value:"group",label:"Groep"}],style:{minWidth:"200px",maxWidth:"400px",type:"title"}})),e,r.a.createElement(ze.a,{variant:"contained",color:"primary",style:{height:"37px",margin:"12px"},onClick:function(){t.add(i)}}," Voeg toe ")))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=ot.a.parse(e.location.search);return Object(p.a)({},t,{addType:n.addType?n.addType:"subject"})}}]),t}(a.Component);var Rn=Object(C.b)(function(e){return{subjects:e.subjects,groups:e.groups}},function(e){return{addSubject:function(){var t=Object(L.a)(D.a.mark(function t(n,a){return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e(oe(n,a)));case 1:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),addCourse:function(){var t=Object(L.a)(D.a.mark(function t(n,a){return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e(ie(n,a)));case 1:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),addGroup:function(){var t=Object(L.a)(D.a.mark(function t(n,a){return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e(le(n,a)));case 1:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),addNotification:function(t){return e(ne(t))},getSubjects:function(){return e(K())},dispatch:e}})(Hn),_n=function(e){function t(){return Object(y.a)(this,t),Object(x.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(v.a)(t,[{key:"componentWillMount",value:function(){this.props.getSelf()}},{key:"handleShowMenu",value:function(){var e=this.state.showMenu;this.setState({showMenu:!e})}},{key:"render",value:function(){if(!this.props.userId&&"/login"!==this.props.location.pathname)return r.a.createElement("div",{className:"App"},r.a.createElement(nn,null),r.a.createElement(ln,null));var e="/groepen";return"student"===this.props.role?e="/aanbod":"grade_admin"===this.props.role&&(e="/gegevens"),r.a.createElement("div",{className:"App"},r.a.createElement(ln,null),this.props.showMenu&&r.a.createElement(Cn,null),r.a.createElement(nn,null),r.a.createElement(S.a,null,r.a.createElement(w.a,{path:"/login",component:be}),r.a.createElement(w.a,{path:"/aanbod",component:Bt}),r.a.createElement(w.a,{path:"/groep/:groupId",component:Dt}),r.a.createElement(w.a,{path:"/gebruiker/:userId",component:lt}),r.a.createElement(w.a,{path:"/profiel/",component:lt}),r.a.createElement(w.a,{path:"/portfolio/",component:Nn}),r.a.createElement(w.a,{path:"/groepen/",component:Nn}),r.a.createElement(w.a,{path:"/gegevens/",component:$t}),r.a.createElement(w.a,{path:"/taxi/",component:Yt}),r.a.createElement(w.a,{path:"/beheer/",component:Rn}),r.a.createElement(N.a,{push:!0,to:"student"===this.props.role?"/aanbod":"/groepen"}),r.a.createElement(N.a,{push:!0,to:e})))}}]),t}(a.Component);var zn=Object(G.a)(Object(C.b)(function(e){return{showMenu:e.showMenu,role:e.role,userId:e.userId}},function(e){return{getSelf:function(){return e(ee())},addNotification:function(t){return e(ne(t))}}})(_n)),Fn=function(e){function t(){return Object(y.a)(this,t),Object(x.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return r.a.createElement(C.a,{store:this.props.store},r.a.createElement(j.MuiThemeProvider,{theme:I},r.a.createElement(k.a,null,r.a.createElement(zn,null))))}}]),t}(a.Component);n(828);n(829);var Bn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.c,Un=Object(l.d)(f,Bn(Object(l.a)(s.a)));i.a.render(r.a.createElement(Fn,{store:Un}),document.getElementById("root"))}},[[389,1,2]]]);
//# sourceMappingURL=main.f2f1779d.chunk.js.map