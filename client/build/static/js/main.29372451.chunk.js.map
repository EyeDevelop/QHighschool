{"version":3,"sources":["store/usersReducer.js","store/groupsReducer.js","store/mainReducer.js","lib/MuiTheme.js","components/Field.js","store/actions.js","pages/Login.js","pages/Page.js","components/Progress.js","pages/group/EnrollmentPopup.js","pages/group/ChooseButton.js","components/EnsureSecureLogin.js","pages/group/Evaluation.js","pages/group/GroupCard.js","pages/user/UserRow.js","pages/user/UserPage.js","pages/user/UserCard.js","pages/user/User.js","pages/group/PresenceTable.js","pages/group/Lesson.js","pages/user/UserList.js","components/PageLeaveWarning.js","pages/group/GroupData.js","components/NotificationBadge.js","pages/group/GroupPage.js","pages/group/Group.js","pages/CourseSelect.js","pages/DataPage.js","pages/Taxi.js","components/Header.js","components/NotificationBar.js","components/Menu.js","pages/Portfolio.js","components/SelectUser.js","pages/ControlPanel.js","App.js","lib/GlobalProvider.js","index.js"],"names":["DEFAULT_USERS","usersReducer","users","arguments","length","undefined","action","type","newUsers","x","Object","objectSpread","defineProperty","user","id","userId","enrollmentIds","concat","groupId","index","indexOf","toConsumableArray","slice","DEFAULT_GROUPS","groups","group","DEFAULT_STATE","enrollableGroups","currentPeriod","subjects","showMenu","notifications","hasFetched","mainReducer","state","role","secureLogin","notification","menuState","call","method","data","lessons","lessonId","userStatus","groupsReducer","theme","createMuiTheme","breakpoints","keys","values","xs","sm","md","lg","xl","direction","mixins","toolbar","minHeight","@media (min-width:0px) and (orientation: landscape)","@media (min-width:600px)","overrides","palette","common","black","white","primary","main","contrastText","light","dark","secondary","error","grey","50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700","contrastThreshold","tonalOffset","text","disabled","hint","divider","background","paper","default","active","hover","hoverOpacity","selected","disabledBackground","props","shadows","typography","fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","display4","fontWeight","letterSpacing","lineHeight","marginLeft","color","display3","display2","display1","headline","title","subheading","body2","body1","caption","button","textTransform","transitions","easing","easeInOut","easeOut","easeIn","sharp","duration","shortest","shorter","short","standard","complex","enteringScreen","leavingScreen","spacing","unit","zIndex","mobileStepper","appBar","drawer","modal","snackbar","tooltip","Field","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","event","onChange","name","menuItems","endAdornment","value","style","layout","label","multiline","fullWidth","options","disableUnderline","underline","margin","marginPx","classNames","alignment","float","textAlign","push","area","editable","labelVisible","a","filter","opt","map","option","react_default","createElement","MenuItem_default","key","InputAdornment_default","position","td","width","field","TextField_default","className","join","select","flex","bind","InputProps","inputProps","nextProps","prevState","validate","rules","test","isNaN","replace","min","parseFloat","max","notEmpty","maxLength","React","Component","apiErrorHandler","dispatch","e2","responseJSON","Math","random","priority","message","scope","fetchData","_x","_x2","_x3","_x4","_x5","_x6","_fetchData","apply","_callee","endpoint","getState","forceArray","f","i","o","regenerator_default","wrap","_context","prev","next","abrupt","Promise","reject","Error","$","ajax","url","dataType","then","list","Array","isArray","keyBy","catch","stop","getSubjects","getGroups","getSelf","addNotification","not","year","level","profile","preferedEmail","phoneNumber","addMissingInfoNotifications","removeNotification","window","location","pathname","setCookie","search","document","href","toggleMenu","getEnrolLments","enrollments","addSubject","description","addCourse","subjectId","addGroup","courseId","mainTeacherId","cname","cvalue","exhours","d","Date","setTime","getTime","expires","toUTCString","cookie","Login","generateEmail","interval","setInterval","school","schoolShort","studentNumber","floor","setState","clearInterval","Typography_default","variant","overflow","history","Paper_default","elevation","padding","gutterBottom","generateColoredEmail","Button_default","size","onClick","login","withRouter","connect","email","password","Page","children","Progress","isShowing","_this2","timeout","setTimeout","clearTimeout","CircularProgress_default","EnrollmentPopup","Dialog_default","open","keepMounted","DialogContent_default","DialogContentText_default","day","display","chosenDayGroupName","DialogActions_default","DialogTitle_default","courseName","handlePopup","Clear_default","_this3","_this4","remarks","preventPopupClose","page","getRemarkPage","getCancelPage","getDuplicatePage","getConfirmPage","hasChosen","hasChosenDay","ChooseButton","getEnrollableGroups","dialogOpen","preventClose","doEnroll","toggleEnrollment","dialog","group_EnrollmentPopup","loading","components_Progress","canChoose","period","ownProps","forEach","e","EnsureSecureLogin","marginTop","components_Field","EVALUATION_FORMATS","Evaluation","evaluation","student","assesment","handleChange","EvaluationTab","onSortChange","sortValue","sortDirection","sortEvaluations","evaluations","sort","b","cmp","displayName","newEvaluations","target","explanation","handleExplanationChange","alignItems","paddingRight","paddingLeft","evComps","index_es","component","Evaluation_Evaluation","handleEvaluationChange","getExplanationField","components_EnsureSecureLogin","backgroundColor","enterDelay","placement","handleEvaluationTypeChange","CARD_STYLE","height","verticalAlign","marginRight","marginBottom","GroupCard","bottom","borderBottomLeftRadius","borderBottomRightRadius","justifyContent","ev","getEvaluationColor","expand","group_ChooseButton","onMouseEnter","onMouseLeave","maxHeight","cursor","subjectName","enrollableFor","courseDescription","getBottomSection","number","numberWithoutCharacters","substr","match","exec","firstName","lastName","formatPhoneNumber","profiles","levels","UserPage","JSON","stringify","shouldFillIn","ownProfile","pages_Page","Divider_default","hasChanged","save","setUser","User","notExists","user_UserPage","UserRow","UserCard","s","queryString","parse","setSecureLogin","from","beforeLoginPath","ca","decodeURIComponent","split","c","charAt","substring","getCookie","params","PresenceTable","createRow","participantId","content","lesson","p","presence","createPresenceComponent","user_User","createLessonHeader","numberInBlock","status","rows","participantIds","partId","unshift","Lesson","mini","setPresenceUserStatus","courseGroupId","flexDirection","kind","subject","activities","getWeekdayString","date","getDay","getDate","getMonth","getFullYear","userIsMemberOfGroup","getOptOutButton","UserList","getHeader","headerTitle","sortIds","userIds","toLowerCase","toString","header","PageLeaveWarning","giveWarning","onbeforeunload","returnValue","Prompt","when","GroupData","handleClickAway","anchorEl","showTeacherCard","currentTarget","top","right","teacherName","schoolYear","studyTime","Popover_default","onClose","anchorOrigin","horizontal","vertical","teacherId","colorPrimary","colorSecondary","colorError","NotificationBadge","classes","tooltipMessage","j","Badge_default","badgeContent","withStyles","RegExp","err","GroupPage","handleLessonChange","handlePresenceChange","presenceObj","setEditable","cancel","setGroup","handleTab","newTab","tabs","currentTab","user_UserList","0","group_Lesson","group_PresenceTable","Evaluation_EvaluationTab","getData","getGroupEnrollments","getGroupLessons","getGroupParticipants","getGroupPresence","getGroupEvaluations","group_GroupData","assign","AppBar_default","Tabs_default","indicatorColor","textColor","centered","tab","Tab_default","components_NotificationBadge","getCurrentTab","components_PageLeaveWarning","Group","getGroup","group_GroupPage","group_GroupCard","participatingGroupIds","getCourse","getCourseGroup","oldCourse","newCourse","oldCourseGroup","newCourseGroup","oldLessons","newLessons","oldPresence","newPresence","oldEvaluations","changedPresenceObjs","changedEvaluations","parseInt","participants","CourseSelect","handleSortChange","filterMethod","handleFilterChange","sortMethod","ListItem_default","ListItemText_default","minWidth","subjectsComponents","getMenuItem","enrolledGroupsIds","group_Group","enrolledGroups","getGroupsPerSubject","Toolbar_default","List_default","getMenuItems","splitValues","DataPage","componentDidMount","tables","splitTable","tableSortColumns","tableIndex","table","column","order","tableSortDirections","columnIndex","splitValue","splitIndex","findIndex","_loop","halfSplitTable","downloadTables","workbook","Excel","Workbook","sheet","addWorksheet","addRows","getColumn","filename","toLocaleDateString","downloadWorkbook","fileName","xlsx","writeBuffer","base64","xls64","Blob","URL","createObjectURL","download","body","appendChild","click","removeChild","revokeObjectURL","console","log","_","row","rowIndex","cell","Taxi","fetchSchedules","schedules","week","dangerouslySetInnerHTML","__html","n","Header","logoClick","IconButton_default","aria-label","Menu_default","src","alt","handleClick","Person_default","transform","NotificationBar","TransitionProps","Close_default","Menu","pages","reload","logout","iconName","Assignment_default","Group_default","Assessment_default","ViewColumn_default","ExitToApp_default","LocalTaxi_default","Build_default","isCurrentPage","icon","ListItemIcon_default","getIcon","visiblePages","getItem","visibleProfile","Portfolio","compareFunction","orders","getOrder","splice","getParticipatingGroups","groupIds","orderGroups","selectUser","input","getFittingUsers","regExp","count","v","handleInput","getAllUsers","onClickAway","Popper_default","aliasId","disablePortal","MenuList_default","initialValues","course","ControlPanel","loginUsingAlias","handleAliasChange","typeObjectAdded","success","handleTypeChange","courses","addFunction","typeValues","_ref2","asyncToGenerator","mark","_ref3","_callee2","_context2","_ref4","_callee3","_context3","addView","addType","SelectUser","maxWidth","add","_addSubject2","_callee4","_context4","_addCourse2","_callee5","_context5","_addGroup2","_callee6","_context6","App","components_Header","components_NotificationBar","startPage","components_Menu","Switch","Route","path","Redirect","to","GlobalProvider","react_redux_es","store","styles","BrowserRouter","src_App","require","compose","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","reduxCompose","createStore","reducer","applyMiddleware","thunk","ReactDOM","render","lib_GlobalProvider","getElementById"],"mappings":"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","file":"static/js/main.29372451.chunk.js","sourcesContent":["const DEFAULT_USERS = {\r\n}\r\n\r\nfunction usersReducer(users = DEFAULT_USERS, action) {\r\n\tswitch (action.type) {\r\n\t\tcase \"CHANGE_USERS\":\r\n\t\t\tconst newUsers = users;\r\n\t\t\tfor (const x in action.users) {\r\n\t\t\t\tnewUsers[x] = { ...newUsers[x], ...action.users[x] }\r\n\t\t\t}\r\n\t\t\treturn newUsers;\r\n\t\tcase \"CHANGE_USER\":\r\n\t\t\treturn {\r\n\t\t\t\t...users,\r\n\t\t\t\t[action.user.id]: {\r\n\t\t\t\t\t...users[action.user.id],\r\n\t\t\t\t\t...action.user\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\tcase \"CHANGE_ENROLLMENTS\":\r\n\t\t\tif (action.action === \"ADD\") {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...users,\r\n\t\t\t\t\t[action.userId]: {\r\n\t\t\t\t\t\t...users[action.userId],\r\n\t\t\t\t\t\tenrollmentIds: (users[action.userId].enrollmentIds || []).concat(action.groupId)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (action.action === \"REMOVE\") {\r\n\t\t\t\tconst index = users[action.userId].enrollmentIds.indexOf(action.groupId);\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...users,\r\n\t\t\t\t\t[action.userId]: {\r\n\t\t\t\t\t\t...users[action.userId],\r\n\t\t\t\t\t\tenrollmentIds: [\r\n\t\t\t\t\t\t\t...users[action.userId].enrollmentIds.slice(0, index),\r\n\t\t\t\t\t\t\t...users[action.userId].enrollmentIds.slice(index + 1),\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...users,\r\n\t\t\t\t[action.userId]: {\r\n\t\t\t\t\t...users[action.userId],\r\n\t\t\t\t\tenrollmentIds: action.enrollmentIds,\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn users;\r\n\t}\r\n}\r\n\r\n\r\nexport default usersReducer;","const DEFAULT_GROUPS = {\r\n}\r\n\r\nfunction usersReducer(groups = DEFAULT_GROUPS, action) {\r\n\tswitch (action.type) {\r\n\t\tcase \"CHANGE_GROUPS\":\r\n\t\t\treturn { ...action.groups,...groups, };\r\n\t\tcase \"CHANGE_GROUP\":\r\n\t\t\treturn {\r\n\t\t\t\t\t...groups,\r\n\t\t\t\t\t[action.group.id]: {\r\n\t\t\t\t\t\t...groups[action.group.id], \r\n\t\t\t\t\t\t...action.group\r\n\t\t\t\t\t}\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn groups;\r\n\t}\r\n}\r\n\r\n\r\nexport default usersReducer;","import usersReducer from \"./usersReducer\";\r\nimport groupsReducer from \"./groupsReducer\";\r\n\r\nconst DEFAULT_STATE = {\r\n\tuserId: null,\r\n\tenrollableGroups: null,\r\n\tcurrentPeriod: 4,\r\n\tsubjects: null,\r\n\tgroups: null,\r\n\tusers: null,\r\n\tshowMenu: true,\r\n\tnotifications: [],\r\n\thasFetched: [],\r\n}\r\n\r\nfunction mainReducer(state = DEFAULT_STATE, action) {\r\n\tswitch (action.type) {\r\n\t\tcase \"SET_SELF\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuserId: action.user.id,\r\n\t\t\t\trole: action.user.role,\r\n\t\t\t\tnotifications: [...state.notifications, ...action.user.notifications],\r\n\t\t\t\tusers: {\r\n\t\t\t\t\t[action.user.id]: action.user,\r\n\t\t\t\t\t...state.users,\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\tcase \"SET_SECURE_LOGIN\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsecureLogin: action.secureLogin,\r\n\t\t\t}\r\n\t\tcase \"ADD_NOTIFICATION\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tnotifications: [...state.notifications, action.notification],\r\n\t\t\t};\r\n\t\tcase \"REMOVE_NOTIFICATION\":\r\n\t\t\tconst index = state.notifications.indexOf(action.notification);\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tnotifications: [\r\n\t\t\t\t\t...state.notifications.slice(0, index),\r\n\t\t\t\t\t...state.notifications.slice(index + 1)\r\n\t\t\t\t],\r\n\t\t\t};\r\n\t\tcase \"TOGGLE_MENU\":\r\n\t\t\tif (action.menuState != null) {\r\n\t\t\t\treturn { ...state, showMenu: action.menuState };\r\n\t\t\t} else {\r\n\t\t\t\treturn { ...state, showMenu: !state.showMenu };\r\n\t\t\t}\r\n\t\tcase \"HAS_FETCHED\":\r\n\t\t\treturn { ...state, hasFetched: [...state.hasFetched, { call: action.call, method: action.method, data: action.data }] };\r\n\t\tcase \"CHANGE_ENROLLABLE_GROUPS\":\r\n\t\t\treturn { ...state, enrollableGroups: action.enrollableGroups };\r\n\t\tcase \"CHANGE_SUBJECTS\":\r\n\t\t\treturn { ...state, subjects: { ...state.subjects, ...action.subjects } };\r\n\t\tcase \"CHANGE_PRESENCE_USER_STATUS\":\r\n\t\t\tlet lessons = state.groups[action.groupId].lessons;\r\n\t\t\tlessons[action.lessonId].userStatus = action.userStatus;\r\n\t\t\treturn { ...state, lessons }\r\n\t\tdefault:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: usersReducer(state.users, action),\r\n\t\t\t\tgroups: groupsReducer(state.groups, action),\r\n\t\t\t}\r\n\t}\r\n}\r\n\r\n\r\nexport default mainReducer;","import { createMuiTheme } from '@material-ui/core/styles';\r\n\r\n// const theme = createMuiTheme({\r\n// \tpalette: {\r\n// \t\tprimary: {\r\n// \t\t\t// light: '#5472d3',\r\n// \t\t\tmain: '#0d47a1',\r\n// \t\t\t// dark: '#002171',\r\n// \t\t\tcontrastText: '#fff',\r\n// \t\t},\r\n// \t\tsecondary: {\r\n// \t\t\t// light: '#60ad5e',\r\n// \t\t\tmain: '#2e7d32',\r\n// \t\t\t// dark: '#005005',\r\n// \t\t\tcontrastText: '#ffffff',\r\n// \t\t},\r\n// \t},\r\n// });\r\n\r\nconst theme = createMuiTheme({\r\n\t\"breakpoints\": {\r\n\t\t\"keys\": [\r\n\t\t\t\"xs\",\r\n\t\t\t\"sm\",\r\n\t\t\t\"md\",\r\n\t\t\t\"lg\",\r\n\t\t\t\"xl\"\r\n\t\t],\r\n\t\t\"values\": {\r\n\t\t\t\"xs\": 0,\r\n\t\t\t\"sm\": 600,\r\n\t\t\t\"md\": 960,\r\n\t\t\t\"lg\": 1280,\r\n\t\t\t\"xl\": 1920\r\n\t\t}\r\n\t},\r\n\t\"direction\": \"ltr\",\r\n\t\"mixins\": {\r\n\t\t\"toolbar\": {\r\n\t\t\t\"minHeight\": 56,\r\n\t\t\t\"@media (min-width:0px) and (orientation: landscape)\": {\r\n\t\t\t\t\"minHeight\": 48\r\n\t\t\t},\r\n\t\t\t\"@media (min-width:600px)\": {\r\n\t\t\t\t\"minHeight\": 64\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\"overrides\": {},\r\n\t\"palette\": {\r\n\t\t\"common\": {\r\n\t\t\t\"black\": \"#000\",\r\n\t\t\t\"white\": \"#fff\"\r\n\t\t},\r\n\t\t\"type\": \"light\",\r\n\t\t\"primary\": {\r\n\t\t\t\"main\": \"#08C8F9\",\r\n\t\t\t\"contrastText\": \"#fff\",\r\n\t\t\t\"light\": \"rgb(57, 211, 250)\",\r\n\t\t\t\"dark\": \"rgb(5, 140, 174)\"\r\n\t\t},\r\n\t\t\"secondary\": {\r\n\t\t\t\"main\": \"#C3386B\",\r\n\t\t\t\"contrastText\": \"#ffffff\",\r\n\t\t\t\"light\": \"rgb(207, 95, 136)\",\r\n\t\t\t\"dark\": \"rgb(136, 39, 74)\"\r\n\t\t},\r\n\t\t\"error\": {\r\n\t\t\t\"light\": \"#e57373\",\r\n\t\t\t\"main\": \"#f44336\",\r\n\t\t\t\"dark\": \"#d32f2f\",\r\n\t\t\t\"contrastText\": \"#fff\"\r\n\t\t},\r\n\t\t\"grey\": {\r\n\t\t\t\"50\": \"#fafafa\",\r\n\t\t\t\"100\": \"#f5f5f5\",\r\n\t\t\t\"200\": \"#eeeeee\",\r\n\t\t\t\"300\": \"#e0e0e0\",\r\n\t\t\t\"400\": \"#bdbdbd\",\r\n\t\t\t\"500\": \"#9e9e9e\",\r\n\t\t\t\"600\": \"#757575\",\r\n\t\t\t\"700\": \"#616161\",\r\n\t\t\t\"800\": \"#424242\",\r\n\t\t\t\"900\": \"#212121\",\r\n\t\t\t\"A100\": \"#d5d5d5\",\r\n\t\t\t\"A200\": \"#aaaaaa\",\r\n\t\t\t\"A400\": \"#303030\",\r\n\t\t\t\"A700\": \"#616161\"\r\n\t\t},\r\n\t\t\"contrastThreshold\": 3,\r\n\t\t\"tonalOffset\": 0.2,\r\n\t\t\"text\": {\r\n\t\t\t\"primary\": \"rgba(0, 0, 0, 0.87)\",\r\n\t\t\t\"secondary\": \"rgba(0, 0, 0, 0.54)\",\r\n\t\t\t\"disabled\": \"rgba(0, 0, 0, 0.38)\",\r\n\t\t\t\"hint\": \"rgba(0, 0, 0, 0.38)\"\r\n\t\t},\r\n\t\t\"divider\": \"rgba(0, 0, 0, 0.12)\",\r\n\t\t\"background\": {\r\n\t\t\t\"paper\": \"#fff\",\r\n\t\t\t\"default\": \"#fafafa\"\r\n\t\t},\r\n\t\t\"action\": {\r\n\t\t\t\"active\": \"rgba(0, 0, 0, 0.54)\",\r\n\t\t\t\"hover\": \"rgba(0, 0, 0, 0.08)\",\r\n\t\t\t\"hoverOpacity\": 0.08,\r\n\t\t\t\"selected\": \"rgba(0, 0, 0, 0.14)\",\r\n\t\t\t\"disabled\": \"rgba(0, 0, 0, 0.26)\",\r\n\t\t\t\"disabledBackground\": \"rgba(0, 0, 0, 0.12)\"\r\n\t\t}\r\n\t},\r\n\t\"props\": {},\r\n\t\"shadows\": [\r\n\t\t\"none\",\r\n\t\t\"0px 1px 3px 0px rgba(0, 0, 0, 0.2),0px 1px 1px 0px rgba(0, 0, 0, 0.14),0px 2px 1px -1px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 1px 5px 0px rgba(0, 0, 0, 0.2),0px 2px 2px 0px rgba(0, 0, 0, 0.14),0px 3px 1px -2px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 1px 8px 0px rgba(0, 0, 0, 0.2),0px 3px 4px 0px rgba(0, 0, 0, 0.14),0px 3px 3px -2px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 2px 4px -1px rgba(0, 0, 0, 0.2),0px 4px 5px 0px rgba(0, 0, 0, 0.14),0px 1px 10px 0px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 5px 8px 0px rgba(0, 0, 0, 0.14),0px 1px 14px 0px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 6px 10px 0px rgba(0, 0, 0, 0.14),0px 1px 18px 0px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 4px 5px -2px rgba(0, 0, 0, 0.2),0px 7px 10px 1px rgba(0, 0, 0, 0.14),0px 2px 16px 1px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 5px 6px -3px rgba(0, 0, 0, 0.2),0px 9px 12px 1px rgba(0, 0, 0, 0.14),0px 3px 16px 2px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 6px 6px -3px rgba(0, 0, 0, 0.2),0px 10px 14px 1px rgba(0, 0, 0, 0.14),0px 4px 18px 3px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 6px 7px -4px rgba(0, 0, 0, 0.2),0px 11px 15px 1px rgba(0, 0, 0, 0.14),0px 4px 20px 3px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 12px 17px 2px rgba(0, 0, 0, 0.14),0px 5px 22px 4px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 13px 19px 2px rgba(0, 0, 0, 0.14),0px 5px 24px 4px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 7px 9px -4px rgba(0, 0, 0, 0.2),0px 14px 21px 2px rgba(0, 0, 0, 0.14),0px 5px 26px 4px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 8px 9px -5px rgba(0, 0, 0, 0.2),0px 15px 22px 2px rgba(0, 0, 0, 0.14),0px 6px 28px 5px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 8px 10px -5px rgba(0, 0, 0, 0.2),0px 16px 24px 2px rgba(0, 0, 0, 0.14),0px 6px 30px 5px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 8px 11px -5px rgba(0, 0, 0, 0.2),0px 17px 26px 2px rgba(0, 0, 0, 0.14),0px 6px 32px 5px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 9px 11px -5px rgba(0, 0, 0, 0.2),0px 18px 28px 2px rgba(0, 0, 0, 0.14),0px 7px 34px 6px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 9px 12px -6px rgba(0, 0, 0, 0.2),0px 19px 29px 2px rgba(0, 0, 0, 0.14),0px 7px 36px 6px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 10px 13px -6px rgba(0, 0, 0, 0.2),0px 20px 31px 3px rgba(0, 0, 0, 0.14),0px 8px 38px 7px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 10px 13px -6px rgba(0, 0, 0, 0.2),0px 21px 33px 3px rgba(0, 0, 0, 0.14),0px 8px 40px 7px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 10px 14px -6px rgba(0, 0, 0, 0.2),0px 22px 35px 3px rgba(0, 0, 0, 0.14),0px 8px 42px 7px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 11px 14px -7px rgba(0, 0, 0, 0.2),0px 23px 36px 3px rgba(0, 0, 0, 0.14),0px 9px 44px 8px rgba(0, 0, 0, 0.12)\",\r\n\t\t\"0px 11px 15px -7px rgba(0, 0, 0, 0.2),0px 24px 38px 3px rgba(0, 0, 0, 0.14),0px 9px 46px 8px rgba(0, 0, 0, 0.12)\"\r\n\t],\r\n\t\"typography\": {\r\n\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\"fontSize\": 14,\r\n\t\t\"fontWeightLight\": 300,\r\n\t\t\"fontWeightRegular\": 400,\r\n\t\t\"fontWeightMedium\": 500,\r\n\t\t\"display4\": {\r\n\t\t\t\"fontSize\": \"7rem\",\r\n\t\t\t\"fontWeight\": 300,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"letterSpacing\": \"-.04em\",\r\n\t\t\t\"lineHeight\": \"1.14286em\",\r\n\t\t\t\"marginLeft\": \"-.04em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\r\n\t\t},\r\n\t\t\"display3\": {\r\n\t\t\t\"fontSize\": \"3.5rem\",\r\n\t\t\t\"fontWeight\": 400,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"letterSpacing\": \"-.02em\",\r\n\t\t\t\"lineHeight\": \"1.30357em\",\r\n\t\t\t\"marginLeft\": \"-.02em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\r\n\t\t},\r\n\t\t\"display2\": {\r\n\t\t\t\"fontSize\": \"2.8125rem\",\r\n\t\t\t\"fontWeight\": 400,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"lineHeight\": \"1.06667em\",\r\n\t\t\t\"marginLeft\": \"-.02em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\r\n\t\t},\r\n\t\t\"display1\": {\r\n\t\t\t\"fontSize\": \"2.125rem\",\r\n\t\t\t\"fontWeight\": 400,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"lineHeight\": \"1.20588em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\r\n\t\t},\r\n\t\t\"headline\": {\r\n\t\t\t\"fontSize\": \"1.5rem\",\r\n\t\t\t\"fontWeight\": 400,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"lineHeight\": \"1.35417em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\r\n\t\t},\r\n\t\t\"title\": {\r\n\t\t\t\"fontSize\": \"1.3125rem\",\r\n\t\t\t\"fontWeight\": 500,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"lineHeight\": \"1.16667em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\r\n\t\t},\r\n\t\t\"subheading\": {\r\n\t\t\t\"fontSize\": \"1rem\",\r\n\t\t\t\"fontWeight\": 400,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"lineHeight\": \"1.5em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\r\n\t\t},\r\n\t\t\"body2\": {\r\n\t\t\t\"fontSize\": \"0.875rem\",\r\n\t\t\t\"fontWeight\": 500,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"lineHeight\": \"1.71429em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\r\n\t\t},\r\n\t\t\"body1\": {\r\n\t\t\t\"fontSize\": \"0.875rem\",\r\n\t\t\t\"fontWeight\": 400,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"lineHeight\": \"1.46429em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\r\n\t\t},\r\n\t\t\"caption\": {\r\n\t\t\t\"fontSize\": \"0.75rem\",\r\n\t\t\t\"fontWeight\": 400,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"lineHeight\": \"1.375em\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.54)\"\r\n\t\t},\r\n\t\t\"button\": {\r\n\t\t\t\"fontSize\": \"0.875rem\",\r\n\t\t\t\"textTransform\": \"uppercase\",\r\n\t\t\t\"fontWeight\": 500,\r\n\t\t\t\"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\r\n\t\t\t\"color\": \"rgba(0, 0, 0, 0.87)\"\r\n\t\t}\r\n\t},\r\n\t\"transitions\": {\r\n\t\t\"easing\": {\r\n\t\t\t\"easeInOut\": \"cubic-bezier(0.4, 0, 0.2, 1)\",\r\n\t\t\t\"easeOut\": \"cubic-bezier(0.0, 0, 0.2, 1)\",\r\n\t\t\t\"easeIn\": \"cubic-bezier(0.4, 0, 1, 1)\",\r\n\t\t\t\"sharp\": \"cubic-bezier(0.4, 0, 0.6, 1)\"\r\n\t\t},\r\n\t\t\"duration\": {\r\n\t\t\t\"shortest\": 150,\r\n\t\t\t\"shorter\": 200,\r\n\t\t\t\"short\": 250,\r\n\t\t\t\"standard\": 300,\r\n\t\t\t\"complex\": 375,\r\n\t\t\t\"enteringScreen\": 225,\r\n\t\t\t\"leavingScreen\": 195\r\n\t\t}\r\n\t},\r\n\t\"spacing\": {\r\n\t\t\"unit\": 8\r\n\t},\r\n\t\"zIndex\": {\r\n\t\t\"mobileStepper\": 1000,\r\n\t\t\"appBar\": 1100,\r\n\t\t\"drawer\": 1200,\r\n\t\t\"modal\": 1300,\r\n\t\t\"snackbar\": 1400,\r\n\t\t\"tooltip\": 1500\r\n\t}\r\n});\r\n\r\nexport default theme;","import React from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport theme from '../lib/MuiTheme'\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Field extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\terror: false,\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\treturn {\r\n\t\t\t...prevState,\r\n\t\t\terror: nextProps.editable ? !Field.validate(nextProps.value, nextProps.validate) : false,\r\n\t\t}\r\n\t}\r\n\r\n\tstatic validate(value, rules = {}, options = [value]) {\r\n\t\tswitch (rules.type) {\r\n\t\t\tcase \"phoneNumber\":\r\n\t\t\t\tconst re = /(^\\+[0-9]{2}|^\\+[0-9]{2}\\(0\\)|^\\(\\+[0-9]{2}\\)\\(0\\)|^00[0-9]{2}|^0)([0-9]{9}$|[0-9\\-\\s]{10}$)/i;\r\n\t\t\t\tif (!re.test(value)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"email\":\r\n\t\t\t\tconst re2 = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/g;\r\n\t\t\t\tif (!re2.test(value)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"integer\":\r\n\t\t\t\tif (!/^\\+?[1-9][\\d]*$/i.test(value)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"float\":\r\n\t\t\t\tif (isNaN(value)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"decimalGrade\":\r\n\t\t\t\t//replace dot with comma and vice versa\r\n\t\t\t\tconst x = value.replace(/\\./g, \"_$comma$_\").replace(/,/g, \".\").replace(/_\\$comma\\$_/g, \",\");\r\n\t\t\t\tif (x === \"ND\") {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tif (isNaN(x)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: break;\r\n\t\t}\r\n\t\tif (rules.min) {\r\n\t\t\tif (parseFloat(value) < rules.min) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (rules.max) {\r\n\t\t\tif (parseFloat(value) > rules.max) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (rules.notEmpty) {\r\n\t\t\tif (value == null || value === \"\" || value === \" \" || options.indexOf(value) === -1) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (rules.maxLength) {\r\n\t\t\tif (value.length > rules.maxLength) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tonChange(event) {\r\n\t\tthis.props.onChange({\r\n\t\t\t...event,\r\n\t\t\tname: this.props.name,\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet value = this.props.value == null ? \"\" : this.props.value;\r\n\t\tlet style = this.props.style || {};\r\n\t\tlet layout = this.props.layout || {};\r\n\r\n\t\tlet label = this.props.label;\r\n\t\tlet disabled = true;\r\n\t\tlet multiline = false;\r\n\t\tlet fullWidth = false;\r\n\r\n\t\tlet options = this.props.options;\r\n\t\tlet disableUnderline = style.underline || true;\r\n\t\tlet margin = style.margin || \"none\";\r\n\t\tlet marginPx = 0;\r\n\t\tlet menuItems;\r\n\t\tlet endAdornment;\r\n\t\tlet classNames = [];\r\n\t\tif (this.props.style) {\r\n\t\t\tswitch (this.props.style.type) {\r\n\t\t\t\tcase \"headline\":\r\n\t\t\t\t\tstyle = {\r\n\t\t\t\t\t\t...style,\r\n\t\t\t\t\t\t...theme.typography.headline,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tstyle.color = theme.palette.primary.main;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"title\":\r\n\t\t\t\t\tstyle = {\r\n\t\t\t\t\t\t...style,\r\n\t\t\t\t\t\t...theme.typography.title\r\n\t\t\t\t\t};\r\n\t\t\t\t\tstyle.color = theme.palette.primary.main;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"caption\":\r\n\t\t\t\t\tstyle.color = theme.palette.text.secondary;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tstyle.color = theme.palette.text.primary;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tswitch (this.props.style.color) {\r\n\t\t\t\tcase \"primary\":\r\n\t\t\t\t\tstyle.color = theme.palette.primary.main;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"primaryContrast\":\r\n\t\t\t\t\tstyle.color = theme.palette.primary.contrastText;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"secondary\":\r\n\t\t\t\t\tstyle.color = theme.palette.secondary.main;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"error\":\r\n\t\t\t\t\tstyle.color = theme.palette.error.main;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (layout.alignment === \"right\") {\r\n\t\t\tstyle.float = \"right\";\r\n\t\t\tstyle.textAlign = \"right\";\r\n\t\t\tclassNames.push(\"right\");\r\n\t\t}\r\n\t\tif (layout.alignment === \"left\") {\r\n\t\t\tstyle.float = \"left\";\r\n\t\t}\r\n\r\n\t\tif (layout.area) {\r\n\t\t\tfullWidth = true;\r\n\t\t\tmultiline = true;\r\n\t\t}\r\n\r\n\t\tif (this.props.default && this.props.editable === false && (value === \"\" || value == null)) {\r\n\t\t\tvalue = this.props.default;\r\n\t\t}\r\n\r\n\t\tif (this.props.editable) {\r\n\t\t\tdisabled = false;\r\n\t\t\tdisableUnderline = style.underline || false;\r\n\t\t\tmargin = style.margin || \"normal\";\r\n\t\t} else {\r\n\t\t\tif (!(style.labelVisible === true)) {\r\n\t\t\t\tlabel = null;\r\n\t\t\t}\r\n\t\t\tif (options != null && options[0] != null && typeof options[0] !== \"string\") {\r\n\t\t\t\tconst a = options.filter((opt) => {\r\n\t\t\t\t\treturn opt.value === value;\r\n\t\t\t\t})[0];\r\n\t\t\t\tif (a != null) {\r\n\t\t\t\t\tvalue = a.label;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\toptions = null;\r\n\t\t}\r\n\r\n\t\tif (options) {\r\n\t\t\tmenuItems = options.map(option => {\r\n\t\t\t\tif (typeof option !== \"string\") {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<MenuItem key={option.value} value={option.value}>\r\n\t\t\t\t\t\t\t{option.label}\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<MenuItem key={option} value={option}>\r\n\t\t\t\t\t\t{option}\r\n\t\t\t\t\t</MenuItem>\r\n\t\t\t\t)\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (style.unit) {\r\n\t\t\tendAdornment = <InputAdornment position=\"end\">{style.unit}</InputAdornment>;\r\n\t\t}\r\n\t\tif (layout.td) {\r\n\t\t\tstyle.width = \"100%\";\r\n\t\t}\r\n\t\tswitch (margin) {\r\n\t\t\tcase \"dense\":\r\n\t\t\t\tmarginPx = 5;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"normal\":\r\n\t\t\t\tmarginPx = 12;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t}\r\n\r\n\t\tconst field = (\r\n\t\t\t<TextField\r\n\t\t\t\tvalue={value}\r\n\t\t\t\tmargin=\"none\"\r\n\t\t\t\tdisabled={disabled}\r\n\t\t\t\tfullWidth={fullWidth}\r\n\t\t\t\tmultiline={multiline}\r\n\t\t\t\tclassName={classNames.join(\" \")}\r\n\t\t\t\tlabel={label}\r\n\t\t\t\tselect={options ? true : false}\r\n\t\t\t\tstyle={{ flex: 1, ...style, margin: marginPx }}\r\n\t\t\t\tonChange={this.onChange.bind(this)}\r\n\t\t\t\terror={this.state.error}\r\n\t\t\t\tInputProps={{\r\n\t\t\t\t\tdisableUnderline,\r\n\t\t\t\t\tstyle,\r\n\t\t\t\t\tendAdornment: endAdornment ? endAdornment : null,\r\n\t\t\t\t\tinputProps: {\r\n\t\t\t\t\t\tstyle\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\r\n\t\t\t>\r\n\t\t\t\t{menuItems}\r\n\t\t\t</TextField>\r\n\t\t);\r\n\t\tif (layout.td) {\r\n\t\t\tstyle.width = undefined;\r\n\t\t\treturn (\r\n\t\t\t\t<td style={style}>\r\n\t\t\t\t\t{field}\r\n\t\t\t\t</td>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn field;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n\r\nField.propTypes = {\r\n\tvalidate: PropTypes.shape({\r\n\t\tmin: PropTypes.number,\r\n\t\tmax: PropTypes.number,\r\n\t\ttype: PropTypes.oneOf([\"phoneNumber\", \"email\", \"integer\", \"decimalGrade\"]),\r\n\t\tnotEmpty: PropTypes.bool,\r\n\t\tmaxLength: PropTypes.number,\r\n\t}),\r\n\tvalue: PropTypes.oneOfType([\r\n\t\tPropTypes.string,\r\n\t\tPropTypes.number,\r\n\t]),\r\n\tstyle: PropTypes.shape({\r\n\t\tlabelVisible: PropTypes.bool,\r\n\t\ttype: PropTypes.oneOf([\r\n\t\t\t\"title\",\r\n\t\t\t\"caption\",\r\n\t\t\t\"headline\",\r\n\t\t]),\r\n\t\tunderline: PropTypes.bool,\r\n\t\tcolor: PropTypes.oneOf([\"primary\", \"primaryContrast\", \"secondary\", \"error\"]),\r\n\t\tunit: PropTypes.string,\r\n\t\tmargin: PropTypes.oneOf([\"none\", \"dense\", \"normal\"]),\r\n\t}),\r\n\tlayout: PropTypes.shape({\r\n\t\tarea: PropTypes.bool,\r\n\t\talignment: PropTypes.oneOf([\"left\", \"right\"]),\r\n\t\ttd: PropTypes.bool,\r\n\t}),\r\n\tlabel: PropTypes.string,\r\n\toptions: PropTypes.any,\r\n\t// PropTypes.arrayOf(\r\n\t// \tPropTypes.oneOfType([\r\n\t// \t\tPropTypes.shape({\r\n\t// \t\t\tvalue: PropTypes.string,\r\n\t// \t\t\tlabel: PropTypes.string,\r\n\t// \t\t}),\r\n\t// \t\tPropTypes.string,\r\n\t// \t])),\r\n\teditable: PropTypes.bool,\r\n\tdefault: PropTypes.string,\r\n};\r\n\r\nexport default Field;","import filter from \"lodash/filter\"\r\nimport $ from \"jquery\";\r\nimport keyBy from \"lodash/keyBy\"\r\nimport map from \"lodash/map\"\r\nimport Field from \"../components/Field\"\r\n\r\nfunction apiErrorHandler(dispatch) {\r\n\treturn function handleError(error, e2) {\r\n\t\tconst responseJSON = error.responseJSON;\r\n\t\tdispatch({\r\n\t\t\ttype: \"ADD_NOTIFICATION\",\r\n\t\t\tnotification: {\r\n\t\t\t\tid: Math.random(),\r\n\t\t\t\tpriority: \"high\",\r\n\t\t\t\ttype: \"bar\",\r\n\t\t\t\tmessage: responseJSON && responseJSON.error ? responseJSON.error : \"Er is iets mis gegaan\",\r\n\t\t\t\tscope: \".\",\r\n\t\t\t}\r\n\t\t});\r\n\t\tthrow responseJSON;\r\n\t}\r\n}\r\n\r\nexport async function fetchData(endpoint, method, data, dispatch, getState, forceArray) {\r\n\tconst f = {\r\n\t\tcall: endpoint,\r\n\t\tmethod: method,\r\n\t\tdata: data,\r\n\t}\r\n\tfor (let i = 0; i < getState().hasFetched.length; i++) {\r\n\t\tconst o = getState().hasFetched[i];\r\n\t\tif (o.data === f.data && o.call === f.call && o.method === f.method) {\r\n\t\t\treturn Promise.reject(new Error(\"Duplicate api call\"));\r\n\t\t}\r\n\t};\r\n\tdispatch({\r\n\t\t...f,\r\n\t\ttype: \"HAS_FETCHED\",\r\n\t});\r\n\r\n\treturn $.ajax({\r\n\t\turl: \"/api/\" + endpoint,\r\n\t\ttype: method,\r\n\t\tdata: data,\r\n\t\tdataType: \"json\",\r\n\t}).then((list) => {\r\n\t\tif (method === \"put\" || method === \"patch\" || method === \"delete\") {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: \"ADD_NOTIFICATION\",\r\n\t\t\t\tnotification: {\r\n\t\t\t\t\tid: Math.random(),\r\n\t\t\t\t\tpriority: \"low\",\r\n\t\t\t\t\ttype: \"bar\",\r\n\t\t\t\t\tmessage: \"Opgeslagen\",\r\n\t\t\t\t\tscope: \"\",\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn (Array.isArray(list) && forceArray !== true) ? keyBy(list, \"id\") : list\r\n\t})\r\n\t\t.catch(apiErrorHandler(dispatch));\r\n}\r\n\r\n\r\nexport function getSubjects() {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"subject/list\", \"get\", null, dispatch, getState)\r\n\t\t\t.then((subjects) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_SUBJECTS\",\r\n\t\t\t\t\tsubjects,\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => { });\r\n\t}\r\n}\r\n\r\nexport function setAlias(userId) {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"function/alias\", \"post\", { userId, secureLogin: getState().secureLogin }, dispatch, getState)\r\n\t\t\t.then(() => {\r\n\t\t\t\tdocument.location.reload();\r\n\t\t\t})\r\n\t}\r\n}\r\n\r\nexport function getGroups() {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"group/list\", \"get\", null, dispatch, getState)\r\n\t\t\t.then((groups) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_GROUPS\",\r\n\t\t\t\t\tgroups,\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => {});\r\n\t}\r\n}\r\n\r\nexport function getParticipatingGroups() {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"user/groups\", \"get\", null, dispatch, getState)\r\n\t\t\t.then((groups) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_GROUPS\",\r\n\t\t\t\t\tgroups,\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => {});\r\n\t}\r\n}\r\n\r\nexport function getGroup(groupId) {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"group\", \"post\", { groupId: groupId }, dispatch, getState)\r\n\t\t\t.then((group) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_GROUPS\",\r\n\t\t\t\t\tgroups: { [groupId]: group }\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => { });\r\n\t}\r\n}\r\n\r\nfunction addMissingInfoNotifications(user, dispatch) {\r\n\tfunction not(field) {\r\n\t\tdispatch({\r\n\t\t\ttype: \"ADD_NOTIFICATION\",\r\n\t\t\tnotification: {\r\n\t\t\t\tid: Math.random(),\r\n\t\t\t\tpriority: \"high\",\r\n\t\t\t\ttype: \"badge\",\r\n\t\t\t\tmessage: \"Vul een geldige waarde voor \" + field + \" in\",\r\n\t\t\t\tscope: \"profiel\",\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tif (!Field.validate(user.year, {\r\n\t\ttype: \"integer\",\r\n\t\tmin: 1,\r\n\t\tmax: 6,\r\n\t})) { not(\"Leerjaar\") };\r\n\tif (!Field.validate(user.level, { notEmpty: true })) { not(\"Opleidingsniveau\") }\r\n\tif (!Field.validate(user.profile, { notEmpty: true })) { not(\"Profiel\") }\r\n\tif (!Field.validate(user.preferedEmail, { type: \"email\" })) { not(\"Voorkeurs email\") }\r\n\tif (!Field.validate(user.phoneNumber, { type: \"phoneNumber\" })) { not(\"Telefoonnummer\") }\r\n}\r\n\r\nexport function getSelf() {\r\n\treturn (dispatch, getState) => {\r\n\t\tconst notification = {\r\n\t\t\tid: -96,\r\n\t\t\tpriority: \"low\",\r\n\t\t\ttype: \"bar\",\r\n\t\t\tmessage: \"Bezig met laden\",\r\n\t\t\tscope: \".\",\r\n\t\t};\r\n\t\tdispatch(addNotification(notification));\r\n\t\tfetchData(\"user/self\", \"get\", null, dispatch, getState)\r\n\t\t\t.then((user) => {\r\n\t\t\t\taddMissingInfoNotifications(user, dispatch);\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"SET_SELF\",\r\n\t\t\t\t\tuser,\r\n\t\t\t\t});\r\n\t\t\t\tdispatch(removeNotification(notification));\r\n\t\t\t}).catch((error) => {\r\n\t\t\t\tdispatch(removeNotification(notification));\r\n\t\t\t\tif (error != null && error.error === \"Authentication Error\") {\r\n\t\t\t\t\tif (window.location.pathname !== \"/login\") {\r\n\t\t\t\t\t\tsetCookie(\"beforeLoginPath\", window.location.pathname + window.location.search, 24);\r\n\t\t\t\t\t\tdocument.location.href = \"/login\";\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdispatch(toggleMenu(false));\r\n\t\t\t\t\tdispatch(addNotification({\r\n\t\t\t\t\t\tid: -1,\r\n\t\t\t\t\t\tpriority: \"high\",\r\n\t\t\t\t\t\ttype: \"bar\",\r\n\t\t\t\t\t\tmessage: \"Kan geen verbinding met de server maken\",\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\nexport function setUser(user) {\r\n\treturn (dispatch, getState) => {\r\n\t\tdispatch({\r\n\t\t\ttype: \"CHANGE_USER\",\r\n\t\t\tuser,\r\n\t\t});\r\n\t\tfetchData(\"user\", \"patch\", user, dispatch, getState);\r\n\t}\r\n}\r\n\r\nexport function setPresenceUserStatus(lessonId, userStatus, groupId) {\r\n\treturn (dispatch, getState) => {\r\n\t\tdispatch({\r\n\t\t\ttype: \"CHANGE_PRESENCE_USER_STATUS\",\r\n\t\t\tlessonId,\r\n\t\t\tuserStatus,\r\n\t\t\tgroupId,\r\n\t\t});\r\n\t\tfetchData(\"group/userStatus\", \"patch\", { lessonId: lessonId, userStatus: userStatus }, dispatch, getState);\r\n\t}\r\n}\r\n\r\nexport function setGroup(group) {\r\n\treturn (dispatch, getState) => {\r\n\t\tfunction getCourse(group) {\r\n\t\t\treturn {\r\n\t\t\t\tcourseId: group.courseId,\r\n\t\t\t\tsubjectId: group.subjectId,\r\n\t\t\t\tname: group.courseName,\r\n\t\t\t\tdescription: group.courseDescription,\r\n\t\t\t\tstudyTime: group.studyTime,\r\n\t\t\t\tremarks: group.remarks,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction getCourseGroup(group) {\r\n\t\t\treturn {\r\n\t\t\t\tcourseId: group.courseId,\r\n\t\t\t\tgroupId: group.id,\r\n\t\t\t\tday: group.day,\r\n\t\t\t\tschoolYear: group.schoolYear,\r\n\t\t\t\tenrollableFor: group.enrollableFor,\r\n\t\t\t\tperiod: group.period,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst oldCourse = getCourse(getState().groups[group.id]);\r\n\t\tconst newCourse = getCourse(group);\r\n\r\n\t\tconst oldCourseGroup = getCourseGroup(getState().groups[group.id]);\r\n\t\tconst newCourseGroup = getCourseGroup(group);\r\n\r\n\t\tconst oldLessons = getState().groups[group.id].lessons;\r\n\t\tconst newLessons = group.lessons;\r\n\r\n\t\tconst oldPresence = getState().groups[group.id].presence;\r\n\t\tconst newPresence = group.presence;\r\n\r\n\t\tconst oldEvaluations = getState().groups[group.id].evaluations;\r\n\t\tconst newEvaluations = group.evaluations;\r\n\r\n\t\tif (JSON.stringify(oldCourse) !== JSON.stringify(newCourse)) {\r\n\t\t\tfetchData(\"course/\", \"patch\", newCourse, dispatch, getState);\r\n\t\t}\r\n\t\tif (JSON.stringify(oldCourseGroup) !== JSON.stringify(newCourseGroup)) {\r\n\t\t\tfetchData(\"group/\", \"patch\", newCourseGroup, dispatch, getState);\r\n\t\t}\r\n\r\n\t\tif (JSON.stringify(oldPresence) !== JSON.stringify(newPresence)) {\r\n\t\t\tconst changedPresenceObjs = filter(newPresence, (presence) => {\r\n\t\t\t\treturn JSON.stringify(presence) !== JSON.stringify(oldPresence[presence.id]);\r\n\t\t\t});\r\n\t\t\tfetchData(\"group/presence\", \"patch\",\r\n\t\t\t\t{\r\n\t\t\t\t\tpresence: JSON.stringify(map(changedPresenceObjs, (changedPresenceObjs) => { return changedPresenceObjs })),\r\n\t\t\t\t\tgroupId: group.id\r\n\t\t\t\t}, dispatch, getState);\r\n\t\t}\r\n\r\n\t\tif (newLessons != null && JSON.stringify(oldLessons) !== JSON.stringify(newLessons)) {\r\n\t\t\tfetchData(\"group/lessons\", \"patch\", { lessons: JSON.stringify(map(newLessons, (lesson) => { return lesson })), }, dispatch, getState);\r\n\t\t}\r\n\r\n\t\tif (JSON.stringify(oldEvaluations) !== JSON.stringify(newEvaluations)) {\r\n\t\t\tlet changedEvaluations = [];\r\n\t\t\tfor (let i = 0; i < newEvaluations.length; i++) {\r\n\t\t\t\tconst evaluation = newEvaluations[i];\r\n\t\t\t\tif (JSON.stringify(oldEvaluations[i]) !== JSON.stringify(evaluation)) {\r\n\t\t\t\t\tchangedEvaluations.push(evaluation);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfetchData(\"group/evaluations\", \"patch\", {\r\n\t\t\t\tevaluations: JSON.stringify(changedEvaluations),\r\n\t\t\t\tsecureLogin: getState().secureLogin\r\n\t\t\t}, dispatch, getState);\r\n\t\t}\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: \"CHANGE_GROUP\",\r\n\t\t\tgroup: group,\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport function getEnrollableGroups() {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"user/enrollableGroups\", \"get\", null, dispatch, getState, true)\r\n\t\t\t.then((enrollableGroups) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_ENROLLABLE_GROUPS\",\r\n\t\t\t\t\tenrollableGroups,\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => {});\r\n\t}\r\n}\r\n\r\nexport function getEnrolLments() {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"user/enrollments\", \"get\", null, dispatch, getState)\r\n\t\t\t.then((enrollments) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_GROUPS\",\r\n\t\t\t\t\tgroups: enrollments,\r\n\t\t\t\t});\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_ENROLLMENTS\",\r\n\t\t\t\t\tuserId: getState().userId,\r\n\t\t\t\t\tenrollmentIds: Object.keys(enrollments),\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => {});\r\n\t}\r\n}\r\n\r\nexport function getGroupEnrollments(groupId) {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"group/enrollments\", \"post\", { groupId: groupId }, dispatch, getState)\r\n\t\t\t.then((enrollments) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_GROUP\",\r\n\t\t\t\t\tgroup: {\r\n\t\t\t\t\t\tid: groupId,\r\n\t\t\t\t\t\tenrollmentIds: Object.keys(enrollments).map(id => parseInt(id, 10)),\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_USERS\",\r\n\t\t\t\t\tusers: enrollments,\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => {});\r\n\t}\r\n}\r\n\r\nexport function getGroupLessons(groupId) {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"group/lessons\", \"post\", { groupId: groupId }, dispatch, getState)\r\n\t\t\t.then((lessons) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_GROUP\",\r\n\t\t\t\t\tgroup: {\r\n\t\t\t\t\t\tid: groupId,\r\n\t\t\t\t\t\tlessons,\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\nexport function getGroupPresence(groupId) {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"group/presence\", \"post\", { groupId: groupId }, dispatch, getState)\r\n\t\t\t.then((presence) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_GROUP\",\r\n\t\t\t\t\tgroup: {\r\n\t\t\t\t\t\tid: groupId,\r\n\t\t\t\t\t\tpresence,\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\nexport function getGroupParticipants(groupId) {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"group/participants\", \"post\", { groupId: groupId }, dispatch, getState)\r\n\t\t\t.then((participants) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_GROUP\",\r\n\t\t\t\t\tgroup: {\r\n\t\t\t\t\t\tid: groupId,\r\n\t\t\t\t\t\tparticipantIds: Object.keys(participants).map(id => parseInt(id, 10)),\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_USERS\",\r\n\t\t\t\t\tusers: participants,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\nexport function getAllUsers() {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"user/list\", \"get\", null, dispatch, getState)\r\n\t\t\t.then((users) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"CHANGE_USERS\",\r\n\t\t\t\t\tusers,\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => {});\r\n\t}\r\n}\r\n\r\nexport function addNotification(notification) {\r\n\treturn {\r\n\t\ttype: \"ADD_NOTIFICATION\",\r\n\t\tnotification,\r\n\t}\r\n}\r\n\r\nexport function removeNotification(notification) {\r\n\treturn {\r\n\t\ttype: \"REMOVE_NOTIFICATION\",\r\n\t\tnotification,\r\n\t}\r\n}\r\n\r\nexport function toggleMenu(menuState) {\r\n\treturn {\r\n\t\ttype: \"TOGGLE_MENU\",\r\n\t\tmenuState,\r\n\t}\r\n}\r\n\r\nexport function setSecureLogin(secureLogin) {\r\n\treturn {\r\n\t\ttype: \"SET_SECURE_LOGIN\",\r\n\t\tsecureLogin,\r\n\t}\r\n}\r\n\r\nexport function toggleEnrollment(group) {\r\n\treturn (dispatch, getState) => {\r\n\t\tconst index = getState().users[getState().userId].enrollmentIds.indexOf(group.id);\r\n\t\tif (index === -1) {\r\n\t\t\tfetchData(\"user/enrollments\", \"put\", { groupId: group.id }, dispatch, getState)\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: \"CHANGE_ENROLLMENTS\",\r\n\t\t\t\t\t\taction: \"ADD\",\r\n\t\t\t\t\t\tuserId: getState().userId,\r\n\t\t\t\t\t\tgroupId: group.id,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tfetchData(\"user/enrollments\", \"delete\", { groupId: group.id }, dispatch, getState)\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: \"CHANGE_ENROLLMENTS\",\r\n\t\t\t\t\t\taction: \"REMOVE\",\r\n\t\t\t\t\t\tuserId: getState().userId,\r\n\t\t\t\t\t\tgroupId: group.id,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nexport function getGroupEvaluations(groupId) {\r\n\treturn (dispatch, getState) => {\r\n\t\tfetchData(\"group/evaluations\", \"post\", { groupId }, dispatch, getState, true).then((evaluations) => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: \"CHANGE_GROUP\",\r\n\t\t\t\tgroup: {\r\n\t\t\t\t\tid: groupId,\r\n\t\t\t\t\tevaluations: evaluations,\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport function addSubject(name, description) {\r\n\treturn (dispatch, getState) => {\r\n\t\treturn fetchData(\"subject\", \"put\", { name, description, secureLogin: getState().secureLogin }, dispatch, getState)\r\n\t\t\t.then(() => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"ADD_NOTIFICATION\",\r\n\t\t\t\t\tnotification: {\r\n\t\t\t\t\t\tid: Math.random(),\r\n\t\t\t\t\t\tpriority: \"low\",\r\n\t\t\t\t\t\ttype: \"bar\",\r\n\t\t\t\t\t\tmessage: \"Vak aangemaakt, refresh om te zien\",\r\n\t\t\t\t\t\tscope: \"beheer\",\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\nexport function addCourse(name, subjectId) {\r\n\treturn (dispatch, getState) => {\r\n\t\treturn fetchData(\"course\", \"put\", { name, subjectId, secureLogin: getState().secureLogin }, dispatch, getState)\r\n\t\t\t.then(() => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"ADD_NOTIFICATION\",\r\n\t\t\t\t\tnotification: {\r\n\t\t\t\t\t\tid: Math.random(),\r\n\t\t\t\t\t\tpriority: \"low\",\r\n\t\t\t\t\t\ttype: \"bar\",\r\n\t\t\t\t\t\tmessage: \"Module aangemaakt, refresh om te zien\",\r\n\t\t\t\t\t\tscope: \"beheer\",\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\nexport function addGroup(courseId, userId) {\r\n\treturn (dispatch, getState) => {\r\n\t\treturn fetchData(\"group\", \"put\", { courseId, mainTeacherId: userId, secureLogin: getState().secureLogin }, dispatch, getState)\r\n\t\t\t.then(() => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"ADD_NOTIFICATION\",\r\n\t\t\t\t\tnotification: {\r\n\t\t\t\t\t\tid: Math.random(),\r\n\t\t\t\t\t\tpriority: \"low\",\r\n\t\t\t\t\t\ttype: \"bar\",\r\n\t\t\t\t\t\tmessage: \"Groep aangemaakt, refresh om te zien\",\r\n\t\t\t\t\t\tscope: \"beheer\",\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\n\r\nexport function setCookie(cname, cvalue, exhours) {\r\n\tvar d = new Date();\r\n\td.setTime(d.getTime() + (exhours * 60 * 60 * 1000));\r\n\tvar expires = \"expires=\" + d.toUTCString();\r\n\tdocument.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\r\n}\r\n\r\nexport function getCookie(cname) {\r\n\tvar name = cname + \"=\";\r\n\tvar decodedCookie = decodeURIComponent(document.cookie);\r\n\tvar ca = decodedCookie.split(';');\r\n\tfor (var i = 0; i < ca.length; i++) {\r\n\t\tvar c = ca[i];\r\n\t\twhile (c.charAt(0) === ' ')\r\n\t\t\tc = c.substring(1);\r\n\t\tif (c.indexOf(name) === 0)\r\n\t\t\treturn c.substring(name.length, c.length);\r\n\t}\r\n\treturn \"\";\r\n}","import React, { Component } from \"react\";\r\nimport Button from '@material-ui/core/Button';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport theme from '../lib/MuiTheme';\r\nimport { toggleMenu } from '../store/actions';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nclass Login extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tcomponentWillMount() {\r\n\t\tthis.generateEmail.bind(this)();\r\n\t\tthis.interval = setInterval(this.generateEmail.bind(this), 1500);\r\n\t}\r\n\r\n\tgenerateEmail() {\r\n\t\tlet school = this.state.school;\r\n\t\tlet schoolShort = this.state.schoolShort;\r\n\t\tlet studentNumber = this.state.studentNumber;\r\n\t\tswitch (Math.floor(Math.random() * 14)) {\r\n\t\t\tcase 0:\r\n\t\t\t\tschool = \"beekdallyceum\";\r\n\t\t\t\tschoolShort = \"BD\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tschool = \"candea\";\r\n\t\t\t\tschoolShort = \"CC\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tschool = \"quadraam\";\r\n\t\t\t\tschoolShort = \"CB\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tschool = \"lyceumelst\";\r\n\t\t\t\tschoolShort = \"LE\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 4:\r\n\t\t\t\tschool = \"liemerscollege\";\r\n\t\t\t\tschoolShort = \"LC\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 5:\r\n\t\t\t\tschool = \"lorentzlyceum\";\r\n\t\t\t\tschoolShort = \"LL\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 6:\r\n\t\t\t\tschool = \"maartenvanrossem\";\r\n\t\t\t\tschoolShort = \"MvR\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 7:\r\n\t\t\t\tschool = \"montessoriarnhem\";\r\n\t\t\t\tschoolShort = \"MC\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 8:\r\n\t\t\t\tschool = \"olympuscollege\";\r\n\t\t\t\tschoolShort = \"OC\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 9:\r\n\t\t\t\tschool = \"produsarnhem\";\r\n\t\t\t\tschoolShort = \"PD\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 10:\r\n\t\t\t\tschool = \"gymnasiumarnhem\";\r\n\t\t\t\tschoolShort = \"SGA\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 11:\r\n\t\t\t\tschool = \"symbion\";\r\n\t\t\t\tschoolShort = \"SY\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 12:\r\n\t\t\t\tschool = \"vmbo-venster\";\r\n\t\t\t\tschoolShort = \"VE\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 13:\r\n\t\t\tdefault:\r\n\t\t\t\tschool = \"hetwesteraam\";\r\n\t\t\t\tschoolShort = \"HW\";\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tstudentNumber = Math.floor(Math.random() * 999999) + \"\";\r\n\t\tfor (let i = studentNumber.length; i < 6; i++) {\r\n\t\t\tstudentNumber = \"0\" + studentNumber;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tschool,\r\n\t\t\tschoolShort,\r\n\t\t\tstudentNumber,\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearInterval(this.interval);\r\n\t}\r\n\r\n\tlogin() {\r\n\t\tif (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\r\n\t\t\tdocument.location.href = \"http://localhost:26194/auth/login\"\r\n\t\t} else {\r\n\t\t\tdocument.location.href = \"/auth/login\"\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateColoredEmail(schoolShort, studentNumber, school) {\r\n\t\treturn (\r\n\t\t\t<Typography variant=\"subheading\" style={{ fontFamily: \"'Courier New', Courier, monospace\", overflow:\"hidden\"}}>\r\n\t\t\t\t<span style={{ color: theme.palette.secondary.light, fontWeight: \"bold\" }}>\r\n\t\t\t\t\t{schoolShort}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span style={{ color: theme.palette.secondary.dark, fontWeight: \"bolder\" }}>\r\n\t\t\t\t\t{studentNumber}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span style={{ fontWeight: \"bold\" }}>\r\n\t\t\t\t\t@ll.\r\n\t\t\t\t</span>\r\n\t\t\t\t<span style={{ color: theme.palette.secondary.light, fontWeight: \"bold\" }}>\r\n\t\t\t\t\t{school}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span style={{ fontWeight: \"bold\" }}>\r\n\t\t\t\t\t.nl\r\n\t\t\t\t</span>\r\n\t\t\t</Typography>\r\n\t\t)\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.userId != null) {\r\n\t\t\tthis.props.history.push(\"/\");\r\n\t\t\tthis.props.toggleMenu(true);\r\n\t\t} else {\r\n\t\t\tthis.props.toggleMenu(false);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Paper elevation={8} className=\"Login\" style={{minHeight: \"330px\"}}>\r\n\t\t\t\t<div style={{ padding: \"20px\" }}>\r\n\t\t\t\t\t<Typography gutterBottom variant=\"headline\" color=\"primary\">\r\n\t\t\t\t\t\tLog in\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t<Typography variant=\"subheading\">\r\n\t\t\t\t\t\tGebruik je school-email om in te loggen:\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<center>\r\n\t\t\t\t\t\t{this.generateColoredEmail(\"schoolafkorting\", \"leerlingnummer\", \"school\")}\r\n\t\t\t\t\t\t{this.generateColoredEmail(this.state.schoolShort, this.state.studentNumber, this.state.school)}\r\n\t\t\t\t\t</center>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<Button type=\"submit\" variant=\"contained\" size=\"large\" color=\"primary\" fullWidth onClick={this.login}>\r\n\t\t\t\t\t\tLogin met je Microsoft school account\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</Paper >\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tuserId: state.userId,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tlogin: (email, password) => {\r\n\t\t\tdispatch(toggleMenu(true));\r\n\t\t},\r\n\t\ttoggleMenu: (state) => {\r\n\t\t\tdispatch(toggleMenu(state));\r\n\t\t},\r\n\t};\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Login));\r\n\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nclass Page extends Component {\r\n\r\n\trender() {\r\n\t\tlet className = \"\";\r\n\t\tif (this.props.showMenu) {\r\n\t\t\tclassName += \"menuShown\"\r\n\t\t} else {\r\n\t\t\tclassName += \"menuHidden\"\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div className={\"Page \" + className}>\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tshowMenu: state.showMenu,\r\n\t};\r\n}\r\n\r\nexport default connect(mapStateToProps)(Page);\r\n","import React, { Component } from 'react';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nclass Progress extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tisShowing: false,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.timeout = setTimeout(() => this.setState({ isShowing: true }), 200);\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearTimeout(this.timeout);\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.state.isShowing) {\r\n\t\t\treturn (\r\n\t\t\t\t<CircularProgress {...this.props}/>\r\n\t\t\t);\r\n\t\t}else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport default Progress;","import React, { Component } from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport Clear from '@material-ui/icons/Clear';\r\n\r\nclass EnrollmentPopup extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tif (nextProps.hasChosen) {\r\n\t\t\treturn { page: \"cancel\", ...prevState };\r\n\t\t}\r\n\t\tif (nextProps.hasChosenDay) {\r\n\t\t\treturn { page: \"hasChosenDay\", ...prevState };\r\n\t\t}\r\n\t\tif (nextProps.group.remarks != null && nextProps.group.remarks.length > 1) {\r\n\t\t\treturn { page: \"remarks\", ...prevState };\r\n\t\t}\r\n\t\treturn { page: \"confirm\", ...prevState };\r\n\t}\r\n\r\n\tgetDuplicatePage() {\r\n\t\treturn (\r\n\t\t\t<Dialog open keepMounted >\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<DialogContentText>\r\n\t\t\t\t\t\t<Typography color=\"error\" style={{ fontSize: \"16px\" }}>\r\n\t\t\t\t\t\t\t{\"Je hebt al een module gekozen voor \" + this.props.group.day + \"!\"}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\tSchrijf je eerst uit voor de module\r\n\t\t\t\t\t\t<Typography color=\"primary\" variant=\"title\" style={{ fontSize: \"16px\", display: \"inline-block\", margin: \"5px\" }}>\r\n\t\t\t\t\t\t\t{this.props.chosenDayGroupName}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\tom je in te kunnen schrijven\r\n\t\t\t\t\t</DialogContentText>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button color=\"primary\" variant=\"contained\">\r\n\t\t\t\t\t\tSluiten\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t);\r\n\t}\r\n\r\n\tgetCancelPage() {\r\n\t\treturn (\r\n\t\t\t<Dialog open keepMounted >\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\tUitschrijven\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<DialogContentText>\r\n\t\t\t\t\t\tWeet je zeker dat je wilt uitschrijven voor de module\r\n\t\t\t\t\t\t<Typography color=\"primary\" variant=\"title\" style={{ fontSize: \"16px\", display: \"inline\", margin: \"5px\" }}>\r\n\t\t\t\t\t\t\t{this.props.group.courseName}\r\n\t\t\t\t\t\t</Typography> ?\r\n\t\t\t\t\t</DialogContentText>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button color=\"default\">\r\n\t\t\t\t\t\tAnnuleren\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button name=\"test\" onClick={() => this.props.handlePopup(true)} color=\"primary\">\r\n\t\t\t\t\t\tUitschrijven\r\n\t\t\t\t\t\t<Clear />\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t);\r\n\t}\r\n\r\n\tgetConfirmPage() {\r\n\t\treturn (\r\n\t\t\t<Dialog open keepMounted >\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\tInschrijven\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<DialogContentText>\r\n\t\t\t\t\t\tWeet je zeker dat je wilt inschrijven voor de module\r\n\t\t\t\t\t\t<Typography color=\"primary\" variant=\"title\" style={{ fontSize: \"16px\", display: \"inline\", margin: \"5px\" }}>\r\n\t\t\t\t\t\t\t{this.props.group.courseName}\r\n\t\t\t\t\t\t</Typography> ?\r\n\t\t\t\t\t</DialogContentText>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button color=\"default\">\r\n\t\t\t\t\t\tAnnuleren\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button name=\"test\" onClick={() => this.props.handlePopup(true)} variant=\"contained\" color=\"primary\">\r\n\t\t\t\t\t\tInschrijven\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t);\r\n\t}\r\n\r\n\tgetRemarkPage() {\r\n\t\treturn (\r\n\t\t\t<Dialog open keepMounted >\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\tOpmerkingen\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t{this.props.group.remarks}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button color=\"default\">\r\n\t\t\t\t\t\tAnnuleren\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={() => {\r\n\t\t\t\t\t\tthis.props.preventPopupClose(true);\r\n\t\t\t\t\t\tthis.setState({ page: \"confirm\" })\r\n\t\t\t\t\t}} color=\"primary\">\r\n\t\t\t\t\t\tVerder\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tthis.props.preventPopupClose(false);\r\n\t\tswitch (this.state.page) {\r\n\t\t\tcase \"remarks\":\r\n\t\t\t\treturn this.getRemarkPage();\r\n\t\t\tcase \"cancel\":\r\n\t\t\t\treturn this.getCancelPage();\r\n\t\t\tcase \"hasChosenDay\":\r\n\t\t\t\treturn this.getDuplicatePage();\r\n\t\t\tcase \"confirm\":\r\n\t\t\tdefault:\r\n\t\t\t\treturn this.getConfirmPage();\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nexport default EnrollmentPopup;\r\n\r\n","import React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Clear from '@material-ui/icons/Clear';\r\nimport { connect } from 'react-redux';\r\nimport { toggleEnrollment, getEnrollableGroups, getEnrolLments } from '../../store/actions';\r\nimport Progress from '../../components/Progress';\r\nimport EnrollmentPopup from './EnrollmentPopup';\r\n\r\nclass ChooseButton extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.props.getEnrollableGroups();\r\n\t\tthis.props.getEnrolLments();\r\n\t\tthis.state = {\r\n\t\t\tdialogOpen: false,\r\n\t\t}\r\n\t}\r\n\r\n\tpreventPopupClose(preventClose) {\r\n\t\tthis.preventClose = preventClose;\r\n\t}\r\n\r\n\thandlePopup(doEnroll) {\r\n\t\tif (doEnroll) {\r\n\t\t\tthis.props.toggleEnrollment(this.props.group);\r\n\t\t}\r\n\t\tif (!this.preventClose) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tdialogOpen: !this.state.dialogOpen,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst props = this.props;\r\n\t\tlet dialog = this.state.dialogOpen ?\r\n\t\t\t<EnrollmentPopup\r\n\t\t\t\tgroup={props.group}\r\n\t\t\t\thasChosen={props.hasChosen}\r\n\t\t\t\thandlePopup={this.handlePopup.bind(this)}\r\n\t\t\t\thasChosenDay={props.hasChosenDay}\r\n\t\t\t\tchosenDayGroupName={props.chosenDayGroupName}\r\n\t\t\t\tpreventPopupClose={this.preventPopupClose.bind(this)}\r\n\t\t\t/> : null;\r\n\r\n\t\tif (props.loading) {\r\n\t\t\treturn (\r\n\t\t\t\t<Progress size={30} />\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tif (props.hasChosen) {\r\n\t\t\treturn (\r\n\t\t\t\t<Button color=\"primary\" onClick={() => this.handlePopup(false)} style={props.style}>\r\n\t\t\t\t\t{\"Ingeschreven\"}\r\n\t\t\t\t\t<Clear />\r\n\t\t\t\t\t{dialog}\r\n\t\t\t\t</Button>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (this.props.canChoose) {\r\n\t\t\treturn (\r\n\t\t\t\t<Button color=\"primary\" variant=\"contained\" onClick={() => this.handlePopup(false)} style={this.props.style}>\r\n\t\t\t\t\t{\"Inschrijven\" + (this.props.hasChosenDay ? \"*\" : \"\")}\r\n\t\t\t\t\t{dialog}\r\n\t\t\t\t</Button>\r\n\t\t\t);\r\n\t\t} else if (props.group.period < this.props.currentPeriod){\r\n\t\t\treturn (\r\n\t\t\t\t<Button disabled color=\"primary\" style={props.style}>\r\n\t\t\t\t\tInschrijfperiode verlopen\r\n\t\t\t\t\t{dialog}\r\n\t\t\t\t</Button>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<Button disabled color=\"primary\" style={props.style}>\r\n\t\t\t\t\tComing Soon\r\n\t\t\t\t\t{dialog}\r\n\t\t\t\t</Button>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n\tif (state.users[state.userId].enrollmentIds == null || state.enrollableGroups == null) {\r\n\t\treturn {\r\n\t\t\tloading: true,\r\n\t\t}\r\n\t}\r\n\r\n\tlet chosenDayGroupName = -1;\r\n\tstate.users[state.userId].enrollmentIds.forEach(groupId => {\r\n\t\tconst group = state.groups[groupId];\r\n\t\tif (group.day === ownProps.group.day && group.period === ownProps.group.period) {\r\n\t\t\tchosenDayGroupName = group.courseName;\r\n\t\t}\r\n\t});\r\n\r\n\treturn {\r\n\t\tcanChoose: state.enrollableGroups.map(e => e.id).indexOf(ownProps.group.id) !== -1,\r\n\t\thasChosen: state.users[state.userId].enrollmentIds.indexOf(ownProps.group.id) !== -1,\r\n\t\thasChosenDay: chosenDayGroupName !== -1,\r\n\t\tchosenDayGroupName,\r\n\t\tcurrentPeriod: state.currentPeriod,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\ttoggleEnrollment: (group) => dispatch(toggleEnrollment(group)),\r\n\t\tgetEnrollableGroups: () => dispatch(getEnrollableGroups()),\r\n\t\tgetEnrolLments: () => dispatch(getEnrolLments()),\r\n\t};\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ChooseButton);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Button from '@material-ui/core/Button';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { setCookie } from \"../store/actions\"\r\nimport Field from \"../components/Field\"\r\n\r\nclass EnsureSecureLogin extends Component {\r\n\r\n\trender() {\r\n\t\tif (!(this.props.active === false) && this.props.secureLogin == null) {\r\n\t\t\treturn <Paper style={{ padding: \"20px\", marginTop: \"25px\" }}>\r\n\t\t\t\t<Field value=\"Log opnieuw in om toegang te krijgen\" layout={{ area: true }} />\r\n\t\t\t\t<Button color=\"primary\" variant=\"contained\" onClick={() => {\r\n\t\t\t\t\tsetCookie(\"beforeLoginPath\", window.location.pathname + window.location.search, 24);\r\n\t\t\t\t\tif (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\r\n\t\t\t\t\t\tdocument.location.href = \"http://localhost:26194/auth/login?secure=true\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdocument.location.href = \"/auth/login?secure=true\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}}>\r\n\t\t\t\t\tInloggen\r\n\t\t\t\t</Button>\r\n\t\t\t</Paper>\r\n\t\t} else {\r\n\t\t\treturn this.props.children;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tsecureLogin: state.secureLogin,\r\n\t};\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(EnsureSecureLogin);\r\n\r\n\r\n\r\n","import React, { Component } from 'react';\r\n\r\nimport Field from '../../components/Field';\r\nimport EnsureSecureLogin from '../../components/EnsureSecureLogin';\r\nimport { Tooltip, TableSortLabel, Typography, Paper } from '@material-ui/core';\r\n\r\nconst EVALUATION_FORMATS = [{\r\n\tlabel: \"vink\",\r\n\tvalue: \"check\",\r\n\toptions: [{\r\n\t\tlabel: \"Gehaald\",\r\n\t\tvalue: \"passed\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Niet gehaald\",\r\n\t\tvalue: \"failed\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Niet deelgenomen\",\r\n\t\tvalue: \"ND\",\r\n\t}],\r\n},\r\n{\r\n\tlabel: \"trapsgewijs\",\r\n\tvalue: \"stepwise\",\r\n\toptions: [{\r\n\t\tlabel: \"Onvoldoende\",\r\n\t\tvalue: \"O\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Voldoende\",\r\n\t\tvalue: \"V\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Goed\",\r\n\t\tvalue: \"G\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Niet deelgenomen\",\r\n\t\tvalue: \"ND\",\r\n\t}],\r\n}, {\r\n\tlabel: \"cijfer\",\r\n\tvalue: \"decimal\",\r\n\toptions: \"decimal\",\r\n}];\r\n\r\nfunction getEvaluationColor(ev) {\r\n\tif (ev.assesment === \"ND\" || ev.assesment == null) {\r\n\t\treturn \"#673ab7\";\r\n\t}\r\n\tswitch (ev.type) {\r\n\t\tcase \"stepwise\":\r\n\t\t\treturn \"#3f51b5\";\r\n\t\tcase \"check\":\r\n\t\t\treturn \"#009688\";\r\n\t\tcase \"decimal\":\r\n\t\t\treturn \"#00bcd4\"\r\n\t\tdefault:\r\n\t\t\treturn \"#673ab7\";\r\n\t}\r\n}\r\n\r\nclass Evaluation extends Component {\r\n\r\n\trender() {\r\n\t\tconst e = this.props.evaluation;\r\n\t\tlet style = {\r\n\t\t\tunderline: false,\r\n\t\t\tflex: 1,\r\n\t\t};\r\n\t\tlet layout = { td: true };\r\n\t\tif (this.props.student) {\r\n\t\t\tstyle.type = \"headline\";\r\n\t\t\tstyle.color = \"primaryContrast\"\r\n\t\t\tlayout.td = false;\r\n\t\t\tlayout.alignment = \"right\";\r\n\t\t}\r\n\t\tif (e.type === \"decimal\") {\r\n\t\t\treturn <Field\r\n\t\t\t\tstyle={style}\r\n\t\t\t\tvalidate={{ min: 1, max: 10, type: \"decimalGrade\", notEmpty: true }}\r\n\t\t\t\tlayout={layout}\r\n\t\t\t\tlabel=\"Beoordeling\"\r\n\t\t\t\tname={e.userId}\r\n\t\t\t\tvalue={e.assesment ? e.assesment : \"\"}\r\n\t\t\t\teditable={this.props.editable}\r\n\t\t\t\tonChange={this.props.handleChange}\r\n\t\t\t/>\r\n\t\t} else {\r\n\t\t\treturn <Field\r\n\t\t\t\tstyle={style}\r\n\t\t\t\tname={e.userId}\r\n\t\t\t\tlabel=\"Beoordeling\"\r\n\t\t\t\tlayout={layout}\r\n\t\t\t\tvalue={e.assesment ? e.assesment : \"\"}\r\n\t\t\t\toptions={EVALUATION_FORMATS.filter(f => f.value === e.type)[0].options}\r\n\t\t\t\teditable={this.props.editable}\r\n\t\t\t\tonChange={this.props.handleChange}\r\n\t\t\t/>\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n\r\nclass EvaluationTab extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tsortValue: \"\",\r\n\t\t\tsortDirection: \"\",\r\n\t\t}\r\n\t}\r\n\r\n\tonSortChange = (value) => {\r\n\t\tthis.setState({\r\n\t\t\tsortValue: value,\r\n\t\t\tsortDirection: this.state.sortDirection === \"desc\" && this.state.sortValue === value ? \"asc\" : \"desc\"\r\n\t\t});\r\n\t}\r\n\r\n\thandleEvaluationChange(event) {\r\n\t\tlet newEvaluations = this.props.evaluations.map((e) => {\r\n\t\t\tif (e.userId === event.name) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...e,\r\n\t\t\t\t\tassesment: event.target.value,\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn { ...e }\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.props.handleChange(newEvaluations);\r\n\t}\r\n\r\n\r\n\thandleExplanationChange(event) {\r\n\t\tlet newEvaluations = this.props.evaluations.map((e) => {\r\n\t\t\tif (e.userId === event.name) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...e,\r\n\t\t\t\t\texplanation: event.target.value,\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn { ...e }\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.props.handleChange(newEvaluations);\r\n\r\n\t}\r\n\r\n\thandleEvaluationTypeChange(event) {\r\n\t\tlet newEvaluations = [];\r\n\t\tfor (let i = 0; i < this.props.evaluations.length; i++) {\r\n\t\t\tnewEvaluations.push({\r\n\t\t\t\t...this.props.evaluations[i],\r\n\t\t\t\ttype: event.target.value,\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.props.handleChange(newEvaluations);\r\n\t}\r\n\r\n\tgetExplanationField(e, editable) {\r\n\t\treturn <Field\r\n\t\t\tstyle={{ underline: false, flex: 5 }}\r\n\t\t\tlayout={{ area: true, td: true }}\r\n\t\t\tlabel={\"Uitleg\"}\r\n\t\t\tname={e.userId}\r\n\t\t\tvalue={e.explanation}\r\n\t\t\teditable={editable}\r\n\t\t\tonChange={this.handleExplanationChange.bind(this)}\r\n\t\t/>\r\n\t}\r\n\r\n\tsortEvaluations = () => {\r\n\t\tlet evaluations = this.props.evaluations;\r\n\t\tconst sortValue = this.state.sortValue;\r\n\t\tlet sortDirection = this.state.sortDirection === \"asc\" ? \"asc\" : \"desc\";\r\n\r\n\t\tif (sortValue === \"name\") {\r\n\t\t\tevaluations.sort((a, b) => {\r\n\t\t\t\tlet cmp = b.displayName - a.displayName;\r\n\t\t\t\treturn sortDirection === \"asc\" ? cmp : -cmp;\r\n\t\t\t})\r\n\t\t} else if (sortValue === \"evaluations\") {\r\n\t\t\tevaluations.sort((a, b) => {\r\n\t\t\t\ta = a[\"assesment\"];\r\n\t\t\t\tb = b[\"assesment\"];\r\n\t\t\t\tlet cmp = (b === null) - (a == null) || +(a > b) || -(a < b);\r\n\t\t\t\treturn sortDirection === \"asc\" ? cmp : -cmp;\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn evaluations;\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet sortValue = this.props.sortValue;\r\n\t\tlet sortDirection = this.props.sortDirection === \"asc\" ? \"asc\" : \"desc\";\r\n\t\tconst style = {\r\n\t\t\tmarginTop: \"10px\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tpaddingRight: \"15px\",\r\n\t\t\tpaddingLeft: \"15px\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t};\r\n\t\tconst evaluations = this.props.evaluations;\r\n\t\tif (evaluations.length === 0) {\r\n\t\t\treturn \"Er zijn nog geen beoordelingen beschikbaar\";\r\n\t\t}\r\n\t\tconst evComps = this.sortEvaluations()\r\n\t\t\t.map(evaluation => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Paper style={style} key={evaluation.userId} component=\"tr\">\r\n\t\t\t\t\t\t<Field style={{ type: \"title\", color: \"primary\", flex: 2 }} value={evaluation.displayName} layout={{}} />\r\n\t\t\t\t\t\t<Evaluation editable={this.props.editable} evaluation={evaluation} handleChange={this.handleEvaluationChange.bind(this)} />\r\n\t\t\t\t\t\t{this.getExplanationField(evaluation, this.props.editable)}\r\n\t\t\t\t\t</Paper >\r\n\t\t\t\t);\r\n\t\t\t});\r\n\r\n\t\treturn (\r\n\t\t\t<EnsureSecureLogin active={this.props.editable}>\r\n\t\t\t\t<table style={{ width: \"100%\" }}>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t<Paper style={{ ...style, backgroundColor: \"#e0e0e0\" }} component=\"tr\">\r\n\t\t\t\t\t\t\t<td style={{ paddingLeft: \"15px\" }}>\r\n\t\t\t\t\t\t\t\t<Typography type=\"title\" color=\"primary\" style={{ padding: \"5px 0\" }} >\r\n\t\t\t\t\t\t\t\t\t<Tooltip title=\"Sorteer\" enterDelay={300} placement=\"bottom-start\">\r\n\t\t\t\t\t\t\t\t\t\t<TableSortLabel\r\n\t\t\t\t\t\t\t\t\t\t\tactive={sortValue === \"evaluations\"}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.onSortChange(\"evaluations\")}\r\n\t\t\t\t\t\t\t\t\t\t\tdirection={sortDirection}\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ color: \"inherit\", fontSize: \"1.5rem\", }}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tBeoordelingen\r\n\t\t\t\t\t\t\t\t\t</TableSortLabel>\r\n\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Tooltip title=\"Sorteer\" enterDelay={300} placement=\"bottom-start\">\r\n\t\t\t\t\t\t\t\t\t\t<TableSortLabel\r\n\t\t\t\t\t\t\t\t\t\t\tactive={sortValue === \"name\"}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.onSortChange(\"name\")}\r\n\t\t\t\t\t\t\t\t\t\t\tdirection={sortDirection}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tNaam\r\n\t\t\t\t\t\t\t\t\t\t</TableSortLabel>\r\n\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td style={{ flex: \"5\" }} />\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\tlabel=\"Beoordelingsformaat\"\r\n\t\t\t\t\t\t\t\t\tstyle={{ type: \"caption\", underline: false, margin: \"normal\", labelVisible: true }}\r\n\t\t\t\t\t\t\t\t\tlayout={{ alignment: \"right\" }}\r\n\t\t\t\t\t\t\t\t\tvalue={evaluations[0].type}\r\n\t\t\t\t\t\t\t\t\toptions={EVALUATION_FORMATS}\r\n\t\t\t\t\t\t\t\t\teditable={this.props.editable}\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleEvaluationTypeChange.bind(this)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t</Paper >\r\n\t\t\t\t\t\t{evComps}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table >\r\n\t\t\t</EnsureSecureLogin>\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nexport { Evaluation, EvaluationTab, getEvaluationColor };","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ChooseButton from './ChooseButton';\r\nimport Field from '../../components/Field';\r\nimport { Evaluation, getEvaluationColor } from './Evaluation';\r\n\r\nconst CARD_STYLE = {\r\n\twidth: \"400px\",\r\n\theight: \"338px\",\r\n\tpadding: \"15px\",\r\n\tverticalAlign: \"top\",\r\n\tmargin: \"12px\",\r\n\tmarginRight: \"0px\",\r\n\tmarginBottom: \"0px\",\r\n\tdisplay: \"inline-block\",\r\n\tposition: \"relative\",\r\n}\r\n\r\nclass GroupCard extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\thover: false,\r\n\t\t\tstyle: CARD_STYLE,\r\n\t\t}\r\n\t}\r\n\r\n\texpand() {\r\n\t\tthis.props.history.push(\"/groep/\" + this.props.group.id)\r\n\t}\r\n\r\n\tgetBottomSection() {\r\n\t\tconst style = {\r\n\t\t\tposition: \"absolute\",\r\n\t\t\tbottom: \"0px\",\r\n\t\t\twidth: \"400px\",\r\n\t\t\theight: \"55px\",\r\n\t\t\tmarginLeft: \"-15px\",\r\n\t\t\tborderBottomLeftRadius: \"4px\",\r\n\t\t\tborderBottomRightRadius: \"4px\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tpadding: \"5px\",\r\n\t\t\tpaddingLeft: \"20px\",\r\n\t\t\tpaddingRight: \"20px\",\r\n\t\t\tjustifyContent: \"space-between\"\r\n\t\t};\r\n\t\tif (this.props.group.evaluation &&\r\n\t\t\tthis.props.group.evaluation.assesment !== \"\" &&\r\n\t\t\tthis.props.group.evaluation.assesment !== null) {\r\n\t\t\tstyle.backgroundColor = getEvaluationColor(this.props.group.evaluation);\r\n\t\t\treturn (\r\n\t\t\t\t<div style={style} >\r\n\t\t\t\t\t<Field value=\"Beoordeling\" style={{ type: \"headline\", color: \"primaryContrast\", flex: 0.8 }} />\r\n\t\t\t\t\t<Evaluation evaluation={this.props.group.evaluation} student />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<div style={style} >\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\tonClick={this.expand.bind(this)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tBekijken\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.props.role === \"student\" &&\r\n\t\t\t\t\t\t<ChooseButton\r\n\t\t\t\t\t\t\tgroup={this.props.group}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div >\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst group = this.props.group;\r\n\t\treturn (\r\n\t\t\t<Paper\r\n\t\t\t\televation={this.state.hover ? 4 : 2}\r\n\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\r\n\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\r\n\t\t\t\tstyle={this.state.style}\r\n\t\t\t>\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tvariant=\"caption\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tstyle={{ overflow: \"hidden\", maxHeight: \"65px\", cursor: \"pointer\" }}\r\n\t\t\t\t\tonClick={() => { this.props.history.push(\"/groep/\" + group.id) }}\r\n\t\t\t\t>\r\n\t\t\t\t\t{group.subjectName}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tvariant=\"headline\"\r\n\t\t\t\t\tstyle={{ overflow: \"hidden\", height: \"64px\", cursor: \"pointer\", textTransform: \"uppercase\", fontSize: \"24px\" }}\r\n\t\t\t\t\tonClick={() => { this.props.history.push(\"/groep/\" + group.id) }}\r\n\t\t\t\t>\r\n\t\t\t\t\t{group.courseName}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Typography style={{ display: \"inline-block\", fontWeight: \"bold\", float: \"right\" }}>\r\n\t\t\t\t\t\t{\"Blok \" + group.period + \" - \" + group.day}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t<Typography style={{ display: \"inline-block\", fontWeight: \"bold\" }}>\r\n\t\t\t\t\t\t{group.enrollableFor || \"Iedereen\"}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</div>\r\n\t\t\t\t{\r\n\t\t\t\t\tgroup.evaluation ?\r\n\t\t\t\t\t\t<Typography style={{ maxHeight: \"164px\", overflow: \"hidden\" }} gutterBottom>\r\n\t\t\t\t\t\t\t<b>Uitleg beoordeling: </b>\r\n\t\t\t\t\t\t\t{group.evaluation.explanation}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<Typography style={{ maxHeight: \"164px\", overflow: \"hidden\" }} gutterBottom>\r\n\t\t\t\t\t\t\t{group.courseDescription}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.getBottomSection()\r\n\t\t\t\t}\r\n\t\t\t</Paper >\r\n\t\t);\r\n\t}\r\n\r\n\r\n}\r\n\r\n\r\nexport default withRouter(GroupCard);\r\n\r\n","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router';\r\n\r\nimport Paper from '@material-ui/core/Paper';\r\nimport {Typography} from '@material-ui/core';\r\n\r\nclass GroupCard extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\thover: false,\r\n\t\t\tstyle: {\r\n\t\t\t\twidth: \"100%\",\r\n\t\t\t\theight: \"auto\",\r\n\t\t\t\tmargin: \"0px\",\r\n\t\t\t\tpadding: \"10px\",\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n\r\n\tformatPhoneNumber(number) {\r\n\t\tif (number == null) {\r\n\t\t\tnumber = \"\";\r\n\t\t}\r\n\t\tlet numberWithoutCharacters = number.replace(/\\D/g, '');\r\n\t\tif (numberWithoutCharacters.length === 10) { // Either 06... or regional i.e. 024 ...\r\n\t\t\tif (numberWithoutCharacters[1] === \"6\") { // 06...\r\n\t\t\t\treturn (numberWithoutCharacters.substr(0, 2) + \" \" + numberWithoutCharacters.substr(2, 8));\r\n\t\t\t} else { // 024 ...\r\n\t\t\t\treturn (numberWithoutCharacters.substr(0, 3) + \" \" + numberWithoutCharacters.substr(3, 7));\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst mobileTest = /(0031|31)0?(6)?([0-9]+)$/gm;\r\n\t\tconst match = mobileTest.exec(numberWithoutCharacters);\r\n\t\tif (match) {\r\n\t\t\tif (match[2]) { // +31 06 \r\n\t\t\t\treturn \"+31 06 \" + match[3];\r\n\t\t\t} else { // +31 ...\r\n\t\t\t\treturn \"+31 \" + match[3];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn number; // return input if unrecognizable \r\n\t\t}\r\n\t}\r\n\r\n\texpand() {\r\n\t\tthis.props.history.push(\"/user/\" + this.props.user.id)\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet user = { ...this.props.user };\r\n\t\tlet style = { ...this.state.style };\r\n\t\treturn (\r\n\t\t\t<tr>\r\n\t\t\t\t<Paper\r\n\t\t\t\t\televation={this.state.hover ? 2 : 1}\r\n\t\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\r\n\t\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\r\n\t\t\t\t\tcomponent=\"td\"\r\n\t\t\t\t\tstyle={style}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\tjustifyContent: \"space-between\"\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<Typography variant=\"title\" color={user.role === \"teacher\" ? \"secondary\" : \"primary\"} style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t{user.firstName + \" \" + user.lastName}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Typography variant=\"subheading\" style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t{user.school}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t{user.level + \" - \" + user.year}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t{user.role === \"teacher\" ? \"docent\" : \"leerling\"}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t{user.profile}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{this.props.role === \"admin\" &&\r\n\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\tjustifyContent: \"space-between\"\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t\t{user.email}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t\t{user.preferedEmail}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<div style={{ flex: 1 }} />\r\n\t\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t\t{this.formatPhoneNumber(user.phoneNumber)}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography variant=\"body1\" style={{ flex: 1 }} >\r\n\t\t\t\t\t\t\t\t{user.id}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t</Paper >\r\n\t\t\t</tr>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nexport default withRouter(GroupCard);\r\n\r\n","import React, { Component } from 'react';\r\nimport Page from '../Page';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Button from '@material-ui/core/Button';\r\nimport { connect } from 'react-redux';\r\nimport { setUser } from '../../store/actions';\r\nimport Field from '../../components/Field';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nconst profiles = [\"NT\", \"NG\", \"CM\", \"EM\", \"NT&NG\", \"EM&CM\"];\r\nconst levels = [\"VWO\", \"HAVO\"];\r\n\r\nclass UserPage extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tuser: this.props.user,\r\n\t\t};\r\n\t}\r\n\r\n\thandleChange(event) {\r\n\t\tthis.setState({\r\n\t\t\tuser: {\r\n\t\t\t\t...this.state.user,\r\n\t\t\t\t[event.name]: event.target.value,\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\thasChanged() {\r\n\t\treturn JSON.stringify(this.props.user) !== JSON.stringify(this.state.user)\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet user = null;\r\n\t\tif (this.props.user.id !== this.state.user.id) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tuser: this.props.user,\r\n\t\t\t});\r\n\t\t\tuser = this.props.user;\r\n\t\t} else {\r\n\t\t\tuser = this.state.user;\r\n\t\t}\r\n\t\tlet shouldFillIn = this.props.ownProfile && (\r\n\t\t\tthis.props.user.profile == null ||\r\n\t\t\tthis.props.user.profile === \"\" ||\r\n\t\t\tthis.props.user.year === null ||\r\n\t\t\tthis.props.user.year === \"\" ||\r\n\t\t\tthis.props.user.level === null ||\r\n\t\t\tthis.props.user.level === \"\" ||\r\n\t\t\tthis.props.user.phoneNumber === null ||\r\n\t\t\tthis.props.user.phoneNumber === \"\" ||\r\n\t\t\tthis.props.user.preferedEmail == null ||\r\n\t\t\tthis.props.user.preferedEmail === \"\") ? true : null;\r\n\t\treturn (\r\n\t\t\t<Page>\r\n\t\t\t\t<Field\r\n\t\t\t\t\tlabel=\"Naam\"\r\n\t\t\t\t\tvalue={user.displayName}\r\n\t\t\t\t\tstyle={{ type: \"headline\" }}\r\n\t\t\t\t/>\r\n\t\t\t\t<Field\r\n\t\t\t\t\tlabel=\"Rol\"\r\n\t\t\t\t\tlayout={{ alignment: \"right\" }}\r\n\t\t\t\t\tvalue={user.role}\r\n\t\t\t\t/>\r\n\t\t\t\t<Divider />\r\n\t\t\t\t<br />\r\n\t\t\t\t<div style={{ display: \"flex\" }} >\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tlabel=\"Leerjaar\"\r\n\t\t\t\t\t\tvalue={user.year}\r\n\t\t\t\t\t\tname=\"year\"\r\n\t\t\t\t\t\tstyle={{ margin: \"normal\" }}\r\n\t\t\t\t\t\teditable={this.props.ownProfile}\r\n\t\t\t\t\t\tonChange={this.handleChange.bind(this)}\r\n\t\t\t\t\t\tvalidate={{\r\n\t\t\t\t\t\t\ttype: \"integer\",\r\n\t\t\t\t\t\t\tmin: 1,\r\n\t\t\t\t\t\t\tmax: 6,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tlabel=\"Opleidingsniveau\"\r\n\t\t\t\t\t\tvalue={user.level}\r\n\t\t\t\t\t\tname=\"level\"\r\n\t\t\t\t\t\teditable={this.props.ownProfile}\r\n\t\t\t\t\t\tonChange={this.handleChange.bind(this)}\r\n\t\t\t\t\t\toptions={levels}\r\n\t\t\t\t\t\tvalidate={{ notEmpty: true, }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{this.props.ownProfile &&\r\n\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\tlabel=\"Profiel\"\r\n\t\t\t\t\t\t\tname=\"profile\"\r\n\t\t\t\t\t\t\tvalue={user.profile}\r\n\t\t\t\t\t\t\teditable={this.props.ownProfile}\r\n\t\t\t\t\t\t\toptions={profiles}\r\n\t\t\t\t\t\t\tonChange={this.handleChange.bind(this)}\r\n\t\t\t\t\t\t\tvalidate={{ notEmpty: true }}\r\n\t\t\t\t\t\t/>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ display: \"flex\" }} >\r\n\t\t\t\t\t{this.props.ownProfile && <Field\r\n\t\t\t\t\t\tlabel=\"Voorkeurs email\"\r\n\t\t\t\t\t\tname=\"preferedEmail\"\r\n\t\t\t\t\t\tvalue={user.preferedEmail}\r\n\t\t\t\t\t\teditable={this.props.ownProfile}\r\n\t\t\t\t\t\tonChange={this.handleChange.bind(this)}\r\n\t\t\t\t\t\tvalidate={{ type: \"email\" }}\r\n\t\t\t\t\t/>}\r\n\t\t\t\t\t{this.props.ownProfile && <Field\r\n\t\t\t\t\t\tlabel=\"Telefoonnummer\"\r\n\t\t\t\t\t\tname=\"phoneNumber\"\r\n\t\t\t\t\t\tvalue={user.phoneNumber}\r\n\t\t\t\t\t\teditable={this.props.ownProfile}\r\n\t\t\t\t\t\tonChange={this.handleChange.bind(this)}\r\n\t\t\t\t\t\tvalidate={{ type: \"phoneNumber\" }}\r\n\t\t\t\t\t/>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<br />\r\n\t\t\t\t{\r\n\t\t\t\t\tshouldFillIn &&\r\n\t\t\t\t\t<Typography gutterBottom variant=\"title\" color=\"primary\" >\r\n\t\t\t\t\t\tControleer de bovenstaande gegevens en vul de ontbrekende gegevens aan.\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.hasChanged() ?\r\n\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" size=\"large\" onClick={() => this.props.save(this.state.user)}>\r\n\t\t\t\t\t\t\tOpslaan\r\n\t\t\t\t\t\t</Button> : null\r\n\t\t\t\t}\r\n\t\t\t</Page >\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tsave: (user) => dispatch(setUser(user)),\r\n\t};\r\n}\r\n\r\n\r\nexport default connect(null, mapDispatchToProps)(UserPage);\r\n\r\n","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router';\r\n\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nconst CARD_STYLE = {\r\n\twidth: \"300px\",\r\n\theight: \"80px\",\r\n\tpadding: \"20px\",\r\n\tverticalAlign: \"top\",\r\n\tmargin: \"20px\",\r\n\tdisplay: \"inline-block\",\r\n\tcursor: \"pointer\",\r\n}\r\n\r\nclass GroupCard extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\thover: false,\r\n\t\t\tstyle: {\r\n\t\t\t\t...CARD_STYLE,\r\n\t\t\t\t...this.props.style,\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\texpand() {\r\n\t\tthis.props.history.push(\"/gebruiker/\" + this.props.user.id)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst user = this.props.user;\r\n\t\treturn (\r\n\t\t\t<Paper\r\n\t\t\t\televation={this.state.hover ? 4 : 2}\r\n\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\r\n\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\r\n\t\t\t\tstyle={this.state.style}\r\n\t\t\t>\r\n\t\t\t\t<Typography variant=\"title\" color={user.role === \"teacher\"?\"secondary\":\"primary\"} >\r\n\t\t\t\t\t{user.firstName + \" \" + user.lastName}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<Typography variant=\"subheading\">\r\n\t\t\t\t\t{(user.role===\"teacher\"?\"docent\":\"leerling\") + \"\\t\" + user.school}\r\n\t\t\t\t</Typography>\r\n\t\t\t</Paper >\r\n\t\t);\r\n\t}\r\n\r\n\r\n}\r\n\r\n\r\nexport default withRouter(GroupCard);\r\n\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport UserRow from \"./UserRow\";\r\nimport UserPage from \"./UserPage\";\r\nimport UserCard from \"./UserCard\";\r\nimport { setSecureLogin, getCookie } from \"../../store/actions\"\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport Progress from '../../components/Progress'\r\nimport Field from \"../../components/Field\"\r\nimport queryString from \"query-string\";\r\n\r\nclass User extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tlet s = queryString.parse(nextProps.location.search);\r\n\t\tif (s.secureLogin != null) {\r\n\t\t\tnextProps.setSecureLogin(s.secureLogin);\r\n\t\t}\r\n\t\tif (s.from === \"login\" && nextProps.user != null && nextProps.role !== \"student\") {\r\n\t\t\tconst beforeLoginPath = getCookie(\"beforeLoginPath\");\r\n\t\t\tnextProps.history.push(beforeLoginPath);\r\n\t\t}\r\n\t\treturn prevState;\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.user == null) {\r\n\t\t\tif (this.props.display === \"page\") {\r\n\t\t\t\tif (this.props.notExists) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className=\"page\">\r\n\t\t\t\t\t\t\tDe opgevraagde gebruiker bestaat niet\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className=\"page\">\r\n\t\t\t\t\t\t\t<Progress />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (this.props.notExists) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn <Progress />;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tswitch (this.props.display) {\r\n\t\t\tcase \"name\":\r\n\t\t\t\treturn <Field value={this.props.user.displayName} style={{ type: \"title\" }} layout={{ td: true }} />;\r\n\t\t\tcase \"page\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<UserPage {...this.props} />\r\n\t\t\t\t);\r\n\t\t\tcase \"row\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<UserRow {...this.props} />\r\n\t\t\t\t);\r\n\t\t\tcase \"card\":\r\n\t\t\tdefault:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<UserCard {...this.props} />\r\n\t\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n\tlet id = ownProps.match.params.userId || ownProps.userId;\r\n\tlet display = ownProps.display || \"page\";\r\n\r\n\tlet notExists = false;\r\n\tlet user = null;\r\n\r\n\tif (id == null) {\r\n\t\tid = state.userId;\r\n\t}\r\n\r\n\tif (state.users == null || state.users[id] == null) {\r\n\t\tif (id == null || state.hasFetched.indexOf(\"User.get(\" + id + \")\") !== -1) {\r\n\t\t\tnotExists = true;\r\n\t\t}\r\n\t} else {\r\n\t\tuser = state.users[id];\r\n\t}\r\n\r\n\treturn {\r\n\t\trole: state.role,\r\n\t\tuser,\r\n\t\tnotExists,\r\n\t\tdisplay,\r\n\t\tuserId: id,\r\n\t\townProfile: (\"\" + id) === (\"\" + state.userId),\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tsetSecureLogin: (secureLogin) => dispatch(setSecureLogin(secureLogin)),\r\n\t};\r\n}\r\n\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(User));\r\n","import React, { Component } from 'react';\r\nimport map from \"lodash/map\"\r\nimport filter from \"lodash/filter\"\r\nimport User from \"../user/User\"\r\nimport Field from \"../../components/Field\"\r\nimport { Paper } from '@material-ui/core';\r\n\r\nclass PresenceTable extends Component {\r\n\r\n\tcreatePresenceComponent(presence, i) {\r\n\t\tlet options = [{ label: \"Actief\", value: \"present\" },\r\n\t\t{ label: \"Niet actief\", value: \"absent\" }];\r\n\t\tif (!this.props.editable && presence.userStatus === \"absent\") {\r\n\t\t\toptions[0].label = \"Afgemeld\";\r\n\t\t\toptions[1].label = \"Afgemeld\";\r\n\t\t}\r\n\t\treturn <Field\r\n\t\t\tkey={i}\r\n\t\t\tvalue={presence.status}\r\n\t\t\toptions={options}\r\n\t\t\tlabel={presence.userStatus === \"absent\" ? \"afgemeld\" : undefined}\r\n\t\t\tlayout={{ td: true, area: true }}\r\n\t\t\teditable={this.props.editable}\r\n\t\t\tonChange={(event) => {\r\n\t\t\t\tthis.props.handleChange({\r\n\t\t\t\t\t...presence,\r\n\t\t\t\t\tstatus: event.target.value,\r\n\t\t\t\t});\r\n\t\t\t}}\r\n\t\t/>;\r\n\t}\r\n\r\n\tcreateRow = (participantId) => {\r\n\t\tconst content = map(this.props.lessons, ((lesson, i) => {\r\n\t\t\tconst p = filter(this.props.presence, presence => {\r\n\t\t\t\treturn presence.lessonId === lesson.id && presence.userId === participantId;\r\n\t\t\t});\r\n\t\t\tif (p.length === 1) {\r\n\t\t\t\treturn this.createPresenceComponent(p[0], i);\r\n\t\t\t} else {\r\n\t\t\t\treturn \"err\";\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\treturn (\r\n\t\t\t<Paper component=\"tr\" elevation={1} key={\"p\" + participantId}>\r\n\t\t\t\t<User key={participantId} userId={participantId} display=\"name\" />\r\n\t\t\t\t{content}\r\n\t\t\t</Paper>\r\n\t\t);\r\n\t}\r\n\r\n\tcreateLessonHeader = (lesson) => {\r\n\t\tconst content = map(this.props.lessons, lesson => {\r\n\t\t\treturn <Field value={\"Les \" + lesson.numberInBlock} key={lesson.id} style={{ type: \"title\" }} layout={{ td: true, area: true }} />;\r\n\t\t});\r\n\t\treturn (\r\n\t\t\t<Paper component=\"tr\" elevation={2} key={\"l\" + lesson} style={{ backgroundColor: \"#e0e0e0\" }} >\r\n\t\t\t\t<Field value=\"\" layout={{ td: true, area: true }} />\r\n\t\t\t\t{content}\r\n\t\t\t</Paper>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet rows = this.props.participantIds.filter((partId) => {\r\n\t\t\treturn map(this.props.presence, (p) => p.userId).indexOf(partId) !== -1;\r\n\t\t}).map(this.createRow);\r\n\t\trows.unshift(this.createLessonHeader());\r\n\t\treturn <table>\r\n\t\t\t<tbody>\r\n\t\t\t\t{rows}\r\n\t\t\t</tbody>\r\n\t\t</table>;\r\n\t}\r\n\r\n}\r\n\r\nexport default PresenceTable;\r\n","import React, { Component } from 'react';\r\n\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Field from '../../components/Field';\r\nimport { Button } from '@material-ui/core';\r\nimport { setPresenceUserStatus } from \"../../store/actions\";\r\nimport { connect } from \"react-redux\";\r\n\r\nclass Lesson extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\thover: false,\r\n\t\t\tstyle: {\r\n\t\t\t\twidth: \"100%\",\r\n\t\t\t\theight: \"auto\",\r\n\t\t\t\tmarginTop: \"10px\",\r\n\t\t\t\tmarginBottom: \"10px\",\r\n\t\t\t\tpadding: \"2px\",\r\n\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\talignItems: \"start\",\r\n\t\t\t\tposition: \"relative\",\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n\r\n\tgetWeekdayString(number) {\r\n\t\treturn [\"zondag\", \"maandag\", \"dinsdag\", \"woensdag\", \"donderdag\", \"vrijdag\", \"zaterdag\"][number];\r\n\t}\r\n\r\n\tgetOptOutButton() {\r\n\t\tif (this.props.lesson.userStatus === \"absent\") {\r\n\t\t\treturn < div style={{ flex: 1 }}>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tstyle={{ width: \"70px\", float: \"right\" }}\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tmini\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tonClick={() => this.props.setPresenceUserStatus(this.props.lesson.id, \"present\", this.props.lesson.courseGroupId)}\r\n\t\t\t\t>\r\n\t\t\t\t\tAanmelden\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t}\r\n\t\treturn < div style={{ flex: 1 }}>\r\n\t\t\t<Button\r\n\t\t\t\tstyle={{ width: \"70px\", float: \"right\" }}\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\tmini\r\n\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\tonClick={() => this.props.setPresenceUserStatus(this.props.lesson.id, \"absent\", this.props.lesson.courseGroupId)}\r\n\t\t\t>\r\n\t\t\t\tAfmelden\r\n\t\t\t</Button>\r\n\t\t</div>\r\n\t}\r\n\r\n\r\n\thandleChange = (event) => {\r\n\t\tthis.props.handleChange({\r\n\t\t\t...this.props.lesson,\r\n\t\t\t[event.name]: event.target.value,\r\n\t\t});\r\n\t}\r\n\r\n\r\n\trender() {\r\n\t\tconst lesson = this.props.lesson;\r\n\t\tif (lesson.id === -1) {\r\n\t\t\treturn (\r\n\t\t\t\t<Paper\r\n\t\t\t\t\televation={this.state.hover ? 2 : 1}\r\n\t\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\r\n\t\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\r\n\t\t\t\t\tcomponent=\"tr\"\r\n\t\t\t\t\tstyle={{ backgroundColor: \"#e0e0e0\" }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<td style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n\t\t\t\t\t\t<Field style={{ fontWeight: \"bold\" }} value=\"Lesnummer\" />\r\n\t\t\t\t\t\t<Field style={{ fontWeight: \"bold\" }} value=\"Soort les\" />\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<Field style={{ flex: 4, fontWeight: \"bold\" }} value=\"Onderwerp\" layout={{ td: true }} />\r\n\t\t\t\t\t<Field style={{ flex: 8, fontWeight: \"bold\" }} value=\"Activiteiten\" layout={{ td: true }} />\r\n\t\t\t\t\t<td style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n\t\t\t\t\t\t<Field style={{ fontWeight: \"bold\" }} value=\"Datum\" layout={{ alignment: \"right\" }} />\r\n\t\t\t\t\t\t<Field style={{ fontWeight: \"bold\" }} value=\"Aanwezigheid\" layout={{ alignment: \"right\" }} />\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</Paper>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Paper\r\n\t\t\t\televation={this.state.hover ? 2 : 1}\r\n\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\r\n\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\r\n\t\t\t\tcomponent=\"tr\"\r\n\t\t\t>\r\n\t\t\t\t<td style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tlayout={{ area: true }}\r\n\t\t\t\t\t\tstyle={{ fontWeight: \"bold\" }}\r\n\t\t\t\t\t\tvalue={\"Les \" + lesson.numberInBlock}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tlabel=\"Soort les\"\r\n\t\t\t\t\t\tname=\"kind\"\r\n\t\t\t\t\t\tlayout={{ area: true }}\r\n\t\t\t\t\t\tvalue={lesson.kind}\r\n\t\t\t\t\t\teditable={this.props.editable}\r\n\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</td>\r\n\t\t\t\t<Field\r\n\t\t\t\t\tlabel=\"Onderwerp\"\r\n\t\t\t\t\tname=\"subject\"\r\n\t\t\t\t\tstyle={{ flex: 4 }}\r\n\t\t\t\t\tvalue={lesson.subject}\r\n\t\t\t\t\teditable={this.props.editable}\r\n\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\tlayout={{ td: true, area: true }}\r\n\t\t\t\t/>\r\n\t\t\t\t<Field\r\n\t\t\t\t\tlabel=\"Activiteiten\"\r\n\t\t\t\t\tname=\"activities\"\r\n\t\t\t\t\tstyle={{ flex: 8 }}\r\n\t\t\t\t\tvalue={lesson.activities}\r\n\t\t\t\t\teditable={this.props.editable}\r\n\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\tlayout={{ td: true, area: true }}\r\n\t\t\t\t/>\r\n\t\t\t\t<td style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tlayout={{ alignment: \"right\" }}\r\n\t\t\t\t\t\tvalue={this.getWeekdayString(new Date(lesson.date).getDay()) + \" \" + new Date(lesson.date).getDate() + \"-\" + (new Date(lesson.date).getMonth() + 1) + \"-\" + new Date(lesson.date).getFullYear()}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tname=\"presence\"\r\n\t\t\t\t\t\tlabel=\"Aanwezigheid\"\r\n\t\t\t\t\t\tstyle={{ labelVisible: true }}\r\n\t\t\t\t\t\tlayout={{ alignment: \"right\" }}\r\n\t\t\t\t\t\tvalue={lesson.presence}\r\n\t\t\t\t\t\teditable={this.props.editable}\r\n\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\toptions={[{ label: \"Noodzakelijk\", value: \"required\" }, { label: \"Eigen keuze\", value: \"optional\" }, { label: \"Geen bijeenkomst\", value: \"unrequired\" }]}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.props.userIsMemberOfGroup && this.props.role === \"student\" ? this.getOptOutButton() : null\r\n\t\t\t\t\t}\r\n\t\t\t\t</td>\r\n\t\t\t</Paper >\r\n\t\t);\r\n\t}\r\n\r\n\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tsetPresenceUserStatus: (lessonId, userStatus, groupId) => dispatch(setPresenceUserStatus(lessonId, userStatus, groupId)),\r\n\t};\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(Lesson);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Typography, Tooltip, TableSortLabel, Paper } from '@material-ui/core';\r\nimport User from \"./User\";\r\n\r\nclass UserList extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\thover: false,\r\n\t\t\tstyle: {\r\n\t\t\t\twidth: \"100%\",\r\n\t\t\t\theight: \"auto\",\r\n\t\t\t\tmargin: \"0px\",\r\n\t\t\t\tpadding: \"10px\",\r\n\t\t\t\tbackgroundColor: \"#e0e0e0\",\r\n\t\t\t},\r\n\t\t\tsortValue: \"\",\r\n\t\t\tsortDirection: \"\",\r\n\t\t}\r\n\t}\r\n\r\n\tonSortChange = (value) => {\r\n\t\tthis.setState({\r\n\t\t\tsortValue: value,\r\n\t\t\tsortDirection: this.state.sortDirection === \"desc\" && this.state.sortValue === value ? \"asc\" : \"desc\"\r\n\t\t});\r\n\t}\r\n\r\n\theaderTitle(variant, value, title) {\r\n\t\tlet sortValue = this.state.sortValue;\r\n\t\tlet sortDirection = this.state.sortDirection === \"asc\" ? \"asc\" : \"desc\";\r\n\t\treturn (\r\n\t\t\t<Typography variant={variant} color={variant === \"title\" ? \"primary\" : \"default\"} style={{ flex: 1 }} >\r\n\t\t\t\t<Tooltip title=\"Sorteer\" enterDelay={300} placement=\"bottom-start\">\r\n\t\t\t\t\t<TableSortLabel active={sortValue === value}\r\n\t\t\t\t\t\tdirection={sortDirection}\r\n\t\t\t\t\t\tonClick={() => this.onSortChange(value)}\r\n\t\t\t\t\t\tstyle={{ color: \"inherit\" }} >\r\n\t\t\t\t\t\t{title}\r\n\t\t\t\t\t</TableSortLabel>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</Typography>\r\n\t\t)\r\n\t}\r\n\r\n\tgetHeader = () => {\r\n\t\tlet style = { ...this.state.style };\r\n\t\treturn (\r\n\t\t\t<tr>\r\n\t\t\t\t<Paper\r\n\t\t\t\t\televation={this.state.hover ? 2 : 1}\r\n\t\t\t\t\tonMouseEnter={() => this.setState({ hover: true })}\r\n\t\t\t\t\tonMouseLeave={() => this.setState({ hover: false })}\r\n\t\t\t\t\tcomponent=\"td\"\r\n\t\t\t\t\tstyle={style}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\tjustifyContent: \"space-between\"\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{this.headerTitle(\"title\", \"name\", \"Naam\")}\r\n\t\t\t\t\t\t{this.headerTitle(\"subheading\", \"school\", \"School\")}\r\n\t\t\t\t\t\t{this.headerTitle(\"body1\", \"levelAndYear\", \"Niveau - Leerjaar\")}\r\n\t\t\t\t\t\t{this.headerTitle(\"body1\", \"role\", \"Rol\")}\r\n\t\t\t\t\t\t{this.headerTitle(\"body1\", \"profile\", \"Profiel\")}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{this.props.role === \"admin\" &&\r\n\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\tjustifyContent: \"space-between\"\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{this.headerTitle(\"body1\", \"email\", \"Office Email\")}\r\n\t\t\t\t\t\t\t{this.headerTitle(\"body1\", \"preferedEmail\", \"Voorkeurs email\")}\r\n\t\t\t\t\t\t\t<div style={{ flex: 1 }} />\r\n\t\t\t\t\t\t\t{this.headerTitle(\"body1\", \"phoneNumber\", \"Telefoonnummer\")}\r\n\t\t\t\t\t\t\t{this.headerTitle(\"body1\", \"id\", \"Gebruikers ID\")}\r\n\t\t\t\t\t\t</div>}\r\n\t\t\t\t</Paper >\r\n\t\t\t</tr>\r\n\t\t)\r\n\t}\r\n\r\n\tsortIds = () => {\r\n\t\tconst value = this.state.sortValue;\r\n\t\tconst direction = this.state.sortDirection;\r\n\t\tconst users = this.props.users;\r\n\t\tconst userIds = this.props.userIds;\r\n\t\tif (value === \"\") {\r\n\t\t\treturn userIds;\r\n\t\t}\r\n\t\tuserIds.sort((a, b) => {\r\n\t\t\tswitch (value) {\r\n\t\t\t\tcase \"name\":\r\n\t\t\t\t\ta = (users[a][\"firstName\"] + users[a][\"lastName\"]).toLowerCase();\r\n\t\t\t\t\tb = (users[b][\"firstName\"] + users[b][\"lastName\"]).toLowerCase()\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"levelAndYear\":\r\n\t\t\t\t\ta = (users[a][\"level\"] + users[a][\"year\"]).toString();// to string because otherwise no level and year would result in a being an integer\r\n\t\t\t\t\tb = (users[b][\"level\"] + users[b][\"year\"]).toString();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\ta = users[a][value];\r\n\t\t\t\t\tb = users[b][value];\r\n\t\t\t}\r\n\t\t\tlet cmp = (b == null) - (a == null) || +(a > b) || -(a < b);\r\n\t\t\treturn direction === \"asc\" ? cmp : -cmp;\r\n\t\t})\r\n\t\treturn userIds;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst header = this.getHeader();\r\n\t\tconst users = this.sortIds().map(id => {\r\n\t\t\treturn <User key={id} userId={id} display=\"row\" />\r\n\t\t});\r\n\t\treturn (\r\n\t\t\t<table style={{ width: \"100%\" }}>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{header}\r\n\t\t\t\t\t{users}\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n\treturn {\r\n\t\tusers: state.users,\r\n\t\trole: state.role,\r\n\t};\r\n}\r\n\r\nexport default connect(mapStateToProps)(UserList);","import React, { Component } from 'react';\r\nimport { Prompt } from 'react-router-dom';\r\n\r\nclass PageLeaveWarning extends Component {\r\n\r\n\trender() {\r\n\t\tconst message = \"Weet je zeker dat u de pagina wilt verlaten? Er zijn nog niet-opgeslagen gegevens!\";\r\n\t\tif (this.props.giveWarning) {\r\n\t\t\twindow.onbeforeunload = function (e) {\r\n\t\t\t\te.returnValue = message;\r\n\t\t\t\treturn message;\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\twindow.onbeforeunload = null;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Prompt\r\n\t\t\t\twhen={this.props.giveWarning}\r\n\t\t\t\tmessage={location => message}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nexport default PageLeaveWarning;","import React, { Component } from 'react';\r\nimport map from 'lodash/map';\r\n\r\nimport Field from '../../components/Field';\r\nimport User from \"../user/User\"\r\n\r\nimport Popover from '@material-ui/core/Popover';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nclass GroupData extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\thandleClickAway = () => {\r\n\t\tthis.setState({ anchorEl: null });\r\n\t}\r\n\r\n\tshowTeacherCard = event => {\r\n\t\tthis.setState({ anchorEl: event.currentTarget });\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst editable = this.props.editable;\r\n\t\tconst role = this.props.role;\r\n\t\tconst onChange = this.props.onChange;\r\n\t\tlet group = this.props.group;\r\n\t\treturn (\r\n\t\t\t<div style={{ position: \"relative\" }}>\r\n\t\t\t\t<div style={{ display: \"flex\" }}>\r\n\t\t\t\t\t<Field value={group.courseName} name=\"courseName\" onChange={onChange} editable={editable} style={{ flex: \"5\", type: \"headline\" }} validate={{ maxLength: 50 }} />\r\n\t\t\t\t\t<Field value={group.subjectId} name=\"subjectId\" onChange={onChange} layout={{ alignment: \"right\" }} style={{ type: \"headline\" }} editable={editable} options={map(this.props.subjects, (subject) => { return { value: subject.id, label: subject.name } })} />\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t!editable &&\r\n\t\t\t\t\t\t<Button color=\"secondary\" style={{ position: \"absolute\", display: \"block\", top: \"30px\", right: \"-15px\", zIndex: \"100\" }} onClick={this.showTeacherCard}>\r\n\t\t\t\t\t\t\t<div>{group.teacherName}</div>\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ display: \"flex\" }} className=\"ColumnFlexDirectionOnMobile\">\r\n\t\t\t\t\t<div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n\t\t\t\t\t\t<div style={{ flex: 1 }}>\r\n\t\t\t\t\t\t\t<Field value={group.period} name=\"period\" editable={editable && role === \"admin\"} onChange={onChange} style={{ width: \"100px\", type: \"caption\" }} options={[{ label: \"Blok 1\", value: 1 }, { label: \"Blok 2\", value: 2 }, { label: \"Blok 3\", value: 3 }, { label: \"Blok 4\", value: 4 }]} />\r\n\t\t\t\t\t\t\t<Field value={group.day} name=\"day\" editable={editable && role === \"admin\"} onChange={onChange} style={{ width: \"150px\", type: \"caption\" }} options={[\"maandag\", \"dinsdag\", \"woensdag\", \"donderdag\", \"vrijdag\", \"zaterdag\", \"zondag\"]} />\r\n\t\t\t\t\t\t\t<Field value={group.schoolYear} name=\"schoolYear\" editable={editable && role === \"admin\"} onChange={onChange} options={[\"2018/2019\", \"2019/2020\", \"2020/2021\", \"2021/2022\"]} style={{ width: \"120px\", type: \"caption\" }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<Field value={group.enrollableFor} label=\"Doelgroep\" style={{ width: \"100%\", labelVisible: true }} name=\"enrollableFor\" default=\"Iedereen\" editable={editable} onChange={onChange} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{ width: \"100%\" }}>\r\n\t\t\t\t\t\t<Field value={group.courseDescription} validate={{ maxLength: 440 }} name=\"courseDescription\" label=\"Omschrijving\" style={{ labelVisible: true }} onChange={onChange} layout={{ area: true }} editable={editable} />\r\n\t\t\t\t\t\t<Field value={group.remarks} label=\"Opmerkingen\" name=\"remarks\" style={{ width: \"80%\", labelVisible: true }} default=\"Geen voorkennis vereist\" editable={editable} onChange={onChange} />\r\n\t\t\t\t\t\t<Field value={group.studyTime} label=\"Studietijd\" name=\"studyTime\" default=\"onbekend\" editable={editable} style={{ labelVisible: true, unit: \"uur\" }} onChange={onChange} layout={{ alignment: \"right\" }} validate={{ type: \"integer\" }} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<br />\r\n\r\n\t\t\t\t<Popover\r\n\t\t\t\t\topen={this.state.anchorEl ? true : false}\r\n\t\t\t\t\tonClose={this.handleClickAway}\r\n\t\t\t\t\tanchorEl={this.state.anchorEl}\r\n\t\t\t\t\tanchorOrigin={{ horizontal: \"left\", vertical: \"top\" }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<User key={group.teacherId} userId={group.teacherId} display=\"card\" style={{ margin: \"0px\" }} />\r\n\t\t\t\t</Popover>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default GroupData;\r\n","import React, { Component } from \"react\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\nimport { connect } from 'react-redux';\r\nimport theme from \"../lib/MuiTheme\";\r\nimport { withStyles, Tooltip } from \"@material-ui/core\";\r\n\r\nconst style = {\r\n    colorPrimary:{\r\n        backgroundColor: theme.palette.primary.main\r\n    },\r\n    colorSecondary: {\r\n        backgroundColor: \"#ff8c00\"\r\n    },\r\n    colorError: {\r\n        backgroundColor: theme.palette.error.main\r\n    }\r\n}\r\n\r\nclass NotificationBadge extends Component {\r\n\r\n\r\n    render() {\r\n        const notifications = this.props.notifications;\r\n        const classes = this.props.classes;\r\n        let color = \"primary\";\r\n        let tooltipMessage = notifications.length > 0 ? notifications[0].message : \"\";\r\n        for ( let i = 0; i < notifications.length; i ++ ) { \r\n            if (notifications[i].priority === \"medium\" || notifications[i].priority === \"high\" ){\r\n                color=\"secondary\";\r\n                tooltipMessage=notifications[i].message;\r\n                for ( let j = i ; j < notifications.length; j++ ) {\r\n                    if ( notifications[j].priority === \"high\" ) {\r\n                        color = \"error\"\r\n                        tooltipMessage = notifications[j].message;\r\n                        break;\r\n                    }\r\n                }\r\n                break\r\n            }\r\n        }// tooltip is first message of highest priority\r\n        //color is highest priority\r\n\r\n        return (\r\n            <Tooltip title={tooltipMessage} >\r\n                <Badge badgeContent={notifications.length} classes={classes} color={color} >\r\n                    {this.props.children}\r\n                </Badge>\r\n            </Tooltip>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n\tlet notifications = state.notifications.filter((not) => {\r\n\t\ttry {\r\n            return not.type === \"badge\" && RegExp(not.scope).test(ownProps.scope);\r\n\t\t} catch (err) {\r\n\t\t\treturn true;\r\n\t\t}\r\n    });\r\n\treturn {\r\n\t\tnotifications: notifications,\r\n\t};\r\n}\r\n\r\nexport default withStyles(style)(connect(mapStateToProps,null)(NotificationBadge));","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router';\r\nimport map from 'lodash/map';\r\n\r\nimport PresenceTable from './PresenceTable';\r\nimport Lesson from './Lesson';\r\nimport { EvaluationTab } from './Evaluation';\r\nimport Page from '../Page';\r\nimport UserList from \"../user/UserList\"\r\n\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Progress from '../../components/Progress'\r\nimport PageLeaveWarning from '../../components/PageLeaveWarning'\r\nimport GroupData from './GroupData';\r\nimport ChooseButton from './ChooseButton';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Button from '@material-ui/core/Button';\r\nimport queryString from \"query-string\";\r\nimport NotificationBadge from '../../components/NotificationBadge';\r\n\r\nclass GroupPage extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\teditable: false,\r\n\t\t\tgroup: this.props.group,\r\n\t\t}\r\n\r\n\t\tswitch (this.props.role) {\r\n\t\t\tcase \"student\":\r\n\t\t\t\tif (this.props.userIsMemberOfGroup) {\r\n\t\t\t\t\tthis.state.tabs = [\"Lessen\", \"Deelnemers\"];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.state.tabs = [\"Lessen\"];\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"teacher\":\r\n\t\t\t\tif (this.props.userIsMemberOfGroup) {\r\n\t\t\t\t\tthis.state.tabs = [\"Inschrijvingen\", \"Lessen\", \"Deelnemers\", \"Actief\", \"Beoordeling\"];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.state.tabs = [\"Lessen\"];\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"admin\":\r\n\t\t\t\tthis.state.tabs = [\"Inschrijvingen\", \"Lessen\", \"Deelnemers\", \"Actief\", \"Beoordeling\"];\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tlet values = queryString.parse(nextProps.location.search);\r\n\t\treturn {\r\n\t\t\t...prevState,\r\n\t\t\tgroup: {\r\n\t\t\t\t...nextProps.group,\r\n\t\t\t\t...prevState.group,\r\n\t\t\t},\r\n\t\t\tcurrentTab: values.tab ? values.tab : prevState.tabs[0]\r\n\t\t}\r\n\t}\r\n\r\n\tgetCurrentTab(currentTab) {\r\n\t\tlet group = this.state.group;\r\n\t\tconst enrollmentIds = this.state.group.enrollmentIds;\r\n\t\tconst lessons = this.state.group.lessons;\r\n\t\tconst participantIds = this.state.group.participantIds;\r\n\t\tconst evaluations = this.state.group.evaluations;\r\n\t\tconst presence = this.state.group.presence;\r\n\r\n\t\tswitch (currentTab) {\r\n\t\t\tcase \"Inschrijvingen\":\r\n\t\t\t\tif (enrollmentIds == null) {\r\n\t\t\t\t\treturn <Progress />;\r\n\t\t\t\t}\r\n\t\t\t\tif (enrollmentIds.length === 0) {\r\n\t\t\t\t\treturn \"Er zijn geen inschrijvingen\";\r\n\t\t\t\t}\r\n\t\t\t\treturn <UserList userIds={enrollmentIds} />;\r\n\t\t\tcase \"Lessen\":\r\n\t\t\t\tif (lessons == null) {\r\n\t\t\t\t\treturn <Progress />;\r\n\t\t\t\t}\r\n\t\t\t\tif (lessons.length === 0) {\r\n\t\t\t\t\treturn \"Er zijn nog geen lessen bekend\";\r\n\t\t\t\t}\r\n\t\t\t\treturn <table style={{ width: \"100%\" }}>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{map({ 0: { id: -1 }, ...lessons }, lesson => {\r\n\t\t\t\t\t\t\treturn <Lesson\r\n\t\t\t\t\t\t\t\tlesson={lesson}\r\n\t\t\t\t\t\t\t\tkey={lesson.id}\r\n\t\t\t\t\t\t\t\trole={this.props.role}\r\n\t\t\t\t\t\t\t\tuserIsMemberOfGroup={this.props.userIsMemberOfGroup}\r\n\t\t\t\t\t\t\t\teditable={this.state.editable}\r\n\t\t\t\t\t\t\t\thandleChange={this.handleLessonChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\tcase \"Deelnemers\":\r\n\t\t\t\tif (participantIds == null) {\r\n\t\t\t\t\treturn <Progress />;\r\n\t\t\t\t}\r\n\t\t\t\tif (participantIds.length === 0) {\r\n\t\t\t\t\treturn \"Er zijn nog geen deelnemers toegevoegd\";\r\n\t\t\t\t}\r\n\t\t\t\treturn <UserList userIds={participantIds} />\r\n\t\t\tcase \"Actief\":\r\n\t\t\t\tif (participantIds == null || lessons == null || presence == null) {\r\n\t\t\t\t\treturn <Progress />;\r\n\t\t\t\t}\r\n\t\t\t\treturn <PresenceTable\r\n\t\t\t\t\tparticipantIds={participantIds}\r\n\t\t\t\t\tlessons={lessons}\r\n\t\t\t\t\tpresence={presence}\r\n\t\t\t\t\teditable={this.state.editable}\r\n\t\t\t\t\thandleChange={this.handlePresenceChange}\r\n\t\t\t\t/>\r\n\t\t\tcase \"Beoordeling\":\r\n\t\t\t\tif (participantIds == null || evaluations == null) {\r\n\t\t\t\t\treturn <Progress />;\r\n\t\t\t\t}\r\n\t\t\t\treturn <EvaluationTab\r\n\t\t\t\t\tevaluations={evaluations}\r\n\t\t\t\t\tgroupId={group.id}\r\n\t\t\t\t\teditable={this.state.editable}\r\n\t\t\t\t\thandleChange={this.handleEvaluationChange}\r\n\t\t\t\t/>\r\n\t\t\tdefault: return null;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tgetData() {\r\n\t\tlet group = this.state.group;\r\n\t\tconst enrollmentIds = this.state.group.enrollmentIds;\r\n\t\tconst lessons = this.state.group.lessons;\r\n\t\tconst participantIds = this.state.group.participantIds;\r\n\t\tconst evaluations = this.state.group.evaluations;\r\n\t\tconst presence = this.state.group.presence;\r\n\r\n\t\tswitch (this.state.currentTab) {\r\n\t\t\tcase \"Inschrijvingen\":\r\n\t\t\t\tif (enrollmentIds == null) {\r\n\t\t\t\t\tthis.props.getGroupEnrollments(group.id);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Lessen\":\r\n\t\t\t\tif (lessons == null) {\r\n\t\t\t\t\tthis.props.getGroupLessons(group.id);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Deelnemers\":\r\n\t\t\t\tif (participantIds == null) {\r\n\t\t\t\t\tthis.props.getGroupParticipants(group.id);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Actief\":\r\n\t\t\t\tif (participantIds == null) {\r\n\t\t\t\t\tthis.props.getGroupParticipants(group.id);\r\n\t\t\t\t}\r\n\t\t\t\tif (lessons == null) {\r\n\t\t\t\t\tthis.props.getGroupLessons(group.id);\r\n\t\t\t\t}\r\n\t\t\t\tif (presence == null) {\r\n\t\t\t\t\tthis.props.getGroupPresence(group.id);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Beoordeling\":\r\n\t\t\t\tif (evaluations == null) {\r\n\t\t\t\t\tthis.props.getGroupEvaluations(group.id);\r\n\t\t\t\t}\r\n\t\t\t\tif (participantIds == null) {\r\n\t\t\t\t\tthis.props.getGroupParticipants(group.id);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: break;\r\n\t\t}\r\n\t}\r\n\r\n\thandleChange = (event) => {\r\n\t\tthis.setState({\r\n\t\t\tgroup: {\r\n\t\t\t\t...this.state.group,\r\n\t\t\t\t[event.name]: event.target.value,\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\thandleLessonChange = (lesson) => {\r\n\t\tlet lessons = this.state.group.lessons || this.props.group.lessons;\r\n\t\tthis.setState({\r\n\t\t\tgroup: {\r\n\t\t\t\t...this.state.group,\r\n\t\t\t\tlessons: {\r\n\t\t\t\t\t...lessons,\r\n\t\t\t\t\t[lesson.id]: lesson,\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\thandleEvaluationChange = (newEvaluations) => {\r\n\t\tthis.setState({\r\n\t\t\tgroup: {\r\n\t\t\t\t...this.state.group,\r\n\t\t\t\tevaluations: newEvaluations,\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\thandlePresenceChange = (presenceObj) => {\r\n\t\tlet presence = this.state.group.presence || this.props.group.presence;\r\n\t\tthis.setState({\r\n\t\t\tgroup: {\r\n\t\t\t\t...this.state.group,\r\n\t\t\t\tpresence: {\r\n\t\t\t\t\t...presence,\r\n\t\t\t\t\t[presenceObj.id]: presenceObj,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tsetEditable = () => {\r\n\t\tthis.setState({\r\n\t\t\teditable: true,\r\n\t\t});\r\n\t}\r\n\r\n\tcancel = () => {\r\n\t\tthis.setState({\r\n\t\t\teditable: false,\r\n\t\t\tgroup: this.props.group,\r\n\t\t});\r\n\t}\r\n\r\n\tsave = () => {\r\n\t\tthis.props.setGroup(this.state.group);\r\n\t\tthis.setState({\r\n\t\t\teditable: false,\r\n\t\t});\r\n\t}\r\n\r\n\thandleTab = (event, newTab) => {\r\n\t\tthis.props.history.push({\r\n\t\t\tsearch: \"tab=\" + this.state.tabs[newTab],\r\n\t\t});\r\n\t};\r\n\r\n\r\n\trender() {\r\n\t\tconst editable = this.state.editable;\r\n\t\tconst role = this.props.role;\r\n\t\tlet group = this.state.group;\r\n\t\treturn (\r\n\t\t\t<Page>\r\n\t\t\t\t<GroupData {...this.props} editable={editable} group={group} onChange={this.handleChange} />\r\n\t\t\t\t<Divider />\r\n\t\t\t\t{\r\n\t\t\t\t\trole === \"student\" &&\r\n\t\t\t\t\t<ChooseButton\r\n\t\t\t\t\t\tgroup={group}\r\n\t\t\t\t\t\tstyle={{ margin: \"20px\" }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\t((role === \"teacher\" || role === \"admin\") && !editable) &&\r\n\t\t\t\t\t<Button color=\"secondary\" variant=\"contained\" style={{ margin: \"20px\" }} onClick={this.setEditable}>\r\n\t\t\t\t\t\t{\"Bewerken\"}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\teditable &&\r\n\t\t\t\t\t<Button color=\"secondary\" variant=\"contained\" style={{ margin: \"20px\" }} onClick={this.save}>\r\n\t\t\t\t\t\t{\"Opslaan\"}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\teditable &&\r\n\t\t\t\t\t<Button color=\"default\" style={{ margin: \"20px\" }} onClick={this.cancel}>\r\n\t\t\t\t\t\t{\"Annuleren\"}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t}\r\n\t\t\t\t<AppBar position=\"static\" color=\"default\">\r\n\t\t\t\t\t<Tabs\r\n\t\t\t\t\t\tvalue={this.state.tabs.indexOf(this.state.currentTab)}\r\n\t\t\t\t\t\tonChange={this.handleTab}\r\n\t\t\t\t\t\tindicatorColor=\"primary\"\r\n\t\t\t\t\t\ttextColor=\"primary\"\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tcentered\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{this.state.tabs.map(tab => \r\n\t\t\t\t\t\t<Tab key={tab} label={\r\n\t\t\t\t\t\t\t<NotificationBadge scope={\"groep/\" + ( group.id || \"\" ) + \"?tab=\" + tab} style={{paddingLeft:\"100px\"}}>\r\n\t\t\t\t\t\t\t\t{tab}\r\n\t\t\t\t\t\t\t</NotificationBadge>\r\n\t\t\t\t\t\t\t} />) }\r\n\t\t\t\t\t</Tabs>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<br />\r\n\t\t\t\t<div style={{ width: \"98%\", margin: \"auto\" }}>\r\n\t\t\t\t\t{this.getCurrentTab(this.state.currentTab)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<PageLeaveWarning giveWarning={this.state.editable} />\r\n\t\t\t</Page>\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\n\r\n\r\nexport default withRouter(GroupPage);\r\n\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport GroupCard from \"./GroupCard\";\r\nimport GroupPage from \"./GroupPage\";\r\nimport {\r\n\tsetGroup,\r\n\tgetGroup,\r\n\tgetGroupEnrollments,\r\n\tgetGroupLessons,\r\n\tgetGroupParticipants,\r\n\tgetGroupEvaluations,\r\n\tgetGroupPresence,\r\n\tgetSubjects,\r\n} from \"../../store/actions\";\r\nimport { withRouter } from 'react-router-dom';\r\nimport Progress from '../../components/Progress'\r\nimport Page from '../Page';\r\n\r\nclass Group extends Component {\r\n\r\n\tcomponentWillMount() {\r\n\t\tconst props = this.props;\r\n\t\tif (props.subjects == null) {\r\n\t\t\tprops.getSubjects();\r\n\t\t}\r\n\t\tif (props.group == null && !props.notExists) {\r\n\t\t\tprops.getGroup(props.groupId);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.group == null) {\r\n\t\t\tif (this.props.display === \"page\" && this.props.notExists) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Page>\r\n\t\t\t\t\t\tDe opgevraagde groep bestaat niet\r\n\t\t\t\t\t</Page>\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\treturn this.props.notExists ? null : <Progress />;\r\n\t\t\t}\r\n\t\t}\r\n\t\tswitch (this.props.display) {\r\n\t\t\tcase \"page\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<GroupPage {...this.props} />\r\n\t\t\t\t);\r\n\t\t\tcase \"card\":\r\n\t\t\tdefault:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<GroupCard {...this.props} />\r\n\t\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n\tlet id = (ownProps.match.params.groupId || ownProps.groupId) + \"\";\r\n\tlet display = ownProps.display || \"page\";\r\n\r\n\tlet notExists = false;\r\n\tlet group = null;\r\n\r\n\tlet userIsMemberOfGroup = state.users[state.userId].participatingGroupIds.indexOf(id) !== -1;\r\n\tif (state.groups == null || state.groups[id] == null) {\r\n\t\tif (id == null || state.hasFetched.indexOf(\"Group.get(\" + id + \")\") !== -1) {\r\n\t\t\tnotExists = true;\r\n\t\t}\r\n\t} else {\r\n\t\tgroup = state.groups[id];\r\n\t}\r\n\treturn {\r\n\t\tgroup,\r\n\t\tnotExists,\r\n\t\tdisplay,\r\n\t\trole: state.role,\r\n\t\tgroupId: id,\r\n\t\tsubjects: state.subjects,\r\n\t\tuserIsMemberOfGroup,\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tsetGroup: (group) => dispatch(setGroup(group)),\r\n\t\tgetGroup: (groupId) => dispatch(getGroup(groupId)),\r\n\t\tgetGroupEnrollments: (groupId) => dispatch(getGroupEnrollments(groupId)),\r\n\t\tgetGroupLessons: (groupId) => dispatch(getGroupLessons(groupId)),\r\n\t\tgetGroupParticipants: (groupId) => dispatch(getGroupParticipants(groupId)),\r\n\t\tgetGroupEvaluations: (groupId) => dispatch(getGroupEvaluations(groupId)),\r\n\t\tgetGroupPresence: (groupId) => dispatch(getGroupPresence(groupId)),\r\n\t\tgetSubjects: () => dispatch(getSubjects()),\r\n\t};\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Group));\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport filter from 'lodash/filter';\r\nimport map from 'lodash/map';\r\n\r\nimport Page from './Page';\r\nimport Progress from '../components/Progress';\r\nimport Field from '../components/Field';\r\nimport Group from './group/Group';\r\nimport { getSubjects, getGroups, getEnrolLments } from '../store/actions';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport queryString from \"query-string\";\r\n\r\nclass CourseSelect extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tsortMethod: null,\r\n\t\t\tfilterMethod: \"period\" + props.currentPeriod,\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tlet values = queryString.parse(nextProps.location.search);\r\n\t\tif (values.sort) {\r\n\t\t\treturn {\r\n\t\t\t\t...prevState,\r\n\t\t\t\t...{\r\n\t\t\t\t\tsortMethod: values.sort,\r\n\t\t\t\t\tfilterMethod: values.filter ? values.filter : \"period\" + nextProps.currentPeriod,\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (nextProps.subjects != null) {\r\n\t\t\treturn {\r\n\t\t\t\t...prevState,\r\n\t\t\t\t...{\r\n\t\t\t\t\tfilterMethod: values.filter ? values.filter : \"period\" + nextProps.currentPeriod,\r\n\t\t\t\t\tsortMethod: nextProps.subjects[Object.keys(nextProps.subjects)[0]].name,\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\t...prevState,\r\n\t\t\t\tsortMethod: null,\r\n\t\t\t\tfilterMethod: \"none\",\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.getSubjects();\r\n\t\tthis.props.getGroups();\r\n\t}\r\n\r\n\tgetGroupsPerSubject(subject) {\r\n\t\treturn filter(this.props.groups, (group) => {\r\n\t\t\treturn subject === group.subjectName;\r\n\t\t})\r\n\t}\r\n\r\n\thandleSortChange = subject => {\r\n\t\tthis.props.history.push({\r\n\t\t\tsearch: \"sort=\" + subject + \"&filter=\" + this.state.filterMethod,\r\n\t\t});\r\n\t};\r\n\r\n\thandleFilterChange = event => {\r\n\t\tthis.props.history.push({\r\n\t\t\tsearch: \"sort=\" + this.state.sortMethod + \"&filter=\" + event.target.value,\r\n\t\t});\r\n\t};\r\n\r\n\tgetMenuItem(title, subject) {\r\n\t\tlet color = (this.state.sortMethod === subject) ? \"primary\" : \"default\";\r\n\t\treturn (\r\n\t\t\t<ListItem button onClick={() => this.handleSortChange(subject)} key={title}>\r\n\t\t\t\t<ListItemText>\r\n\t\t\t\t\t<Typography variant=\"title\" color={color} style={{ minWidth: \"150px\" }}>\r\n\t\t\t\t\t\t{title}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</ListItemText>\r\n\t\t\t</ListItem >\r\n\t\t)\r\n\t}\r\n\r\n\tgetMenuItems() {\r\n\t\tconst subjectsComponents = map(this.props.subjects, (subject) => {\r\n\t\t\treturn this.getMenuItem(subject.name, subject.name);\r\n\t\t});\r\n\t\tif (this.props.role === \"student\") {\r\n\t\t\tsubjectsComponents.unshift(this.getMenuItem(\"Ingeschreven\", \"enrolled\"));\r\n\t\t}\r\n\t\treturn subjectsComponents;\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet data;\r\n\t\tif (this.state.sortMethod === \"enrolled\") {\r\n\t\t\tif (this.props.enrolledGroupsIds == null) {\r\n\t\t\t\tdata = <Progress />;\r\n\t\t\t\tthis.props.getEnrolLments();\r\n\t\t\t} else {\r\n\t\t\t\tdata = this.props.enrolledGroupsIds.map((groupId) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Group\r\n\t\t\t\t\t\t\tkey={groupId}\r\n\t\t\t\t\t\t\tgroupId={groupId}\r\n\t\t\t\t\t\t\tdisplay=\"card\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t\tif (this.props.enrolledGroupsIds.length === 0) {\r\n\t\t\t\t\tdata = (\r\n\t\t\t\t\t\t<div style={{ margin: \"15px\" }} >\r\n\t\t\t\t\t\t\tJe hebt je nog niet ingeschreven.\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this.props.subjects == null || this.props.groups == null || this.props.enrolledGroups === []) {\r\n\t\t\t\tdata = <Progress />\r\n\t\t\t}\r\n\t\t\tdata = this.getGroupsPerSubject(this.state.sortMethod)\r\n\t\t\t\t.sort((a, b) => a.period - b.period)\r\n\t\t\t\t.filter((group) => {\r\n\t\t\t\t\tswitch (this.state.filterMethod) {\r\n\t\t\t\t\t\tcase \"period1\":\r\n\t\t\t\t\t\t\treturn group.period === 1;\r\n\t\t\t\t\t\tcase \"period2\":\r\n\t\t\t\t\t\t\treturn group.period === 2;\r\n\t\t\t\t\t\tcase \"period3\":\r\n\t\t\t\t\t\t\treturn group.period === 3;\r\n\t\t\t\t\t\tcase \"period4\":\r\n\t\t\t\t\t\t\treturn group.period === 4;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.map((group) => {\r\n\t\t\t\t\treturn <Group\r\n\t\t\t\t\t\tkey={group.id}\r\n\t\t\t\t\t\tgroupId={group.id}\r\n\t\t\t\t\t\tdisplay=\"card\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t});\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Page>\r\n\t\t\t\t<Paper\r\n\t\t\t\t\televation={2}\r\n\t\t\t\t\tstyle={{ position: \"relative\" }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Toolbar style={{ display: \"flex\" }}>\r\n\t\t\t\t\t\t<Typography variant=\"subheading\" color=\"textSecondary\" style={{ flex: \"2 1 auto\" }}>\r\n\t\t\t\t\t\t\tSchrijf je in voor modules\r\n          \t</Typography>\r\n\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\tlabel=\"filter\"\r\n\t\t\t\t\t\t\tvalue={this.state.filterMethod}\r\n\t\t\t\t\t\t\teditable\r\n\t\t\t\t\t\t\toptions={[\r\n\t\t\t\t\t\t\t\t{ label: \"Geen\", value: \"none\" },\r\n\t\t\t\t\t\t\t\t{ label: \"Blok 1\", value: \"period1\" },\r\n\t\t\t\t\t\t\t\t{ label: \"Blok 2\", value: \"period2\" },\r\n\t\t\t\t\t\t\t\t{ label: \"Blok 3\", value: \"period3\" },\r\n\t\t\t\t\t\t\t\t{ label: \"Blok 4\", value: \"period4\" }]}\r\n\t\t\t\t\t\t\tonChange={this.handleFilterChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</Paper>\r\n\t\t\t\t<div style={{ display: \"flex\" }} className=\"ColumnFlexDirectionOnMobile\">\r\n\t\t\t\t\t<Paper elevation={2}>\r\n\t\t\t\t\t\t<List component=\"nav\" style={{ flex: 1 }}>\r\n\t\t\t\t\t\t\t{this.getMenuItems()}\r\n\t\t\t\t\t\t</List>\r\n\t\t\t\t\t</Paper>\r\n\t\t\t\t\t<div style={{padding:\"12px\"}}>\r\n\t\t\t\t\t\t{data}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<br />\r\n\t\t\t\t<br />\r\n\t\t\t\t<br />\r\n\t\t\t</Page >\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\trole: state.role,\r\n\t\tcurrentPeriod: state.currentPeriod,\r\n\t\tenrollableGroups: state.enrollableGroups,\r\n\t\tgroups: state.groups,\r\n\t\tsubjects: state.subjects,\r\n\t\tenrolledGroupsIds: state.users[state.userId].enrollmentIds,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tgetSubjects: () => dispatch(getSubjects()),\r\n\t\tgetGroups: () => dispatch(getGroups()),\r\n\t\tgetEnrolLments: () => dispatch(getEnrolLments()),\r\n\t};\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CourseSelect);\r\n\r\n\r\n","import React, { Component } from \"react\";\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport {\r\n\tPaper, Typography, Table, TableHead, TableCell,\r\n\tTableBody, TableRow, Tooltip, TableSortLabel, Toolbar, Button\r\n} from \"@material-ui/core\";\r\nimport queryString from \"query-string\";\r\nimport Excel from \"exceljs/dist/es5/exceljs.browser\";\r\n\r\nimport Page from \"./Page\";\r\nimport Progress from '../components/Progress';\r\nimport Field from '../components/Field';\r\nimport EnsureSecureLogin from \"../components/EnsureSecureLogin\";\r\nimport $ from \"jquery\";\r\n\r\nconst splitValues = {\r\n\tusers: \"role\",\r\n\tevaluations: \"groupId\",\r\n\tenrollments: \"period\",\r\n}\r\n\r\nclass DataPage extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\ttables: null,\r\n\t\t\ttableSortColumns: {},\r\n\t\t\ttableSortDirections: {},\r\n\t\t};\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tlet values = queryString.parse(nextProps.location.search);\r\n\t\treturn {\r\n\t\t\t...prevState,\r\n\t\t\t...{\r\n\t\t\t\tdata: values.data ? values.data : \"evaluations\",\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount = () => {\r\n\t\tthis.fetchData(this.state.data)\r\n\t\t\t.then(tables => this.setState({ tables: this.splitTable(tables, splitValues[this.state.data]) }));\r\n\t}\r\n\r\n\thandleFilterChange = event => {\r\n\t\tthis.props.history.push({\r\n\t\t\tsearch: \"data=\" + event.target.value,\r\n\t\t});\r\n\t\tthis.fetchData(event.target.value)\r\n\t\t\t.then(tables => this.setState({ tables: this.splitTable(tables, splitValues[this.state.data]), tableSortColumns: Array(tables.length) }));\r\n\t}\r\n\r\n\tsort = (tableIndex) => {\r\n\t\tlet table = this.state.tables[tableIndex];\r\n\t\tconst column = this.state.tableSortColumns[tableIndex];\r\n\t\tconst order = this.state.tableSortDirections[tableIndex];\r\n\r\n\t\ttable = [table[0]].concat(table.slice(1, table.length).sort((a, b) => {\r\n\t\t\t//Only sort the slice 1-table.length because the header has to stick\r\n\t\t\ta = a[column];\r\n\t\t\tb = b[column];\r\n\t\t\tconst cmp = (b == null) - (a == null) || +(a > b) || -(a < b);\r\n\t\t\treturn order === \"asc\" ? cmp : -cmp;\r\n\t\t}));\r\n\r\n\t\tthis.setState(prevState => ({\r\n\t\t\ttables: [\r\n\t\t\t\t...prevState.tables.slice(0, tableIndex),\r\n\t\t\t\ttable,\r\n\t\t\t\t...prevState.tables.slice(tableIndex + 1),\r\n\t\t\t]\r\n\t\t}))\r\n\t}\r\n\r\n\thandleSortChange = (tableIndex, columnIndex) => {\r\n\t\tthis.setState(prevState => ({ //update the correct elements of the arrays of the state\r\n\t\t\ttableSortColumns: {\r\n\t\t\t\t...prevState.tableSortColumns,\r\n\t\t\t\t[tableIndex]: columnIndex,\r\n\t\t\t},\r\n\t\t\ttableSortDirections: {\r\n\t\t\t\t...prevState.tableSortDirections,\r\n\t\t\t\t[tableIndex]: prevState.tableSortDirections[tableIndex] === 'desc' && prevState.tableSortColumns[tableIndex] === columnIndex ? \"asc\" : \"desc\",// if this columns was selected and ordering desc, change to asc else desc\r\n\t\t\t}\r\n\t\t}), () => this.sort(tableIndex)); // when setting state is done start sorting\r\n\t}\r\n\r\n\tsplitTable = (table, splitValue) => {\r\n\t\tlet splitIndex = table[0].findIndex(x => x === splitValue);\r\n\t\tif (splitIndex < 0) {\r\n\t\t\treturn [table];\r\n\t\t}\r\n\t\tlet tables = [[table[0], table[1]]]; // initialize the tables with one table that has a header and a row\r\n\t\tfor (let i = 2; i < table.length; i++) {\r\n\t\t\tlet tableIndex = tables.findIndex(halfSplitTable => halfSplitTable[1][splitIndex] === table[i][splitIndex]); // see in what table this row has to go\r\n\t\t\tif (tableIndex < 0) {\r\n\t\t\t\ttables.push([table[0]]); // add a new table with a new header if a new value is found\r\n\t\t\t\ttableIndex = tables.length - 1;\r\n\t\t\t}\r\n\t\t\ttables[tableIndex].push(table[i]); // add row to correct table\r\n\t\t}\r\n\t\treturn tables;\r\n\t}\r\n\r\n\tfetchData = (table) => {\r\n\t\treturn $.ajax({\r\n\t\t\turl: \"api/function/data\",\r\n\t\t\ttype: \"post\",\r\n\t\t\tdata: {\r\n\t\t\t\ttable,\r\n\t\t\t\tsecureLogin: this.props.secureLogin,\r\n\t\t\t},\r\n\t\t\tdataType: \"json\",\r\n\t\t});\r\n\t}\r\n\r\n\tdownloadTables = () => {\r\n\t\tconst tables = this.state.tables;\r\n\t\tlet workbook = new Excel.Workbook();\r\n\t\tconst splitIndex = tables[0][0].findIndex(x => x === splitValues[this.state.data]);\r\n\t\tfor (let i = 0; i < tables.length; i++) { // add all the tables to a different sheet\r\n\t\t\tlet sheet = workbook.addWorksheet(tables[i][1][splitIndex]); // the sheet has the name of the value it's split on. I.e when splitting on courses every page is called what course it contains\r\n\t\t\tsheet.addRows(tables[i]);\r\n\t\t\tfor (let j = 1; j <= tables[i][0].length; j++) {\r\n\t\t\t\tsheet.getColumn(j).width = tables[i][0][j - 1].length < 10 ? 10 : tables[i][0][j - 1].length + 2;//set each column to at least fit the header\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst filenamePrefixes = { users: \"Gebruikers \", enrollments: \"Inschrijvingen \", evaluations: \"Beoordelingen \" };\r\n\t\tlet filename = filenamePrefixes[this.state.data] + (new Date()).toLocaleDateString() + \".xlsx\";\r\n\t\tthis.downloadWorkbook(workbook, filename);//gives for example: \"Gebruikers 3/3/2019.xlsx\"\r\n\t}\r\n\r\n\tdownloadWorkbook = (workbook, fileName) => { //magic\r\n\t\tworkbook.xlsx.writeBuffer({\r\n\t\t\tbase64: true\r\n\t\t})\r\n\t\t\t.then(function (xls64) {\r\n\t\t\t\tvar a = document.createElement(\"a\");\r\n\t\t\t\tvar data = new Blob([xls64], { type: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" });\r\n\t\t\t\tvar url = URL.createObjectURL(data);\r\n\t\t\t\ta.href = url;\r\n\t\t\t\ta.download = fileName;\r\n\t\t\t\tdocument.body.appendChild(a);\r\n\t\t\t\ta.click();\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\tdocument.body.removeChild(a);\r\n\t\t\t\t\twindow.URL.revokeObjectURL(url);\r\n\t\t\t\t}, 0);\r\n\t\t\t})\r\n\t\t\t.catch(function (error) {\r\n\t\t\t\tconsole.log(\"Something went wrong with downloading the excel file: \" + error.message);\r\n\t\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet content;\r\n\t\tif (this.state.tables == null) {\r\n\t\t\tcontent = <Progress />;\r\n\t\t} else {\r\n\t\t\tcontent = (this.state.tables).map((table, tableIndex) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Table key={tableIndex} style={tableIndex === 0 ? { marginTop: \"100px\" } : { marginTop: \"50px\" }}>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow key={0} style={{height: \"auto\"}}>\r\n\t\t\t\t\t\t\t\t{table[0].map((title, columnIndex) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<TableCell key={columnIndex} style={{\r\n\t\t\t\t\t\t\t\t\t\t\tcolor: \"black\",\r\n\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: \"#e0e0e0\",\r\n\t\t\t\t\t\t\t\t\t\t\tfontSize: 13,\r\n\t\t\t\t\t\t\t\t\t\t\ttop: 0\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip title=\"Sorteer\" enterDelay={300} placement=\"bottom-start\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableSortLabel active={this.state.tableSortColumns[tableIndex] === columnIndex}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdirection={this.state.tableSortDirections[tableIndex]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={event => this.handleSortChange(tableIndex, columnIndex)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ zIndex: 0 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{title}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableSortLabel>\r\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttable.filter((_, index) => { return (index > 0); }) //take everything but the header\r\n\t\t\t\t\t\t\t\t\t.map((row, rowIndex) => {\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow key={rowIndex + 1} style={{height: \"auto\"}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{row.map((cell, columnIndex) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell key={columnIndex} >{cell}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</ TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t)\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Page >\r\n\t\t\t\t<EnsureSecureLogin>\r\n\t\t\t\t\t<Paper elevation={2} style={{ position: \"absolute\", width: \"80%\", zIndex: 1 }}>\r\n\t\t\t\t\t\t<Toolbar style={{ display: \"flex\" }}>\r\n\t\t\t\t\t\t\t<Typography variant=\"subheading\" color=\"textSecondary\" style={{ flex: \"2 1 auto\" }}>\r\n\t\t\t\t\t\t\t\tGegevens\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={this.downloadTables} style={{ margin: \"0 10px\" }}>\r\n\t\t\t\t\t\t\t\tDownload\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\tlabel=\"Gegevens van\"\r\n\t\t\t\t\t\t\t\tvalue={this.state.data}\r\n\t\t\t\t\t\t\t\teditable\r\n\t\t\t\t\t\t\t\toptions={[\r\n\t\t\t\t\t\t\t\t\t{ label: \"Beoordelingen\", value: \"evaluations\" },\r\n\t\t\t\t\t\t\t\t\t{ label: \"Gebruikers\", value: \"users\" },\r\n\t\t\t\t\t\t\t\t\t{ label: \"Inschrijvingen\", value: \"enrollments\" }]}\r\n\t\t\t\t\t\t\t\tonChange={this.handleFilterChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t</Paper>\r\n\t\t\t\t\t{content}\r\n\t\t\t\t</EnsureSecureLogin>\r\n\t\t\t</Page>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tsecureLogin: state.secureLogin,\r\n\t}\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, null)(DataPage));","import React, { Component } from 'react';\r\nimport Page from './Page';\r\nimport Progress from '../components/Progress';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Field from '../components/Field';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport $ from \"jquery\";\r\nimport queryString from \"query-string\";\r\n\r\nclass Taxi extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tschedules: null,\r\n\t\t};\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tlet values = queryString.parse(nextProps.location.search);\r\n\t\treturn {\r\n\t\t\t...prevState,\r\n\t\t\t...{\r\n\t\t\t\tweek: values.week ? values.week : \"0\",\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\thandleFilterChange = event => {\r\n\t\tthis.props.history.push({\r\n\t\t\tsearch: \"week=\" + event.target.value,\r\n\t\t});\r\n\t\tthis.fetchSchedules(event.target.value);\r\n\t};\r\n\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.fetchSchedules(this.state.week);\r\n\t}\r\n\r\n\tfetchSchedules(week) {\r\n\t\treturn $.ajax({\r\n\t\t\turl: \"api/function/taxi\",\r\n\t\t\ttype: \"post\",\r\n\t\t\tdata: {\r\n\t\t\t\tweek,\r\n\t\t\t},\r\n\t\t\tdataType: \"json\",\r\n\t\t}).then(schedules => this.setState({\r\n\t\t\tschedules,\r\n\t\t}));\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet content;\r\n\t\tif (this.state.schedules == null) {\r\n\t\t\tcontent = <Progress />\r\n\t\t} else {\r\n\t\t\tcontent = this.state.schedules.map((s, i) =>\r\n\t\t\t\t<div\r\n\t\t\t\t\tstyle={{ width: \"80%\", margin: \"auto\" }}\r\n\t\t\t\t\tclassName=\"taxiScheduleHolder\"\r\n\t\t\t\t\tkey={i}\r\n\t\t\t\t\tdangerouslySetInnerHTML={{ __html: s }}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Page>\r\n\t\t\t\t<Paper\r\n\t\t\t\t\televation={2}\r\n\t\t\t\t\tstyle={{ position: \"relative\" }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Toolbar style={{ display: \"flex\" }}>\r\n\t\t\t\t\t\t<Typography variant=\"subheading\" color=\"textSecondary\" style={{ flex: \"2 1 auto\" }}>\r\n\t\t\t\t\t\t\tTaxischema\r\n          </Typography>\r\n\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\tlabel=\"week\"\r\n\t\t\t\t\t\t\tvalue={this.state.week}\r\n\t\t\t\t\t\t\teditable\r\n\t\t\t\t\t\t\toptions={[0, 1, 2, 3, 4, 5, 6, 7, 8].map(n => { return { label: n === 0 ? \"Basisrooster\" : \"Week \" + n, value: n + \"\" } })}\r\n\t\t\t\t\t\t\tonChange={this.handleFilterChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</Paper>\r\n\t\t\t\t{content}\r\n\t\t\t</Page>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Taxi;\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport { connect } from 'react-redux';\r\nimport { toggleMenu } from '../store/actions';\r\nimport { withRouter } from 'react-router-dom';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport List from '@material-ui/core/List';\r\n\r\n\r\nclass Header extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = { anchorEl: null };\r\n\t}\r\n\r\n\tlogoClick = () => {\r\n\t\tthis.props.history.push(\"/\");\r\n\t}\r\n\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<AppBar className=\"Header\">\r\n\t\t\t\t<Toolbar>\r\n\t\t\t\t\t<IconButton color=\"inherit\" aria-label=\"Menu\" onClick={this.props.toggleMenu} style={{position:\"absolute\"}} >\r\n\t\t\t\t\t\t<MenuIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<img src=\"/images/logo_qhighschool.svg\" alt=\"QHighschool Logo\" style={{height:\"60%\",margin:\"auto\",maxHeight:\"52px\", cursor:\"pointer\" }} onClick={this.logoClick} />\r\n\t\t\t\t\t<List color=\"inherit\" style={{ top:15,right: 20, position: \"absolute\"}} onClick={this.handleClick}>\r\n\t\t\t\t\t\t<PersonIcon style={{transform:\"scale(1.5)\",marginRight:\"10px\",float:\"left\"}}/>\r\n\t\t\t\t\t\t<span className=\"HiddenOnMobile\">\r\n\t\t\t\t\t\t\t{this.props.displayName}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</Toolbar>\r\n\t\t\t</AppBar>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tif (state.userId != null) {\r\n\t\treturn {\r\n\t\t\tdisplayName: state.users[state.userId].displayName,\r\n\t\t\tuserId: state.userId,\r\n\t\t};\r\n\t}\r\n\treturn {\r\n\t\tdisplayName: \"\",\r\n\t\tuserId: state.userId,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\ttoggleMenu: () => dispatch(toggleMenu()),\r\n\t};\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Header));\r\n\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport {IconButton, Snackbar, SnackbarContent} from '@material-ui/core/';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport theme from '../lib/MuiTheme'\r\nimport { removeNotification } from '../store/actions';\r\n\r\nclass NotificationBar extends Component {\r\n\r\n\r\n\tremoveNotification = (key) => {\r\n\t\tthis.props.removeNotification(this.props.notifications[key]);\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet notifications = this.props.notifications.map((not,key) => {\r\n\t\t\tlet color;\r\n\t\t\tswitch (not.priority) {\r\n\t\t\t\tcase \"high\":\r\n\t\t\t\t\tcolor = theme.palette.error.main;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"medium\":\r\n\t\t\t\t\tcolor = \"#ff8c00\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"light\":\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tcolor = theme.palette.primary.main;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<Snackbar\r\n\t\t\t\tkey={key}\r\n\t\t\t\tanchorOrigin={{\r\n\t\t\t\t  vertical: \"bottom\",\r\n\t\t\t\t  horizontal: \"right\"\r\n\t\t\t\t}}\r\n\t\t\t\topen={true}\r\n\t\t\t\tstyle = {{position:\"relative\"}}\r\n\t\t\t\tTransitionProps={{direction:\"left\"}}\r\n\t\t\t  >\r\n\t\t\t  <SnackbarContent\r\n\t\t\t  \tstyle={{background:color, marginBottom:\"4px\"}}\r\n\t\t\t\t\tmessage={<span id=\"message-id\">{not.message}</span>}\r\n\t\t\t\t\taction={[\r\n\t\t\t\t  <IconButton key=\"close\"\r\n\t\t\t\t\t\tonClick={() => {this.removeNotification(key)}} >\r\n\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t  </IconButton>\r\n\t\t\t\t]} />\r\n\t\t\t  </Snackbar>\t\t\r\n\t\t\t);\r\n\t\t});\r\n\t\treturn (\r\n\t\t\t<div style={{position:\"fixed\", bottom:0, right:0, width:\"auto\", zIndex:10}}>\r\n\t\t\t\t{notifications}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state,ownProps) {\r\n\tlet notifications = state.notifications.filter((not) => {\r\n\t\ttry {\r\n\t\t\treturn not.type === \"bar\" && new RegExp(not.scope).test(ownProps.location.pathname);\r\n\t\t} catch (err) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t});\r\n\treturn {\r\n\t\tnotifications: notifications,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tremoveNotification: (notification) => dispatch(removeNotification(notification)),\r\n\t};\r\n}\r\n\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(NotificationBar));","import React, { Component } from 'react';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport AssessmentIcon from '@material-ui/icons/Assessment';\r\nimport AssignmentIcon from '@material-ui/icons/Assignment';\r\nimport GroupIcon from '@material-ui/icons/Group';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport ExitIcon from '@material-ui/icons/ExitToApp';\r\nimport LocalTaxiIcon from '@material-ui/icons/LocalTaxi';\r\nimport BuildIcon from '@material-ui/icons/Build';\r\nimport ViewColumnIcon from '@material-ui/icons/ViewColumn';\r\nimport NotificationBadge from './NotificationBadge';\r\n\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport theme from '../lib/MuiTheme';\r\nimport $ from \"jquery\";\r\n\r\nclass Menu extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\t\tswitch (this.props.role) {\r\n\t\t\tcase \"student\":\r\n\t\t\t\tthis.state.pages = [\"aanbod\", \"portfolio\", \"profiel\", \"loguit\"];\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"teacher\":\r\n\t\t\t\tthis.state.pages = [\"groepen\", \"profiel\", \"loguit\"];\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"admin\":\r\n\t\t\t\tthis.state.pages = [\"groepen\", \"aanbod\", \"profiel\", \"gegevens\", \"taxi\", \"beheer\", \"loguit\"];\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"grade_admin\":\r\n\t\t\t\tthis.state.pages = [\"aanbod\", \"gegevens\", \"profiel\", \"loguit\"];\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthis.state.pages = [\"aanbod\", \"profiel\", \"loguit\"];\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tlogout() {\r\n\t\treturn $.ajax({\r\n\t\t\turl: \"/auth/logout\",\r\n\t\t\ttype: \"get\",\r\n\t\t\tdataType: \"json\",\r\n\t\t}).then(() => {\r\n\t\t\tdocument.location.reload();\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(page) {\r\n\t\tif (page === \"profiel\")\r\n\t\t\tthis.props.history.push(\"/gebruiker/\" + this.props.userId);\r\n\t\telse if (page === \"loguit\") {\r\n\t\t\tthis.logout();\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis.props.history.push(\"/\" + page);\r\n\t}\r\n\r\n\r\n\tgetIcon(iconName, color) {\r\n\t\tlet c = \"black\";\r\n\t\tif (theme.palette[color]) {\r\n\t\t\tc = theme.palette[color].main;\r\n\t\t}\r\n\t\tswitch (iconName) {\r\n\t\t\tcase \"Assignment\":\r\n\t\t\t\treturn <AssignmentIcon style={{ color: c }} />;\r\n\t\t\tcase \"Group\":\r\n\t\t\t\treturn <GroupIcon style={{ color: c }} />;\r\n\t\t\tcase \"Assessment\":\r\n\t\t\t\treturn <AssessmentIcon style={{ color: c }} />;\r\n\t\t\tcase \"Person\":\r\n\t\t\t\treturn <PersonIcon style={{ color: c }} />;\r\n\t\t\tcase \"ViewColumn\":\r\n\t\t\t\treturn <ViewColumnIcon style={{ color: c }} />;\r\n\t\t\tcase \"Exit\":\r\n\t\t\t\treturn <ExitIcon style={{ color: \"red\" }} />;\r\n\t\t\tcase \"Taxi\":\r\n\t\t\t\treturn <LocalTaxiIcon style={{ color: c }} />;\r\n\t\t\tcase \"Beheer\":\r\n\t\t\t\treturn <BuildIcon style={{ color: c }} />;\r\n\t\t\tdefault:\r\n\t\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\tgetItem(page, index) {\r\n\t\tconst isCurrentPage = (((\"/\" + page.id) === this.props.location.pathname));\r\n\t\tlet style = {};\r\n\t\tif (page.bottom) {\r\n\t\t\tstyle.position = \"absolute\";\r\n\t\t\tstyle.bottom = \"0px\";\r\n\t\t}\r\n\r\n\t\tconst color = isCurrentPage ? \"primary\" : \"inherit\";\r\n\t\tconst icon = (\r\n\t\t\t<ListItemIcon >\r\n\t\t\t\t<NotificationBadge scope={page.id}>\r\n\t\t\t\t\t{this.getIcon(page.icon, color)}\r\n\t\t\t\t</NotificationBadge>\r\n\t\t\t</ListItemIcon>\r\n\t\t);\r\n\t\treturn (\r\n\t\t\t<ListItem key={index} button onClick={() => this.onClick(page.id)} style={style}>\r\n\t\t\t\t{icon}\r\n\t\t\t\t<Typography variant=\"title\" color={color} className=\"HiddenOnMobile\">\r\n\t\t\t\t\t{page.title}\r\n\t\t\t\t</Typography>\r\n\t\t\t</ListItem>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst pages = [\r\n\t\t\t{\r\n\t\t\t\tid: \"aanbod\",\r\n\t\t\t\ttitle: \"Aanbod\",\r\n\t\t\t\ticon: \"Assignment\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: \"groepen\",\r\n\t\t\t\ttitle: \"Mijn groepen\",\r\n\t\t\t\ticon: \"Group\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: \"portfolio\",\r\n\t\t\t\ttitle: \"Portfolio\",\r\n\t\t\t\ticon: \"Assessment\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: \"gegevens\",\r\n\t\t\t\ttitle: \"Gegevens\",\r\n\t\t\t\ticon: \"ViewColumn\", // table_chart is more appropriate\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: \"taxi\",\r\n\t\t\t\ttitle: \"Taxi\",\r\n\t\t\t\ticon: \"Taxi\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: \"beheer\",\r\n\t\t\t\ttitle: \"Beheer\",\r\n\t\t\t\ticon: \"Beheer\",\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\tconst profile = [\r\n\t\t\t{\r\n\t\t\t\tid: \"profiel\",\r\n\t\t\t\ttitle: \"Profiel\",\r\n\t\t\t\ticon: \"Person\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: \"loguit\",\r\n\t\t\t\ttitle: \"Log uit\",\r\n\t\t\t\ticon: \"Exit\",\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\tconst visiblePages = pages\r\n\t\t\t.filter(page => this.state.pages.indexOf(page.id) !== -1)\r\n\t\t\t.map(this.getItem.bind(this));\r\n\r\n\t\tconst visibleProfile = profile\r\n\t\t\t.filter(page => this.state.pages.indexOf(page.id) !== -1)\r\n\t\t\t.map(this.getItem.bind(this));\r\n\r\n\t\treturn (\r\n\t\t\t<Paper elevation={8} className=\"Menu\">\r\n\t\t\t\t<List component=\"nav\" style={{ height: \"100%\" }}>\r\n\t\t\t\t\t{visiblePages}\r\n\t\t\t\t\t<div style={{ position: \"absolute\", bottom: \"20px\", width: \"100%\" }}>\r\n\t\t\t\t\t\t{visibleProfile}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</List>\r\n\t\t\t</Paper >\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\tif (state.userId != null) {\r\n\t\treturn {\r\n\t\t\tdisplayName: state.users[state.userId].displayName,\r\n\t\t\tuserId: state.userId,\r\n\t\t\trole: state.role\r\n\t\t};\r\n\r\n\t}\r\n\treturn {\r\n\t\tdisplayName: \"\",\r\n\t\tuserId: state.userId,\r\n\t\trole: state.role\r\n\t};\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, null)(Menu));\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport map from 'lodash/map';\r\nimport forEach from 'lodash/forEach';\r\n\r\nimport Page from './Page';\r\nimport Progress from '../components/Progress';\r\nimport Field from '../components/Field';\r\nimport Group from './group/Group';\r\nimport { getSubjects, getGroups, getEnrolLments, getParticipatingGroups } from '../store/actions';\r\n\r\nimport {Typography, Divider, Toolbar, Paper } from '@material-ui/core';\r\nimport queryString from \"query-string\";\r\n\r\nclass Portfolio extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tlet values = queryString.parse(nextProps.location.search);\r\n\t\tif (values.filter) {\r\n\t\t\treturn {\r\n\t\t\t\t...prevState,\r\n\t\t\t\tfilter: values.filter\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\t...prevState,\r\n\t\t\t\tfilter: nextProps.role === \"student\" ? \"all\": \"period\"+ nextProps.currentPeriod, \r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\thandleFilterChange = event => {\r\n\t\tthis.props.history.push({\r\n\t\t\tsearch: \"filter=\" + event.target.value,\r\n\t\t});\r\n\t};\r\n\r\n\torderGroups(groups, compareFunction) {\r\n\t\tlet orders = {};\r\n\t\tforEach(groups, group => {\r\n\t\t\tif (!orders[compareFunction(group)]) {\r\n\t\t\t\torders[compareFunction(group)] = [];\r\n\t\t\t}\r\n\t\t\torders[compareFunction(group)].push(group);\r\n\t\t});\r\n\t\treturn map(orders, this.getOrder);\r\n\t}\r\n\r\n\tgetOrder(groups, name) {\r\n\t\tgroups = map(groups, group =>\r\n\t\t\t<Group key={group.id}\r\n\t\t\t\tgroupId={group.id}\r\n\t\t\t\tdisplay=\"card\" />\r\n\t\t);\r\n\r\n\t\treturn <div key={name} style={{ padding: \"10px\" }}>\r\n\t\t\t<Field value={name} style={{ type: \"headline\", color: \"secondary\" }} layout={{ area: true }} />\r\n\t\t\t{groups}\r\n\t\t\t<Divider style={{ marginTop: \"20px\" }} />\r\n\t\t</div>\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet options = [ { label: \"Alle\", value: \"all\" }, {label: \"Blok 1\", value: \"period1\"},  {label: \"Blok 2\", value: \"period2\"}, {label: \"Blok 3\", value: \"period3\"}, {label: \"Blok 4\", value: \"period4\"}];\r\n\t\tif ( this.props.role === \"student\" ) {\r\n\t\t\toptions.splice(1,0,{ label: \"Ingeschreven\", value: \"enrolled\" });\r\n\t\t}\r\n\r\n\t\tif (!this.props.groups) {\r\n\t\t\tthis.props.getParticipatingGroups();\r\n\t\t}\r\n\t\tif (!this.props.enrollmentIds) {\r\n\t\t\tthis.props.getEnrolLments();\r\n\t\t}\r\n\t\tlet groupIds = this.props.enrollmentIds || [];\r\n\t\tif ( this.state.filter !== \"enrolled\") {\r\n\t\t\t/* If filter is not equal to enrolled, participating ids need to be added. \r\n\t\t\tFrom participating ids we first remove the ones that are already in enrolled ids. \r\n\t\t\tFinally, after adding participating ids, we filter on period */\r\n\t\t\tgroupIds = this.props.participatingGroupIds.filter(id => {\r\n\t\t\t\treturn (groupIds.indexOf(id) === -1);\r\n\t\t\t}).concat(groupIds).filter(\r\n\t\t\t\tid => {\r\n\t\t\t\t\tif ( !this.props.groups || !this.props.groups[id]) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tswitch (this.state.filter) {\r\n\t\t\t\t\t\tcase \"period1\":\r\n\t\t\t\t\t\t\treturn this.props.groups[id].period === 1;\r\n\t\t\t\t\t\tcase \"period2\":\r\n\t\t\t\t\t\t\treturn this.props.groups[id].period === 2;\r\n\t\t\t\t\t\tcase \"period3\":\r\n\t\t\t\t\t\t\treturn this.props.groups[id].period === 3;\r\n\t\t\t\t\t\tcase \"period4\":\r\n\t\t\t\t\t\t\treturn this.props.groups[id].period === 4;\r\n\t\t\t\t\t\tdefault: // case all \r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tlet content;\r\n\t\tif (!this.props.groups || groupIds.filter(id => this.props.groups[id] == null).length !== 0) {\r\n\t\t\tcontent = <Progress />;\r\n\t\t} else {\r\n\t\t\tcontent = this.orderGroups(groupIds.map(id => this.props.groups[id]), function (group) {\r\n\t\t\t\treturn group.subjectName;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn <Page>\r\n\t\t\t<Paper\r\n\t\t\t\televation={2}\r\n\t\t\t\tstyle={{ position: \"relative\" }}\r\n\t\t\t>\r\n\t\t\t\t<Toolbar style={{ display: \"flex\" }}>\r\n\t\t\t\t\t<Typography variant=\"subheading\" color=\"textSecondary\" style={{ flex: \"2 1 auto\" }}>\r\n\t\t\t\t\t\t\t{this.props.role === \"student\" ? \"Portfolio\" : \"Mijn groepen\"} \t\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tlabel=\"filter\"\r\n\t\t\t\t\t\tvalue={this.state.filter}\r\n\t\t\t\t\t\teditable\r\n\t\t\t\t\t\toptions={options}\r\n\t\t\t\t\t\tonChange={this.handleFilterChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Toolbar>\r\n\t\t\t</Paper>\r\n\t\t\t{content}\r\n\t\t</Page>;\r\n\t}\r\n\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tgroups: state.groups,\r\n\t\tparticipatingGroupIds: state.users[state.userId].participatingGroupIds,\r\n\t\tenrollmentIds: state.users[state.userId].enrollmentIds,\r\n\t\trole: state.role,\r\n\t\tcurrentPeriod: state.currentPeriod,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tgetSubjects: () => dispatch(getSubjects()),\r\n\t\tgetGroups: () => dispatch(getGroups()),\r\n\t\tgetEnrolLments: () => dispatch(getEnrolLments()),\r\n\t\tgetParticipatingGroups: () => dispatch(getParticipatingGroups()),\r\n\t};\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Portfolio);\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport MenuList from '@material-ui/core/MenuList';\r\nimport Popper from '@material-ui/core/Popper';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { connect } from 'react-redux';\r\nimport filter from \"lodash/filter\";\r\nimport { ClickAwayListener } from '@material-ui/core';\r\n\r\nimport Field from '../components/Field';\r\nimport { getAllUsers } from '../store/actions';\r\n\r\nclass Menu extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tinput: \"\",\r\n\t\t\tuserId: null,\r\n\t\t\topen: false,\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.getAllUsers();\r\n\t}\r\n\r\n\tselectUser = (userId, displayName) => {\r\n\t\tthis.setState({\r\n\t\t\tinput: displayName,\r\n\t\t\topen: false,\r\n\t\t\tuserId: userId,\r\n\t\t});\r\n\t\tthis.props.onChange(userId, displayName);\r\n\t}\r\n\r\n\tgetFittingUsers = () => {\r\n\t\tconst regExp = new RegExp(this.state.input.toLowerCase());\r\n\t\tlet count = 0;\r\n\t\treturn filter(this.props.users, (user) => {\r\n\t\t\tconst v = regExp.test(user.displayName.toLowerCase())\r\n\t\t\tif (v) {\r\n\t\t\t\tcount++;\r\n\t\t\t}\r\n\t\t\treturn v && count < 6;\r\n\t\t}).map(user => {\r\n\t\t\treturn (\r\n\t\t\t\t<MenuItem key={user.id + user.displayName} onClick={() => this.selectUser(user.id, user.displayName)}>\r\n\t\t\t\t\t{user.displayName}\r\n\t\t\t\t</MenuItem>\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\thandleInput = (event) => {\r\n\t\tif (this.state.userId) {\r\n\t\t\tthis.props.onChange(null, null);\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tinput: event.target.value,\r\n\t\t\topen: true,\r\n\t\t\tuserId: null,\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ClickAwayListener onClickAway={() => this.setState({ open: false })}>\r\n\t\t\t\t<span>\r\n\t\t\t\t\t<Field label=\"Gebruiker\" value={this.state.input} editable onChange={this.handleInput} style={{ margin: \"normal\" }} />\r\n\t\t\t\t\t<Popper open={this.state.aliasId == null && this.state.open} anchorEl={this.anchorEl} disablePortal >\r\n\t\t\t\t\t\t<Paper style={{position:\"relative\", zIndex:\"1\"}}>\r\n\t\t\t\t\t\t\t<MenuList>\r\n\t\t\t\t\t\t\t\t{this.getFittingUsers()}\r\n\t\t\t\t\t\t\t</MenuList>\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</Popper>\r\n\t\t\t\t</span>\r\n\t\t\t</ClickAwayListener>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tusers: state.users,\r\n\t}\r\n}\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tgetAllUsers: () => dispatch(getAllUsers()),\r\n\t};\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Menu);\r\n\r\n","import React, { Component } from 'react';\r\nimport EnsureSecureLogin from '../components/EnsureSecureLogin';\r\nimport Page from './Page';\r\nimport map from 'lodash/map';\r\nimport $ from \"jquery\";\r\n\r\nimport { connect } from 'react-redux';\r\nimport queryString from \"query-string\";\r\nimport SelectUser from '../components/SelectUser';\r\nimport { Divider, Toolbar, Button, Paper, Typography } from '@material-ui/core';\r\nimport Field from '../components/Field';\r\nimport { getSubjects, setAlias, addNotification, addSubject, addCourse, addGroup } from '../store/actions';\r\n\r\nconst initialValues = {\r\n\tsubject: {\r\n\t\tname: \"\",\r\n\t\tdescription: \"\",\r\n\t},\r\n\tcourse: {\r\n\t\tname: \"\",\r\n\t\tsubjectId: null,\r\n\t},\r\n\tgroup: {\r\n\t\tcourseId: null,\r\n\t\tteacherId: null,\r\n\t}\r\n}\r\n\r\nclass ControlPanel extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tcourses: [],\r\n\t\t\taliasId: null,\r\n\t\t\tsubject: initialValues.subject,\r\n\t\t\tcourse: initialValues.course,\r\n\t\t\tgroup: initialValues.group,\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tlet values = queryString.parse(nextProps.location.search);\r\n\t\treturn {\r\n\t\t\t...prevState,\r\n\t\t\t...{\r\n\t\t\t\taddType: values.addType ? values.addType : \"subject\",\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\t$.ajax({\r\n\t\t\turl: \"api/course/list\",\r\n\t\t\ttype: \"get\",\r\n\t\t\tdata: {},\r\n\t\t\tdataType: \"json\",\r\n\t\t}).then((courses) => {\r\n\t\t\tconsole.log(courses);\r\n\t\t\tthis.setState({\r\n\t\t\t\tcourses\r\n\t\t\t});\r\n\t\t});\r\n\t\tthis.props.getSubjects();\r\n\t}\r\n\r\n\tloginUsingAlias = () => {\r\n\t\tthis.props.dispatch(setAlias(this.state.aliasId));\r\n\t}\r\n\r\n\thandleAliasChange = (userId) => {\r\n\t\tthis.setState({\r\n\t\t\taliasId: userId,\r\n\t\t});\r\n\t}\r\n\r\n\tnotification = (typeObjectAdded, success) => {\r\n\t\tlet typeNames = { \"subject\": \"Vak\", \"course\": \"Module\", \"group\": \"Groep\" };\r\n\t\ttypeObjectAdded = typeNames[typeObjectAdded];\r\n\t\tif (success) {\r\n\t\t\tconsole.log(typeObjectAdded + \" added!\");\r\n\t\t} else {\r\n\t\t\tconsole.log(typeObjectAdded + \" not added :(\");\r\n\t\t}\r\n\t\t// if ( success ) {\r\n\t\t// \tthis.props.addNotification(\r\n\t\t// \t\t{\r\n\t\t// \t\t\tpriority:\"low\",\r\n\t\t// \t\t\ttype:\"bar\",\r\n\t\t// \t\t\tmessage:typeObjectAdded + \"succesvol toegevoegd!\",\r\n\t\t// \t\t\tscope: \"beheer\",\r\n\t\t// \t\t}\r\n\t\t// \t)\r\n\t\t// } else {\r\n\t\t// \tthis.props.addNotification(\r\n\t\t// \t\t{\r\n\t\t// \t\t\tpriority:\"medium\",\r\n\t\t// \t\t\ttype:\"bar\",\r\n\t\t// \t\t\tmessage:\"Er is iets misgegaan. \" + typeObjectAdded + \" is niet toegevoegd.\",\r\n\t\t// \t\t\tscope:\"beheer\",\r\n\t\t// \t\t}\r\n\t\t// \t)\r\n\t\t// }\r\n\t}\r\n\r\n\tadd(type) {\r\n\t\tconst typeValues = this.state[type];\r\n\t\tlet addFunction;\r\n\t\tswitch (type) {\r\n\t\t\tcase \"subject\": addFunction = async () => {\r\n\t\t\t\treturn this.props.addSubject(typeValues.name, typeValues.description).then(success => { return success.success })\r\n\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"course\": addFunction = async () => {\r\n\t\t\t\treturn this.props.addCourse(typeValues.name, typeValues.subjectId).then(success => { return success.success })\r\n\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: addFunction = async () => {\r\n\t\t\t\treturn this.props.addGroup(typeValues.courseId, typeValues.teacherId).then(success => { return success.success })\r\n\t\t\t}; // group\r\n\t\t}\r\n\t\taddFunction().then(success => {\r\n\t\t\tif (success) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\t[type]: initialValues[type],\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tthis.notification(type, success);\r\n\t\t})\r\n\t}\r\n\r\n\thandleChange = (event, type) => {\r\n\t\tthis.setState(prevState => ({\r\n\t\t\t[type]: {\r\n\t\t\t\t...prevState[type],\r\n\t\t\t\t[event.name]: event.target.value,\r\n\t\t\t}\r\n\t\t}))\r\n\t}\r\n\r\n\thandleTypeChange = event => {\r\n\t\tthis.props.history.push({\r\n\t\t\tsearch: \"addType=\" + event.target.value,\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst subject = this.state.subject;\r\n\t\tconst course = this.state.course;\r\n\t\tconst group = this.state.group;\r\n\t\tconst addType = this.state.addType;\r\n\t\tconst subjects = this.props.subjects || {};\r\n\t\tlet courses = this.state.courses;\r\n\t\tlet addView;\r\n\t\tswitch (addType) {\r\n\t\t\tcase \"subject\":\r\n\t\t\t\taddView = <div>\r\n\t\t\t\t\t<Field name=\"name\" label={\"Naam\"} value={subject.name} onChange={(event) => { this.handleChange(event, \"subject\") }} editable={true} validate={{ maxLength: 50 }} />\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<Field name=\"description\" label=\"Omschrijving\" value={subject.description} onChange={(event) => { this.handleChange(event, \"subject\") }} editable={true} validate={{ maxLength: 440 }} layout={{ area: true }} />\r\n\t\t\t\t</div>\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"course\":\r\n\t\t\t\taddView = <div >\r\n\t\t\t\t\t<Field name=\"name\" label={\"Naam\"} value={course.name} onChange={(event) => { this.handleChange(event, \"course\") }} editable={true} validate={{ maxLength: 50 }} style={{ flex: \"1\" }} />\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<Field value={course.subjectId} name=\"subjectId\" label=\"Vak\" onChange={(event) => { this.handleChange(event, \"course\") }} editable={true} options={map(subjects, (subject) => { return { value: subject.id, label: subject.name } })} style={{ minWidth: \"200px\" }} />\r\n\t\t\t\t</div>\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: //group\r\n\t\t\t\taddView = <div>\r\n\t\t\t\t\t<Field value={group.courseId} name=\"courseId\" label=\"Module\" onChange={(event) => { this.handleChange(event, \"group\") }} editable={true} options={courses.map((course) => { return { label: course.name, value: course.id } })} style={{ minWidth: \"200px\" }} />\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<SelectUser name=\"teacher\" value={group.teacherId} onChange={(userId) => { let event = { target: { value: userId }, name: \"teacherId\" }; this.handleChange(event, \"group\") }} />\r\n\t\t\t\t\t{/* for the SelectUsers's onChange we fake an 'event' because SelectUser is special */}\r\n\t\t\t\t</div>\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Page>\r\n\t\t\t\t<EnsureSecureLogin>\r\n\t\t\t\t\t<Paper\r\n\t\t\t\t\t\televation={2}\r\n\t\t\t\t\t\tstyle={{ position: \"relative\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Toolbar style={{ display: \"flex\" }}>\r\n\t\t\t\t\t\t\t<Typography variant=\"subheading\" color=\"textSecondary\" style={{ flex: \"2 1 auto\" }}>\r\n\t\t\t\t\t\t\t\tBeheer\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t</Paper>\r\n\t\t\t\t\t<div style={{ margin: \"10px 0\" }}>\r\n\t\t\t\t\t\t<SelectUser onChange={this.handleAliasChange} />\r\n\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" disabled={this.state.aliasId == null} onClick={this.loginUsingAlias}>Login in met alias</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Divider />\r\n\t\t\t\t\t<div >\r\n\t\t\t\t\t\t<Typography variant=\"title\" color=\"primary\" style={{ margin: \"18px 12px\", float: \"left\" }}>\r\n\t\t\t\t\t\t\tNieuw(e):\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Field value={addType} name=\"addType\" editable={true} onChange={this.handleTypeChange} options={[{ value: \"course\", label: \"Module\" }, { value: \"subject\", label: \"Vak\" }, { value: \"group\", label: \"Groep\" }]} style={{ minWidth: \"200px\", maxWidth: \"400px\", type: \"title\" }} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{addView}\r\n\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" style={{ height: \"37px\", margin: \"12px\" }} onClick={() => { this.add(addType) }}> Voeg toe\t</Button>\r\n\t\t\t\t</EnsureSecureLogin>\r\n\t\t\t</Page>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tsubjects: state.subjects,\r\n\t\tgroups: state.groups,\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\taddSubject: async (name, description) => dispatch(addSubject(name, description)),\r\n\t\taddCourse: async (name, subjectId) => dispatch(addCourse(name, subjectId)),\r\n\t\taddGroup: async (courseId, userId) => dispatch(addGroup(courseId, userId)),\r\n\t\taddNotification: (notification) => dispatch(addNotification(notification)),\r\n\t\tgetSubjects: () => dispatch(getSubjects()),\r\n\t\tdispatch: dispatch,\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ControlPanel);","import React, { Component } from \"react\";\r\nimport {\r\n\tRoute,\r\n\tSwitch,\r\n\tRedirect,\r\n\twithRouter,\r\n} from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { getSelf, addNotification } from './store/actions';\r\n\r\nimport Login from \"./pages/Login\";\r\nimport CourseSelect from \"./pages/CourseSelect\";\r\nimport Group from \"./pages/group/Group\";\r\nimport User from \"./pages/user/User\";\r\nimport DataPage from \"./pages/DataPage\";\r\nimport Taxi from \"./pages/Taxi\";\r\n\r\nimport Header from \"./components/Header\";\r\nimport NotificationBar from \"./components/NotificationBar\";\r\nimport Menu from \"./components/Menu\";\r\nimport Portfolio from \"./pages/Portfolio\";\r\nimport ControlPanel from \"./pages/ControlPanel\";\r\n\r\n\r\nclass App extends Component {\r\n\r\n\tcomponentWillMount() {\r\n\t\tthis.props.getSelf();\r\n\t}\r\n\r\n\thandleShowMenu() {\r\n\t\tlet showMenu = this.state.showMenu;\r\n\t\tthis.setState({\r\n\t\t\tshowMenu: !showMenu,\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (!this.props.userId && this.props.location.pathname !== \"/login\") {\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"App\">\r\n\t\t\t\t\t<Header />\r\n\t\t\t\t\t<NotificationBar />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t\tlet startPage = \"/groepen\";\r\n\t\tif ( this.props.role === \"student\" ) {\r\n\t\t\tstartPage =  \"/aanbod\";\r\n\t\t} else if ( this.props.role === \"grade_admin\" ){\r\n\t\t\tstartPage = \"/gegevens\";\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<NotificationBar />\r\n\t\t\t\t{this.props.showMenu && <Menu />}\r\n\t\t\t\t<Header />\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route path=\"/login\" component={Login} />\r\n\t\t\t\t\t<Route path=\"/aanbod\" component={CourseSelect} />\r\n\t\t\t\t\t<Route path=\"/groep/:groupId\" component={Group} />\r\n\t\t\t\t\t<Route path=\"/gebruiker/:userId\" component={User} />\r\n\t\t\t\t\t<Route path=\"/profiel/\" component={User} />\r\n\t\t\t\t\t<Route path=\"/portfolio/\" component={Portfolio} />\r\n\t\t\t\t\t<Route path=\"/groepen/\" component={Portfolio} />\r\n\t\t\t\t\t<Route path=\"/gegevens/\" component={DataPage} />\r\n\t\t\t\t\t<Route path=\"/taxi/\" component={Taxi} />\r\n\t\t\t\t\t<Route path=\"/beheer/\" component={ControlPanel} />\r\n\t\t\t\t\t<Redirect push to={this.props.role === \"student\" ? \"/aanbod\" : \"/groepen\"} />\r\n\t\t\t\t\t<Redirect push to={startPage} />\r\n\t\t\t\t</Switch>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tshowMenu: state.showMenu,\r\n\t\trole: state.role,\r\n\t\tuserId: state.userId,\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tgetSelf: () => dispatch(getSelf()),\r\n\t\taddNotification: (notification) => dispatch(addNotification(notification)),\r\n\t};\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(App));\r\n","import React, { Component } from \"react\";\r\n\r\nimport { MuiThemeProvider } from '@material-ui/core/styles';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\n\r\nimport theme from './MuiTheme';\r\nimport App from '../App';\r\n\r\nclass GlobalProvider extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Provider store={this.props.store}>\r\n\t\t\t\t<MuiThemeProvider theme={theme}>\r\n\t\t\t\t\t<BrowserRouter>\r\n\t\t\t\t\t\t<App />\r\n\t\t\t\t\t</BrowserRouter>\r\n\t\t\t\t</MuiThemeProvider>\r\n\t\t\t</Provider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default GlobalProvider;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { createStore, applyMiddleware, compose as reduxCompose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport reducer from './store/mainReducer';\r\nimport GlobalProvider from './lib/GlobalProvider';\r\nimport \"./layout.css\";\r\nrequire('typeface-roboto');\r\n\r\nconst compose = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || reduxCompose;\r\nconst store = createStore(\r\n  reducer,\r\n  compose(\r\n    applyMiddleware(thunk),\r\n  ),\r\n);\r\n\r\nReactDOM.render(\r\n\t<GlobalProvider store={store} />,\r\n\tdocument.getElementById('root'));\r\n"],"sourceRoot":""}