<!DOCTYPE html>
<%  const COURSES_PER_PAGE = 8;  
    let pages =  Math.ceil(groups.length / COURSES_PER_PAGE);%>

<head>
    <title>Portfolio</title>
    <!-- For printing every page needs be top:i*100%, and on the webpage it needs to be top:i*297mm-->
    <style>
        @font-face {
            font-family: 'Roboto Light';
            src: url('./Roboto-Light.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: 'Roboto Bold';
            src: url('./Roboto-Bold.ttf') format('truetype');
            font-weight: bold;
            font-style: normal;
        }

        @font-face {
            font-family: 'Roboto Regular';
            src: url('./Roboto-Regular.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: 'RopaSans Regular';
            src: url('./RopaSans-Regular.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        body {
            font-family: "Roboto Light";
            font-variant-ligatures: none;
            color: white;
        }

        .page {
            width: 210mm;
            height: 297mm;
            margin: 0;
        }

        #right-bottom-logo {
            position: absolute;
            right: 8%;
            bottom: 6%;
            width: 24%;
            color: white;
        }

        #top-logo {
            position: absolute;
            left: 9%;
            width: 8%;
            height: auto;
        }

        #background {
            top: 0;
            height: 100%;
            z-index: -1;
        }

        #signature {
            position: absolute;
            right: 17%;
            bottom: 21.5%;
            height: 5%;
            width: 17%;
        }

        #signature p {
            margin: 0;
        }

        #middle-text {
            text-align: center;
        }

        .center-horizontal {
            position: absolute;
            left: 0;
            right: 0;
            margin-left: auto;
            margin-right: auto;
        }

        #title {
            position: absolute;
            top: 6.5%;
            margin: 0;
            font-family: "RopaSans Regular";
            font-size: 36pt;
            letter-spacing: 12pt;
            text-align: center;
            text-indent: 12pt;
        }

        #name-text {
            font-family: "Roboto Bold";
            font-size: 22pt;
            margin: 0 0 3.5% 0;
        }

        #middle-text {
            position: absolute;
            top: 18%;
            text-align: center;
        }

        .bold-text {
            font-family: "Roboto Bold";
        }

        .sub-text {
            font-size: 12pt;
            margin: 0;
        }

        table {
            position: absolute;
            width: 70%;
            top: 33%;
            text-align: left;
            font-size: 12pt;
        }

        th {
            font-family: "Roboto Bold";
            padding-bottom: 1.5%;
        }

        td {
            padding: 1.5% 0;
        }

        td+td {
            color: #ff7900 !important;
            font-family: "Roboto Bold";
        }

        .table-cell-padding-small {
            padding: 0;
        }

        @media print and (-webkit-min-device-pixel-ratio:0) {

            html,
            body {
                margin: 0;
                -webkit-print-color-adjust: exact;
                color: #fff !important;
            }
        }

        <% for (let i=0;
        i <=pages;

        i++) {
            %>#page<%=i%> {
                top: <%=i * 297%>mm;
            }

            <%
        }

        %>@media print {
            <% for (let i=0;
            i <=pages;

            i++) {
                %>#page<%=i%> {
                    top: <%=i * 100%>%;
                }

                <%
            }

            %>
        }
    </style>
</head>

<body>
    <%for ( let i = 0; i < pages ; i ++ ) {%>
    <div class="page center-horizontal" id="page<%=i%>">
        <img src="/images/logo_qhighschool_white.svg" id="right-bottom-logo">
        <img src="/images/top_orange_q.svg" id="top-logo">

        <p id="title" class="center-horizontal"> CERTIFICAAT </p>
        <img src="/images/background_portfolio.png" id="background" class="center-horizontal">
        <div id="middle-text" class="center-horizontal">
            <p class="sub-text"> Hierbij verklaart Quadraam dat </p>
            <p id="name-text"> <%= user.firstName + " " + user.lastName %> </p>
            <p class="sub-text"> de volgende Q-Highschool modules heeft afgerond </p>
        </div>

        <table class="center-horizontal">
            <tr>
                <th>Naam module</th>
                <th>Beoordeling</th>
            </tr>
            <% for ( let j = 0; j < groups.length - ( i * COURSES_PER_PAGE) && j < COURSES_PER_PAGE ; j++ ) { 
                let group = groups[(i*COURSES_PER_PAGE) + j];%>
            <tr>
                <td class="<%= group.courseName.length < 50 ? "" : "table-cell-padding-small" %>"><%= group.courseName%>
                </td>
                <% switch (group.evaluation.type) {
                            case "stepwise":
                                switch (group.evaluation.assesment) {
                                    case "G":%>
                <td>Goed</td>
                <%break;
                                    case "V":%>
                <td>Voldoende</td>
                <%break;
                                    case "O":
                                    default: %>
                <td>Onvoldoende</td>
                <%}; 
                            break;
                            case "check": %>
                <td><%=group.evaluation.assesment === "passed"? "Gehaald": "Niet gehaald"%></td>
                <% break;
                            case "decimal":
                            default: %>
                <td><%=group.evaluation.assesment%></td>
                <%}%>
                </tr>
            <%}%>
        </table>

        <div id="signature">
            <p class="sub-text bold-text" id="signature-text">mevr. E. Lohuis</p>
            <p class="sub-text" id="signature-text">examensecretaris Q-highschool</p>
        </div>

    </div>
    <% } %>
    <%if (pages%2===1) {%>
    <div class="page center-horizontal" id="page<%=pages%>">
        <!-- <img src="/images/logo_qhighschool_white.svg" id="right-bottom-logo">
        <img src="/images/top_orange_q.svg" id="top-logo">

        <p id="title" class="center-horizontal"> CERTIFICAAT </p>
        <img src="/images/background_portfolio.png" id="background" class="center-horizontal"> -->
    </div>
    <%}%>
</body>